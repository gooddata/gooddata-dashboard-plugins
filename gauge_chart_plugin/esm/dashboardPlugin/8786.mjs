(self.webpackChunkgauge_chart_plugin=self.webpackChunkgauge_chart_plugin||[]).push([[8786],{30998:function(t,e,s){var r=s(41848),o=s(67206),a=s(40554),i=Math.max;t.exports=function(t,e,s){var n=null==t?0:t.length;if(!n)return-1;var l=null==s?0:a(s);return l<0&&(l=i(n+l,0)),r(t,o(e,3),l)}},28181:function(t,e,s){s.d(e,{X:function(){return H}});var r=s(73609),o=s(47591);const a={black:"#000000",red:"#ff0000",green:"#00aa00",blue:"#0000ff",white:"#ffffff",cyan:"#0092d2",magenta:"#cb006b",yellow:"#fff10d",none:void 0},i="#,##0.00";class n{constructor(t=!0,e=!0,s,r,o,a,i){this.includeColors=!0,this.legacyCompatibility=!0,this.includeColors=t,this.legacyCompatibility=e,this.thousandsSeparator=s,this.decimalSeparator=r,this.nanString=o,this.positiveInfinity=a,this.negativeInfinity=i}}n.DefaultOptions=new n;class l{constructor(t){if(t.customColor&&(this.color=t.customColor.startsWith("#")?t.customColor:"#"+t.customColor),t.color){const e=a[t.color]?a[t.color]:void 0;this.color=e}t.customBgColor&&(this.backgroundColor=t.customBgColor.startsWith("#")?t.customBgColor:"#"+t.customBgColor)}}class c{constructor(t,e,s){this.color=t,this.customColor=e,this.customBgColor=s}reset(){this.color=void 0,this.customColor=void 0,this.customBgColor=void 0}}class h{constructor(t,e,s=!1){this.colors=t||new c,this.effectiveFormat=e,this.nullConditionFormatter=s}reset(){this.colors.reset(),this.effectiveFormat=void 0,this.nullConditionFormatter=!1}}class u extends Error{constructor(t){super(t),this.name="InvalidArgumentError",Object.setPrototypeOf(this,new.target.prototype)}}class m{constructor(t,e,s,r=e){this.str=t,this.pos=r,this.begin=e,this.end=s}hasNext(){return this.pos<this.end}hasPrevious(){return this.pos>this.begin}next(){if(this.hasNext()){const t=this.str.charAt(this.pos);return this.pos++,t}return""}previous(){return this.hasPrevious()?(this.pos--,this.str.charAt(this.pos)):""}getIndex(){return this.pos}}function d(t,e,s,r){const o=new c,a=r.match(t);a&&(o.color=a[1].toLowerCase());const i=r.match(e);i&&(o.customColor=i[1].toLowerCase());const n=r.match(s);return n&&(o.customBgColor=n[1].toLowerCase()),o}class g{constructor(t){this.thousandsSeparator=t.thousandsSeparator||g.DefaultThousandSeparator,this.decimalSeparator=t.decimalSeparator||g.DefaultDecimalSeparator,this.nanString=t.nanString||g.DefaultNaNString,this.positiveInfinity=t.positiveInfinity||g.DefaultPositiveInfinity,this.negativeInfinity=t.negativeInfinity||g.DefaultNegativeInfinity}}g.DefaultThousandSeparator=",",g.DefaultDecimalSeparator=".",g.DefaultNaNString="NaN",g.DefaultPositiveInfinity="Infinity",g.DefaultNegativeInfinity="-Infinity";class f{constructor(t,e,s=!1){this.options=t,this.constants=e,this.formatAbsoluteValue=s}toNestedFormatCtx(){return new f(this.options,this.constants,!0)}}class p{constructor(t,e=!1){this.options=t,this.nestedFormatter=e}toNestedFormatCtx(){return new p(this.options,!0)}}class C{format(t,e,s){s&&s.reset();const r=new g(e),o=new f(e,r);return this.doFormat(o,t,s)}resolve(t,e){const s=new p(e);return this.doResolve(s,t)}}class v extends C{constructor(t,e,s){super(),this.literal=t,this.literalNoColors=e,this.colors=s}doFormat(t,e,s){return s&&(s.colors=this.colors,s.effectiveFormat=""),t.options.includeColors?(s&&(s.effectiveFormat=this.literal),this.literal):(s&&(s.effectiveFormat=this.literalNoColors),this.literalNoColors)}doResolve(t,e){return t.options.includeColors?this.literal:this.literalNoColors}static compile(t,e){let s="",r=!1;const o=t.getColorMatcher(),a=t.getCustomColorMatcher(),i=t.getCustomBgColorMatcher();for(const t of e)"\\"===t?r=!0:(r=!1,s+=t);r&&(s+="\\");const n=function(t,e){const s=t.getColorMatcher(),r=t.getAnyCustomColorMatcher();return e.replace(new RegExp(s,"gi"),"").replace(new RegExp(r,"gi"),"")}(t,s),l=d(o,a,i,s);return new v(s,n,l)}}class P{constructor(){this.nullConditionPattern=P.createRegexPattern(P.NullConditionRegex,"i"),this.conditionPattern=P.createRegexPattern(P.ConditionRegex,"i"),this.arithmeticPattern=P.createRegexPattern(P.ArithmeticRegex,"i"),this.colorPattern=P.createRegexPattern(P.ColorRegex,"i"),this.customColorPattern=P.createRegexPattern(P.CustomColorRegex,"i"),this.customBgColorPattern=P.createRegexPattern(P.CustomBackgroundColorRegex,"i"),this.anyCustomColorPattern=P.createRegexPattern(P.AnyCustomColorRegex,"i"),this.excelFormatSuffixPattern=P.createRegexPattern(P.ExcelFormatSuffixRegex)}static createRegexPattern(t,e){return e?new RegExp(t.source,e):t}getNullConditionMatcher(){return this.nullConditionPattern}getConditionMatcher(){return this.conditionPattern}getArithmeticMatcher(){return new RegExp(this.arithmeticPattern,"g")}getColorMatcher(){return this.colorPattern}getCustomColorMatcher(){return this.customColorPattern}getCustomBgColorMatcher(){return this.customBgColorPattern}getAnyCustomColorMatcher(){return this.anyCustomColorPattern}getExcelFormatSuffixMatcher(){return this.excelFormatSuffixPattern}static group(t,e){if(t&&e>=0&&e<t.length){const s=t[e];if(void 0===s)return{value:s,startIndex:-1,endIndex:-1};const r=t.index+t[0].indexOf(s);return{value:s,startIndex:r,endIndex:r+s.length}}throw new Error(`Group ${e} not found in the regex match.`)}}P.NullConditionRegex=/\[=null\]/i,P.ConditionRegex=/\[(>=|<=|[=><])(-?[0-9.]+|null)\]/i,P.ArithmeticRegex=/\{\{\{([0-9]*(?:\.[0-9]*)?)\|([0-9]*)(\.)?\|(.*?)\}\}\}/,P.ColorRegex=/\[(black|blue|cyan|green|magenta|red|white|yellow|none)\]/i,P.CustomColorRegex=/\[color=#*([A-F0-9]+)\]/i,P.CustomBackgroundColorRegex=/\[backgroundColor=#*([A-F0-9]+)\]/i,P.AnyCustomColorRegex=/(\[(?:backgroundColor|color)=#*[A-Fa-f0-9]+\])+/,P.ExcelFormatSuffixRegex=/\[excel\]([\s\S])*$/i;class x extends C{constructor(t,e,s,r){super(),this.divisor=s,this.modulo=r,this.trimFraction=e,this.formatter=t}doFormat(t,e,s){let r=e||0;return void 0!==this.divisor&&(r/=this.divisor),void 0!==this.modulo&&(r%=this.modulo),this.trimFraction&&(Number.isNaN(r)||!Number.isFinite(r)?r=0:r<0?(r=-1*Math.floor(-1*r),Object.is(r,-0)&&(r=0)):r=Math.floor(r)),this.formatter.doFormat(t,r,s)}doResolve(t,e){return null}}class F extends C{static doubleTostring(t){return Number.parseFloat(t)}constructor(t,e){super(),this.baseFormat=t,this.expressions=e}doFormat(t,e,s){const r=t.toNestedFormatCtx(),o=this.baseFormat.doFormat(r,e,s||void 0);let a="";const i=new m(o,0,o.length);for(;i.hasNext();){const t=i.next(),o=t.charCodeAt(0);if(o>=F.ExpressionPlaceholderStart&&o<=F.ExpressionPlaceholderEnd){const i=o-F.ExpressionPlaceholderStart;if(i>=this.expressions.length)a+=t;else{const t=new h;a+=this.expressions[i].doFormat(r,e,void 0!==s?t:void 0),void 0!==s&&(s.colors.color||(s.colors.color=t.colors.color),s.colors.customColor||(s.colors.customColor=t.colors.customColor),s.colors.customBgColor||(s.colors.customBgColor=t.colors.customBgColor))}}else a+=t}return void 0!==s&&(s.effectiveFormat=void 0),a}static compile(t,e,s){const r=t.getArithmeticMatcher();let a="";const i=[];let n,l=0;for(;null!==(n=r.exec(s));){const t=n.index,o=r.lastIndex;a+=s.substring(l,t),l=o;const h=F.ExpressionPlaceholderStart+i.length;if(h>F.ExpressionPlaceholderEnd)throw new u("Too many arithmetic expressions. You can specify at most 256 expressions.");const m=b(P.group(n,1).value,F.doubleTostring),d=b(P.group(n,2).value,F.doubleTostring),g=!(c=P.group(n,3).value)||0===c.length,f=P.group(n,4).value;a+=String.fromCodePoint(h),i.push(new x(e.compileFormatter(f),g,m,d))}var c;return a+=s.substring(l),(0,o.kG)(0!==i.length,"No arithmetic expressions found in the format string."),new F(e.compileFormatter(a),i)}doResolve(t,e){return null}}function b(t,e){if(!t.length)return;const s=e(t);return Number.isNaN(s)?void 0:s}F.ExpressionPlaceholderStart=57344,F.ExpressionPlaceholderEnd=57599;class w{constructor(t,e,s){this.op=t,this.rhs=e,this.formatter=s,(0,o.kG)(null!==e||"Equal"===t)}isNullAlternative(){return null===this.rhs}evaluate(t,e){if(null===t){if(null===this.rhs)return!0;if(!e)return!1;switch(this.op){case"Equal":default:return!1;case"WeakEqual":return 0===this.rhs;case"LessThan":return this.rhs>0;case"LessThanOrEqual":return this.rhs>=0;case"GreaterThan":return this.rhs<0;case"GreaterThanOrEqual":return this.rhs<=0}}switch(this.op){case"Equal":case"WeakEqual":return null!==this.rhs&&t===this.rhs;case"GreaterThan":return null!==this.rhs&&t>this.rhs;case"GreaterThanOrEqual":return null!==this.rhs&&t>=this.rhs;case"LessThan":return null!==this.rhs&&t<this.rhs;case"LessThanOrEqual":return null!==this.rhs&&t<=this.rhs;default:return!1}}doFormat(t,e,s){return this.formatter.doFormat(t,e,s)}doResolve(t,e){return this.formatter.doResolve(t,e)}}class y extends C{constructor(t,e){super(),this.alternatives=t,this.catchall=e}static doubleToString(t){return parseFloat(t)}static compile(t,e,s){const r=t.getConditionMatcher();let o=i;const a=[],n=[];let l=0;for(const i of s){let s;if(r.lastIndex=0,null!==(s=r.exec(i))){const r=P.group(s,0),o=r.startIndex,l=r.endIndex,c=N(P.group(s,1).value),h=S(P.group(s,2).value,y.doubleToString);if(null===h.maybeValue&&"Equal"!==c)continue;let u;0===o?u=i.substring(l):(u=i.substring(0,o),u+=i.substring(l)),"Equal"===c?null!==h.maybeValue?0===h.maybeValue&&h.inputHadDecimals?a.push(new w("WeakEqual",h.maybeValue,e.compileFormatter(u))):a.push(new w(c,h.maybeValue,e.compileFormatter(u))):a.push(new w(c,h.maybeValue,v.compile(t,u))):n.push(new w(c,h.maybeValue,e.compileFormatter(u)))}else{switch(l){case 0:o=i,n.push(new w("GreaterThanOrEqual",0,e.compileFormatter(i)));break;case 1:n.push(new w("LessThan",0,e.compileFormatter(i)));break;case 2:a.push(new w("Equal",0,e.compileFormatter(i)));break;default:throw new u("Too many semicolons in the format string.")}l++}}return new y(a.concat(n),e.compileFormatter(o))}doFormat(t,e,s){const r=t.toNestedFormatCtx();for(const t of this.alternatives)if(t.evaluate(e,r.options.legacyCompatibility))return void 0!==s&&t.isNullAlternative()&&(s.nullConditionFormatter=!0),t.doFormat(r,e,s);return this.catchall.doFormat(r,e,s)}doResolve(t,e){let s=null;const r=t.toNestedFormatCtx();let o=!1,a=!1;for(const i of this.alternatives)if(i.evaluate(e,t.options.legacyCompatibility)){o=!0,a=i.isNullAlternative(),s=i.doResolve(r,e);break}return o||(s=this.catchall.doResolve(r,e)),null===s?"":a||t.nestedFormatter?s:`${s};${s}`}}function N(t){if("="===t)return"Equal";if(">"===t)return"GreaterThan";if(">="===t)return"GreaterThanOrEqual";if("<"===t)return"LessThan";if("<="===t)return"LessThanOrEqual";throw new u("Unsupported operator.")}function S(t,e){const s=e(t),r={maybeValue:null,inputHadDecimals:t.indexOf(".")>-1};return Number.isNaN(s)||(r.maybeValue=s),r}class E{constructor(t,e=!1){this.c=t,this.escaped=e}toString(){return this.c}isEscaped(){return this.escaped}isPlacement(){return!this.escaped&&("0"===this.c||"#"===this.c||"?"===this.c)}isZeroPlacement(){return!this.escaped&&"0"===this.c}isHashPlacement(){return!this.escaped&&"#"===this.c}isQPlacement(){return!this.escaped&&"?"===this.c}isDigit(){return this.c>="1"&&this.c<="9"}isComma(){return!this.escaped&&","===this.c}isDecimal(){return!this.escaped&&"."===this.c}isPercent(){return!this.escaped&&"%"===this.c}getColorPlaceholderIndex(){const t=this.c.codePointAt(0),e=E.ColorPlaceholderStart.codePointAt(0),s=E.ColorPlaceholderEnd.codePointAt(0);return void 0!==t&&void 0!==e&&void 0!==s&&t>=e&&t<=s?t-e:-1}}E.ColorPlaceholderStart="",E.ColorPlaceholderEnd="";class D{constructor(){this.vec=[]}append(t){this.vec.push(t)}insert(t,e){this.vec.splice(t,0,e)}getVec(){return this.vec.slice()}length(){return this.vec.length}}class R{constructor(t,e,s){this.formatString=t,this.digits=e,this.placements=s}getDigits(){return this.digits}getPlacements(){return this.placements}}class I extends R{format(t,e,s){const r="-"===t.charAt(0),o=new m(t,r?1:0,t.length,t.length),a=this.formatString.getVec().reverse();let i="",n=this.getPlacements(),l=this.getDigits(),c=0;const h=e.length>0,u="-"!==e.charAt(0)?e:"0";for(;a.length>0&&(o.hasPrevious()||l)&&n;){const t=a.shift();if(void 0===t)break;const e=t.getColorPlaceholderIndex();if(e>=0){if(null==s||s.length<e)continue;i+=s[e]}else if(t.isPlacement()){if(h&&3===c)i+=u,c=0;else{let t;t=o.hasPrevious()?o.previous():"0",i+=t,c++,l&&l--}n--}else i+=t}for(;o.hasPrevious()||l;)h&&3===c?(i+=u,c=0):o.hasPrevious()?(i+=o.previous(),c++,l&&l--):(i+="0",c++,l--);for(r&&(i+="-");a.length>0;){const t=a.shift();if(void 0===t)break;const e=t.getColorPlaceholderIndex();if(e>=0){if(null==s||s.length<e)continue;i+=s[e]}else t.isHashPlacement()||(t.isQPlacement()?i+=" ":i+=t)}return i.split("").reverse().join("")}}I.NoThousandsSeparators="";class V{constructor(){this.placedDigits=0,this.placedLiteralDigits=0,this.placedEscapedCharacters=0}}class M extends R{format(t,e,s=null){if(!this.digits)return"";const r=this.formatString.getVec().slice(),a=new m(t,0,t.length);let i=this.digits,n=0,l=0,c=0,h="",u="";for(;i;){const t=r.shift();(0,o.kG)(t.isPlacement());const e=a.hasNext()?a.next():"0";(0,o.kG)(!isNaN(Number(e)),"Fraction part should only include digits"),t.isHashPlacement()&&"0"===e?u+=e:(h+=u,n+=u.length,u="",h+=e,n++),i--}for(this.placements>this.digits&&(h+=u,n+=u.length,u="");r.length>0;){const t=r.shift(),e=t.getColorPlaceholderIndex();if(e>=0){if(null===s||s.length<=e)continue;h+=s[e]}else t.isHashPlacement()||(t.isQPlacement()?h+=" ":(c+=t.isEscaped()?1:0,l+=t.isDigit()?1:0,h+=t.toString()))}return e.placedDigits=n,e.placedLiteralDigits=l,e.placedEscapedCharacters=c,h}}class A{constructor(){this.state="Null"}onCharacter(t){switch(this.state){case"Matched":break;case"Null":t.isPlacement()&&(this.state="HasPlacementChar");break;case"HasPlacementChar":t.isPlacement()?this.state="HasPlacementChar":t.isComma()?this.state="HasComma":this.state="Null";break;case"HasComma":t.isPlacement()?this.state="Matched":this.state="Null"}}isMatched(){return"Matched"===this.state}}class T{constructor(t=!1){this.counter=0,this.state=t?"ExpectingAnyPlacement":"WaitingForZero"}onCharacter(t){switch(this.state){case"Done":break;case"ExpectingAnyPlacement":t.isPlacement()?(this.state="CountingDigits",this.counter++):this.state="Done";break;case"WaitingForZero":t.isZeroPlacement()&&(this.state="CountingDigits",this.counter++);break;case"CountingDigits":t.isPlacement()?this.counter++:this.state="Done"}}count(){return this.counter}}class k{constructor(t=!1){this.scalingValue=0;const e=t?"Null":"CommasExpected";this.initialState=e,this.state=e}onCharacter(t){switch(this.state){case"Null":t.isPlacement()&&(this.state="CommasExpected");break;case"CommasExpected":t.isComma()?(this.state="CollectScaling",this.scalingValue++):t.isPlacement()||(this.state=this.initialState,this.scalingValue=0);break;case"CollectScaling":t.isComma()?this.scalingValue++:t.isPlacement()?(this.scalingValue--,this.state=this.scalingValue?"Done":"CommasExpected"):this.state="Done"}}scaling(){return this.scalingValue}}class B{constructor(){this.visualPart="",this.bareFormatWithPlaceholders="",this.colorPlaceholderValues=[],this.colors=new c}}class q{constructor(t){this.thousandsSeparator=t.thousandsSeparator||q.DefaultThousandSeparator,this.decimalSeparator=t.decimalSeparator||q.DefaultDecimalSeparator,this.nanString=t.nanString||q.DefaultNaNString,this.positiveInfinity=t.positiveInfinity||q.DefaultPositiveInfinity,this.negativeInfinity=t.negativeInfinity||q.DefaultNegativeInfinity}}q.DefaultThousandSeparator=",",q.DefaultDecimalSeparator=".",q.DefaultNaNString="NaN",q.DefaultPositiveInfinity="Infinity",q.DefaultNegativeInfinity="-Infinity";class L extends C{constructor(t,e,s,r,o,a,i,n,l,c,h,u){super(),this.effectivelyEmpty=t,this.escapedFormat=e,this.visualPart=s,this.escapedFormatNoVisuals=r,this.wholePart=o,this.fractionPart=a,this.colorPlaceholderValues=i,this.colors=n,this.percent=l,this.scaling=c,this.thousandsSeparators=h,this.hasDecimal=u}static doubleToString(t,e){const s=Object.is(t,-0),r=t.toFixed(e);return s?"-"+r:r}static leftPad(t,e,s){return String(t).padStart(e,s)}static roundInternal(t,e){if(e>0){const s=Math.min(e+10,20),r=new RegExp("(-?\\d*)\\.(\\d{"+e+"})(\\d)\\d*$"),o=t.toFixed(s).match(r);if(null==o?void 0:o.length){const t="-"===o[1].charAt(0)?-1:1,s=L.leftPad(Math.round(o[2]+"."+o[3]),e,"0");return s.length>e?Number(o[1])+t:Number(o[1]+"."+s)}}return t}static round(t,e){if(0===e){const e=t<0?-1:1;return Math.round(t*e)*e}return L.roundInternal(t,e)}static numberHasValue(t){return null!=t}prepareValueToFormat(t){let e=t;this.percent&&(e*=100);for(let t=0;t<this.scaling;t++)e/=1e3;const s=Math.min(20,this.fractionPart.getDigits());e=L.round(e,s);const r=L.doubleToString(e,s);let a="",i="";if(""===r)return{valueToFormat:e,wholePart:a,fractionPart:i};if(this.fractionPart.getDigits()){const t=r.indexOf(".");(0,o.kG)(-1!==t,"Decimal separator not found in the numberString."),a=r.substring(0,t),i=r.substring(t+1)}else a=r,i="";return 0===this.wholePart.getDigits()?"0"===a?a="":"-0"===a&&(a=this.hasDecimal?"-":""):this.hasDecimal||"-0"!==a||(a="0"),{valueToFormat:e,wholePart:a,fractionPart:i}}isLiteral(){return this.wholePart.getPlacements()+this.fractionPart.getPlacements()===0}doFormat(t,e,s){let r="";if(null===e);else if(!this.effectivelyEmpty&&this.isLiteral())r=t.options.includeColors?this.escapedFormat:this.escapedFormatNoVisuals;else{let s=e;t.formatAbsoluteValue&&L.numberHasValue(e)&&(s=Math.abs(e));const o=this.prepareValueToFormat(s),a=this.thousandsSeparators?t.constants.thousandsSeparator:I.NoThousandsSeparators,i=t.options.includeColors?this.colorPlaceholderValues:void 0,n=this.wholePart.format(o.wholePart,a,i),l=new V,c=this.fractionPart.format(o.fractionPart,l,i);t.options.includeColors&&(r+=this.visualPart),r+=n,c.length&&((l.placedDigits>0||t.options.legacyCompatibility&&l.placedEscapedCharacters||t.options.legacyCompatibility&&l.placedLiteralDigits)&&(r+=t.constants.decimalSeparator),r+=c)}if(void 0!==s){s.colors.color=this.colors.color,s.colors.customColor=this.colors.customColor,s.colors.customBgColor=this.colors.customBgColor;const r=this.doResolve(new p(t.options,t.formatAbsoluteValue),e);s.effectiveFormat=null!==r?r:void 0}return r}doResolve(t,e){return null!==e||t.nestedFormatter?t.options.includeColors?this.escapedFormat:this.escapedFormatNoVisuals:""}static compile(t,e){const s=function(t,e){const s=t.getColorMatcher(),r=t.getCustomColorMatcher(),o=t.getCustomBgColorMatcher(),a=t.getAnyCustomColorMatcher(),i=new B;let n=e;if(i.colors=d(s,r,o,e),a.lastIndex=0,a.test(n)){const t=n.match(a);if(t){const e=n.search(a),s=e+t[0].length;i.visualPart=t[0],i.visualPart=i.visualPart.replace(/#/g,""),n=n.substring(0,e)+n.substring(s)}}i.bareFormatWithPlaceholders=n;const l=[s,r,o];for(const t of l)for(;t.lastIndex=0,t.test(i.bareFormatWithPlaceholders);){const e=E.ColorPlaceholderStart.codePointAt(0),s=E.ColorPlaceholderEnd.codePointAt(0);if(void 0===e||void 0===s)throw new Error("Unexpected format characters.");const r=e+i.colorPlaceholderValues.length;if(r>s)throw new Error("Too many visual tags. You can specify at most 256 tags.");const o=i.bareFormatWithPlaceholders.match(t);if(o){const e=i.bareFormatWithPlaceholders.search(t),s=e+o[0].length;let a=o[0];a=a.replace(/#/g,""),i.colorPlaceholderValues.push(a),i.bareFormatWithPlaceholders=i.bareFormatWithPlaceholders.substring(0,e)+String.fromCodePoint(r)+i.bareFormatWithPlaceholders.substring(s)}}return i}(t,e);let r="",o="",a=!1,i=!1,n=0;const l=[new D,new D],c=[0,0],h=[new T,new T(!0)],u=[0,0],m=[new A,new A],g=[new k,new k(!0)],f=[[],[]];let p=!1;for(let t=0;t<s.bareFormatWithPlaceholders.length;t++){const e=s.bareFormatWithPlaceholders[t];if(!p&&"\\"===e){p=!0;continue}if("\r"===e||"\n"===e)continue;const d=new E(e,p),C=d.getColorPlaceholderIndex();p=!1,C>=0?(r+=s.colorPlaceholderValues[C],0===n&&(s.colorPlaceholderValues[C]=s.colorPlaceholderValues[C].split("").reverse().join(""))):(r+=e,o+=e),d.isDecimal()?(0===n&&n++,i=!0):(d.isPercent()&&(a=!0),d.isComma()?f[n].push(l[n].length()):(l[n].append(d),c[n]++),m[n].onCharacter(d),g[n].onCharacter(d),d.isPlacement()&&u[n]++,d.isComma()&&(1!==n||c[1])||h[n].onCharacter(d))}p&&(l[n].append(new E("\\")),r+="\\",o+="\\");const C=s.visualPart+r,v=m[0].isMatched()||m[1].isMatched(),P=g[0].scaling()+g[1].scaling();for(let t=0;t<2;t++)if(!v&&0===g[t].scaling())for(let e=f[t].length-1;e>=0;--e)l[t].insert(f[t][e],new E(","));const x=new I(l[0],h[0].count(),u[0]),F=new M(l[1],h[1].count(),u[1]);return new L(0===r.length,C,s.visualPart,o,x,F,s.colorPlaceholderValues,s.colors,a,P,v,i)}}class W{constructor(t){this.matchers=t}splitAlternatives(t){let e="",s=!1;const r=[],o=new m(t,0,t.length);for(;o.hasNext();){const t=o.next();"\\"!==t?";"!==t||s?(e+=t,s=!1):(r.push(e),e=""):(s=!0,e+=t)}return r.push(e),r}truncatedStringLiteral(t){const e=t.search("\0");return e>=0?t.substring(0,e):t}compileFormatter(t){let e,s=this.truncatedStringLiteral(t);s=s.replace(new RegExp(this.matchers.getExcelFormatSuffixMatcher(),"gi"),"");try{if(this.matchers.getArithmeticMatcher().test(s))e=F.compile(this.matchers,this,s);else{const t=this.splitAlternatives(s);e=1!==t.length||this.matchers.getConditionMatcher().test(s)?y.compile(this.matchers,this,t):L.compile(this.matchers,s)}}catch(t){if(!(t=>t instanceof u)(t))throw console.error(t),t;e=L.compile(this.matchers,i)}return new O(e)}}class O extends C{constructor(t){super(),this.decorated=t}doFormat(t,e,s){return null===e?this.decorated.doFormat(t,e,s):Number.isNaN(e)?t.constants.nanString:Number.isFinite(e)?this.decorated.doFormat(t,e,s):e<0?t.constants.negativeInfinity:t.constants.positiveInfinity}doResolve(t,e){return Number.isNaN(e)?"":this.decorated.doResolve(t,e)}}class G{constructor(){this.matchers=new P,this.factory=new W(this.matchers)}compileFormatter(t){return this.factory.compileFormatter(t)}}class H{static convertValue(t){return null===t?null:void 0===t?NaN:"number"==typeof t?t:parseFloat(t)}static formatValue(t,e=i,s){const r=new G,o=new n;o.decimalSeparator=null==s?void 0:s.decimal,o.thousandsSeparator=null==s?void 0:s.thousand,o.includeColors=!1;const a=new h;try{let s=H.cache.get(e);s||(s=r.compileFormatter(e),H.cache.set(e,s));const i=s.format(t,o,a);return{colors:new l(a.colors),formattedValue:i,nullConditionFormatter:a.nullConditionFormatter,effectiveFormat:a.effectiveFormat,resolvedFormat:s.resolve(t,o)}}catch(s){a.reset();let n=H.cache.get(i);n||(n=r.compileFormatter(e),H.cache.set(i,n));const c=n.format(t,o,a);return{colors:new l(a.colors),formattedValue:c,nullConditionFormatter:a.nullConditionFormatter,effectiveFormat:a.effectiveFormat,resolvedFormat:n.resolve(t,o)}}}}H.cache=new r.z({max:200})}}]);