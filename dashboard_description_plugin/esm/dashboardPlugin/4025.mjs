(self.webpackChunkdashboard_description_plugin=self.webpackChunkdashboard_description_plugin||[]).push([[4025],{74936:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Plugin=void 0;const s=i(97582),a=i(38865),r=s.__importDefault(i(15876)),n=s.__importDefault(i(33866)),o=i(67933),d=i(28300),l=i(54575);class u extends a.DashboardPluginV1{constructor(){super(...arguments),this.author=n.default.author,this.displayName=n.default.displayName,this.version=n.default.version,this.minEngineVersion=n.default.minEngineVersion,this.maxEngineVersion=n.default.maxEngineVersion,this.descriptions={},this.allDescriptionIds=[],this.visibleDescriptionIds=[],this.messages=d.defaultMessages}async onPluginLoaded(e,t){let i;try{i=r.default.parse(t),(0,l.validateParameters)(i)}catch(e){return console.error("### Parsing parameters failed",e.message),void console.error("### Parameters",t)}const{texts:s,url:a,messages:n}=i,o=await fetch(a,{cache:"no-cache"});this.descriptions=await o.json(),this.allDescriptionIds=Object.keys(this.descriptions),this.customTextPositions=s,this.visibleDescriptionIds=(0,l.getVisibleDescriptionIds)(s,this.allDescriptionIds),(0,l.validateDescriptions)(this.allDescriptionIds,this.descriptions),this.messages=(0,l.isMessagesConfig)(n)?Object.assign(Object.assign({},this.messages),n):this.messages}register(e,t){t.customWidgets().addCustomWidget(d.DESCRIPTION_WIDGET_TYPE,o.KdDescription),this.visibleDescriptionIds.forEach((e=>{var i,s,r,n,o;const{sectionIndex:u,sectionTitle:c,description:p,metrics:g,dateDataSet:f,grid:m={},wrap:b=d.descriptionDefaults.wrap,textAlign:h,attributes:v}=this.descriptions[e],_=null!==(r=null!==(s=null===(i=this.customTextPositions)||void 0===i?void 0:i[e])&&void 0!==s?s:u)&&void 0!==r?r:d.descriptionDefaults.sectionIndex,D={metrics:g,dateDataSet:(0,l.getDateDataSet)(f),wrap:b,textAlign:h,messages:this.messages},E={gridWidth:null!==(n=m.width)&&void 0!==n?n:d.descriptionDefaults.grid.width,gridHeight:null!==(o=m.height)&&void 0!==o?o:d.descriptionDefaults.grid.height};t.layout().customizeFluidLayout(((t,i)=>{const s=Array.isArray(p)?p.map(((t,i)=>(0,a.newDashboardItem)((0,a.newCustomWidget)(`${e}${i}`,d.DESCRIPTION_WIDGET_TYPE,Object.assign(Object.assign({},D),{description:t,attributes:Array.isArray(v)?v[i]:v})),{xl:E}))):[(0,a.newDashboardItem)((0,a.newCustomWidget)(e,d.DESCRIPTION_WIDGET_TYPE,Object.assign(Object.assign({},D),{description:p,attributes:Array.isArray(v)?v[0]:v})),{xl:E})];i.addSection(_,(0,a.newDashboardSection)(c,...s))}))}))}}t.Plugin=u},24531:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InlineAttribute=void 0;const s=i(97582),a=s.__importStar(i(59882)),r=i(54575),n=i(58939);t.InlineAttribute=e=>{var{status:t,value:i="",error:o,messages:d}=e,l=e.config,{link:u,email:c}=l,p=s.__rest(l,["link","email"]);const g=(0,a.useMemo)((()=>c?a.default.createElement("a",{href:`mailto:${i}`},i):u?a.default.createElement("a",{href:i,target:"_blank",rel:"noreferrer"},i):i),[c,u,i]),f=(0,a.useMemo)((()=>(o instanceof r.TooManyDataPointsError&&(o.message=d.tooManyDataPoints),o)),[o,d.tooManyDataPoints]);return a.default.createElement(n.InlineValue,{status:t,error:f,value:g,messages:d,config:p})}},54217:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InlineMeasure=void 0;const s=i(97582).__importDefault(i(59882)),a=i(38865),r=i(53244),n=i(97611),o=i(58939);t.InlineMeasure=({metricRef:e,config:t,widget:i,messages:d})=>{var l,u;const c=(0,r.newMeasure)(e),{error:p,result:g,status:f}=(0,a.useCustomWidgetExecutionDataView)({widget:i,execution:{seriesBy:[c]}}),m=null==g?void 0:g.data().series().firstForMeasure(c).dataPoints()[0],b=null!==(u=null===(l=null==g?void 0:g.meta().measureDescriptor(c.measure.localIdentifier))||void 0===l?void 0:l.measureHeaderItem.format)&&void 0!==u?u:"",h=n.ClientFormatterFacade.convertValue(null==m?void 0:m.rawValue),{colors:v,formattedValue:_}=n.ClientFormatterFacade.formatValue(h,b);return s.default.createElement(o.InlineValue,{value:_,config:t,messages:d,status:f,error:p,style:v})}},58939:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValue=void 0;const s=i(97582),a=s.__importDefault(i(59882)),r=i(2525),n=s.__importDefault(i(94184)),o=i(28300),d=i(66488),l=i(70085);t.InlineValue=({value:e,status:t,error:i,config:{wrapper:s,noDataPlaceholder:u},messages:{noData:c},style:p})=>{if("loading"===t||"pending"===t)return a.default.createElement(d.Loading,null);if(i?(0,r.isNoDataSdkError)(i):"success"===t&&!e)return a.default.createElement("span",{className:(0,n.default)(c&&"help"),title:c},null!=u?u:o.DEFAULT_NO_DATA_PLACEHOLDER);if(i)return a.default.createElement("span",{className:(0,n.default)("error","help"),title:i.message},o.ERROR_PLACEHOLDER);if((0,l.isValidWrapper)(s)){const[t,i]=s;return a.default.createElement("span",{style:p},`${t}${e}${i}`)}return a.default.createElement("span",{style:p},e)}},67933:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KdDescription=void 0;const s=i(97582),a=s.__importStar(i(59882)),r=s.__importDefault(i(94184)),n=s.__importDefault(i(66128)),o=s.__importDefault(i(21971)),d=i(53244);i(66391);const l=i(69981),u=i(6125),c=i(54217),p=i(24531),g=i(70085);t.KdDescription=e=>{const t=e.widget,{description:i,metrics:f,wrap:m,attributes:b,messages:h,textAlign:v}=t,{attributesInsightId:_,attributesSlice:D,attributeConfigs:E,attributesStatus:y,attributesError:P}=(0,u.useAttributes)({widget:t,attributes:b}),k=(0,a.useMemo)((()=>({code(e){var i,r,{node:o,inline:u}=e,m=s.__rest(e,["node","inline"]);if(!u||1!==o.children.length||"text"!==o.children[0].type||!o.children[0].value.startsWith(l.PlaceholderPrefix.Metric)&&!o.children[0].value.startsWith(l.PlaceholderPrefix.Attribute))return a.default.createElement("code",Object.assign({},m));if(o.children[0].value.startsWith(l.PlaceholderPrefix.Attribute)){const e=o.children[0].value.replace(l.PlaceholderPrefix.Attribute,""),t=null!==(i=null==E?void 0:E[e])&&void 0!==i?i:{},{messages:r}=t,u=s.__rest(t,["messages"]);try{(0,n.default)((0,d.isObjRef)(u),`Invalid format of the live attribute in text. Attribute: "${o.children[0].value}" from insight "${null==_?void 0:_.identifier}". Check if plugin parameters and configuration json are set correctly.`)}catch(e){return console.error(e),a.default.createElement("code",Object.assign({},m))}const c=(0,g.getAttributeValue)(u,D);if(void 0===c){const t=(0,d.isIdentifierRef)(u)?u.identifier:u.uri;console.warn(`Value for attribute placeholder "${e}" ("${t}") not found in insight "${null==_?void 0:_.identifier}".`)}const f=(0,g.mergeMessages)(h,r);return a.default.createElement(p.InlineAttribute,{value:c,status:y,error:P,messages:f,config:u})}let b;const v=o.children[0].value.replace(l.PlaceholderPrefix.Metric,""),k=null!==(r=null==f?void 0:f[v])&&void 0!==r?r:{},{messages:I}=k,O=s.__rest(k,["messages"]);try{b=(0,g.getMetricRefFromConfig)(O),(0,n.default)((0,d.isObjRef)(b),`Invalid format of the live metric in text: ${o.children[0].value}`)}catch(e){return console.error(e),a.default.createElement("code",Object.assign({},m))}const w=(0,g.mergeMessages)(h,I);return a.default.createElement(c.InlineMeasure,{metricRef:b,widget:t,config:O,messages:w})}})),[t,h,D,y,P,E,null==_?void 0:_.identifier,f]),I=(0,a.useMemo)((()=>({textAlign:v})),[v]);return a.default.createElement("div",{className:(0,r.default)("description-wrapper",{wrap:m}),style:I},a.default.createElement(o.default,{linkTarget:"_blank",components:k},i))}},66488:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Loading=void 0;const s=i(97582),a=i(2525),r=s.__importDefault(i(59882));t.Loading=()=>r.default.createElement(a.LoadingComponent,{inline:!0,height:4})},70085:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMessages=t.isValidWrapper=t.getAttributeValue=t.getMetricRefFromConfig=void 0;const s=i(53244);t.getMetricRefFromConfig=e=>(0,s.isIdentifierRef)(e)?(0,s.idRef)(e.identifier,e.type||"measure"):(0,s.uriRef)(e.uri),t.getAttributeValue=(e,t)=>{if(!t)return"";const i=t.descriptor.descriptors.map((({attributeHeader:e})=>e)).findIndex((({identifier:t,uri:i})=>(0,s.isIdentifierRef)(e)?t===e.identifier:i===e.uri)),a=t.sliceTitles()[i];return null===a?"":a},t.isValidWrapper=e=>2===(null==e?void 0:e.length),t.mergeMessages=(e,t)=>t?Object.assign(Object.assign({},e),t):e},28300:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.localParams=t.defaultMessages=t.ERROR_PLACEHOLDER=t.DEFAULT_NO_DATA_PLACEHOLDER=t.descriptionDefaults=t.DESCRIPTION_WIDGET_TYPE=void 0;const s=i(97582).__importDefault(i(15876));t.DESCRIPTION_WIDGET_TYPE="kdDescription",t.descriptionDefaults={sectionIndex:0,grid:{width:12,height:1},wrap:!1},t.DEFAULT_NO_DATA_PLACEHOLDER="N/A",t.ERROR_PLACEHOLDER="??",t.defaultMessages={noData:"No Data",tooManyDataPoints:"Too many data points, filter down to a single element."},t.localParams=s.default.stringify({url:"./texts.json",texts:{liveMetrics:0,imageAndLink:2,loremIpsum:3}})},6125:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useAttributes=void 0;const s=i(59882),a=i(53244),r=i(38865),n=i(2525),o=i(54575);t.useAttributes=({attributes:e,widget:t})=>{const{attributesInsightId:i,attributeConfigs:d}=(0,s.useMemo)((()=>{if(!e)return{};const[t]=Object.keys(e),[i]=Object.values(e);return{attributesInsightId:(0,a.idRef)(t),attributeConfigs:i}}),[e]),{result:l}=(0,r.useWidgetFilters)(t),{result:u,status:c,error:p}=(0,n.useInsightDataView)({insight:i,filters:l},[i,l]),[g,f]=(0,s.useState)(null),[m,b]=(0,s.useState)(null);return(0,s.useEffect)((()=>{if(p)b(p);else if(u){const e=u.data().slices().toArray();1===e.length?(f(e[0]),b(null)):e.length>1&&b(new o.TooManyDataPointsError)}}),[p,u]),{attributesInsightId:i,attributesSlice:g,attributesError:m,attributesStatus:c,attributeConfigs:d}}},8378:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(74936);t.default=()=>new s.Plugin},69981:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PlaceholderPrefix=void 0,(i=t.PlaceholderPrefix||(t.PlaceholderPrefix={})).Attribute="attribute:",i.Metric="metric:"},54575:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TooManyDataPointsError=t.getDateDataSet=t.isMessagesConfig=t.validateDescriptions=t.getVisibleDescriptionIds=t.validateParameters=void 0;const s=i(97582).__importDefault(i(66128)),a=i(53244);t.validateParameters=function(e){(0,s.default)("object"==typeof e,'"Invalid type of plugin parameters: '+typeof e),(0,s.default)(!!(null==e?void 0:e.url),"URL of JSON file with texts must be defined.")},t.getVisibleDescriptionIds=(e,t)=>e?Object.keys(e).filter((e=>t.includes(e))):t,t.validateDescriptions=(e,t)=>{e.forEach((e=>{const i=t[e].description;(0,s.default)(Array.isArray(i)?i.length:i,`Description text is mandatory, but missing for item "${e}"`)}))},t.isMessagesConfig=(e={})=>"noData"in e||"tooManyDataPoints"in e,t.getDateDataSet=e=>(0,a.isIdentifierRef)(e)?(0,a.idRef)(e.identifier,"dataSet"):e;class r extends Error{constructor(){super(...arguments),this.name="TooManyDataPointsError"}}t.TooManyDataPointsError=r},33866:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(97582),a=s.__importDefault(i(96732)),r=s.__importDefault(i(4147)),n=i(98617),o={author:r.default.author,displayName:r.default.name,version:r.default.version,minEngineVersion:"bundled",maxEngineVersion:"bundled",compatibility:(0,n.ensureSemverPrefix)(r.default.peerDependencies["@gooddata/sdk-ui-dashboard"]),engineKey:`./${a.default.MODULE_FEDERATION_NAME}_ENGINE`,pluginKey:`./${a.default.MODULE_FEDERATION_NAME}_PLUGIN`};t.default=o},739:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ensureSemverPrefix=void 0,t.ensureSemverPrefix=e=>e.startsWith("^")?e:"^"+e},98617:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ensureSemverPrefix=void 0;var s=i(739);Object.defineProperty(t,"ensureSemverPrefix",{enumerable:!0,get:function(){return s.ensureSemverPrefix}})},84411:(e,t,i)=>{i.d(t,{Z:()=>o});var s=i(8081),a=i.n(s),r=i(23645),n=i.n(r)()(a());n.push([e.id,"/* (C) 2022 GoodData Corporation */\n.description-wrapper {\n    padding: 3px 5px;\n}\n\n.description-wrapper > p {\n    margin-top: 0;\n    margin-bottom: 0.5em;\n}\n\n.wrap {\n    column-count: 2;\n}\n\n.error {\n    padding: 0 1em;\n    color: red;\n}\n\n.help {\n    cursor: help;\n}\n",""]);const o=n},66391:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(93379),a=i.n(s),r=i(7795),n=i.n(r),o=i(90569),d=i.n(o),l=i(3565),u=i.n(l),c=i(19216),p=i.n(c),g=i(44589),f=i.n(g),m=i(84411),b={};b.styleTagTransform=f(),b.setAttributes=u(),b.insert=d().bind(null,"head"),b.domAPI=n(),b.insertStyleElement=p(),a()(m.Z,b);const h=m.Z&&m.Z.locals?m.Z.locals:void 0},4147:e=>{e.exports=JSON.parse('{"name":"dashboard-description-plugin","version":"2.4.7","description":"A dashboard plugin for adding markdown description sections to a dashboard","author":"Open-sourced by GoodData - feel free to change","private":false,"license":"SEE LICENSE IN ../LICENSE","type":"module","exports":"./esm/index.js","types":"esm/index.d.ts","sideEffects":["*.css","*.svg"],"files":["esm/**/*.js","esm/**/*.json","esm/**/*.d.ts","esm/**/*.map","esm/**/*.svg"],"scripts":{"clean":"rimraf ci dist esm coverage *.log styles/css","build":"webpack --mode production --config-name harness","prebuild-plugin":"yarn clean","build-plugin":"webpack --mode production --config-name dashboardPlugin","build-plugin-debug":"webpack --mode production --config-name dashboardPlugin --analyze","gdc-plugins":"gdc-plugins","add-plugin":"gdc-plugins dashboard-plugin add","link-plugin":"gdc-plugins dashboard-plugin link","unlink-plugin":"gdc-plugins dashboard-plugin unlink","update-plugin-params":"gdc-plugins dashboard-plugin update-params","remove-plugin-params":"gdc-plugins dashboard-plugin remove-params","start":"webpack-cli serve --config-name harness","test":"vitest --watch --passWithNoTests","test-once":"vitest --passWithNoTests","eslint":"eslint -c .eslintrc.cjs src/","eslint-fix":"eslint -c .eslintrc.cjs --fix src/","prettier-check":"prettier --check \\"{src,test}/**/*.{ts,tsx,json,scss,md,yaml,html}\\"","prettier-write":"prettier --write \\"{src,test}/**/*.{ts,tsx,json,scss,md,yaml,html}\\"","refresh-md":"node ./scripts/refresh-md.js"},"dependencies":{"@gooddata/number-formatter":"^1.0.4","classnames":"^2.3.1","json-stable-stringify":"^1.0.1","json5":"^2.2.1","react-markdown":"^8.0.3","ts-invariant":"^0.10.3","tslib":"^2.5.0"},"peerDependencies":{"@gooddata/sdk-ui-dashboard":"^10.35.0","@gooddata/sdk-model":"^10.35.0","@gooddata/sdk-backend-spi":"^10.35.0","@gooddata/sdk-backend-bear":"^10.35.0","@gooddata/sdk-backend-tiger":"^10.35.0","@gooddata/sdk-ui":"^10.35.0","@gooddata/sdk-ui-charts":"^10.35.0","@gooddata/sdk-ui-ext":"^10.35.0","@gooddata/sdk-ui-filters":"^10.35.0","@gooddata/sdk-ui-geo":"^10.35.0","@gooddata/sdk-ui-kit":"^10.35.0","@gooddata/sdk-ui-pivot":"^10.35.0","react":"^16.10.0 || ^17.0.0 || ^18.0.0","react-dom":"^16.10.0 || ^17.0.0 || ^18.0.0"},"devDependencies":{"@babel/core":"^7.7.2","@babel/preset-env":"^7.7.2","@babel/preset-react":"^7.7.2","@gooddata/catalog-export":"^10.35.0","@gooddata/frontend-npm-scripts":"^1.3.0","@gooddata/plugin-toolkit":"^10.35.0","@gooddata/sdk-backend-bear":"^10.35.0","@gooddata/sdk-backend-spi":"^10.35.0","@gooddata/sdk-backend-tiger":"^10.35.0","@gooddata/sdk-model":"^10.35.0","@gooddata/sdk-ui":"^10.35.0","@gooddata/sdk-ui-charts":"^10.35.0","@gooddata/sdk-ui-ext":"^10.35.0","@gooddata/sdk-ui-filters":"^10.35.0","@gooddata/sdk-ui-geo":"^10.35.0","@gooddata/sdk-ui-kit":"^10.35.0","@gooddata/sdk-ui-loaders":"^10.35.0","@gooddata/sdk-ui-pivot":"^10.35.0","@types/json-stable-stringify":"^1.0.32","@types/lodash":"^4.14.158","@types/node":"^16.18.23","@types/raf":"^3.4.0","@types/react":"^18.2.0","@types/react-dom":"^18.2.1","@typescript-eslint/eslint-plugin":"^5.57.1","@typescript-eslint/parser":"^5.57.1","babel-loader":"^8.0.5","case-sensitive-paths-webpack-plugin":"^2.4.0","concurrently":"^6.0.2","copy-webpack-plugin":"^10.2.4","css-loader":"^6.7.1","dotenv":"16.0.3","dotenv-webpack":"^7.0.2","eslint":"^8.25.0","eslint-import-resolver-typescript":"^3.6.0","eslint-plugin-import":"^2.28.1","eslint-plugin-import-esm":"^1.2.1","eslint-plugin-prettier":"^4.0.0","eslint-plugin-react":"^7.31.10","eslint-plugin-react-hooks":"^4.5.0","html-webpack-plugin":"^5.3.1","lodash":"^4.17.19","prettier":"~2.5.0","raf":"^3.4.1","react":"^18.2.0","react-dom":"^18.2.0","react-intl":"^6.4.1","rimraf":"^3.0.2","source-map-loader":"^4.0.0","style-loader":"^3.3.1","ts-loader":"^8.3.0","typescript":"5.0.2","vitest":"0.31.4","webpack":"^5.58.0","webpack-bundle-analyzer":"^4.5.0","webpack-cli":"^4.9.2","webpack-dev-server":"^4.9.1"},"resolutions":{"reselect":"^5.0.0"}}')},96732:e=>{e.exports=JSON.parse('{"#MODULE_FEDERATION_NAME":"This has to be unique per plugin, otherwise loading multiple plugins won\'t work. Also for some reason the folder in src needs to be called this too, otherwise multiple plugins do load but all are overwritten by the first loaded. This should not be an issue though, the bootstrap of the template can perform all the renaming/string replacements.","MODULE_FEDERATION_NAME":"dp_dashboard_description_plugin"}')}}]);