(self.webpackChunkradial_bar_chart_plugin=self.webpackChunkradial_bar_chart_plugin||[]).push([[2050],{52050:(e,t,i)=>{i.r(t),i.d(t,{AttributeDatasetInfo:()=>md,AttributeDisplayFormSelect:()=>ad,AttributeFilter:()=>Js,AttributeFilterAllValuesFilteredResult:()=>ws,AttributeFilterButton:()=>Xs,AttributeFilterButtonTooltip:()=>Ia,AttributeFilterConfigurationButton:()=>dd,AttributeFilterDeleteButton:()=>ud,AttributeFilterDependencyTooltip:()=>bd,AttributeFilterDropdownActions:()=>ka,AttributeFilterDropdownBody:()=>is,AttributeFilterDropdownButton:()=>Fa,AttributeFilterElementsActions:()=>rs,AttributeFilterElementsSearchBar:()=>ls,AttributeFilterElementsSelect:()=>fs,AttributeFilterElementsSelectError:()=>hs,AttributeFilterElementsSelectItem:()=>Cs,AttributeFilterElementsSelectLoading:()=>xs,AttributeFilterEmptyAttributeResult:()=>Ss,AttributeFilterEmptyResult:()=>ks,AttributeFilterEmptySearchResult:()=>Is,AttributeFilterError:()=>xa,AttributeFilterFilteredStatus:()=>js,AttributeFilterLoading:()=>wa,AttributeFilterSelectionStatus:()=>Ls,AttributeFilterSimpleDropdownButton:()=>Ys,AttributeFilterSimpleDropdownButtonWithSelection:()=>Qs,AttributeFilterStatusBar:()=>Vs,DateFilter:()=>Gn,DateFilterHelpers:()=>te,EmptyElementsSearchBar:()=>gd,MeasureValueFilter:()=>pr,MeasureValueFilterDropdown:()=>gr,RankingFilter:()=>el,RankingFilterDropdown:()=>Xr,SingleSelectionAttributeFilterElementsSelectItem:()=>Ds,SingleSelectionAttributeFilterStatusBar:()=>Hs,defaultDateFilterOptions:()=>u,filterVisibleDateFilterOptions:()=>F,getAttributeFilterSubtitle:()=>Na,getLocalizedIcuDateFormatPattern:()=>gt,isAbsoluteDateFilterOption:()=>y,isRelativeDateFilterOption:()=>v,isRelativeDateFilterWithBoundOption:()=>C,isUiRelativeDateFilterForm:()=>b,isWarningMessage:()=>nr,newAttributeFilterHandler:()=>Ca,useAttributeFilterContext:()=>es,useAttributeFilterController:()=>Ka,useAttributeFilterHandler:()=>Ga,useAttributeFilterSearch:()=>hd,useAutoOpenAttributeFilterDropdownButton:()=>pd,useOnCloseAttributeFilterDropdownButton:()=>fd});var n=i(30381);const r="YYYY-MM-DD",l="YYYY-MM-DD HH:mm",o="HH:mm",a=", HH:mm",s="00:00",d="23:59",c="MM/dd/yyyy",u={allTime:{localIdentifier:"ALL_TIME",type:"allTime",name:"",visible:!0},absoluteForm:{localIdentifier:"ABSOLUTE_FORM",type:"absoluteForm",from:n().subtract(1,"month").startOf("day").format(r),to:n().startOf("day").format(r),name:"",visible:!0},absolutePreset:[],relativeForm:{localIdentifier:"RELATIVE_FORM",type:"relativeForm",granularity:"GDC.time.month",from:void 0,to:void 0,name:"",visible:!0},relativePreset:{"GDC.time.date":[{from:-6,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_7_DAYS",type:"relativePreset",visible:!0,name:""},{from:-29,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_30_DAYS",type:"relativePreset",visible:!0,name:""},{from:-89,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_90_DAYS",type:"relativePreset",visible:!0,name:""}],"GDC.time.month":[{from:0,to:0,granularity:"GDC.time.month",localIdentifier:"THIS_MONTH",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.month",localIdentifier:"LAST_MONTH",type:"relativePreset",visible:!0,name:""},{from:-11,to:0,granularity:"GDC.time.month",localIdentifier:"LAST_12_MONTHS",type:"relativePreset",visible:!0,name:""}],"GDC.time.quarter":[{from:0,to:0,granularity:"GDC.time.quarter",localIdentifier:"THIS_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.quarter",localIdentifier:"LAST_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-3,to:0,granularity:"GDC.time.quarter",localIdentifier:"LAST_4_QUARTERS",type:"relativePreset",visible:!0,name:""}],"GDC.time.year":[{from:0,to:0,granularity:"GDC.time.year",localIdentifier:"THIS_YEAR",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.year",localIdentifier:"LAST_YEAR",type:"relativePreset",visible:!0,name:""}]}},m={"GDC.time.minute":"minute","GDC.time.hour":"hour","GDC.time.date":"day","GDC.time.week_us":"week","GDC.time.month":"month","GDC.time.quarter":"quarter","GDC.time.year":"year"};var g=i(53244);const p=(e,t)=>{if(!e||!t)return e;if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterForm)(e))return e;if((0,g.isRelativeDateFilterPreset)(e)){const{from:t,to:i}=e,n=0===i&&t<i;return{...e,from:n?e.from-1:e.from,to:n?-1:i}}throw new Error("Unknown date filter value type")},f=e=>!!e.visible&&!!(0,g.isRelativeDateFilterPreset)(e)&&0===e.to&&e.from<e.to;var h=i(79697);const b=e=>!(0,h.Z)(e)&&"relativeForm"===e.type,y=e=>(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e),v=e=>(0,g.isRelativeDateFilterForm)(e)||(0,g.isRelativeDateFilterPreset)(e),C=e=>v(e)&&!(0,h.Z)(e.boundedFilter);function x(e){return b(e)||(0,g.isRelativeDateFilterPreset)(e)?e.granularity:void 0}function S(e){return e?.visible}function I(e){return S(e)?e:void 0}function E(e){const{absoluteForm:t,absolutePreset:i,allTime:n,relativeForm:r,relativePreset:l}=e;return{...n&&{allTime:n},...t&&{absoluteForm:t},...!(0,h.Z)(i)&&{absolutePreset:i},...r&&{relativeForm:r},...!(0,h.Z)(l)&&{relativePreset:l}}}function F(e){const t=I(e.allTime),i=I(e.absoluteForm),n=I(e.relativeForm),r=e.absolutePreset?.filter(S);return E({allTime:t,absoluteForm:i,absolutePreset:r,relativeForm:n,relativePreset:e.relativePreset&&(l=e.relativePreset,Object.keys(l).reduce(((e,t)=>{const i=l[t].filter(S);return i.length&&(e[t]=i),e}),{}))});var l}function w(e){return e.from>e.to?{...e,from:e.to,to:e.from}:e}var k=i(52620),A=i(26786),D=i(2525),P=function(){return P=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},P.apply(this,arguments)};function O(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var j=i(86122);function T(e,t){if(e===t)return!0;if(!e||!t)return!1;var i=Object.keys(e),n=Object.keys(t),r=i.length;if(n.length!==r)return!1;for(var l=0;l<r;l++){var o=i[l];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}i(95957),P(P({},{formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){},onWarn:function(e){}}),{textComponent:j.Fragment}),i(8679);var N,M,L="undefined"==typeof window||window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?j.createContext(null):window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=j.createContext(null)),R=(L.Consumer,L.Provider,L);function B(){var e=j.useContext(R);return function(e){!function(e,t,i){if(void 0===i&&(i=Error),!e)throw new i("[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}(e)}(e),e}!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(N||(N={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(M||(M={}));var _=function(e){var t=B(),i=e.value,n=e.children,r=O(e,["value","children"]);return n(t.formatNumberToParts(i,r))};function V(e){var t=function(t){var i=B(),n=t.value,r=t.children,l=O(t,["value","children"]),o="string"==typeof n?new Date(n||0):n;return r("formatDate"===e?i.formatDateToParts(o,l):i.formatTimeToParts(o,l))};return t.displayName=M[e],t}function H(e){var t=function(t){var i=B(),n=t.value,r=t.children,l=O(t,["value","children"]),o=i[e](n,l);if("function"==typeof r)return r(o);var a=i.textComponent||j.Fragment;return j.createElement(a,null,o)};return t.displayName=N[e],t}_.displayName="FormattedNumberParts",_.displayName="FormattedNumberParts",H("formatDate"),H("formatTime"),H("formatNumber"),H("formatList"),H("formatDisplayName"),V("formatDate"),V("formatTime");const Z={minute:{id:"filters.granularity.minutes"},hour:{id:"filters.granularity.hours"},day:{id:"filters.granularity.days"},week:{id:"filters.granularity.weeks"},month:{id:"filters.granularity.months"},quarter:{id:"filters.granularity.quarters"},year:{id:"filters.granularity.years"},allTimeExcluded:{id:"filters.allTime.excludeCurrentPeriod"},minuteExcluded:{id:"filters.minute.excludeCurrentPeriod"},hourExcluded:{id:"filters.hour.excludeCurrentPeriod"},dayExcluded:{id:"filters.day.excludeCurrentPeriod"},weekExcluded:{id:"filters.week.excludeCurrentPeriod"},monthExcluded:{id:"filters.month.excludeCurrentPeriod"},quarterExcluded:{id:"filters.quarter.excludeCurrentPeriod"},yearExcluded:{id:"filters.year.excludeCurrentPeriod"},minute_history:{id:"filters.floatingRange.option.minute.offset.history"},minute_today:{id:"filters.floatingRange.option.minute.offset.today"},minute_future:{id:"filters.floatingRange.option.minute.offset.future"},hour_history:{id:"filters.floatingRange.option.hour.offset.history"},hour_today:{id:"filters.floatingRange.option.hour.offset.today"},hour_future:{id:"filters.floatingRange.option.hour.offset.future"},day_history:{id:"filters.floatingRange.option.day.offset.history"},day_today:{id:"filters.floatingRange.option.day.offset.today"},day_future:{id:"filters.floatingRange.option.day.offset.future"},week_history:{id:"filters.floatingRange.option.week.offset.history"},week_today:{id:"filters.floatingRange.option.week.offset.today"},week_future:{id:"filters.floatingRange.option.week.offset.future"},month_history:{id:"filters.floatingRange.option.month.offset.history"},month_today:{id:"filters.floatingRange.option.month.offset.today"},month_future:{id:"filters.floatingRange.option.month.offset.future"},quarter_history:{id:"filters.floatingRange.option.quarter.offset.history"},quarter_today:{id:"filters.floatingRange.option.quarter.offset.today"},quarter_future:{id:"filters.floatingRange.option.quarter.offset.future"},year_history:{id:"filters.floatingRange.option.year.offset.history"},year_today:{id:"filters.floatingRange.option.year.offset.today"},year_future:{id:"filters.floatingRange.option.year.offset.future"},"GDC.time.minute":{id:"filters.minute.title"},"GDC.time.hour":{id:"filters.hour.title"},"GDC.time.date":{id:"filters.day.title"},"GDC.time.week_us":{id:"filters.week.title"},"GDC.time.month":{id:"filters.month.title"},"GDC.time.quarter":{id:"filters.quarter.title"},"GDC.time.year":{id:"filters.year.title"},top:{id:"rankingFilter.top"},bottom:{id:"rankingFilter.bottom"},topWithAttr:{id:"rankingFilter.preview.top_with_attribute"},topWithoutAttr:{id:"rankingFilter.preview.top_without_attribute"},bottomWithAttr:{id:"rankingFilter.preview.bottom_with_attribute"},bottomWithoutAttr:{id:"rankingFilter.preview.bottom_without_attribute"},ALL:{id:"mvf.operator.all"},GREATER_THAN:{id:"mvf.operator.greaterThan"},GREATER_THAN_OR_EQUAL_TO:{id:"mvf.operator.greaterThanOrEqualTo"},LESS_THAN:{id:"mvf.operator.lessThan"},LESS_THAN_OR_EQUAL_TO:{id:"mvf.operator.lessThanOrEqualTo"},EQUAL_TO:{id:"mvf.operator.equalTo"},NOT_EQUAL_TO:{id:"mvf.operator.notEqualTo"},BETWEEN:{id:"mvf.operator.between"},NOT_BETWEEN:{id:"mvf.operator.notBetween"},thisMinute:{id:"filters.thisMinute.title"},lastMinute:{id:"filters.lastMinute.title"},nextMinute:{id:"filters.nextMinute.title"},thisHour:{id:"filters.thisHour.title"},lastHour:{id:"filters.lastHour.title"},nextHour:{id:"filters.nextHour.title"},thisDay:{id:"filters.thisDay.title"},lastDay:{id:"filters.lastDay.title"},nextDay:{id:"filters.nextDay.title"},thisWeek:{id:"filters.thisWeek.title"},thisWeekToDate:{id:"filters.thisWeekToDate.title"},lastWeek:{id:"filters.lastWeek.title"},nextWeek:{id:"filters.nextWeek.title"},thisMonth:{id:"filters.thisMonth.title"},thisMonthToDate:{id:"filters.thisMonthToDate.title"},lastMonth:{id:"filters.lastMonth.title"},nextMonth:{id:"filters.nextMonth.title"},thisQuarter:{id:"filters.thisQuarter.title"},thisQuarterToDate:{id:"filters.thisQuarterToDate.title"},lastQuarter:{id:"filters.lastQuarter.title"},nextQuarter:{id:"filters.nextQuarter.title"},thisYear:{id:"filters.thisYear.title"},thisYearToDate:{id:"filters.thisYearToDate.title"},lastYear:{id:"filters.lastYear.title"},nextYear:{id:"filters.nextYear.title"},lastNMinutes:{id:"filters.lastNMinutes"},lastNHours:{id:"filters.lastNHours"},lastNDays:{id:"filters.lastNDays"},lastNWeeks:{id:"filters.lastNWeeks"},lastNMonths:{id:"filters.lastNMonths"},lastNQuarters:{id:"filters.lastNQuarters"},lastNYears:{id:"filters.lastNYears"},nextNMinutes:{id:"filters.nextNMinutes"},nextNHours:{id:"filters.nextNHours"},nextNDays:{id:"filters.nextNDays"},nextNWeeks:{id:"filters.nextNWeeks"},nextNMonths:{id:"filters.nextNMonths"},nextNQuarters:{id:"filters.nextNQuarters"},nextNYears:{id:"filters.nextNYears"},"minutes.past":{id:"filters.interval.minutes.past"},"minutes.past.sameValue":{id:"filters.interval.minutes.past.sameValue"},"minutes.future":{id:"filters.interval.minutes.future"},"minutes.future.sameValue":{id:"filters.interval.minutes.future.sameValue"},"minutes.mixed":{id:"filters.interval.minutes.mixed"},"hours.past":{id:"filters.interval.hours.past"},"hours.past.sameValue":{id:"filters.interval.hours.past.sameValue"},"hours.future":{id:"filters.interval.hours.future"},"hours.future.sameValue":{id:"filters.interval.hours.future.sameValue"},"hours.mixed":{id:"filters.interval.hours.mixed"},"days.past":{id:"filters.interval.days.past"},"days.past.sameValue":{id:"filters.interval.days.past.sameValue"},"days.future":{id:"filters.interval.days.future"},"days.future.sameValue":{id:"filters.interval.days.future.sameValue"},"days.mixed":{id:"filters.interval.days.mixed"},"weeks.past":{id:"filters.interval.weeks.past"},"weeks.past.sameValue":{id:"filters.interval.weeks.past.sameValue"},"weeks.future":{id:"filters.interval.weeks.future"},"weeks.future.sameValue":{id:"filters.interval.weeks.future.sameValue"},"weeks.mixed":{id:"filters.interval.weeks.mixed"},"months.past":{id:"filters.interval.months.past"},"months.past.sameValue":{id:"filters.interval.months.past.sameValue"},"months.future":{id:"filters.interval.months.future"},"months.future.sameValue":{id:"filters.interval.months.future.sameValue"},"months.mixed":{id:"filters.interval.months.mixed"},"quarters.past":{id:"filters.interval.quarters.past"},"quarters.past.sameValue":{id:"filters.interval.quarters.past.sameValue"},"quarters.future":{id:"filters.interval.quarters.future"},"quarters.future.sameValue":{id:"filters.interval.quarters.future.sameValue"},"quarters.mixed":{id:"filters.interval.quarters.mixed"},"years.past":{id:"filters.interval.years.past"},"years.past.sameValue":{id:"filters.interval.years.past.sameValue"},"years.future":{id:"filters.interval.years.future"},"years.future.sameValue":{id:"filters.interval.years.future.sameValue"},"years.mixed":{id:"filters.interval.years.mixed"},relevantValuesParentFiltersTooltip:{id:"attributesDropdown.relevantValues.tooltip.parentFilters"},relevantValuesLimitsTooltip:{id:"attributesDropdown.relevantValues.tooltip.limits"},relevantValuesParentFiltersLimitsTooltip:{id:"attributesDropdown.relevantValues.tooltip.parentFiltersLimits"}},W=(e,t=r)=>{if(!(e instanceof Date&&isNaN(e.getTime())))return e instanceof Date?n(e).local().format(t):e},q=e=>"string"!=typeof e?e:new Date(n(e,l).format()),z=(e,t,i=s)=>"string"!=typeof e?e:t&&1===e.split(" ").length?`${e} ${i}`:e,G=(e,t,i)=>{const r=i.includes(o),l=i.replace(a,""),c=z(e,r,s),u=z(t,r,d),m=q(c),g=q(u),p=(h=g,0===(f=m).getHours()&&0===f.getMinutes()&&23===h.getHours()&&59===h.getMinutes());var f,h;if(n(m).isSame(g,"day"))return r&&!p?`${(0,k.WU)(m,l)}, ${((e,t)=>{const i=(0,k.WU)(e,o),n=(0,k.WU)(t,o);return i===n?i:`${i} – ${n}`})(m,g)}`:(0,k.WU)(m,l);const b=p?l:i;return`${(0,k.WU)(m,b)} – ${(0,k.WU)(g,b)}`},K=[{predicate:(e,t)=>0===e&&0===t,formatter:(e,t,i,n,r)=>(0,g.isUpperBound)(r)&&0===r.to?n.formatMessage(Z[`this${(0,A.Z)(i)}ToDate`]):n.formatMessage(Z[`this${(0,A.Z)(i)}`])},{predicate:(e,t)=>1===e&&1===t,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`next${(0,A.Z)(i)}`])},{predicate:(e,t)=>-1===e&&-1===t,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`last${(0,A.Z)(i)}`])},{predicate:e=>0===e,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`nextN${(0,A.Z)(i)}s`],{n:Math.abs(t)+1})},{predicate:(e,t)=>0===t,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`lastN${(0,A.Z)(i)}s`],{n:Math.abs(e)+1})},{predicate:(e,t)=>e<0&&e===t,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`${i}s.past.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e>0&&e===t,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`${i}s.future.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e<0&&t<0,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`${i}s.past`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:(e,t)=>e>0&&t>0,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`${i}s.future`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:()=>!0,formatter:(e,t,i,n,r)=>n.formatMessage(Z[`${i}s.mixed`],{from:Math.abs(e),to:Math.abs(t)})}],U=(e,t,i,n,r)=>{const l=m[i];if(void 0===l)return i;const{formatter:o}=K.find((i=>i.predicate(e,t)));return o(e,t,l,n,r)},$=(e,t,i)=>{if((0,g.isAbsoluteDateFilterForm)(e)||(0,g.isRelativeDateFilterForm)(e))return Q(e,t,i);if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterPreset)(e))return e.name||Q(e,t,i);throw new Error("Unknown DateFilterOption type")},Y=(e,t,i=c)=>{const n=(0,D.getIntl)(t);return $(e,n,i)},Q=(e,t,i)=>{if((0,g.isAbsoluteDateFilterForm)(e))return((e,t)=>e.from&&e.to?G(e.from,e.to,t):"")(e,i);if((0,g.isAbsoluteDateFilterPreset)(e))return((e,t)=>G(e.from,e.to,t))(e,i);if((0,g.isAllTimeDateFilterOption)(e))return(e=>e.formatMessage({id:"filters.allTime.title"}))(t);if((0,g.isRelativeDateFilterForm)(e))return((e,t)=>"number"==typeof e.from&&"number"==typeof e.to?U(e.from,e.to,e.granularity,t,e.boundedFilter):"")(e,t);if((0,g.isRelativeDateFilterPreset)(e))return((e,t)=>U(e.from,e.to,e.granularity,t,e.boundedFilter))(e,t);throw new Error("Unknown DateFilterOption type")},J=e=>{const t={};return e.visible||(t[e.type]={}),t},X=(e,t)=>({...e,absoluteForm:{...e.absoluteForm??{},[t]:!0}}),ee=e=>(0,g.isAbsoluteDateFilterForm)(e)?(e=>{let t=J(e);return void 0===e.from&&(t=X(t,"invalidStartDate")),void 0===e.to&&(t=X(t,"invalidEndDate")),void 0===t.absoluteForm&&q(e.from)>q(e.to)&&(t=X(t,"startDateAfterEndDate")),void 0===t.absoluteForm?{}:t})(e):(0,g.isRelativeDateFilterForm)(e)?(e=>{const t=J(e);return["from","to"].forEach((i=>{void 0===e[i]&&(t.relativeForm=t.relativeForm||{})})),t.relativeForm?t:{}})(e):J(e),te={validateFilterOption:ee,getDateFilterTitle:Y,getDateFilterTitleUsingTranslator:(e,t,i=c)=>$(e,t,i),getDateFilterRepresentation:(e,t,i=c)=>{const n=(0,D.getIntl)(t);return Q(e,n,i)},granularityIntlCodes:m,applyExcludeCurrentPeriod:p,defaultDateFilterOptions:u,canExcludeCurrentPeriod:f,mapOptionToAfm:(e,t,i)=>{const n=p(e,i);if((0,g.isAllTimeDateFilterOption)(n))return null;if(y(n))return((e,t)=>({absoluteDateFilter:{dataSet:t,from:e.from,to:e.to}}))(n,t);if(v(n))return((e,t)=>{const{from:i,to:n,granularity:r,boundedFilter:l}=e;return{relativeDateFilter:{dataSet:t,from:i,to:n,granularity:r,...l?{boundedFilter:l}:{}}}})(n,t);throw new Error("Unknown date filter value provided")},formatAbsoluteDateRange:G,formatRelativeDateRange:U,filterVisibleDateFilterOptions:F};var ie=i(55348),ne=i(50576),re=i(31155),le=i(65165);const oe="date-filter-selected-list-item-id",ae="date-filter-custom-relative-id",se="date-filter-custom-static-id",de="date-filter-relative-granularity-tab-id";var ce;!function(e){e.OPTION="option",e.TAB="tab"}(ce||(ce={}));const ue=(e,t,i)=>e.current.contains(t)&&t.role===i,me=(e,t,i)=>{let n,r=t;do{r=(r+i+e.length)%e.length,n=e[r]}while("tab"===n.getAttribute("role"));return n},ge=({tabGranularityRef:e,closeDropdown:t})=>i=>{if(!e.current)return;const n=Array.from(e.current.querySelectorAll("[tabindex]")),r=document.activeElement,l=n.findIndex((e=>e===r));(0,le.makeLinearKeyboardNavigation)({onFocusNext:()=>{if(ue(e,r,ce.TAB)){const e=l===n.length-1?n[0]:n[l+1];e?.focus()}},onFocusPrevious:()=>{if(ue(e,r,ce.TAB)){const e=l<=0?n[n.length-1]:n[l-1];e?.focus()}},onFocusFirst:()=>{if(ue(e,r,ce.TAB)){const{firstElement:t}=(0,le.getFocusableElements)(e.current);t?.focus()}},onFocusLast:()=>{if(ue(e,r,ce.TAB)){const{lastElement:t}=(0,le.getFocusableElements)(e.current);t?.focus()}},onClose:t})(i)},pe=(e,t,i,n,r)=>{"Enter"===e.key&&t&&document.activeElement instanceof HTMLInputElement&&!i&&(r(),n()),"Escape"!==e.key&&e.stopPropagation()};var fe=i(94184);function he({messageId:e,className:t,disabled:i,onClick:n,describedByFromValidation:r}){const l=B();return(0,ie.jsx)(le.Button,{type:"button",value:l.formatMessage({id:e}),className:t,disabled:i,onClick:n,describedByFromValidation:r})}var be=i(5723);const ye=(0,be.Z)((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}));function ve({dateFormat:e,filter:t}){const i=Ce({filter:t,dateFormat:e});return(0,ie.jsx)(ie.Fragment,{children:i})}const Ce=({filter:e,dateFormat:t})=>{const i=B();return Y(e,(0,D.resolveLocale)(i.locale),t)},xe=(e=>`only screen and (min-width:${e.lower}px) and (max-width:${e.upper}px)`)({lower:0,upper:640});function Se({isSelected:e,isFocusFallback:t,className:i,children:n,...r}){return(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsxs)("button",{id:e?oe:void 0,role:"option",className:fe("gd-list-item","gd-filter-list-item",{"is-selected":e,"gd-filter-list-item-selected":e},i),tabIndex:e||t?0:-1,"aria-selected":e,...r,children:[n,e?(0,ie.jsx)(re.zP,{query:xe,children:(0,ie.jsx)(le.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-date-filter"})}):null]})})}function Ie({filterOptions:e,dateFormat:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,className:r}){return(0,ie.jsx)(ie.Fragment,{children:e.map((e=>(0,ie.jsx)(Se,{isSelected:e.localIdentifier===i.localIdentifier,onClick:()=>n(e),className:fe(`s-absolute-preset-${ye(e.localIdentifier)}`,r),children:(0,ie.jsx)(ve,{filter:e,dateFormat:t})},e.localIdentifier)))})}function Ee({children:e,className:t,...i}){return(0,ie.jsx)("div",{className:fe("gd-list-item gd-list-item-header gd-filter-list-heading",t),...i,children:e})}function Fe(e){var t=B(),i=t.formatMessage,n=t.textComponent,r=void 0===n?j.Fragment:n,l=e.id,o=e.description,a=e.defaultMessage,s=e.values,d=e.children,c=e.tagName,u=void 0===c?r:c,m=i({id:l,description:o,defaultMessage:a},s,{ignoreTag:e.ignoreTag});return"function"==typeof d?d(Array.isArray(m)?m:[m]):u?j.createElement(u,null,m):j.createElement(j.Fragment,null,m)}Fe.displayName="FormattedMessage";var we=j.memo(Fe,(function(e,t){var i=e.values,n=O(e,["values"]),r=t.values,l=O(t,["values"]);return T(r,i)&&T(n,l)}));we.displayName="MemoizedFormattedMessage";const ke=we;function Ae({granularity:e}){const t=Z[e]||null;return t?(0,ie.jsx)(ke,{id:t.id}):null}const De=["GDC.time.year","GDC.time.quarter","GDC.time.month","GDC.time.week_us","GDC.time.date","GDC.time.hour","GDC.time.minute"];function Pe({dateFormat:e,filterOption:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,className:r}){const l=De.filter((e=>Boolean(t?.[e]?.length>0))).map((e=>({granularity:e,items:t[e]})));return(0,ie.jsx)(ie.Fragment,{children:l.map((t=>(0,ie.jsxs)(j.Fragment,{children:[(0,ie.jsx)(Ee,{className:r,children:(0,ie.jsx)(Ae,{granularity:t.granularity})}),t.items.map((t=>(0,ie.jsx)(Se,{isSelected:t.localIdentifier===i.localIdentifier,onClick:()=>n(t),className:fe(`s-relative-preset-${ye(t.localIdentifier)}`,r),children:(0,ie.jsx)(ve,{filter:t,dateFormat:e})},t.localIdentifier)))]},t.granularity)))})}const Oe=(e,t,i)=>{const n=i?l:r;return{from:W(e.from,n),to:W(e.to,n),localIdentifier:t,type:"absoluteForm",name:"",visible:!0}},je=(e,t=!1)=>{const i=e.from&&e.from.split(" ").length>1,n=e.to&&e.to.split(" ").length>1,r=e&&q(e.from),l=e&&q(e.to);return r&&!i&&t&&(r.setHours(0),r.setMinutes(0)),l&&!n&&t&&(l.setHours(23),l.setMinutes(59)),{from:r,to:l}};var Te=i(81971),Ne=i(99500),Me=i(70152),Le=i(27159),Re=i(12254),Be=i(75075),_e=i(7516),Ve=i(77167),He=i(57989),Ze=i(67267),We=i(73114),qe=i(65248),ze=i(3564),Ge=i(20722),Ke=i(29515),Ue=i(78510),$e=i(65367),Ye=i(63945),Qe=i(21818),Je=i(22051),Xe=i(64369);const et=e=>void 0===e?void 0:n(e).format(r),tt=(e,t)=>{if(void 0!==e&&!isNaN(e.getTime()))return(0,k.WU)(e,t)},it=(e,t)=>{try{const i=(0,Je.Qc)(e,t,new Date);return(0,Xe.J)(i)&&i.getFullYear()>=1e3&&e===tt(i,t)?i:void 0}catch{return}},nt=e=>void 0!==e&&!isNaN(e.getTime()),rt=(e,t)=>{if(!nt(e))return;if(void 0===t)return;const i=new Date(e);return i.setHours(t.hours,t.minutes),i},lt=e=>{if(nt(e))return{hours:e.getHours(),minutes:e.getMinutes()}},ot={"en-US":Te._,"de-DE":Ne.de,"es-ES":Me.es,"fr-FR":Le.fr,"ja-JP":Re.ja,"nl-NL":Be.nl,"pt-BR":_e.F,"pt-PT":Ve.pt,"zh-Hans":He.U,"ru-RU":Ze.ru,"it-IT":We.it,"es-419":Me.es,"en-GB":qe.e,"fr-CA":ze.J,"zh-Hant":He.U,"en-AU":Ge.g,"fi-FI":Ke.fi,"zh-HK":He.U,"tr-TR":Ue.tr,"pl-PL":$e.pl,"ko-KR":Ye.ko},at=[{align:"bl tl",offset:{x:0,y:1}}];function st(e){switch(e){case"Sunday":return 0;case"Monday":return 1;default:throw new Error(`Unknown week start ${e}`)}}const dt=(0,j.forwardRef)((({mode:e,originalDateRange:t,selectedDateRange:i,onDateRangeSelect:n,dayPickerProps:r,alignTo:l,weekStart:o,renderAsOverlay:a,calendarClassNames:s,intl:d},c)=>{const[u,m]=(0,j.useState)("from"===e?i.from:i.to);var g;const p=(b={mode:"range",showOutsideDays:!0,modifiers:{start:t.from,end:t.to},selected:{from:t.from,to:t.to},locale:(g=d.locale,ot[g])},(y=r)?((e,t)=>{const i=(n=e.modifiers,r=t.modifiers,n||r?{...n,...r}:void 0);var n,r;return{...e,...t,...i?{modifiers:i}:{}}})(b,y):b),f=(0,ie.jsx)("div",{className:"gd-date-range-picker-wrapper",ref:c,children:(0,ie.jsx)(Qe._,{...p,mode:"range",month:u,onSelect:n,selected:i,classNames:{root:s},onMonthChange:m,weekStartsOn:st(o)})}),h=(0,ie.jsx)(le.Overlay,{alignTo:l,alignPoints:at,closeOnOutsideClick:!0,closeOnMouseDrag:!0,closeOnParentScroll:!0,children:f});var b,y;return a?h:f}));dt.displayName="DayPicker";var ct=i(2498);const ut=e=>{const t=n().locale(ct.Z(e)),i=t?.localeData&&t.localeData();return i?._longDateFormat?.L},mt={"en-US":"M/d/y","en-GB":"dd/MM/y","en-AU":"dd/MM/y","cs-CZ":"d. M. y","de-DE":"d.M.y","es-ES":"d/M/y","fr-FR":"dd/MM/y","ja-JP":"y/M/d","nl-NL":"d-M-y","pt-BR":"dd/MM/y","pt-PT":"dd/MM/y","zh-Hans":"y/M/d","zh-Hant":"y/M/d","zh-HK":"y/M/d","ru-RU":"dd.MM.y","it-IT":"dd/MM/y","es-419":"d/M/y","fr-CA":"dd/MM/y","fi-FI":"d-M-y","tr-TR":"dd/MM/y","pl-PL":"dd.MM.y","ko-KR":"y.MM.dd"},gt=e=>mt[e]??mt["en-US"];function pt({dateFormat:e,isTimeEnabled:t,dateHintId:i,timeHintId:n,intl:r}){return(0,ie.jsxs)("div",{className:"gd-date-range__hint",children:[(0,ie.jsx)("div",{id:i,children:r.formatMessage({id:"filters.staticPeriod.dateFormatHint"},{format:e||ut(r.locale)})}),t?(0,ie.jsx)("div",{id:n,children:r.formatMessage({id:"filters.staticPeriod.timeFormatHint"})}):null]})}class ft extends j.Component{inputRef=(0,j.createRef)();invokeInputMethod=e=>{this.inputRef.current&&this.inputRef.current[e]()};blur=()=>this.invokeInputMethod("blur");focus=()=>this.invokeInputMethod("focus");get value(){return this.inputRef.current?this.inputRef.current.value:""}render(){const{className:e}=this.props;return(0,ie.jsxs)("span",{className:fe(e),children:[(0,ie.jsx)("span",{className:"gd-icon-calendar"}),(0,ie.jsx)("input",{...this.props,ref:this.inputRef,className:"input-text s-date-range-picker-input-field"})]})}}function ht({descriptionId:e,errorText:t}){return t?(0,ie.jsx)("div",{id:e,className:fe("gd-date-range-picker-input__description",{"gd-date-range-picker-input__description--error":!!t,"s-absolute-range-error":!!t}),children:t}):null}const bt=(0,j.forwardRef)((({value:e,inputLabel:t,onKeyDown:i,onClick:n,onChange:r,dateFormat:l,accessibilityConfig:o,isMobile:a,isTimeEnabled:s,isDateOrderError:d,errorMessageTexts:c,withoutApply:u},m)=>{const{inputValue:g,validationContextValue:p,onDateInputChange:f,onDateInputKeyDown:b,onMobileDateChange:y,onDateInputBlur:v}=(({value:e,dateFormat:t,onChange:i,onKeyDown:n,isDateOrderError:r=!1,errorMessageTexts:l,withoutApply:o=!1})=>{const[a,s]=(0,j.useState)(tt(e,t)),d=(0,D.useValidationContextValue)((0,D.createInvalidNode)({id:"DateInput"})),{isValid:c,setInvalidDatapoints:u}=d,m=(0,j.useCallback)((e=>{const t=((e,t,i)=>"empty"===e?i.emptyDate:"invalid"===e?i.invalidDate:t?i.startDateAfterEndDate:void 0)(e,r,l);u((()=>[t&&(0,D.createInvalidDatapoint)({message:t})]))}),[l,r,u]);(0,j.useEffect)((()=>{const i=tt(e,t);void 0!==i&&(s(i),m(null))}),[e,t,m]);const g=(0,j.useCallback)((e=>{const n=e.target.value;s(n);const r=it(n,t);nt(r)&&!c&&(m(null),i(r))}),[t,c,m,i]),p=(0,j.useCallback)((e=>{if((0,h.Z)(a))return m("empty"),void i(void 0,e);const n=it(a,t);if(void 0===n)return m("invalid"),void i(void 0,e);m(null),i(n,e)}),[t,a,i,m]),f=(0,j.useCallback)((()=>p(!1)),[p]),b=(0,j.useCallback)((e=>{const t=e.target.value,n=q(t),r=nt(n);i(r?n:void 0),m(r?null:"empty")}),[i,m]),y=(0,j.useCallback)((e=>{(0,le.isEnterKey)(e)&&!o?p(!0):(0,le.isArrowKey)(e)?e.stopPropagation():n(e)}),[o,p,n]);return{inputValue:a,onDateInputChange:g,onMobileDateChange:b,onDateInputBlur:f,onDateInputKeyDown:y,validationContextValue:d}})({value:e,dateFormat:l,onChange:r,onKeyDown:i,isDateOrderError:d,errorMessageTexts:c,withoutApply:u}),C=(0,le.useId)(),{isValid:x,getInvalidDatapoints:S}=p,I=S()[0],E=I?.id??"",F={"aria-label":o.ariaLabel,"aria-labelledby":C,"aria-describedby":x?o.inputHintId:E,...x?{}:{"aria-invalid":!0}},w=(0,ie.jsx)(ft,{type:"date",className:fe("s-date-range-picker-date","gd-date-range-picker-input","gd-date-range-picker-input-native",{"gd-date-range-picker-input-error":!x,"has-error":!x}),onChange:y,value:et(e),...F}),k=(0,ie.jsxs)("div",{className:fe("gd-date-range-picker-input",{"gd-date-range-picker-input-error":!x,"has-error":!x}),children:[(0,ie.jsx)("span",{className:"gd-icon-calendar"}),(0,ie.jsx)("input",{ref:m,placeholder:l,onChange:f,onClick:n,onBlur:v,onKeyDown:b,value:g,className:"input-text s-date-range-picker-input-field",...F})]});return(0,ie.jsx)(D.ValidationContextStore,{value:p,children:(0,ie.jsxs)("div",{className:fe("gd-date-range-column",{"gd-date-range-column--with-time":s}),children:[(0,ie.jsx)("label",{id:C,children:t}),a?w:k,(0,ie.jsx)(ht,{descriptionId:E,errorText:I?.message})]})})}));bt.displayName="DateInput";const yt=e=>String(e).padStart(2,"0"),vt=e=>e?.isValid()?{hours:e.hours(),minutes:e.minutes()}:void 0;function Ct({value:e,inputLabel:t,onChange:i,accessibilityConfig:r,errorText:l,isMobile:a,withoutApply:s}){const[d,c]=(0,j.useState)(void 0===(u=e)?void 0:`${yt(u.hours)}:${yt(u.minutes)}`);var u;const m=(0,le.useId)(),g=(0,le.useId)(),p=void 0!==l,f=(0,j.useCallback)((e=>{const t=e.target.value;c(t);const r=n(t,o);(r.isValid()&&p||a)&&i(vt(r))}),[i,p,a]),h=(0,j.useCallback)((e=>{const t=n(d,o);i(vt(t),e)}),[i,d]),b=(0,j.useCallback)((()=>h(!1)),[h]),y=(0,j.useCallback)((e=>{(0,le.isEnterKey)(e)&&!s?h(!0):(0,le.isArrowKey)(e)&&e.stopPropagation()}),[s,h]);return(0,ie.jsxs)("div",{className:"gd-date-range-column gd-date-range-column--with-time",children:[(0,ie.jsx)("label",{id:m,children:t}),(0,ie.jsxs)("span",{className:fe("gd-date-range-picker-input","gd-date-range-picker-input-time","s-date-range-picker-input-time",{"gd-date-range-picker-input-error":!!l,"has-error":!!l}),children:[(0,ie.jsx)("span",{className:"gd-icon-clock"}),(0,ie.jsx)("input",{type:"time",className:"input-text","aria-label":r.ariaLabel,onChange:f,onBlur:b,onKeyDown:y,value:d,"aria-labelledby":m,"aria-describedby":l?g:r.inputHintId,...l?{"aria-invalid":!0}:{}})]}),(0,ie.jsx)(ht,{descriptionId:g,errorText:l})]})}const xt=(0,j.forwardRef)((({date:e,time:t,dateInputLabel:i,timeInputLabel:n,dateTimeLegendLabel:r,onDateChange:l,onTimeChange:o,onDayClick:a,onDateInputKeyDown:s,dateFormat:d,isMobile:c,isTimeEnabled:u,className:m,accessibilityConfig:g,inputErrorMessageTexts:p,errors:f,withoutApply:h},b)=>{const{dateAriaLabel:y,timeAriaLabel:v,dateInputHintId:C,timeInputHintId:x}=g,S=(0,j.useMemo)((()=>({ariaLabel:y,inputHintId:C})),[y,C]),I=(0,j.useMemo)((()=>({ariaLabel:v,inputHintId:x})),[v,x]),E=f?.isTimeOrderError?p.timeInput.startTimeAfterEndTime:void 0;return(0,ie.jsx)("div",{className:fe(m,{"gd-date-range-row":u}),children:(0,ie.jsxs)("fieldset",{children:[(0,ie.jsx)("legend",{className:"sr-only",children:u?r:i}),(0,ie.jsx)(bt,{ref:b,value:e,inputLabel:i,onChange:l,onKeyDown:s,onClick:a,dateFormat:d,accessibilityConfig:S,errorMessageTexts:p.dateInput,isDateOrderError:f?.isDateOrderError,isMobile:c,isTimeEnabled:u,withoutApply:h}),u?(0,ie.jsx)(Ct,{value:t,inputLabel:n,onChange:o,accessibilityConfig:I,errorText:E,isMobile:c,withoutApply:h}):null]})})}));xt.displayName="DateTimePicker";const St="date-range-picker-date-input-hint",It="date-range-picker-time-input-hint",Et=(0,j.forwardRef)((({date:e,time:t,onDateInputKeyDown:i,onDateChange:n,onTimeChange:r,onInputClick:l,dateFormat:o,isMobile:a,isTimeEnabled:s,errors:c,intl:u},m)=>{const g=(0,j.useMemo)((()=>({dateAriaLabel:u.formatMessage({id:"filters.date.accessibility.label.to"}),timeAriaLabel:u.formatMessage({id:"filters.time.accessibility.label.to"}),dateInputHintId:St,timeInputHintId:It})),[u]),p=(0,j.useMemo)((()=>({dateInput:{emptyDate:u.formatMessage({id:"filters.staticPeriod.errors.emptyEndDate"}),invalidDate:u.formatMessage({id:"filters.staticPeriod.errors.invalidEndDate"},{format:o||ut(u.locale)}),startDateAfterEndDate:u.formatMessage({id:"filters.staticPeriod.errors.endDateBeforeStartDate"})},timeInput:{startTimeAfterEndTime:u.formatMessage({id:"filters.staticPeriod.errors.endTimeBeforeStartTime"})}})),[u,o]);return(0,ie.jsx)(xt,{ref:m,date:e,time:t,onDateChange:n,onTimeChange:r,onDateInputKeyDown:i,dateInputLabel:u.formatMessage({id:"filters.staticPeriod.dateTo"}),timeInputLabel:u.formatMessage({id:"filters.staticPeriod.timeTo"}),dateTimeLegendLabel:u.formatMessage({id:"filters.staticPeriod.dateTimeTo"}),accessibilityConfig:g,dateFormat:o,isMobile:a,onDayClick:l,isTimeEnabled:s,className:fe("s-date-range-picker-to","gd-date-range-picker-to"),defaultTime:d,inputErrorMessageTexts:p,errors:c})}));Et.displayName="ToInputField";const Ft=(0,j.forwardRef)((({date:e,time:t,onDateInputKeyDown:i,onDateChange:n,onTimeChange:r,onInputClick:l,dateFormat:o,isMobile:a,isTimeEnabled:d,errors:c,intl:u,withoutApply:m},g)=>{const p=(0,j.useMemo)((()=>({dateAriaLabel:u.formatMessage({id:"filters.date.accessibility.label.from"}),timeAriaLabel:u.formatMessage({id:"filters.time.accessibility.label.from"}),dateInputHintId:St,timeInputHintId:It})),[u]),f=(0,j.useMemo)((()=>({dateInput:{emptyDate:u.formatMessage({id:"filters.staticPeriod.errors.emptyStartDate"}),invalidDate:u.formatMessage({id:"filters.staticPeriod.errors.invalidStartDate"},{format:o||ut(u.locale)}),startDateAfterEndDate:u.formatMessage({id:"filters.staticPeriod.errors.startDateAfterEndDate"})},timeInput:{startTimeAfterEndTime:u.formatMessage({id:"filters.staticPeriod.errors.startTimeAfterEndTime"})}})),[u,o]);return(0,ie.jsx)(xt,{ref:g,date:e,time:t,onDateChange:n,onTimeChange:r,onDateInputKeyDown:i,dateInputLabel:u.formatMessage({id:"filters.staticPeriod.dateFrom"}),timeInputLabel:u.formatMessage({id:"filters.staticPeriod.timeFrom"}),dateTimeLegendLabel:u.formatMessage({id:"filters.staticPeriod.dateTimeFrom"}),accessibilityConfig:p,dateFormat:o,isMobile:a,onDayClick:l,isTimeEnabled:d,className:fe("s-date-range-picker-from","gd-date-range-picker-from"),defaultTime:s,inputErrorMessageTexts:f,errors:c,withoutApply:m})}));Ft.displayName="FromInputField";const wt=()=>{const[e,t]=(0,j.useState)(!1),[i,n]=(0,j.useState)(),r=(0,j.useRef)(null),l=(0,j.useRef)(null),o=(0,j.useRef)(null),a=(0,j.useCallback)((()=>{n("from"),t(!0)}),[]),s=(0,j.useCallback)((()=>{n("to"),t(!0)}),[]),d=(0,j.useCallback)((i=>{!e||"Escape"!==i.key&&"Tab"!==i.key||(t(!1),i.stopPropagation())}),[e]),c=(0,j.useCallback)((()=>t(!1)),[]),u=(0,j.useCallback)((e=>{((e,t,i,n)=>t&&!t.contains(e.target)&&i&&!i.contains(e.target)&&n&&!n.contains(e.target))(e,o.current,r.current,l.current)&&t(!1)}),[]);return(0,j.useEffect)((()=>(document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u))),[u]),{selectedInput:i,isCalendarPopupOpen:e,onDateInputKeyDown:d,onStartDateClick:a,onEndDateClick:s,calendarPopupRef:o,startDateInputRef:r,endDateInputRef:l,closeCalendarPopup:c}},kt=(e,t,i,n)=>{const r=nt(i),l=nt(n);if(!r||!l||i<=n)return e(void 0),t(void 0),r&&l;const o=(s=n,!!(a=i)&&!!s&&a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()&&a.getDate()===s.getDate());var a,s;return e({isDateOrderError:!o,isTimeOrderError:o}),t(void 0),!1};function At(e,t,i){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:i}const Dt=(e,t,i,n,r)=>{const[l,o]=(0,j.useState)(e.from),[a,s]=(0,j.useState)(lt(e.from)),[d,c]=(0,j.useState)(e.to),[u,m]=(0,j.useState)(lt(e.to)),[g,p]=(0,j.useState)(),[f,h]=(0,j.useState)(),b=(0,j.useCallback)(((e,t)=>kt(p,h,e,t)),[]),y=(0,j.useCallback)(((e,t)=>kt(h,p,e,t)),[]),v=(0,j.useCallback)(((e,i,n)=>{const o=rt(At(e,"startDate",l),At(e,"startTime",a)),s=rt(At(e,"endDate",d),At(e,"endTime",u));t({from:o,to:s}),i(o,s)&&n&&setTimeout(r,0)}),[t,l,a,d,u,r]),C=(0,j.useCallback)(((e,t)=>{o(e),v({startDate:e},b,t)}),[v,b]),x=(0,j.useCallback)(((e,t)=>{c(e),v({endDate:e},y,t)}),[v,y]),S=(0,j.useCallback)(((e,t)=>{s(e),v({startTime:e},b,t)}),[v,b]),I=(0,j.useCallback)(((e,t)=>{m(e),v({endTime:e},y,t)}),[v,y]),E=(0,j.useCallback)(((e,t)=>{"from"===n?C(t):x(t),i()}),[n,i,C,x]);return{startDate:l,startTime:a,endDate:d,endTime:u,startDateTimeErrors:g,endDateTimeErrors:f,onCalendarDateSelect:E,onStartDateChange:C,onStartTimeChange:S,onEndDateChange:x,onEndTimeChange:I}};function Pt({range:e,onRangeChange:t,dateFormat:i,dayPickerProps:n,isMobile:r,isTimeEnabled:l,weekStart:o="Sunday",shouldOverlayDatePicker:a=!1,withoutApply:s=!1,submitForm:d}){const c=B(),{selectedInput:u,isCalendarPopupOpen:m,onDateInputKeyDown:g,onStartDateClick:p,onEndDateClick:f,calendarPopupRef:h,startDateInputRef:b,endDateInputRef:y,closeCalendarPopup:v}=wt(),{startDate:C,startTime:x,endDate:S,endTime:I,startDateTimeErrors:E,endDateTimeErrors:F,onCalendarDateSelect:w,onStartDateChange:k,onStartTimeChange:A,onEndDateChange:D,onEndTimeChange:P}=Dt(e,t,v,u,d),O=(0,ie.jsx)(Ft,{ref:b,date:C,time:x,onDateChange:k,onTimeChange:A,onInputClick:p,onDateInputKeyDown:g,dateFormat:i,isMobile:r,isTimeEnabled:l,errors:E,intl:c,withoutApply:s}),j=(0,ie.jsx)(Et,{ref:y,date:S,time:I,onDateChange:D,onTimeChange:P,onInputClick:f,onDateInputKeyDown:g,dateFormat:i,isMobile:r,isTimeEnabled:l,errors:F,intl:c}),T={from:C,to:S},N=(0,ie.jsx)(dt,{ref:h,mode:u,originalDateRange:T,selectedDateRange:T,onDateRangeSelect:w,alignTo:`.gd-date-range-picker-${l?u:"from"}`,calendarClassNames:`gd-date-range-picker-picker s-date-range-calendar-${u}`,dayPickerProps:n,weekStart:o,renderAsOverlay:a,intl:c}),M=r?null:(0,ie.jsx)(pt,{dateFormat:i,isTimeEnabled:l,dateHintId:St,timeHintId:It,intl:c});if(l){const e="from"===u&&m,t="to"===u&&m;return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)("div",{className:"gd-date-range-picker datetime s-date-range-picker",children:[O,e?N:null,j,t?N:null]}),M]})}return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)("div",{className:"gd-date-range-picker gd-date-range-row s-date-range-picker",children:[O,j]}),m?N:null,M]})}const Ot={mode:"range",weekStartsOn:0};function jt({dateFormat:e,isMobile:t,selectedFilterOption:i,isTimeEnabled:n,weekStart:r,shouldOverlayDatePicker:l,withoutApply:o,onSelectedFilterOptionChange:a,submitForm:s}){return(0,ie.jsx)(Pt,{dateFormat:e,onRangeChange:e=>{a(Oe(e,i.localIdentifier,n))},range:je(i,n),isMobile:t,dayPickerProps:Ot,isTimeEnabled:n,weekStart:r,shouldOverlayDatePicker:l,submitForm:s,withoutApply:o})}function Tt({children:e,isMobile:t,className:i,...n}){return(0,ie.jsx)("div",{className:fe(i,"gd-date-filter-form-wrapper",!t&&"gd-date-filter-form-wrapper-desktop"),...n,children:(0,ie.jsx)("div",{className:"gd-date-filter-form-wrapper-inner",children:e})})}const Nt="gd-date-filter-item-mobile";function Mt({filterOptions:e,selectedFilterOption:t,dateFormat:i,weekStart:n,isTimeForAbsoluteRangeEnabled:r,isMobile:l,route:o,withoutApply:a,changeRoute:s,onSelectedFilterOptionChange:d,closeDropdown:c,onApplyClick:u}){const m=(0,j.useCallback)((()=>{u(),c()}),[c,u]);if(!e.absoluteForm)return null;const p=e.absoluteForm.localIdentifier===t.localIdentifier,f="absoluteForm"===o;return(0,ie.jsxs)(ie.Fragment,{children:[l&&f?null:(0,ie.jsx)(Se,{isSelected:p,onClick:()=>{s("absoluteForm"),(0,g.isAbsoluteDateFilterForm)(t)||d(e.absoluteForm)},className:fe("s-absolute-form","s-do-not-close-dropdown-on-click",l&&Nt),children:e.absoluteForm.name?e.absoluteForm.name:(0,ie.jsx)(ke,{id:"filters.staticPeriod"})}),!p||l&&!f?null:(0,ie.jsx)(Tt,{isMobile:l,children:(0,ie.jsx)(jt,{dateFormat:i,onSelectedFilterOptionChange:d,selectedFilterOption:t,isMobile:l,isTimeEnabled:r,weekStart:n,submitForm:m,withoutApply:a})})]})}function Lt({className:e,filterOption:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,isFocusFallback:r}){return(0,ie.jsx)(Se,{isSelected:t.localIdentifier===i.localIdentifier,onClick:()=>n(t),className:fe("s-all-time",e),isFocusFallback:r,children:t.name?t.name:(0,ie.jsx)(ke,{id:"filters.allTime.title"})})}const Rt="gd-date-filter-item-mobile";function Bt({filterOptions:e,selectedFilterOption:t,isMobile:i,isFocusFallback:n,onSelectedFilterOptionChange:r}){return e.allTime?(0,ie.jsx)(Lt,{filterOption:e.allTime,selectedFilterOption:t,onSelectedFilterOptionChange:r,className:i?Rt:void 0,isFocusFallback:n}):null}var _t=i(67326);function Vt({className:e,children:t,...i}){const n=B();return(0,ie.jsx)("div",{role:"tablist","aria-label":n.formatMessage({id:"dateFilterDropdown.relativeForm.label"}),className:fe("gd-tabs small is-condensed",e),...i,children:t})}function Ht({selected:e,className:t,accessibilityConfig:i,onClick:n,children:r,...l}){return(0,ie.jsx)("button",{id:e?de:void 0,onClick:n,role:"tab","aria-selected":e,"aria-controls":e?i?.ariaControls:void 0,tabIndex:e?0:-1,className:fe(e&&"is-active","gd-tab",t),...l,children:r})}const Zt={"GDC.time.year":0,"GDC.time.quarter":1,"GDC.time.month":2,"GDC.time.week_us":3,"GDC.time.date":4,"GDC.time.hour":5,"GDC.time.minute":6};function Wt({availableGranularities:e,selectedGranularity:t,accessibilityConfig:i,onSelectedGranularityChange:n}){return(0,ie.jsx)(Vt,{className:"gd-relative-filter-form-granularity-tabs s-relative-filter-form-granularity-tabs",children:(r=e,(0,_t.Z)(r,(e=>Zt[e]))).map((e=>{const r=m[e];return void 0===r?null:(0,ie.jsx)(Ht,{selected:e===t,onClick:()=>n(e),className:`s-granularity-${r}`,accessibilityConfig:i,children:(0,ie.jsx)(ke,{id:Z[r].id})},e)})).filter(Boolean)});var r}var qt=i(25356),zt=i(63366),Gt=i(87462),Kt=i(97326),Ut=i(94578),$t=i(45697),Yt=i.n($t);function Qt(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Jt(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Xt(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var i=getComputedStyle(e,null);return Jt(i.overflowY,t)||Jt(i.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function ei(e,t,i,n,r,l,o,a){return l<e&&o>t||l>e&&o<t?0:l<=e&&a<=i||o>=t&&a>=i?l-e-n:o>t&&a<i||l<e&&a>i?o-t+r:0}i(59864);var ti=0;function ii(e){return"function"==typeof e?e:ni}function ni(){}function ri(e,t){if(null!==e){var i=function(e,t){var i=window,n=t.scrollMode,r=t.block,l=t.inline,o=t.boundary,a=t.skipOverflowHiddenElements,s="function"==typeof o?o:function(e){return e!==o};if(!Qt(e))throw new TypeError("Invalid target");for(var d,c,u=document.scrollingElement||document.documentElement,m=[],g=e;Qt(g)&&s(g);){if((g=null==(c=(d=g).parentElement)?d.getRootNode().host||null:c)===u){m.push(g);break}null!=g&&g===document.body&&Xt(g)&&!Xt(document.documentElement)||null!=g&&Xt(g,a)&&m.push(g)}for(var p=i.visualViewport?i.visualViewport.width:innerWidth,f=i.visualViewport?i.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),v=y.height,C=y.width,x=y.top,S=y.right,I=y.bottom,E=y.left,F="start"===r||"nearest"===r?x:"end"===r?I:x+v/2,w="center"===l?E+C/2:"end"===l?S:E,k=[],A=0;A<m.length;A++){var D=m[A],P=D.getBoundingClientRect(),O=P.height,j=P.width,T=P.top,N=P.right,M=P.bottom,L=P.left;if("if-needed"===n&&x>=0&&E>=0&&I<=f&&S<=p&&x>=T&&I<=M&&E>=L&&S<=N)return k;var R=getComputedStyle(D),B=parseInt(R.borderLeftWidth,10),_=parseInt(R.borderTopWidth,10),V=parseInt(R.borderRightWidth,10),H=parseInt(R.borderBottomWidth,10),Z=0,W=0,q="offsetWidth"in D?D.offsetWidth-D.clientWidth-B-V:0,z="offsetHeight"in D?D.offsetHeight-D.clientHeight-_-H:0,G="offsetWidth"in D?0===D.offsetWidth?0:j/D.offsetWidth:0,K="offsetHeight"in D?0===D.offsetHeight?0:O/D.offsetHeight:0;if(u===D)Z="start"===r?F:"end"===r?F-f:"nearest"===r?ei(b,b+f,f,_,H,b+F,b+F+v,v):F-f/2,W="start"===l?w:"center"===l?w-p/2:"end"===l?w-p:ei(h,h+p,p,B,V,h+w,h+w+C,C),Z=Math.max(0,Z+b),W=Math.max(0,W+h);else{Z="start"===r?F-T-_:"end"===r?F-M+H+z:"nearest"===r?ei(T,M,O,_,H+z,F,F+v,v):F-(T+O/2)+z/2,W="start"===l?w-L-B:"center"===l?w-(L+j/2)+q/2:"end"===l?w-N+V+q:ei(L,N,j,B,V+q,w,w+C,C);var U=D.scrollLeft,$=D.scrollTop;F+=$-(Z=Math.max(0,Math.min($+Z/K,D.scrollHeight-O/K+z))),w+=U-(W=Math.max(0,Math.min(U+W/G,D.scrollWidth-j/G+q)))}k.push({el:D,top:Z,left:W})}return k}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});i.forEach((function(e){var t=e.el,i=e.top,n=e.left;t.scrollTop=i,t.scrollLeft=n}))}}function li(e,t){return e===t||e.contains&&e.contains(t)}function oi(e,t){var i;function n(){i&&clearTimeout(i)}function r(){for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];n(),i=setTimeout((function(){i=null,e.apply(void 0,l)}),t)}return r.cancel=n,r}function ai(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.some((function(t){return t&&t.apply(void 0,[e].concat(n)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function si(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function di(e){var t=e.isOpen,i=e.selectedItem,n=e.resultCount,r=e.previousResultCount,l=e.itemToString;return t?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":i?l(i):""}function ci(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}var ui=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function mi(e){void 0===e&&(e={});var t={};return ui.forEach((function(i){e.hasOwnProperty(i)&&(t[i]=e[i])})),t}function gi(e){var t=e.key,i=e.keyCode;return i>=37&&i<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function pi(e,t,i){var n=i-1;("number"!=typeof t||t<0||t>=i)&&(t=e>0?-1:n+1);var r=t+e;return r<0?r=n:r>n&&(r=0),r}var fi=oi((function(){hi().textContent=""}),500);function hi(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var bi=Object.freeze({__proto__:null,unknown:0,mouseUp:1,itemMouseEnter:2,keyDownArrowUp:3,keyDownArrowDown:4,keyDownEscape:5,keyDownEnter:6,keyDownHome:7,keyDownEnd:8,clickItem:9,blurInput:10,changeInput:11,keyDownSpaceButton:12,clickButton:13,blurButton:14,controlledPropUpdatedSelectedItem:15,touchEnd:16}),yi=function(){var e=function(e){function t(t){var i=e.call(this,t)||this;i.id=i.props.id||"downshift-"+String(ti++),i.menuId=i.props.menuId||i.id+"-menu",i.labelId=i.props.labelId||i.id+"-label",i.inputId=i.props.inputId||i.id+"-input",i.getItemId=i.props.getItemId||function(e){return i.id+"-item-"+e},i.input=null,i.items=[],i.itemCount=null,i.previousResultCount=0,i.timeoutIds=[],i.internalSetTimeout=function(e,t){var n=setTimeout((function(){i.timeoutIds=i.timeoutIds.filter((function(e){return e!==n})),e()}),t);i.timeoutIds.push(n)},i.setItemCount=function(e){i.itemCount=e},i.unsetItemCount=function(){i.itemCount=null},i.setHighlightedIndex=function(e,t){void 0===e&&(e=i.props.defaultHighlightedIndex),void 0===t&&(t={}),t=mi(t),i.internalSetState((0,Gt.Z)({highlightedIndex:e},t))},i.clearSelection=function(e){i.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:i.props.defaultHighlightedIndex,isOpen:i.props.defaultIsOpen},e)},i.selectItem=function(e,t,n){t=mi(t),i.internalSetState((0,Gt.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,selectedItem:e,inputValue:i.props.itemToString(e)},t),n)},i.selectItemAtIndex=function(e,t,n){var r=i.items[e];null!=r&&i.selectItem(r,t,n)},i.selectHighlightedItem=function(e,t){return i.selectItemAtIndex(i.getState().highlightedIndex,e,t)},i.internalSetState=function(e,t){var n,r,l={},o="function"==typeof e;return!o&&e.hasOwnProperty("inputValue")&&i.props.onInputValueChange(e.inputValue,(0,Gt.Z)({},i.getStateAndHelpers(),{},e)),i.setState((function(t){t=i.getState(t);var a=o?e(t):e;a=i.props.stateReducer(t,a),n=a.hasOwnProperty("selectedItem");var s={},d={};return n&&a.selectedItem!==t.selectedItem&&(r=a.selectedItem),a.type=a.type||0,Object.keys(a).forEach((function(e){t[e]!==a[e]&&(l[e]=a[e]),"type"!==e&&(d[e]=a[e],i.isControlledProp(e)||(s[e]=a[e]))})),o&&a.hasOwnProperty("inputValue")&&i.props.onInputValueChange(a.inputValue,(0,Gt.Z)({},i.getStateAndHelpers(),{},a)),s}),(function(){ii(t)(),Object.keys(l).length>1&&i.props.onStateChange(l,i.getStateAndHelpers()),n&&i.props.onSelect(e.selectedItem,i.getStateAndHelpers()),void 0!==r&&i.props.onChange(r,i.getStateAndHelpers()),i.props.onUserAction(l,i.getStateAndHelpers())}))},i.rootRef=function(e){return i._rootNode=e},i.getRootProps=function(e,t){var n,r=void 0===e?{}:e,l=r.refKey,o=void 0===l?"ref":l,a=r.ref,s=(0,zt.Z)(r,["refKey","ref"]),d=(void 0===t?{}:t).suppressRefError,c=void 0!==d&&d;i.getRootProps.called=!0,i.getRootProps.refKey=o,i.getRootProps.suppressRefError=c;var u=i.getState().isOpen;return(0,Gt.Z)(((n={})[o]=si(a,i.rootRef),n.role="combobox",n["aria-expanded"]=u,n["aria-haspopup"]="listbox",n["aria-owns"]=u?i.menuId:null,n["aria-labelledby"]=i.labelId,n),s)},i.keyDownHandlers={ArrowDown:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var i=e.shiftKey?5:1;this.moveHighlightedIndex(i,{type:4})}else this.internalSetState({isOpen:!0,type:4},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(pi(1,t.getState().highlightedIndex,e),{type:4})}))},ArrowUp:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var i=e.shiftKey?-5:-1;this.moveHighlightedIndex(i,{type:3})}else this.internalSetState({isOpen:!0,type:3},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(pi(-1,t.getState().highlightedIndex,e),{type:4})}))},Enter:function(e){var t=this.getState(),i=t.isOpen,n=t.highlightedIndex;if(i&&null!=n){e.preventDefault();var r=this.items[n],l=this.getItemNodeFromIndex(n);if(null==r||l&&l.hasAttribute("disabled"))return;this.selectHighlightedItem({type:6})}},Escape:function(e){e.preventDefault(),this.reset({type:5,selectedItem:null,inputValue:""})}},i.buttonKeyDownHandlers=(0,Gt.Z)({},i.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:12})}}),i.inputKeyDownHandlers=(0,Gt.Z)({},i.keyDownHandlers,{Home:function(e){this.highlightFirstOrLastIndex(e,!0,{type:7})},End:function(e){this.highlightFirstOrLastIndex(e,!1,{type:8})}}),i.getToggleButtonProps=function(e){var t=void 0===e?{}:e,n=t.onClick,r=(t.onPress,t.onKeyDown),l=t.onKeyUp,o=t.onBlur,a=(0,zt.Z)(t,["onClick","onPress","onKeyDown","onKeyUp","onBlur"]),s=i.getState().isOpen,d={onClick:ai(n,i.buttonHandleClick),onKeyDown:ai(r,i.buttonHandleKeyDown),onKeyUp:ai(l,i.buttonHandleKeyUp),onBlur:ai(o,i.buttonHandleBlur)},c=a.disabled?{}:d;return(0,Gt.Z)({type:"button",role:"button","aria-label":s?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},c,{},a)},i.buttonHandleKeyUp=function(e){e.preventDefault()},i.buttonHandleKeyDown=function(e){var t=gi(e);i.buttonKeyDownHandlers[t]&&i.buttonKeyDownHandlers[t].call((0,Kt.Z)(i),e)},i.buttonHandleClick=function(e){e.preventDefault(),i.props.environment.document.activeElement===i.props.environment.document.body&&e.target.focus(),i.internalSetTimeout((function(){return i.toggleMenu({type:13})}))},i.buttonHandleBlur=function(e){var t=e.target;i.internalSetTimeout((function(){i.isMouseDown||null!=i.props.environment.document.activeElement&&i.props.environment.document.activeElement.id===i.inputId||i.props.environment.document.activeElement===t||i.reset({type:14})}))},i.getLabelProps=function(e){return(0,Gt.Z)({htmlFor:i.inputId,id:i.labelId},e)},i.getInputProps=function(e){var t,n=void 0===e?{}:e,r=n.onKeyDown,l=n.onBlur,o=n.onChange,a=n.onInput,s=(n.onChangeText,(0,zt.Z)(n,["onKeyDown","onBlur","onChange","onInput","onChangeText"])),d={},c=i.getState(),u=c.inputValue,m=c.isOpen,g=c.highlightedIndex;return s.disabled||((t={}).onChange=ai(o,a,i.inputHandleChange),t.onKeyDown=ai(r,i.inputHandleKeyDown),t.onBlur=ai(l,i.inputHandleBlur),d=t),(0,Gt.Z)({"aria-autocomplete":"list","aria-activedescendant":m&&"number"==typeof g&&g>=0?i.getItemId(g):null,"aria-controls":m?i.menuId:null,"aria-labelledby":i.labelId,autoComplete:"off",value:u,id:i.inputId},d,{},s)},i.inputHandleKeyDown=function(e){var t=gi(e);t&&i.inputKeyDownHandlers[t]&&i.inputKeyDownHandlers[t].call((0,Kt.Z)(i),e)},i.inputHandleChange=function(e){i.internalSetState({type:11,isOpen:!0,inputValue:e.target.value,highlightedIndex:i.props.defaultHighlightedIndex})},i.inputHandleBlur=function(){i.internalSetTimeout((function(){var e=i.props.environment.document&&!!i.props.environment.document.activeElement&&!!i.props.environment.document.activeElement.dataset&&i.props.environment.document.activeElement.dataset.toggle&&i._rootNode&&i._rootNode.contains(i.props.environment.document.activeElement);i.isMouseDown||e||i.reset({type:10})}))},i.menuRef=function(e){i._menuNode=e},i.getMenuProps=function(e,t){var n,r=void 0===e?{}:e,l=r.refKey,o=void 0===l?"ref":l,a=r.ref,s=(0,zt.Z)(r,["refKey","ref"]),d=(void 0===t?{}:t).suppressRefError,c=void 0!==d&&d;return i.getMenuProps.called=!0,i.getMenuProps.refKey=o,i.getMenuProps.suppressRefError=c,(0,Gt.Z)(((n={})[o]=si(a,i.menuRef),n.role="listbox",n["aria-labelledby"]=s&&s["aria-label"]?null:i.labelId,n.id=i.menuId,n),s)},i.getItemProps=function(e){var t,n=void 0===e?{}:e,r=n.onMouseMove,l=n.onMouseDown,o=n.onClick,a=(n.onPress,n.index),s=n.item,d=void 0===s?void 0:s,c=(0,zt.Z)(n,["onMouseMove","onMouseDown","onClick","onPress","index","item"]);void 0===a?(i.items.push(d),a=i.items.indexOf(d)):i.items[a]=d;var u=o,m=((t={onMouseMove:ai(r,(function(){a!==i.getState().highlightedIndex&&(i.setHighlightedIndex(a,{type:2}),i.avoidScrolling=!0,i.internalSetTimeout((function(){return i.avoidScrolling=!1}),250))})),onMouseDown:ai(l,(function(e){e.preventDefault()}))}).onClick=ai(u,(function(){i.selectItemAtIndex(a,{type:9})})),t),g=c.disabled?{onMouseDown:m.onMouseDown}:m;return(0,Gt.Z)({id:i.getItemId(a),role:"option","aria-selected":i.getState().highlightedIndex===a},g,{},c)},i.clearItems=function(){i.items=[]},i.reset=function(e,t){void 0===e&&(e={}),e=mi(e),i.internalSetState((function(t){var n=t.selectedItem;return(0,Gt.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,inputValue:i.props.itemToString(n)},e)}),t)},i.toggleMenu=function(e,t){void 0===e&&(e={}),e=mi(e),i.internalSetState((function(t){var n=t.isOpen;return(0,Gt.Z)({isOpen:!n},n&&{highlightedIndex:i.props.defaultHighlightedIndex},{},e)}),(function(){var n=i.getState(),r=n.isOpen,l=n.highlightedIndex;r&&i.getItemCount()>0&&"number"==typeof l&&i.setHighlightedIndex(l,e),ii(t)()}))},i.openMenu=function(e){i.internalSetState({isOpen:!0},e)},i.closeMenu=function(e){i.internalSetState({isOpen:!1},e)},i.updateStatus=oi((function(){var e=i.getState(),t=i.items[e.highlightedIndex],n=i.getItemCount(),r=i.props.getA11yStatusMessage((0,Gt.Z)({itemToString:i.props.itemToString,previousResultCount:i.previousResultCount,resultCount:n,highlightedItem:t},e));i.previousResultCount=n,function(e,t){var i=hi(t);e&&(i.textContent=e,fi())}(r,i.props.environment.document)}),200);var n=i.props,r=n.defaultHighlightedIndex,l=n.initialHighlightedIndex,o=void 0===l?r:l,a=n.defaultIsOpen,s=n.initialIsOpen,d=void 0===s?a:s,c=n.initialInputValue,u=void 0===c?"":c,m=n.initialSelectedItem,g=void 0===m?null:m,p=i.getState({highlightedIndex:o,isOpen:d,inputValue:u,selectedItem:g});return null!=p.selectedItem&&void 0===i.props.initialInputValue&&(p.inputValue=i.props.itemToString(p.selectedItem)),i.state=p,i}(0,Ut.Z)(t,e);var i=t.prototype;return i.internalClearTimeouts=function(){this.timeoutIds.forEach((function(e){clearTimeout(e)})),this.timeoutIds=[]},i.getState=function(e){var t=this;return void 0===e&&(e=this.state),Object.keys(e).reduce((function(i,n){return i[n]=t.isControlledProp(n)?t.props[n]:e[n],i}),{})},i.isControlledProp=function(e){return void 0!==this.props[e]},i.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},i.getItemNodeFromIndex=function(e){return this.props.environment.document.getElementById(this.getItemId(e))},i.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},i.moveHighlightedIndex=function(e,t){var i=this.getItemCount();if(i>0){var n=pi(e,this.getState().highlightedIndex,i);this.setHighlightedIndex(n,t)}},i.highlightFirstOrLastIndex=function(e,t,i){var n=this.getItemCount()-1;n<0||!this.getState().isOpen||(e.preventDefault(),this.setHighlightedIndex(t?0:n,i))},i.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,i=e.inputValue,n=e.selectedItem,r=e.isOpen,l=this.props.itemToString,o=this.id,a=this.getRootProps,s=this.getToggleButtonProps,d=this.getLabelProps,c=this.getMenuProps,u=this.getInputProps,m=this.getItemProps,g=this.openMenu,p=this.closeMenu,f=this.toggleMenu,h=this.selectItem,b=this.selectItemAtIndex,y=this.selectHighlightedItem,v=this.setHighlightedIndex,C=this.clearSelection,x=this.clearItems;return{getRootProps:a,getToggleButtonProps:s,getLabelProps:d,getMenuProps:c,getInputProps:u,getItemProps:m,reset:this.reset,openMenu:g,closeMenu:p,toggleMenu:f,selectItem:h,selectItemAtIndex:b,selectHighlightedItem:y,setHighlightedIndex:v,clearSelection:C,clearItems:x,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:l,id:o,highlightedIndex:t,inputValue:i,isOpen:r,selectedItem:n}},i.componentDidMount=function(){var e=this,t=function(t,i){void 0===i&&(i=!0);var n=e.props.environment.document;return[e._rootNode,e._menuNode].some((function(e){return e&&(li(e,t)||i&&li(e,n.activeElement))}))},i=function(){e.isMouseDown=!0},n=function(i){e.isMouseDown=!1,!t(i.target)&&e.getState().isOpen&&e.reset({type:1},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},r=function(){e.isTouchMove=!1},l=function(){e.isTouchMove=!0},o=function(i){var n=t(i.target,!1);e.isTouchMove||n||!e.getState().isOpen||e.reset({type:16},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},a=this.props.environment;a.addEventListener("mousedown",i),a.addEventListener("mouseup",n),a.addEventListener("touchstart",r),a.addEventListener("touchmove",l),a.addEventListener("touchend",o),this.cleanup=function(){e.internalClearTimeouts(),e.updateStatus.cancel(),a.removeEventListener("mousedown",i),a.removeEventListener("mouseup",n),a.removeEventListener("touchstart",r),a.removeEventListener("touchmove",l),a.removeEventListener("touchend",o)}},i.shouldScroll=function(e,t){var i=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,n=(void 0===t.highlightedIndex?e:t).highlightedIndex;return i&&this.getState().isOpen&&!e.isOpen||i!==n},i.componentDidUpdate=function(e,t){this.isControlledProp("selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:15,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},i.componentWillUnmount=function(){this.cleanup()},i.render=function(){var e=ci(this.props.children,ni);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var t=ci(e(this.getStateAndHelpers()));return t?this.getRootProps.called||this.props.suppressRefError?t:function(e){return"string"==typeof e.type}(t)?(0,j.cloneElement)(t,this.getRootProps(function(e){return e.props}(t))):void 0:null},t}(j.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:di,itemToString:function(e){return null==e?"":String(e)},onStateChange:ni,onInputValueChange:ni,onUserAction:ni,onChange:ni,onSelect:ni,onOuterClick:ni,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?{}:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:ri},e.stateChangeTypes=bi,e}();Yt().array.isRequired,Yt().func,Yt().func,Yt().func,Yt().bool,Yt().number,Yt().number,Yt().number,Yt().bool,Yt().bool,Yt().bool,Yt().any,Yt().any,Yt().any,Yt().string,Yt().string,Yt().string,Yt().func,Yt().string,Yt().func,Yt().func,Yt().func,Yt().func,Yt().func,Yt().shape({addEventListener:Yt().func,removeEventListener:Yt().func,document:Yt().shape({getElementById:Yt().func,activeElement:Yt().any,body:Yt().any})}),"undefined"==typeof window||window;const vi=yi;var Ci=i(96446);const xi=e=>"option"===e?.type&&e.label?e.label:"",Si=e=>e.filter((e=>"option"===e.type)),Ii="GDC.time.date",Ei={inputCategory:"Empty"},Fi={inputCategory:"TooBig"},wi={"GDC.time.minute":120,"GDC.time.hour":48,[Ii]:365,"GDC.time.week_us":104,"GDC.time.month":60,"GDC.time.quarter":20,"GDC.time.year":20},ki=e=>e?.trim(),Ai=e=>{if(!e)return Ei;const t=/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e);if(t){const n=t[1],r=Number.parseInt(n,10);return i=r,Math.abs(i)<=99999?{offset:r,isOnlyNumber:n===e,inputCategory:"Numeric"}:Fi}var i;return{inputCategory:"Textual",trimmedValue:e}},Di=(e,t,i)=>{const n=m[t],r=e<0?"history":0===e?"today":"future";return{type:"option",value:e,label:void 0===n?t:i.formatMessage(Z[`${n}_${r}`],{offset:e,n:Math.abs(e)})}},Pi=(e,t,i)=>e.map((e=>Di(e,t,i))),Oi=(e,t,i,n)=>{const r=e.toLowerCase(),l=((e,t,i)=>{const n=[-1,0,1],r=Math.abs(e),l=void 0!==e&&r>1?[-r,...n,r]:n;return Pi(l,t,i)})(t,i,n).filter((e=>e.label.toLowerCase().includes(r)));return l.length>0?l:(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.noMatch"})}])(n)},ji=(e,t)=>{const i=ki(t);return Si(e).find((e=>e.label===i))},Ti=(e,t)=>{const i=ki(t);return Si(e).findIndex((e=>e.label===i))},Ni=(e,t)=>Si(e).find((e=>e.value===t));var Mi=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Li(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!((n=e[i])===(r=t[i])||Mi(n)&&Mi(r)))return!1;var n,r;return!0}const Ri=function(e,t){var i;void 0===t&&(t=Li);var n,r=[],l=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return l&&i===this&&t(o,r)||(n=e.apply(this,o),l=!0,i=this,r=o),n}};var Bi="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function _i(e){cancelAnimationFrame(e.id)}var Vi=-1;function Hi(e){if(void 0===e&&(e=!1),-1===Vi||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(t),Vi=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Vi}var Zi=null;function Wi(e){if(void 0===e&&(e=!1),null===Zi||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?Zi="positive-descending":(t.scrollLeft=1,Zi=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Zi}return Zi}var qi=function(e,t){return e};function zi(e){var t,i=e.getItemOffset,n=e.getEstimatedTotalSize,r=e.getItemSize,l=e.getOffsetForIndexAndAlignment,o=e.getStartIndexForOffset,a=e.getStopIndexForStartIndex,s=e.initInstanceProps,d=e.shouldResetStyleCacheOnItemSizeChange,c=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=s(n.props,(0,Kt.Z)(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:(0,Kt.Z)(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=Ri((function(e,t,i,r){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:i,visibleStopIndex:r})})),n._callOnScroll=void 0,n._callOnScroll=Ri((function(e,t,i){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:i})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,l=n.props,o=l.direction,a=l.itemSize,s=l.layout,c=n._getItemStyleCache(d&&a,d&&s,d&&o);if(c.hasOwnProperty(e))t=c[e];else{var u=i(n.props,e,n._instanceProps),m=r(n.props,e,n._instanceProps),g="horizontal"===o||"horizontal"===s,p="rtl"===o,f=g?u:0;c[e]=t={position:"absolute",left:p?void 0:f,right:p?f:void 0,top:g?0:u,height:g?"100%":m,width:g?m:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=Ri((function(e,t,i){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,i=t.clientWidth,r=t.scrollLeft,l=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===r)return null;var t=n.props.direction,o=r;if("rtl"===t)switch(Wi()){case"negative":o=-r;break;case"positive-descending":o=l-i-r}return o=Math.max(0,Math.min(o,l-i)),{isScrolling:!0,scrollDirection:e.scrollOffset<o?"forward":"backward",scrollOffset:o,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,i=t.clientHeight,r=t.scrollHeight,l=t.scrollTop;n.setState((function(e){if(e.scrollOffset===l)return null;var t=Math.max(0,Math.min(l,r-i));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){var e,t,i,r;null!==n._resetIsScrollingTimeoutId&&_i(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=(e=n._resetIsScrolling,t=150,i=Bi(),r={id:requestAnimationFrame((function n(){Bi()-i>=t?e.call(null):r.id=requestAnimationFrame(n)}))})},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}(0,Ut.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return Gi(e,t),c(e),null};var u=t.prototype;return u.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},u.scrollToItem=function(e,t){void 0===t&&(t="auto");var i=this.props,n=i.itemCount,r=i.layout,o=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var a=0;if(this._outerRef){var s=this._outerRef;a="vertical"===r?s.scrollWidth>s.clientWidth?Hi():0:s.scrollHeight>s.clientHeight?Hi():0}this.scrollTo(l(this.props,e,t,o,this._instanceProps,a))},u.componentDidMount=function(){var e=this.props,t=e.direction,i=e.initialScrollOffset,n=e.layout;if("number"==typeof i&&null!=this._outerRef){var r=this._outerRef;"horizontal"===t||"horizontal"===n?r.scrollLeft=i:r.scrollTop=i}this._callPropsCallbacks()},u.componentDidUpdate=function(){var e=this.props,t=e.direction,i=e.layout,n=this.state,r=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var l=this._outerRef;if("horizontal"===t||"horizontal"===i)if("rtl"===t)switch(Wi()){case"negative":l.scrollLeft=-r;break;case"positive-ascending":l.scrollLeft=r;break;default:var o=l.clientWidth,a=l.scrollWidth;l.scrollLeft=a-o-r}else l.scrollLeft=r;else l.scrollTop=r}this._callPropsCallbacks()},u.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&_i(this._resetIsScrollingTimeoutId)},u.render=function(){var e=this.props,t=e.children,i=e.className,r=e.direction,l=e.height,o=e.innerRef,a=e.innerElementType,s=e.innerTagName,d=e.itemCount,c=e.itemData,u=e.itemKey,m=void 0===u?qi:u,g=e.layout,p=e.outerElementType,f=e.outerTagName,h=e.style,b=e.useIsScrolling,y=e.width,v=this.state.isScrolling,C="horizontal"===r||"horizontal"===g,x=C?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),I=S[0],E=S[1],F=[];if(d>0)for(var w=I;w<=E;w++)F.push((0,j.createElement)(t,{data:c,key:m(w,c),index:w,isScrolling:b?v:void 0,style:this._getItemStyle(w)}));var k=n(this.props,this._instanceProps);return(0,j.createElement)(p||f||"div",{className:i,onScroll:x,ref:this._outerRefSetter,style:(0,Gt.Z)({position:"relative",height:l,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},h)},(0,j.createElement)(a||s||"div",{children:F,ref:o,style:{height:C?"100%":k,pointerEvents:v?"none":void 0,width:C?k:"100%"}}))},u._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],i=e[1],n=e[2],r=e[3];this._callOnItemsRendered(t,i,n,r)}if("function"==typeof this.props.onScroll){var l=this.state,o=l.scrollDirection,a=l.scrollOffset,s=l.scrollUpdateWasRequested;this._callOnScroll(o,a,s)}},u._getRangeToRender=function(){var e=this.props,t=e.itemCount,i=e.overscanCount,n=this.state,r=n.isScrolling,l=n.scrollDirection,s=n.scrollOffset;if(0===t)return[0,0,0,0];var d=o(this.props,s,this._instanceProps),c=a(this.props,d,s,this._instanceProps),u=r&&"backward"!==l?1:Math.max(1,i),m=r&&"forward"!==l?1:Math.max(1,i);return[Math.max(0,d-u),Math.max(0,Math.min(t-1,c+m)),d,c]},t}(j.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Gi=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Ki=function(e,t,i){var n=e.itemSize,r=i.itemMetadataMap,l=i.lastMeasuredIndex;if(t>l){var o=0;if(l>=0){var a=r[l];o=a.offset+a.size}for(var s=l+1;s<=t;s++){var d=n(s);r[s]={offset:o,size:d},o+=d}i.lastMeasuredIndex=t}return r[t]},Ui=function(e,t,i,n,r){for(;n<=i;){var l=n+Math.floor((i-n)/2),o=Ki(e,l,t).offset;if(o===r)return l;o<r?n=l+1:o>r&&(i=l-1)}return n>0?n-1:0},$i=function(e,t){var i=e.itemCount,n=t.itemMetadataMap,r=t.estimatedItemSize,l=t.lastMeasuredIndex,o=0;if(l>=i&&(l=i-1),l>=0){var a=n[l];o=a.offset+a.size}return o+(i-l-1)*r},Yi=zi({getItemOffset:function(e,t,i){return Ki(e,t,i).offset},getItemSize:function(e,t,i){return i.itemMetadataMap[t].size},getEstimatedTotalSize:$i,getOffsetForIndexAndAlignment:function(e,t,i,n,r,l){var o=e.direction,a=e.height,s=e.layout,d=e.width,c="horizontal"===o||"horizontal"===s?d:a,u=Ki(e,t,r),m=$i(e,r),g=Math.max(0,Math.min(m-c,u.offset)),p=Math.max(0,u.offset-c+u.size+l);switch("smart"===i&&(i=n>=p-c&&n<=g+c?"auto":"center"),i){case"start":return g;case"end":return p;case"center":return Math.round(p+(g-p)/2);default:return n>=p&&n<=g?n:n<p?p:g}},getStartIndexForOffset:function(e,t,i){return function(e,t,i){var n=t.itemMetadataMap,r=t.lastMeasuredIndex;return(r>0?n[r].offset:0)>=i?Ui(e,t,r,0,i):function(e,t,i,n){for(var r=e.itemCount,l=1;i<r&&Ki(e,i,t).offset<n;)i+=l,l*=2;return Ui(e,t,Math.min(i,r-1),Math.floor(i/2),n)}(e,t,Math.max(0,r),i)}(e,i,t)},getStopIndexForStartIndex:function(e,t,i,n){for(var r=e.direction,l=e.height,o=e.itemCount,a=e.layout,s=e.width,d="horizontal"===r||"horizontal"===a?s:l,c=Ki(e,t,n),u=i+d,m=c.offset+c.size,g=t;g<o-1&&m<u;)g++,m+=Ki(e,g,n).size;return g},initInstanceProps:function(e,t){var i={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),i.lastMeasuredIndex=Math.min(i.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},i},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});function Qi({children:e,className:t,...i}){return(0,ie.jsx)("div",{className:fe("gd-select-heading gd-list-item gd-list-item-header",t),...i,children:e})}function Ji({isFocused:e,isSelected:t,className:i,children:n,...r}){return(0,ie.jsx)("div",{className:fe("gd-list-item","gd-select-option",t&&"gd-select-option-is-selected",e&&"gd-select-option-is-focused s-select-item-focused",i),...r,children:n})}function Xi({className:e,...t}){return(0,ie.jsx)("hr",{className:fe("gd-separator-generic",e),...t})}function en({className:e,...t}){return(0,ie.jsx)("div",{className:fe("gd-select-separator",e),...t,children:(0,ie.jsx)(Xi,{})})}const tn=3,nn={option:32,heading:22,error:22,separator:1},rn=e=>t=>{const i=e[t].type;return nn[i]},ln=e=>Math.floor(e.length/2);class on extends j.Component{static defaultProps={selectedItem:null,visibleItemsRange:tn};listRef=(0,j.createRef)();render(){const{items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,getMenuProps:r,className:l,optionClassName:o,visibleItemsRange:a}=this.props,s=(({items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,optionClassName:r})=>function({index:l,style:o}){const a=Si(e),s=e[l];if("option"===s.type){const e=n({item:s,index:a.indexOf(s),isSelected:!(!t||!s)&&t.value===s.value,className:r});return(0,ie.jsx)(Ji,{...e,isFocused:!(!a[i]||!s)&&a[i].value===s.value,style:o,children:s.label},`${s.type}-${s.value}`)}return"heading"===s.type||"error"===s.type?(0,ie.jsx)(Qi,{style:o,children:s.label},`${s.type}-${s.label}`):"separator"===s.type?(0,ie.jsx)(en,{style:o},`${s.type}-${l}`):null})({items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,optionClassName:o}),d=ln(Si(e)),c=(0,Ci.Z)(Math.max(d-a,0),Math.min(d+a+1,e.length)).reduce(((t,i)=>t+rn(e)(i)),0);return(0,ie.jsx)("div",{...r({className:fe("gd-select-menu-wrapper",l)}),children:(0,ie.jsx)("div",{className:"gd-select-menu s-select-menu",children:(0,ie.jsx)(Yi,{className:"List",ref:this.listRef,itemCount:e.length,itemSize:rn(e),height:c,width:"100%",overscanCount:10,estimatedItemSize:nn.option,style:1===e.length?{overflow:"hidden"}:void 0,children:s})})})}scrollToIndex=(e=this.props.highlightedIndex)=>{if(this.listRef.current){const{items:t}=this.props,i=Si(t)[null===e?ln(Si(t)):e],n=t.indexOf(i);this.listRef.current.scrollToItem(n,"center")}};scrollToTop=()=>{this.listRef.current&&this.listRef.current.scrollTo(0)};componentDidUpdate=e=>{const{highlightedIndex:t,items:i,setHighlightedIndex:n,inputValue:r}=this.props,l=Si(e.items).length-1,o=Si(i).length-1,a=0===e.highlightedIndex&&t===o,s=e.highlightedIndex===l&&0===t,d=""===r.trim(),c=""!==e.inputValue.trim()&&d,u=e.inputValue.trim()!==r.trim(),m=ln(Si(i));c?n(m):u&&n(0);const g=1===this.props.items.length;c?this.scrollToIndex(m):a||s?this.scrollToIndex():g&&this.scrollToTop()};componentDidMount(){if(this.props.inputValue)this.scrollToIndex();else{const e=ln(Si(this.props.items));this.props.setHighlightedIndex(e),this.scrollToIndex(e)}}}const an=(0,qt.b)(vi);function sn(e){const{initialIsOpen:t=!1,placeholder:i,getItems:n,value:r=null,className:l,style:o,optionClassName:a,visibleItemsRange:s=tn,accessibilityConfig:d,inputValue:c,onChange:u=(()=>{}),onInputValueChange:m,onBlur:g}=e,[p,f]=(0,j.useState)(""),h=(0,j.useCallback)((e=>{e&&(f(e.label),u(e.value))}),[u]),b=(0,j.useCallback)((e=>{f(e),m(e)}),[m]),y=(0,j.useCallback)(((e,t)=>{g?g():(t(e),b(e?e.label:""))}),[g,b]),v=(0,j.useCallback)((e=>{const t=e.target.value;b(t)}),[b]),C=(0,j.useMemo)((()=>null===r?[]:n(r.toString())),[n,r]),x=(0,j.useMemo)((()=>null!==r&&Ni(C,r)||null),[r,C]),S=(0,j.useCallback)((e=>{const t=n(e);return x&&e.trim()!==x.label&&!Ni(t,x.value)?x.value<0?[x,...t]:[...t,x]:t}),[n,x]),I=(0,j.useMemo)((()=>S(p)),[S,p]),E=(0,j.useMemo)((()=>Si(I)),[I]),F=""!==p.trim(),w=x?Ti(E,x.label):void 0,k=F?0:x?w:ln(E),A=(0,j.useCallback)(((e,t)=>{const i=S(t),n=Si(i);e(x?Ti(n,x.label):ln(n))}),[x,S]);return(0,ie.jsx)(an,{onChange:h,itemToString:xi,initialIsOpen:t,selectedItem:x,itemCount:E.length,inputValue:c,defaultHighlightedIndex:k,children:({getInputProps:e,getMenuProps:t,getItemProps:n,isOpen:r,openMenu:u,closeMenu:m,highlightedIndex:g,setHighlightedIndex:h,selectItem:b})=>{const C=""!==p.trim()&&g>E.length-1?0:g,S={items:I,selectedItem:x,highlightedIndex:C,getItemProps:n,getMenuProps:t,className:"gd-dynamic-select-menu",optionClassName:a,inputValue:c,setHighlightedIndex:h,visibleItemsRange:s};return(0,ie.jsxs)("div",{className:fe("gd-dynamic-select",l),style:o,"aria-labelledby":void 0,"aria-describedby":d?.descriptionId,onKeyDown:e=>{r&&"Tab"!==e.key&&e.stopPropagation(),r&&"Tab"===e.key&&m()},children:[(0,ie.jsx)("div",{className:"gd-dynamic-select-input-wrapper",children:(0,ie.jsx)("input",{type:"text",className:"s-relative-range-input gd-input-field","aria-describedby":d?.descriptionId,"aria-activedescendant":void 0,...e({"aria-autocomplete":"list","aria-labelledby":d?.labelId,placeholder:i,value:c,onFocus:()=>{""!==p.trim()&&(f(""),A(h,"")),u()},onChange:v,onBlur:()=>y(x,b)})})}),r&&I.length>0?(0,ie.jsx)(on,{...S}):null]})}})}var dn;function cn(e){return(0,ie.jsxs)("div",{className:fe(e.className,"gd-relative-range-picker-select-wrapper s-relative-range-picker-select-wrapper"),children:[(0,ie.jsx)("label",{className:"gd-label",id:e.labelId,children:e.label}),e.children,e.errorMessage?(0,ie.jsx)("div",{id:e.errorId,className:"s-gd-relative-range-picker-error gd-relative-range-picker-select-wrapper__error-message",children:e.errorMessage}):null]})}!function(e){e.INVALID_VALUE="INVALID_VALUE",e.EMPTY_VALUE="EMPTY_VALUE"}(dn||(dn={}));const un=(e,t)=>{const i=void 0===e?null:Ni(t,e);return i?xi(i):e?e.toString():""},mn=(0,j.memo)((function(e){const{label:t,value:i,inputValue:n,error:r,onChange:l,onInputChange:o,onBlur:a,commonProps:s,intl:d,isMobile:c,className:u,wrapperClassName:m}=e,g=(0,le.useIdPrefixed)("label");return(0,ie.jsx)(cn,{label:t,labelId:g,errorMessage:r?.message,errorId:r?.id??"",className:m,children:(0,ie.jsx)(sn,{...s,value:i,onChange:l,inputValue:n,onInputValueChange:o,onBlur:a,placeholder:d.formatMessage({id:"filters.relative.placeholder"}),className:fe(u,"gd-relative-range-picker-picker",{"gd-relative-range-picker-picker-mobile":c,"has-error":null!==r}),accessibilityConfig:{labelId:g,...r&&{descriptionId:r.id}}})})}));function gn({selectedFilterOption:e,isMobile:t,accessibilityConfig:i,id:n,onSelectedFilterOptionChange:r}){const l=B(),o=(0,D.useValidationContextValue)((0,D.createInvalidNode)({id:"RelativeRangePicker",children:{from:(0,D.createInvalidNode)({id:"from"}),to:(0,D.createInvalidNode)({id:"to"})}})),{setInvalidDatapoints:a,getInvalidDatapoints:s}=o,d=s({path:["from"]})[0]??null,c=s({path:["to"]})[0]??null,u=(0,j.useCallback)(((e,t)=>{a((()=>[!!t&&(0,D.createInvalidDatapoint)({message:t})]),[e])}),[a]),m=(0,j.useMemo)((()=>((e,t,i)=>n=>{const r=function(e="",t=Ii,i){const n=ki(e),r=Ai(n);switch(r.inputCategory){case"Empty":return((e,t)=>{const i=wi[e],n=Pi((0,Ci.Z)(-i,0),e,t),r=Pi((0,Ci.Z)(1,i+1),e,t);return[...n,{type:"separator"},Di(0,e,t),{type:"separator"},...r]})(t,i);case"TooBig":return(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.tooBig"},{limit:99999})}])(i);case"Textual":return Oi(r.trimmedValue,void 0,t,i);case"Numeric":{const{offset:e,isOnlyNumber:l}=r;return l?((e,t,i)=>Pi(e>0?[e,-e]:[e],t,i))(e,t,i):Oi(n,e,t,i)}}}(n,e,i);return t?r.filter((e=>"separator"!==e.type)):r})(e.granularity,t,l)),[e.granularity,t,l]),[g,p]=(0,j.useState)(un(e.from,void 0===e.from?[]:m(e.from.toString()))),[f,h]=(0,j.useState)(un(e.to,void 0===e.to?[]:m(e.to.toString()))),b=(0,j.useMemo)((()=>({visibleItemsRange:t?5:tn,optionClassName:"s-relative-date-filter-option s-do-not-close-dropdown-on-click",getItems:m,inputValue:"",onInputValueChange:()=>{}})),[t,m]),y=(0,j.useCallback)((t=>{r({...e,from:t}),void 0!==t&&(p(un(t,m(t?.toString()))),u("from",null))}),[r,e,m,u]),v=(0,j.useCallback)((t=>{r({...e,to:t}),void 0!==t&&(h(un(t,m(t?.toString()))),u("to",null))}),[r,e,m,u]),C=(0,j.useCallback)((e=>{if(""===e)return dn.EMPTY_VALUE;const t=m(e);return ji(t,e)?null:dn.INVALID_VALUE}),[m]),x=(0,j.useCallback)((e=>{if(p(e),C(e))y(void 0);else{u("from",null);const t=m(e),i=ji(t,e);i&&y(i.value)}}),[C,y,u,m]),S=(0,j.useCallback)((e=>{if(h(e),C(e))v(void 0);else{u("to",null);const t=m(e),i=ji(t,e);i&&v(i.value)}}),[C,v,u,m]),I=(0,j.useCallback)((()=>{const e=C(g);if(e){switch(e){case dn.INVALID_VALUE:u("from",l.formatMessage({id:"filters.relative.from.invalid.value"}));break;case dn.EMPTY_VALUE:u("from",l.formatMessage({id:"filters.relative.from.empty.value"}))}y(void 0)}else u("from",null)}),[C,g,y,u,l]),E=(0,j.useCallback)((()=>{const e=C(f);if(e){switch(e){case dn.INVALID_VALUE:u("to",l.formatMessage({id:"filters.relative.to.invalid.value"}));break;case dn.EMPTY_VALUE:u("to",l.formatMessage({id:"filters.relative.to.empty.value"}))}v(void 0)}else u("to",null)}),[C,f,v,u,l]);return(0,ie.jsxs)("div",{id:n,className:"gd-relative-range-picker s-relative-range-picker",role:i?.role,"aria-labelledby":i?.ariaLabelledBy,children:[(0,ie.jsx)(mn,{className:"s-relative-range-picker-from",wrapperClassName:"s-relative-range-picker-from-wrapper",label:l.formatMessage({id:"filters.relative.from.label"}),value:e.from,inputValue:g,error:d,onChange:y,onInputChange:x,onBlur:I,commonProps:b,intl:l,isMobile:t}),(0,ie.jsx)(mn,{className:"s-relative-range-picker-to",wrapperClassName:"s-relative-range-picker-to-wrapper",label:l.formatMessage({id:"filters.relative.to.label"}),value:e.to,inputValue:f,error:c,onChange:v,onInputChange:S,onBlur:E,commonProps:b,intl:l,isMobile:t})]})}const pn=(0,j.forwardRef)((({relativeDateFilterId:e,selectedFilterOption:t,availableGranularities:i,onSelectedFilterOptionChange:n,isMobile:r,onKeyDown:l},o)=>(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)("div",{ref:o,children:(0,ie.jsx)(Wt,{availableGranularities:i,selectedGranularity:t.granularity,onSelectedGranularityChange:e=>n({...t,...t.granularity!==e&&{from:void 0,to:void 0},granularity:e}),accessibilityConfig:{ariaControls:e}})}),(0,ie.jsx)("div",{onKeyDown:l,children:(0,ie.jsx)(gn,{selectedFilterOption:t,onSelectedFilterOptionChange:n,isMobile:r,accessibilityConfig:{ariaLabelledBy:de,role:"tabpanel"},id:e},t.granularity)})]})));pn.displayName="RelativeDateFilterForm";const fn="gd-date-filter-item-mobile";function hn({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,availableGranularities:r,errors:l,withoutApply:o,onSelectedFilterOptionChange:a,changeRoute:s,closeDropdown:d,onApplyClick:c}){const u=(0,j.useRef)(null),m=(0,j.useRef)(null),p=(0,le.useId)(),f=(0,j.useCallback)(((e,t)=>{ge({relativeDateFilterRef:u,tabGranularityRef:m,closeDropdown:t})(e)}),[u,m]);if(!e.relativeForm)return null;const b=e.relativeForm.localIdentifier===t.localIdentifier,y="relativeForm"===n;return(0,ie.jsxs)(ie.Fragment,{children:[i&&y?null:(0,ie.jsx)(Se,{isSelected:b,onClick:()=>{s("relativeForm"),(0,g.isRelativeDateFilterForm)(t)||a(e.relativeForm)},className:fe("s-relative-form","s-do-not-close-dropdown-on-click",i&&fn),children:e.relativeForm.name?e.relativeForm.name:(0,ie.jsx)(ke,{id:"filters.floatingRange"})}),!b||i&&!y?null:(0,ie.jsx)(Tt,{isMobile:i,children:(0,ie.jsx)("div",{ref:u,onKeyDown:e=>f(e,d),children:(0,ie.jsx)(pn,{onSelectedFilterOptionChange:a,selectedFilterOption:t,availableGranularities:r,isMobile:i,ref:m,relativeDateFilterId:p,onKeyDown:e=>pe(e,(0,h.Z)(l),o,d,c)})})})]})}const bn="gd-date-filter-item-mobile";function yn({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,errors:r,dateFormat:l,isTimeForAbsoluteRangeEnabled:o,weekStart:a,availableGranularities:s,withoutApply:d,closeDropdown:c,changeRoute:u,onApplyClick:m,onSelectedFilterOptionChange:g}){return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Bt,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:g,isMobile:i}),(0,ie.jsx)(Mt,{filterOptions:e,route:n,closeDropdown:c,onApplyClick:m,changeRoute:u,dateFormat:l,onSelectedFilterOptionChange:g,selectedFilterOption:t,isMobile:i,isTimeForAbsoluteRangeEnabled:o,weekStart:a,withoutApply:d}),(0,h.Z)(s)?null:(0,ie.jsx)(hn,{filterOptions:e,onSelectedFilterOptionChange:g,selectedFilterOption:t,availableGranularities:s,isMobile:i,changeRoute:u,route:n,errors:r||void 0,onApplyClick:m,closeDropdown:c,withoutApply:d}),e.absolutePreset&&e.absolutePreset.length>0?(0,ie.jsx)(Ie,{dateFormat:l,filterOptions:e.absolutePreset,selectedFilterOption:t,onSelectedFilterOptionChange:g,className:i?bn:void 0}):null,e.relativePreset?(0,ie.jsx)(Pe,{dateFormat:l,filterOption:e.relativePreset,selectedFilterOption:t,onSelectedFilterOptionChange:g,className:i?bn:void 0}):null]})}const vn="gd-date-filter-item-mobile";function Cn({filterOptions:e,selectedFilterOption:t,isMobile:i,dateFormat:n,onSelectedFilterOptionChange:r}){return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Bt,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:r,isMobile:i,isFocusFallback:t.localIdentifier===e.absoluteForm.localIdentifier||t.localIdentifier===e.relativeForm.localIdentifier}),e.absolutePreset&&e.absolutePreset.length>0?(0,ie.jsx)(Ie,{dateFormat:n,filterOptions:e.absolutePreset,selectedFilterOption:t,onSelectedFilterOptionChange:r,className:i?vn:void 0}):null,e.relativePreset?(0,ie.jsx)(Pe,{dateFormat:n,filterOption:e.relativePreset,selectedFilterOption:t,onSelectedFilterOptionChange:r,className:i?vn:void 0}):null]})}function xn({onBack:e,title:t,ariaLabel:i,...n}){const r=(0,le.useUiAutofocusConnectors)();return(0,ie.jsxs)("button",{tabIndex:0,className:"gd-extended-date-filter-header s-do-not-close-dropdown-on-click",onClick:t=>{t.preventDefault(),e()},"aria-label":i,...n,...r,children:[(0,ie.jsx)("span",{className:"gd-icon-navigateleft"})," ",t]})}function Sn({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,errors:r,dateFormat:l,isTimeForAbsoluteRangeEnabled:o,weekStart:a,availableGranularities:s,withoutApply:d,closeDropdown:c,onBack:u,onApplyClick:m,onSelectedFilterOptionChange:g,isRedesigned:p=!1}){const f=B();if(!p&&"absoluteForm"===n){const r=f.formatMessage({id:"filters.staticPeriod"});return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(xn,{onBack:()=>u(null),title:r}),(0,ie.jsx)(Mt,{filterOptions:e,route:n,closeDropdown:c,onApplyClick:m,changeRoute:u,dateFormat:l,onSelectedFilterOptionChange:g,selectedFilterOption:t,isMobile:i,isTimeForAbsoluteRangeEnabled:o,weekStart:a,withoutApply:d})]})}if(!p&&"relativeForm"===n){const l=f.formatMessage({id:"filters.floatingRange"});return(0,h.Z)(s)?null:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(xn,{onBack:()=>u(null),title:l}),(0,ie.jsx)(hn,{filterOptions:e,errors:r||void 0,onSelectedFilterOptionChange:g,selectedFilterOption:t,availableGranularities:s,isMobile:i,changeRoute:u,route:n,onApplyClick:m,closeDropdown:c,withoutApply:d})]})}return p?(0,ie.jsx)(Cn,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:g,isMobile:i,dateFormat:l}):(0,ie.jsx)(yn,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:g,isMobile:i,route:n,closeDropdown:c,onApplyClick:m,changeRoute:u,dateFormat:l,errors:r||void 0,isTimeForAbsoluteRangeEnabled:o,weekStart:a,availableGranularities:s})}const In=[{align:"bc tc",offset:{x:-1,y:5}}];function En(e){const{onConfiguration:t}=e;return(0,ie.jsx)("div",{className:"gd-date-filter-configuration-button s-gd-date-filter-configuration-button",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[(0,ie.jsx)(le.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:t}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary",alignPoints:In,children:(0,ie.jsx)(ke,{id:"dateFilterDropdown.configuration"})})]})})}function Fn(){return(0,ie.jsxs)("div",{className:"s-extended-date-filter-edit-mode-message gd-extended-date-filter-edit-mode-message",children:[(0,ie.jsx)("div",{className:"gd-extended-date-filter-edit-mode-message-text",children:(0,ie.jsx)(ke,{id:"dateFilterDropdown.setDefault",values:{nbsp:(0,ie.jsx)(ie.Fragment,{children:" "})}})}),(0,ie.jsx)("hr",{className:"gd-separator-generic"})]})}function wn({disabled:e,granularity:t}){const i=m[t],n=e||void 0===t||void 0===i?Z.allTimeExcluded.id:Z[`${i}Excluded`].id;return(0,ie.jsx)(ke,{id:n,children:(...e)=>(0,ie.jsx)("span",{className:"input-label-text",children:e})})}const kn=[{align:"tc bc"}];function An({value:e,onChange:t,disabled:i,granularity:n}){return(0,ie.jsx)("div",{className:"gd-extended-date-filter-exclude-current",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[(0,ie.jsxs)("label",{className:fe("s-exclude-current-period","input-checkbox-label",{"s-exclude-current-perod-enabled":!i,"s-exclude-current-perod-disabled":i}),children:[(0,ie.jsx)("input",{type:"checkbox",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked),disabled:i,onKeyDown:n=>{i||(0,le.isSpaceKey)(n)&&(n.preventDefault(),t(!e))}})," ",(0,ie.jsx)(wn,{granularity:n,disabled:i})]}),i?(0,ie.jsx)(le.Bubble,{alignPoints:kn,children:(0,ie.jsx)(ke,{id:"filters.excludeCurrentPeriod.unavailable"})}):null]})})}function Dn({className:e,children:t,...i}){return(0,ie.jsx)("div",{className:fe("gd-visible-scrollbar",e),...i,children:t})}const Pn=(0,j.forwardRef)(((e,t)=>{const[i,n]=(0,j.useState)(null),r=B(),l=(e=null)=>{n(e)};(0,j.useEffect)((()=>{e.isMobile&&((0,g.isAbsoluteDateFilterForm)(e.selectedFilterOption)?l("absoluteForm"):(0,g.isRelativeDateFilterForm)(e.selectedFilterOption)&&l("relativeForm"))}),[e.isMobile,e.selectedFilterOption]);const{isExcludeCurrentPeriodEnabled:o,isMobile:a,dateFilterButton:s,errors:d,isConfigurationEnabled:c,withoutApply:u,selectedFilterOption:m,isEditMode:p,excludeCurrentPeriod:f,filterOptions:b,showHeaderMessage:y=!0,dateFormat:v,isTimeForAbsoluteRangeEnabled:C,weekStart:S,availableGranularities:I,onApplyClick:E,onCancelClick:F,closeDropdown:w,onConfigurationClick:k,onExcludeCurrentPeriodChange:A,onSelectedFilterOptionChange:D}=e,P=!a||o,O=(e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}})(P),T=window.innerHeight<=640?"gd-extended-date-filter-body-scrollable-small-screen":"gd-extended-date-filter-body-scrollable";let N={},M={};return O&&(N={display:"block",height:`${O}px`},M={minHeight:`${O}px`}),(0,ie.jsxs)("div",{className:fe("gd-extended-date-filter-body","s-extended-date-filters-body",a&&"gd-extended-date-filter-body-mobile"),children:[null===i&&a?(0,ie.jsx)("div",{onClick:()=>{F(),w()},children:s}):null,(0,ie.jsxs)("div",{ref:t,role:"listbox","aria-label":r.formatMessage({id:"dateFilterDropdown.label"}),className:fe("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,g.isRelativeDateFilterForm)(m)}),style:N,children:[p&&!a&&y?(0,ie.jsx)(Fn,{}):null,a?(0,ie.jsx)(Sn,{filterOptions:b,selectedFilterOption:m,onSelectedFilterOptionChange:D,isMobile:a,route:i,closeDropdown:w,onApplyClick:E,onBack:l,dateFormat:v,errors:d||void 0,isTimeForAbsoluteRangeEnabled:C,weekStart:S,availableGranularities:I,withoutApply:u}):(0,ie.jsx)(Dn,{className:T,style:M,children:(0,ie.jsx)(yn,{filterOptions:b,selectedFilterOption:m,onSelectedFilterOptionChange:D,isMobile:a,route:i,closeDropdown:w,onApplyClick:E,changeRoute:l,dateFormat:v,errors:d||void 0,isTimeForAbsoluteRangeEnabled:C,weekStart:S,availableGranularities:I,withoutApply:u})})]}),P?(0,ie.jsx)(An,{value:f,onChange:A,disabled:!o,granularity:x(m)}):null,(0,ie.jsxs)("div",{className:fe("gd-extended-date-filter-actions"),children:[(0,ie.jsx)("div",{className:"gd-extended-date-filter-actions-left-content",children:c?(0,ie.jsx)(En,{onConfiguration:k}):null}),(0,ie.jsxs)("div",{className:"gd-extended-date-filter-actions-buttons",children:[(0,ie.jsx)(he,{messageId:u?"close":"cancel",className:fe("gd-button-secondary gd-button-small",u?"s-date-filter-close":"s-date-filter-cancel"),onClick:()=>{F(),w()}}),!u&&(0,ie.jsx)(he,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!(0,h.Z)(d),onClick:()=>{E(),w()},describedByFromValidation:!0})]})]})]})}));function On({filterOptions:e,selectedFilterOption:t,availableGranularities:i,onStaticButtonClick:n,onRelativeButtonClick:r,absoluteButtonRef:l,relativeButtonRef:o,absoluteFormId:a,relativeFormId:s}){const d=(0,j.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),n()}),[n]),c=(0,j.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r()}),[r]);return(0,ie.jsx)("div",{className:"gd-date-filter-form-buttons",children:(0,ie.jsxs)("div",{className:"gd-date-filter-form-buttons-container",children:[e.absoluteForm?(0,ie.jsx)(le.Button,{id:se,ref:l,className:fe("gd-date-filter-form-button","gd-list-item","gd-menu-item","is-submenu","s-absolute-form-button",{"is-selected":t.localIdentifier===e.absoluteForm.localIdentifier}),onClick:d,value:e.absoluteForm.name?e.absoluteForm.name:(0,ie.jsx)(ke,{id:"filters.staticPeriod"}),accessibilityConfig:{popupType:"dialog",popupId:a,ariaExpanded:!1,ariaCurrent:t.localIdentifier===e.absoluteForm.localIdentifier}}):null,e.relativeForm&&i.length>0?(0,ie.jsx)(le.Button,{id:ae,ref:o,className:fe("gd-date-filter-form-button","gd-list-item","gd-menu-item","is-submenu","s-relative-form-button",{"is-selected":t.localIdentifier===e.relativeForm.localIdentifier}),onClick:c,value:e.relativeForm.name?e.relativeForm.name:(0,ie.jsx)(ke,{id:"filters.floatingRange"}),accessibilityConfig:{popupType:"dialog",popupId:s,ariaExpanded:!1,ariaCurrent:t.localIdentifier===e.relativeForm.localIdentifier}}):null]})})}function jn({title:e,onHeaderClick:t,backLabel:i}){const n=(0,j.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),t()}),[t]);return(0,ie.jsxs)("div",{className:"header",children:[(0,ie.jsx)(le.Button,{className:"header-back-button configuration-panel-header-back-button gd-icon-navigateleft",onClick:n,accessibilityConfig:{ariaLabel:i}}),(0,ie.jsx)(le.Typography,{tagName:"h3",className:"header-title",onClick:t,children:e})]})}function Tn({title:e,onBack:t,children:i,className:n,backLabel:r="menu.back",isMobile:l}){return(0,ie.jsxs)("div",{className:fe("gd-date-filter-form-navigation",n),children:[l?(0,ie.jsx)(xn,{onBack:t,title:e,ariaLabel:r}):(0,ie.jsx)(jn,{title:e,onHeaderClick:t,backLabel:r}),(0,ie.jsx)(le.UiFocusManager,{enableAutofocus:!0,children:(0,ie.jsx)("div",{className:"gd-date-filter-form-navigation-content",children:i})})]})}function Nn({filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:i,dateFormat:n,weekStart:r,isTimeForAbsoluteRangeEnabled:l,availableGranularities:o,isMobile:a,withoutApply:s,activeForm:d,onBackNavigation:c,onClose:u,submitForm:m,errors:g}){const p="absoluteForm"===d&&e.absoluteForm,f="relativeForm"===d&&e.relativeForm&&o.length>0,b=B(),y=(0,j.useRef)(null),v=(0,j.useRef)(null),C=(0,le.useId)(),x=(0,j.useCallback)(((e,t)=>{ge({relativeDateFilterRef:y,tabGranularityRef:v,closeDropdown:t})(e)}),[y,v]);return(0,ie.jsxs)("div",{className:"gd-date-filter-form-content",children:[p?(0,ie.jsx)(Tn,{title:e.absoluteForm.name?e.absoluteForm.name:b.formatMessage({id:"filters.staticPeriod"}),onBack:c,backLabel:b.formatMessage({id:"menu.back"}),isMobile:a,children:(0,ie.jsx)(Tt,{isMobile:a,children:(0,ie.jsx)(jt,{dateFormat:n,onSelectedFilterOptionChange:i,selectedFilterOption:t,isMobile:a,isTimeEnabled:l,weekStart:r,submitForm:m,withoutApply:s})})}):null,f?(0,ie.jsx)(Tn,{title:e.relativeForm.name?e.relativeForm.name:b.formatMessage({id:"filters.floatingRange"}),onBack:c,backLabel:b.formatMessage({id:"menu.back"}),isMobile:a,children:(0,ie.jsx)("div",{ref:y,onKeyDown:e=>x(e,u),children:(0,ie.jsx)(Tt,{isMobile:a,children:(0,ie.jsx)(pn,{onSelectedFilterOptionChange:i,selectedFilterOption:t,availableGranularities:o,isMobile:a,ref:v,relativeDateFilterId:C,onKeyDown:e=>pe(e,(0,h.Z)(g),s,u,m)})})})}):null]})}Pn.displayName="DateFilterBody";const Mn=(0,j.forwardRef)(((e,t)=>{const[i,n]=(0,j.useState)(null),r=(0,j.useRef)(null),l=(0,j.useRef)(null),o=B(),a=(e=null)=>{n(e)},s=()=>{const e=i;n(null),setTimeout((()=>{"absoluteForm"===e&&r.current?r.current.focus():"relativeForm"===e&&l.current&&l.current.focus()}),0)};(0,j.useEffect)((()=>{e.isMobile&&((0,g.isAbsoluteDateFilterForm)(e.selectedFilterOption)?a("absoluteForm"):(0,g.isRelativeDateFilterForm)(e.selectedFilterOption)&&a("relativeForm"))}),[e.isMobile,e.selectedFilterOption]);const{isExcludeCurrentPeriodEnabled:d,isMobile:c,dateFilterButton:u,errors:m,isConfigurationEnabled:p,withoutApply:f,selectedFilterOption:b,isEditMode:y,excludeCurrentPeriod:v,filterOptions:C,showHeaderMessage:S=!0,dateFormat:I,isTimeForAbsoluteRangeEnabled:E,weekStart:F,availableGranularities:w,onApplyClick:k,onCancelClick:A,closeDropdown:D,onConfigurationClick:P,onExcludeCurrentPeriodChange:O,onSelectedFilterOptionChange:T}=e,N=!c||d,M=(e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}})(N),L=window.innerHeight<=640?"gd-extended-date-filter-body-scrollable-small-screen":"gd-extended-date-filter-body-scrollable";let R={},_={};M&&(R={display:"block",height:`${M}px`},_={minHeight:`${M}px`});const V=!!(C.absoluteForm||C.relativeForm&&w.length>0),H=(0,le.useIdPrefixed)(),Z="absoluteForm"+H,W="relativeForm"+H,q=i?"absoluteForm"===i?Z:W:void 0,z=i?"absoluteForm"===i?o.formatMessage({id:"filters.staticPeriod"}):o.formatMessage({id:"filters.floatingRange"}):void 0;return(0,ie.jsxs)("div",{className:fe(!c&&"gd-extended-date-filter-body-redesigned","gd-extended-date-filter-body","s-extended-date-filters-body",c&&"gd-extended-date-filter-body-mobile",i&&"gd-active-form"),onKeyDown:e=>{"ArrowLeft"===e.key&&i&&(e.preventDefault(),e.stopPropagation(),s())},role:i?"dialog":void 0,id:q,"aria-label":z,children:[null===i&&c?(0,ie.jsx)("div",{onClick:()=>{A(),D()},children:u}):null,i?(0,ie.jsx)("div",{className:"gd-extended-date-filter-form-wrapper",ref:t,children:(0,ie.jsx)(Nn,{filterOptions:C,selectedFilterOption:b,onSelectedFilterOptionChange:T,dateFormat:I,weekStart:F,isTimeForAbsoluteRangeEnabled:E,availableGranularities:w,isMobile:c,withoutApply:f,activeForm:i,onBackNavigation:s,onClose:D,submitForm:()=>{k(),f||D()},errors:m||void 0})}):null,i?null:(0,ie.jsxs)("div",{ref:t,role:"listbox","aria-label":o.formatMessage({id:"dateFilterDropdown.label"}),className:fe("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,g.isRelativeDateFilterForm)(b)}),style:R,children:[y&&!c&&S?(0,ie.jsx)(Fn,{}):null,c?(0,ie.jsx)(Sn,{filterOptions:C,selectedFilterOption:b,onSelectedFilterOptionChange:T,isMobile:c,route:i,closeDropdown:D,onApplyClick:k,onBack:s,dateFormat:I,errors:m||void 0,isTimeForAbsoluteRangeEnabled:E,weekStart:F,availableGranularities:w,withoutApply:f,isRedesigned:!0}):(0,ie.jsx)(Dn,{className:L,style:_,children:(0,ie.jsx)(Cn,{filterOptions:C,selectedFilterOption:b,onSelectedFilterOptionChange:T,isMobile:c,dateFormat:I})})]}),N&&!i?(0,ie.jsx)(An,{value:v,onChange:O,disabled:!d,granularity:x(b)}):null,V&&!i?(0,ie.jsx)(On,{filterOptions:C,selectedFilterOption:b,availableGranularities:w,onStaticButtonClick:()=>{const e="absoluteForm"===i?null:"absoluteForm";n(e),"absoluteForm"===e&&C.absoluteForm&&b.localIdentifier!==C.absoluteForm.localIdentifier&&T(C.absoluteForm)},onRelativeButtonClick:()=>{const e="relativeForm"===i?null:"relativeForm";n(e),"relativeForm"===e&&C.relativeForm&&b.localIdentifier!==C.relativeForm.localIdentifier&&T(C.relativeForm)},absoluteButtonRef:r,relativeButtonRef:l,absoluteFormId:Z,relativeFormId:W}):null,(0,ie.jsxs)("div",{className:fe("gd-extended-date-filter-actions"),children:[(0,ie.jsx)("div",{className:"gd-extended-date-filter-actions-left-content",children:p?(0,ie.jsx)(En,{onConfiguration:P}):null}),(0,ie.jsxs)("div",{className:"gd-extended-date-filter-actions-buttons",children:[(0,ie.jsx)(he,{messageId:f?"close":"cancel",className:fe("gd-button-secondary gd-button-small",f?"s-date-filter-close":"s-date-filter-cancel"),onClick:()=>{A(),D()}}),!f&&(0,ie.jsx)(he,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!(0,h.Z)(m),onClick:()=>{k(),D()},describedByFromValidation:!0})]})]})]})}));Mn.displayName="DateFilterBodyRedesigned";var Ln=i(56541);const Rn=[{align:"bc tl",offset:{x:0,y:5}}];function Bn({customIcon:e,disabled:t}){if(!e)return null;const{icon:i,tooltip:n,bubbleClassNames:r,bubbleAlignPoints:l}=e,o=fe(["gd-filter-button-custom-icon-wrapper","s-gd-filter-button-custom-icon-wrapper"],{"disabled s-disabled":t});return(0,ie.jsx)("div",{className:o,children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[(0,ie.jsx)("i",{className:`gd-filter-button-custom-icon s-gd-filter-button-custom-icon ${i}`}),(0,ie.jsx)(le.Bubble,{className:`bubble-primary ${r||""}`,alignPoints:l||Rn,children:n})]})})}function _n({isOpen:e,isMobile:t,title:i,children:n,disabled:r,customIcon:l,customFilterName:o,buttonRef:a,dropdownId:s}){const d=(0,j.useCallback)((e=>{(0,le.isActionKey)(e)&&r&&(e.preventDefault(),e.stopPropagation())}),[r]);return(0,ie.jsxs)("div",{ref:a,className:fe("s-date-filter-button","gd-date-filter-button",`s-date-filter-button-${Ln.gl(o)}`,"dropdown-button",t&&"gd-date-filter-button-mobile",e&&"is-active",r&&"disabled"),role:"button","aria-haspopup":"dialog","aria-expanded":e,"aria-controls":e?s:void 0,tabIndex:0,onKeyDown:d,children:[(0,ie.jsxs)("div",{className:"button-content",children:[(0,ie.jsx)("div",{className:"s-date-filter-title button-title",children:i}),(0,ie.jsx)("div",{className:"button-subtitle",children:n})]}),(0,ie.jsx)(Bn,{customIcon:l,disabled:r})]})}const Vn=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}];function Hn({dateFilterOption:e,dateFormat:t,isOpen:i=!1,isMobile:n=!0,customFilterName:r,disabled:l,customIcon:o,buttonRef:a,dropdownId:s,onClick:d,ButtonComponent:c}){const u=B().formatMessage({id:"dateFilterDropdown.title"}),m=r??u,g=r?(0,ie.jsx)(le.ShortenedText,{tooltipAlignPoints:Vn,children:r}):(0,ie.jsx)(ie.Fragment,{children:m}),p=Ce({filter:e,dateFormat:t}),f=c??_n;return(0,ie.jsx)(f,{title:g,isOpen:i,isMobile:n,disabled:l,customIcon:o,customFilterName:r,onClick:d,textTitle:m,textSubtitle:p,buttonRef:a,dropdownId:s,children:(0,ie.jsx)("span",{className:"s-button-text",children:(0,ie.jsx)(ve,{filter:e,dateFormat:t})})})}const Zn=(e,t=!1)=>t?e+a:e;function Wn({originalSelectedFilterOption:e,originalExcludeCurrentPeriod:t,selectedFilterOption:i,excludeCurrentPeriod:n,onDropdownOpenChanged:r,customFilterName:l,dateFormat:o,disabled:a,openOnInit:s,locale:d,filterOptions:u,isTimeForAbsoluteRangeEnabled:m,weekStart:g,customIcon:f,FilterConfigurationComponent:b,onApplyClick:y,onCancelClick:v,showDropDownHeaderMessage:C,withoutApply:x,ButtonComponent:S,overlayPositionType:I,improveAccessibility:A=!1,...P}){const[O,T]=(0,j.useState)(!1),N=(e=>{try{return(0,k.WU)(new Date,e),e}catch{return console.warn(`Unsupported date format ${e}, the default format ${c} is used instead.`),c}})(o),M=(0,j.useRef)(null),L=(0,j.useRef)(null),R=(0,D.useValidationContextValue)((0,D.createInvalidNode)({id:"DateFilter"})),B=(0,j.useMemo)((()=>function(e){const t=e.absolutePreset?.map(w),i=e.relativePreset&&function(e){return Object.keys(e).reduce(((t,i)=>{const n=e[i];return t[i]=n.map(w),t}),{})}(e.relativePreset);return E({...e,absolutePreset:t,relativePreset:i})}(F(u))),[u]),_=()=>{T(!1)},V=()=>{T(!0)},H=()=>{_(),v()},Z=e=>{r(e),e||_()},W=qn(i,(0,h.Z)(P.errors)),q=qn(n,(0,h.Z)(P.errors)),z=(0,j.useCallback)(((e,t=(()=>{}))=>{(({dateFilterContainerRef:e,dateFilterBodyRef:t,closeDropdown:i})=>n=>{if(!t.current||!e.current)return;const r=Array.from(t.current.querySelectorAll("[tabindex]")),l=document.activeElement,o=(0,le.makeLinearKeyboardNavigation)({onFocusPrevious:()=>{if(ue(t,l,ce.OPTION)){const e=Array.from(r).indexOf(document.activeElement),t=me(r,e,-1);t?.focus()}},onFocusNext:()=>{if(ue(t,l,ce.OPTION)){const e=Array.from(r).indexOf(document.activeElement),t=me(r,e,1);t?.focus()}},onFocusFirst:()=>{if(ue(t,l,ce.OPTION)){const{firstElement:e}=(0,le.getFocusableElements)(t.current);e?.focus()}},onFocusLast:()=>{if(ue(t,l,ce.OPTION)){const{lastElement:e}=(0,le.getFocusableElements)(t.current);e?.focus()}},onClose:i,onUnhandledKeyDown:t=>{"Tab"===t.key&&((e,t)=>{if("Tab"!==e.key)return;e.stopPropagation(),e.preventDefault();const i=['[tabindex]:not([tabindex="-1"]):not(:disabled)',"input:not(:disabled)",'button:not([tabindex="-1"]):not(:disabled)'].join(","),n=Array.from(t.current?.querySelectorAll(i)??[]),r=document.activeElement,l=n.indexOf(r);if(-1===l){const t=e.shiftKey?n.length-1:1;n[t]?.focus()}else{const t=(l+(e.shiftKey?-1:1)+n.length)%n.length;n[t]?.focus()}})(t,e)}});o(n)})({dateFilterContainerRef:M,dateFilterBodyRef:L,closeDropdown:t})(e)}),[M,L]),G=A?Mn:Pn,K=((e,t,i)=>i?e.localIdentifier===t.relativeForm?.localIdentifier?ae:e.localIdentifier===t.absoluteForm?.localIdentifier?se:oe:oe)(i,u,A);return(0,ie.jsx)(D.IntlWrapper,{locale:d||"en-US",children:(0,ie.jsx)(D.ValidationContextStore,{value:R,children:(0,ie.jsx)(re.zP,{query:xe,children:r=>{const o=(i=!1,n=null,o="",s=(()=>{}))=>(0,ie.jsx)(Hn,{disabled:a,isMobile:r,isOpen:i,dateFilterOption:p(x?W:e,x?q:t),dateFormat:Zn(N,m),customFilterName:l,customIcon:f,onClick:s,ButtonComponent:S,buttonRef:n,dropdownId:o});return(0,ie.jsx)(le.Dropdown,{openOnInit:s,closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,autofocusOnOpen:!0,initialFocus:K,alignPoints:[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-50}}],onOpenStateChanged:Z,overlayPositionType:I,renderButton:({isOpen:e,buttonRef:t,dropdownId:i,toggleDropdown:n})=>(0,ie.jsx)("span",{onClick:a?()=>{}:n,children:o(e,t,i,n)}),ignoreClicksOnByClass:[".s-do-not-close-dropdown-on-click",".rdp-day"],renderBody:({closeDropdown:e,ariaAttributes:t})=>O?(0,ie.jsx)(b,{onSaveButtonClick:_,onCancelButtonClick:H}):(0,ie.jsx)("div",{role:"dialog",className:"gd-extended-date-filter-container",id:t.id,ref:M,onKeyDown:t=>z(t,e),"aria-label":l,children:(0,ie.jsx)(G,{...P,selectedFilterOption:i,excludeCurrentPeriod:n,showHeaderMessage:C,onApplyClick:y,onCancelClick:v,filterOptions:B,isMobile:r,closeDropdown:e,dateFilterButton:o(),dateFormat:N,isTimeForAbsoluteRangeEnabled:m,weekStart:g,isConfigurationEnabled:void 0!==b,onConfigurationClick:V,withoutApply:x,ref:L})})})}})})})}function qn(e,t){const i=(0,j.useRef)(void 0);return t&&(i.current=e),i.current}function zn(e){return b(e)&&e.from>e.to?{...e,from:e.to,to:e.from}:e}class Gn extends j.PureComponent{static defaultProps={dateFormat:c,isEditMode:!1,isTimeForAbsoluteRangeEnabled:!1,locale:"en-US",onCancel:()=>{},onOpen:()=>{},onClose:()=>{},weekStart:"Sunday",withoutApply:!1};static getDerivedStateFromProps(e,t){return!(e.withoutApply??e.enableDashboardFiltersApplyModes)||!e.workingSelectedFilterOption||void 0===e.excludeCurrentPeriod||(0,ne.Z)(e.workingSelectedFilterOption,t.initWorkingSelectedFilterOption)&&e.excludeCurrentPeriod===t.initWorkingExcludeCurrentPeriod?(0,ne.Z)(e.selectedFilterOption,t.initSelectedFilterOption)&&e.excludeCurrentPeriod===t.initExcludeCurrentPeriod?null:Gn.getStateFromProps(e):Gn.getStateFromWorkingProps(e)}static getStateFromProps(e){const t=f(e.selectedFilterOption);return{initSelectedFilterOption:e.selectedFilterOption,selectedFilterOption:e.selectedFilterOption,initExcludeCurrentPeriod:e.excludeCurrentPeriod,excludeCurrentPeriod:!!t&&e.excludeCurrentPeriod,isExcludeCurrentPeriodEnabled:t,initWorkingSelectedFilterOption:e.workingSelectedFilterOption??e.selectedFilterOption,initWorkingExcludeCurrentPeriod:e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod}}static getStateFromWorkingProps(e){const t=e.workingSelectedFilterOption??e.selectedFilterOption,i=f(t);return{...Gn.getStateFromProps(e),selectedFilterOption:t,excludeCurrentPeriod:!!i&&(e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod),initWorkingExcludeCurrentPeriod:e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod,initWorkingSelectedFilterOption:t,initExcludeCurrentPeriod:e.excludeCurrentPeriod,isExcludeCurrentPeriodEnabled:i}}static getStateFromSelectedOption=(e,t)=>{const i=f(e);return{selectedFilterOption:e,excludeCurrentPeriod:!!i&&t,isExcludeCurrentPeriodEnabled:i}};static checkInitialFilterOption=e=>{!(0,g.isAbsoluteDateFilterForm)(e)||null!==e.from&&void 0!==e.from&&null!==e.to&&void 0!==e.to||console.warn("The default filter option is not valid. Values 'from' and 'to' from absoluteForm filter option must be specified."),!b(e)||null!==e.from&&void 0!==e.from&&null!==e.to&&void 0!==e.to||console.warn("The default filter option is not valid. Values 'from' and 'to' from relativeForm filter option must be specified.")};constructor(e){super(e),this.state=Gn.getStateFromProps(e)}componentDidMount(){Gn.checkInitialFilterOption(this.props.selectedFilterOption)}render(){const{customFilterName:e,dateFilterMode:t,dateFormat:i,filterOptions:n,selectedFilterOption:r,excludeCurrentPeriod:l,availableGranularities:o,isEditMode:a,openOnInit:s,locale:d,isTimeForAbsoluteRangeEnabled:c,weekStart:u,customIcon:m,showDropDownHeaderMessage:g,FilterConfigurationComponent:p,withoutApply:f,enableDashboardFiltersApplyModes:h,ButtonComponent:b,overlayPositionType:y,improveAccessibility:v}=this.props,C=f??h,{excludeCurrentPeriod:x,selectedFilterOption:S,isExcludeCurrentPeriodEnabled:I}=this.state;return"hidden"===t?null:(0,ie.jsx)(Wn,{availableGranularities:o,customFilterName:e,dateFormat:i,openOnInit:s,showDropDownHeaderMessage:g,disabled:"readonly"===t,excludeCurrentPeriod:x,originalExcludeCurrentPeriod:l,isExcludeCurrentPeriodEnabled:I,isTimeForAbsoluteRangeEnabled:c,isEditMode:a,filterOptions:n,selectedFilterOption:S,originalSelectedFilterOption:r,locale:d,onApplyClick:this.handleApplyClick,onCancelClick:this.onCancelClicked,onDropdownOpenChanged:this.onDropdownOpenChanged,onExcludeCurrentPeriodChange:this.handleExcludeCurrentPeriodChange,onSelectedFilterOptionChange:this.handleSelectedFilterOptionChange,errors:ee(S),weekStart:u,customIcon:m,FilterConfigurationComponent:p,withoutApply:C,ButtonComponent:b,overlayPositionType:y,improveAccessibility:v})}handleApplyClick=()=>{const e=zn(this.state.selectedFilterOption);this.props.onApply(e,this.state.excludeCurrentPeriod)};onChangesDiscarded=()=>{this.props.withoutApply?this.props.withoutApply&&!(0,h.Z)(ee(this.state.selectedFilterOption))&&this.setState((()=>Gn.getStateFromWorkingProps(this.props))):this.setState((()=>Gn.getStateFromProps(this.props)),this.handleSelectChange)};onCancelClicked=()=>{this.props.onCancel(),this.onChangesDiscarded()};onDropdownOpenChanged=e=>{e?this.props.onOpen():(this.props.onClose(),this.onChangesDiscarded())};handleExcludeCurrentPeriodChange=e=>{this.setState({excludeCurrentPeriod:e},this.handleSelectChange)};handleSelectedFilterOptionChange=e=>{this.setState((t=>Gn.getStateFromSelectedOption(e,t.excludeCurrentPeriod)),this.handleSelectChange)};handleSelectChange=()=>{const e=zn(this.state.selectedFilterOption);(0,h.Z)(ee(e))&&this.props.onSelect?.(e,this.state.excludeCurrentPeriod)}}const Kn=function({isActive:e,buttonTitle:t,onClick:i}){const n=fe("gd-mvf-dropdown-button","s-mvf-dropdown-button","gd-button","gd-button-secondary","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e});return(0,ie.jsx)("button",{className:n,onClick:i,children:t})},Un=function({value:e,usePercentage:t,disableAutofocus:i,onValueChange:n,onEnterKeyPress:r,separators:l}){return(0,ie.jsx)(le.InputWithNumberFormat,{className:"s-mvf-comparison-value-input",value:e,onEnterKeyPress:r,onChange:n,isSmall:!0,autofocus:!i,suffix:t?"%":"",separators:l})},$n=e=>{switch(e){case"ALL":return Z.ALL.id;case"GREATER_THAN":return Z.GREATER_THAN.id;case"GREATER_THAN_OR_EQUAL_TO":return Z.GREATER_THAN_OR_EQUAL_TO.id;case"LESS_THAN":return Z.LESS_THAN.id;case"LESS_THAN_OR_EQUAL_TO":return Z.LESS_THAN_OR_EQUAL_TO.id;case"EQUAL_TO":return Z.EQUAL_TO.id;case"NOT_EQUAL_TO":return Z.NOT_EQUAL_TO.id;case"BETWEEN":return Z.BETWEEN.id;case"NOT_BETWEEN":return Z.NOT_BETWEEN.id;default:return}},Yn=e=>({ALL:"all",GREATER_THAN:"greater-than",GREATER_THAN_OR_EQUAL_TO:"greater-than-equal-to",LESS_THAN:"less-than",LESS_THAN_OR_EQUAL_TO:"less-than-equal-to",EQUAL_TO:"equal-to",NOT_EQUAL_TO:"not-equal-to",BETWEEN:"between",NOT_BETWEEN:"not-between"}[e]),Qn=(0,j.memo)((function({operator:e,selectedOperator:t,bubbleText:i=null,onClick:n=(()=>{})}){const r=B(),l=fe("gd-list-item","gd-list-item-shortened",`s-mvf-operator-${Ln.gl(e)}`,{"is-selected":t===e}),o=$n(e),a=void 0===o?e:r.formatMessage({id:o});return(0,ie.jsxs)("div",{className:l,onClick:t=>{n(e),t.preventDefault()},children:[(0,ie.jsx)("div",{className:`gd-icon-${Yn(e)}`,title:a}),(0,ie.jsx)("span",{title:a,children:(0,A.Z)(a)}),i?(e=>(0,ie.jsx)("div",{className:"tooltip-bubble",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{tagName:"div",showDelay:400,hideDelay:200,children:[(0,ie.jsx)("div",{className:"inlineBubbleHelp"}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}],children:e})]})}))(i):null]})})),Jn=Qn,Xn=(0,j.memo)((function({onSelect:e,onClose:t,selectedOperator:i,alignTo:n}){const r=B();return(0,ie.jsx)(le.Overlay,{closeOnOutsideClick:!0,alignTo:n,alignPoints:[{align:"bl tl"}],onClose:t,children:(0,ie.jsx)("div",{className:"gd-dropdown overlay",children:(0,ie.jsxs)("div",{className:"gd-mvf-operator-dropdown-body s-mvf-operator-dropdown-body",children:[(0,ie.jsx)(Jn,{operator:"ALL",selectedOperator:i,onClick:e}),(0,ie.jsx)(le.Separator,{}),(0,ie.jsx)(Jn,{operator:"GREATER_THAN",selectedOperator:i,onClick:e}),(0,ie.jsx)(Jn,{operator:"GREATER_THAN_OR_EQUAL_TO",selectedOperator:i,onClick:e}),(0,ie.jsx)(le.Separator,{}),(0,ie.jsx)(Jn,{operator:"LESS_THAN",selectedOperator:i,onClick:e}),(0,ie.jsx)(Jn,{operator:"LESS_THAN_OR_EQUAL_TO",selectedOperator:i,onClick:e}),(0,ie.jsx)(le.Separator,{}),(0,ie.jsx)(Jn,{operator:"BETWEEN",selectedOperator:i,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.between.tooltip.bubble"})}),(0,ie.jsx)(Jn,{operator:"NOT_BETWEEN",selectedOperator:i,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.notBetween.tooltip.bubble"})}),(0,ie.jsx)(le.Separator,{}),(0,ie.jsx)(Jn,{operator:"EQUAL_TO",selectedOperator:i,onClick:e}),(0,ie.jsx)(Jn,{operator:"NOT_EQUAL_TO",selectedOperator:i,onClick:e})]})})})})),er=(0,j.memo)((function(e){const t=B(),[i,n]=(0,j.useState)(!1),r=()=>n(!1),l=()=>n((e=>!e));return(0,ie.jsxs)(ie.Fragment,{children:[(()=>{const{operator:n,isDisabled:r}=e,o=$n(n),a=(0,A.Z)(void 0===o?n:t.formatMessage({id:o})),s=fe("gd-mvf-operator-dropdown-button","s-mvf-operator-dropdown-button",`s-mvf-operator-dropdown-button-${Ln.gl(n)}`,"gd-button-primary","gd-button-small",{"button-dropdown":!0,"is-dropdown-open":i,"is-active":i});return(0,ie.jsx)(le.Button,{title:a,className:s,value:a,onClick:l,iconLeft:`gd-icon-${Yn(n)}`,iconRight:i?"gd-icon-navigateup":"gd-icon-navigatedown",disabled:r})})(),i?(0,ie.jsx)(Xn,{alignTo:".gd-mvf-operator-dropdown-button",onSelect:t=>{r(),e.onSelect(t)},selectedOperator:e.operator,onClose:r}):null]})})),tr=function({from:e,to:t,usePercentage:i,disableAutofocus:n,onFromChange:r,onToChange:l,onEnterKeyPress:o,separators:a}){return(0,ie.jsxs)("div",{className:"gd-mvf-range-input",children:[(0,ie.jsx)(le.InputWithNumberFormat,{className:"s-mvf-range-from-input",value:e,onChange:r,onEnterKeyPress:o,isSmall:!0,autofocus:!n,suffix:i?"%":"",separators:a}),(0,ie.jsx)(le.InputWithNumberFormat,{className:"s-mvf-range-to-input",value:t,onChange:l,onEnterKeyPress:o,isSmall:!0,suffix:i?"%":"",separators:a})]})},ir=function({checked:e=!1,onChange:t,intl:i}){return(0,ie.jsxs)("label",{className:"input-checkbox-label gd-mvf-treat-null-values-as-zero s-treat-null-values-as-zero",children:[(0,ie.jsx)("input",{type:"checkbox",name:"treat-null-values-as",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked)}),(0,ie.jsxs)("span",{className:"input-label-text",children:[i.formatMessage({id:"mvf.treatNullValuesAsZeroLabel"}),(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:400,hideDelay:200,children:[(0,ie.jsx)("span",{className:"inlineBubbleHelp"}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}],children:i.formatMessage({id:"mvf.treatNullValuesAsZeroTooltip"})})]})]})]})};function nr(e){return!(0,h.Z)(e)&&!!e.severity}function rr({warningMessage:e,className:t}){const i=fe("gd-mvf-warning-message",(e=>{if("string"==typeof e)return"gd-mvf-warning-message-low s-mvf-warning-message-low";switch(e.severity){case"low":return"gd-mvf-warning-message-low s-mvf-warning-message-low";case"medium":return"gd-mvf-warning-message-medium s-mvf-warning-message-medium";case"high":return"gd-mvf-warning-message-high s-mvf-warning-message-high"}})(e),t,"s-mvf-warning-message");return(0,ie.jsx)("div",{className:i,children:nr(e)?e.text:e})}const lr=6,or=(0,j.memo)((function(e){const t=B(),{operator:i,value:n,usePercentage:r,treatNullAsZeroValue:l,valuePrecision:o=lr}=e,a=(0,j.useCallback)((e=>e?parseFloat(e.toFixed(o)):e),[o]),s=(0,j.useCallback)((e=>e?e/100:e),[]),d=(0,j.useCallback)((e=>e?100*e:e),[]),c=(0,j.useCallback)(((e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:a(d(e.value))}:{from:a(d(e.from)),to:a(d(e.to))}:e),[a,d]),[u,m]=(0,j.useState)((()=>({operator:i||"ALL",value:(r?c(n,i):n)||{},enabledTreatNullValuesAsZero:l}))),p=(0,j.useCallback)(((e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:a(s(e.value))}:{from:a(s(e.from)),to:a(s(e.to))}:e),[a,s]),f=(0,j.useCallback)((()=>u.operator!==e.operator||u.enabledTreatNullValuesAsZero!==e.treatNullAsZeroValue),[u.operator,u.enabledTreatNullValuesAsZero,e.operator,e.treatNullAsZeroValue]),h=(0,j.useCallback)((()=>{const{value:t=null}=u.value;return null===t||null!==e.value&&!f()&&(e.usePercentage?a(s(t))===e.value.value:t===e.value.value)}),[u.value,e.value,e.usePercentage,f,a,s]),b=(0,j.useCallback)((()=>{const{from:t=null,to:i=null}=u.value;return null===t||null===i||null!==e.value&&!f()&&(e.usePercentage?a(s(t))===e.value.from&&a(s(i))===e.value.to:t===e.value.from&&i===e.value.to)}),[u.value,e.value,e.usePercentage,f,a,s]),y=(0,j.useCallback)((()=>"ALL"===i),[i]),v=(0,j.useCallback)((()=>{const{operator:e}=u;return(0,g.isComparisonConditionOperator)(e)?h():(0,g.isRangeConditionOperator)(e)?b():y()}),[u,h,b,y]),C=(0,j.useCallback)((e=>m((t=>({...t,operator:e})))),[]),x=(0,j.useCallback)((e=>{m((t=>({...t,value:{...t.value,value:e}})))}),[]),S=(0,j.useCallback)((e=>{m((t=>({...t,value:{...t.value,from:e}})))}),[]),I=(0,j.useCallback)((e=>{m((t=>({...t,value:{...t.value,to:e}})))}),[]),E=(0,j.useCallback)((e=>{m((t=>({...t,enabledTreatNullValuesAsZero:e})))}),[]),F=(0,j.useCallback)((()=>{if(v())return;const{enabledTreatNullValuesAsZero:t,operator:i,value:n}=u,{usePercentage:r}=e,l="ALL"===i?null:i,o=r?p(n,i):n;e.onApply(l,o,t)}),[v,u,e,p]),w=(0,j.useCallback)((()=>{const{usePercentage:t,disableAutofocus:i,separators:n}=e,{operator:r,value:{value:l=null,from:o=null,to:a=null}}=u;return(0,g.isComparisonConditionOperator)(r)?(0,ie.jsx)(Un,{value:l,usePercentage:t,onValueChange:x,onEnterKeyPress:F,disableAutofocus:i,separators:n}):(0,g.isRangeConditionOperator)(r)?(0,ie.jsx)(tr,{from:o,to:a,usePercentage:t,onFromChange:S,onToChange:I,onEnterKeyPress:F,disableAutofocus:i,separators:n}):null}),[e,u,x,S,I,F]),{onCancel:k,warningMessage:A,displayTreatNullAsZeroOption:D,enableOperatorSelection:P}=e,{operator:O,enabledTreatNullValuesAsZero:T}=u;return(0,ie.jsxs)("div",{className:"gd-mvf-dropdown-body gd-dialog gd-dropdown overlay s-mvf-dropdown-body",children:[(0,ie.jsxs)("div",{className:"gd-mvf-dropdown-content",children:[A?(0,ie.jsx)("div",{className:"gd-mvf-dropdown-section",children:(0,ie.jsx)(rr,{warningMessage:A})}):null,(0,ie.jsx)("div",{className:"gd-mvf-dropdown-section",children:(0,ie.jsx)(er,{onSelect:C,operator:O,isDisabled:!P})}),"ALL"===O?null:(0,ie.jsxs)("div",{className:"gd-mvf-dropdown-section",children:[w()," ",D?(0,ie.jsx)(ir,{onChange:E,checked:T,intl:t}):null]})]}),(0,ie.jsxs)("div",{className:"gd-mvf-dropdown-footer",children:[(0,ie.jsx)(le.Button,{className:"gd-button-secondary gd-button-small s-mvf-dropdown-cancel",onClick:k,value:t.formatMessage({id:"cancel"})}),(0,ie.jsx)(le.Button,{className:"gd-button-action gd-button-small s-mvf-dropdown-apply",onClick:F,value:t.formatMessage({id:"apply"}),disabled:v()})]})]})})),ar=(0,j.memo)((function(e){return(0,ie.jsx)(D.IntlWrapper,{locale:e.locale,children:(0,ie.jsx)(or,{...e})})})),sr=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),dr=(0,j.memo)((function(e){const{operator:t="ALL",value:i={},usePercentage:n,warningMessage:r,locale:l,onCancel:o,anchorEl:a,separators:s,displayTreatNullAsZeroOption:d=!1,treatNullAsZeroValue:c=!1,enableOperatorSelection:u,onApply:m}=e,g=(0,j.useCallback)(((e,t,i)=>{m(e,t,i)}),[m]),p=null===t?"ALL":t;return(0,ie.jsx)(le.Overlay,{alignTo:a,alignPoints:sr,closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,onClose:o,children:(0,ie.jsx)(ar,{operator:p,value:i,usePercentage:n,warningMessage:r,locale:l,onCancel:o,onApply:g,separators:s,displayTreatNullAsZeroOption:d,treatNullAsZeroValue:c,enableOperatorSelection:u})})}));function cr(e){return(0,ie.jsx)(D.IntlWrapper,{locale:e.locale,children:(0,ie.jsx)(dr,{...e})})}const ur=e=>{if(!e)return{};const t=(0,g.measureValueFilterCondition)(e);return t?(0,g.isRangeCondition)(t)?{from:t.range.from,to:t.range.to}:{value:t.comparison.value}:{}},mr=(e,t)=>{if(!e||!(0,g.measureValueFilterCondition)(e))return void 0!==t&&t;const i=(0,g.measureValueFilterCondition)(e);return(0,g.isComparisonCondition)(i)&&void 0!==i.comparison.treatNullValuesAs||(0,g.isRangeCondition)(i)&&void 0!==i.range.treatNullValuesAs||!1},gr=(0,j.memo)((function({filter:e,onCancel:t,onApply:i,measureIdentifier:n,usePercentage:r,warningMessage:l,locale:o,anchorEl:a,separators:s,displayTreatNullAsZeroOption:d=!1,treatNullAsZeroDefaultValue:c=!1,enableOperatorSelection:u=!0}){const m=(0,j.useCallback)(((e,t,r)=>{null===e||"ALL"===e?i(null):(0,g.isRangeConditionOperator)(e)?i((0,g.newMeasureValueFilter)({localIdentifier:n},e,t.from??0,t.to??0,r?0:void 0)):i((0,g.newMeasureValueFilter)({localIdentifier:n},e,t.value??0,r?0:void 0))}),[n,i]);return(0,ie.jsx)(cr,{onApply:m,onCancel:t,operator:e&&(0,g.measureValueFilterOperator)(e)||null,value:e&&ur(e)||null,usePercentage:r,warningMessage:l,locale:o,anchorEl:a,separators:s,displayTreatNullAsZeroOption:d,treatNullAsZeroValue:mr(e,c),enableOperatorSelection:u})})),pr=(0,j.memo)((function({onCancel:e=(()=>{}),filter:t,measureIdentifier:i,buttonTitle:n,usePercentage:r,warningMessage:l,locale:o,separators:a,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:d,enableOperatorSelection:c,onApply:u}){const[m,g]=(0,j.useState)(!1),p=(0,j.useRef)(null),f=(0,j.useCallback)((e=>{g(!1),u(e)}),[u]),h=(0,j.useCallback)((()=>{g(!1),e()}),[e]),b=(0,j.useCallback)((()=>{g((e=>!e))}),[]);return(0,ie.jsxs)(j.Fragment,{children:[(0,ie.jsx)("div",{ref:p,children:(0,ie.jsx)(Kn,{onClick:b,isActive:m,buttonTitle:n})}),m?(0,ie.jsx)(gr,{onApply:f,onCancel:h,filter:t,measureIdentifier:i,usePercentage:r,warningMessage:l,locale:o,separators:a,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:d,enableOperatorSelection:c,anchorEl:p.current}):null]})}));function fr({isActive:e,onClick:t,title:i,className:n}){const r=fe("gd-button","gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e},"s-rf-dropdown-button",n);return(0,ie.jsx)("button",{className:r,onClick:t,children:i})}var hr=i(68774),br=i(69581),yr=i(27615),vr=i(25140),Cr=i(90184);var xr=i(836),Sr=i(935);const Ir=(0,br.Z)((function(e){var t=(0,Sr.Z)(e);return t="function"==typeof t?t:void 0,function(e,t,i){var n=e.length;if(n<2)return n?(0,Cr.Z)(e[0]):[];for(var r=-1,l=Array(n);++r<n;)for(var o=e[r],a=-1;++a<n;)a!=r&&(l[r]=(0,yr.Z)(l[r]||o,e[a],t,i));return(0,Cr.Z)((0,vr.Z)(l,1),t,i)}((0,hr.Z)(e,xr.Z),void 0,t)})),Er=16;function Fr({isSelected:e,onSelect:t}){const i=fe("gd-list-item","gd-list-item-shortened",{"is-selected":e},"gd-button-link","s-rf-attribute-all-records");return(0,ie.jsxs)("button",{className:i,onClick:()=>t(),children:[(0,ie.jsx)(ke,{id:"rankingFilter.allRecords"}),(0,ie.jsx)("div",{children:(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsx)("span",{className:"gd-icon-circle-question gd-rf-attribute-all-records-icon s-rf-attribute-all-records-icon"}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-all-records-bubble",arrowOffsets:{"cr cl":[Er,0],"cl cr":[-Er,0]},alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:(0,ie.jsx)(ke,{id:"rankingFilter.allRecords.tooltip"})})]})})]})}function wr({item:e,iconClass:t,isSelected:i,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:o}){const{title:a,ref:s}=e,d=o&&!o.enable,c=fe("gd-list-item","gd-list-item-shortened",{"is-selected":i,"is-disabled":d},"gd-button-link",t,`s-rf-attribute-${Ln.gl(a)}`);return d?(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsx)(le.Button,{className:c,value:a,title:a,disabled:!0}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-disabled-attribute-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:o.warningMessage})]}):(0,ie.jsx)("button",{className:c,onClick:()=>n(s),onMouseOver:()=>{r&&r(s)},onMouseOut:()=>{l&&l()},title:a,children:(0,ie.jsx)("span",{children:a})})}function kr({items:e,selectedItemRef:t,onSelect:i,onClose:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:o}){return(0,ie.jsx)(le.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-attribute-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n,children:(0,ie.jsxs)("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-attribute-dropdown-body s-rf-attribute-dropdown-body",children:[e.map((e=>{const{type:n,ref:a}=e;return(0,ie.jsx)(wr,{iconClass:"DATE"===n?"gd-icon-date":"gd-icon-attribute",item:e,isSelected:(0,g.areObjRefsEqual)(a,t),onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:o},(0,g.objRefToString)(a))})),(0,ie.jsx)("div",{className:"gd-rf-attribute-dropdown-separator"}),(0,ie.jsx)(Fr,{isSelected:!t,onSelect:i})]})})}const Ar=(e,t)=>e?e.title:t.formatMessage({id:"rankingFilter.allRecords"}),Dr=e=>e?"DATE"===e.type?"gd-icon-date":"gd-icon-attribute":null;function Pr({items:e,selectedItemRef:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,customGranularitySelection:l}){const o=B(),[a,s]=(0,j.useState)(!1),d=1===e.length,c=fe("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":a,"gd-icon-navigatedown":!a},"gd-rf-attribute-dropdown-button","s-rf-attribute-dropdown-button"),u=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),m=Ar(u,o);return d?(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsx)(le.Button,{className:c,value:m,disabled:!0}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-no-options-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:(0,ie.jsx)(ke,{id:"rankingFilter.attributeDropdown.oneAttributeTooltip"})})]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(le.Button,{className:c,value:m,onClick:()=>{s(!a)},iconLeft:Dr(u)}),a?(0,ie.jsx)(kr,{items:e,selectedItemRef:t,onSelect:e=>{i(e),s(!1),r?.()},onClose:()=>s(!1),onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,customGranularitySelection:l}):null]})}function Or({item:e,isSelected:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l}){const{title:o,ref:a,sequenceNumber:s}=e,d=fe("gd-list-item","gd-list-item-shortened",{"is-selected":t},"gd-button-link",l?"gd-icon-metric":"gd-icon-measure",`s-rf-measure-${Ln.gl(o)}`);return(0,ie.jsxs)("button",{className:d,onClick:()=>i(a),onMouseOver:()=>{n&&n(a)},onMouseOut:()=>{r&&r()},title:o,children:[(0,ie.jsx)("span",{className:"gd-rf-measure-title",children:o}),s?(0,ie.jsx)("span",{className:"gd-rf-sequence-number",children:s}):null]})}function jr({items:e,selectedItemRef:t,onSelect:i,onClose:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:o}){return(0,ie.jsx)(le.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-measure-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n,children:(0,ie.jsx)("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-measure-dropdown-body s-rf-measure-dropdown-body",children:e.map((e=>{const{ref:n}=e;return(0,ie.jsx)(Or,{item:e,isSelected:(0,g.areObjRefsEqual)(n,t),onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:o},(0,g.objRefToString)(n))}))})})}function Tr({items:e,selectedItemRef:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l}){const[o,a]=(0,j.useState)(!1),s=fe("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":o,"gd-icon-navigatedown":!o},"gd-rf-measure-dropdown-button","s-rf-measure-dropdown-button"),d=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),c=d?.title;return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(le.Button,{className:s,value:c,onClick:()=>{a(!o)},iconLeft:l?"gd-icon-metric":"gd-icon-measure"}),o?(0,ie.jsx)(jr,{items:e,selectedItemRef:t,onSelect:e=>{i(e),a(!1),r?.()},onClose:()=>a(!1),onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l}):null]})}function Nr({title:e,value:t,isSelected:i,onSelect:n}){const r=fe("gd-list-item","gd-list-item-shortened",{"is-selected":i},"gd-button-link",`s-rf-operator-${Ln.gl(e)}`);return(0,ie.jsx)("button",{className:r,onClick:()=>n(t),children:(0,ie.jsx)("span",{children:e})})}function Mr({items:e,selectedValue:t,onSelect:i,onClose:n}){const r=B();return(0,ie.jsx)(le.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-operator-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n,children:(0,ie.jsx)("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-operator-dropdown-body s-rf-operator-dropdown-body",children:e.map((({value:e,translationId:n})=>{const l=r.formatMessage({id:n});return(0,ie.jsx)(Nr,{title:l,value:e,isSelected:e===t,onSelect:i},e)}))})})}const Lr=[{value:"TOP",translationId:Z.top.id},{value:"BOTTOM",translationId:Z.bottom.id}],Rr=e=>Lr.find((({value:t})=>t===e)).translationId;function Br({selectedValue:e,onSelect:t}){const i=B(),[n,r]=(0,j.useState)(!1),l=fe("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":n,"gd-icon-navigatedown":!n},"gd-rf-operator-dropdown-button","s-rf-operator-dropdown-button"),o=i.formatMessage({id:Rr(e)});return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(le.Button,{className:l,value:o,onClick:()=>{r(!n)}}),n?(0,ie.jsx)(Mr,{items:Lr,selectedValue:e,onSelect:e=>{t(e),r(!1)},onClose:()=>r(!1)}):null]})}const _r=(e,t)=>{switch(e){case"TOP":return t?Z.topWithAttr.id:Z.topWithoutAttr.id;case"BOTTOM":return t?Z.bottomWithAttr.id:Z.bottomWithoutAttr.id;default:throw new Error(`Operator '${e}' is not supported!`)}};function Vr({operator:e,value:t,measure:i,attribute:n}){return(0,ie.jsx)("div",{className:"gd-rf-preview s-rf-preview",children:(0,ie.jsx)(ke,{id:_r(e,n),tagName:"span",values:{measure:i.title,attribute:n?.title,operator:e,value:t,strong:e=>(0,ie.jsx)("strong",{children:e})}})})}const Hr=[3,5,10,15,20,25,50,100].map((e=>({type:"option",value:e,label:`${e}`}))),Zr=e=>/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e),Wr=e=>e&&Zr(e)&&Number(e)>0&&Number(e)<=99999,qr=(e,t)=>{if(!e)return Hr;const i=(e=>e?.trim())(e),n=Zr(i);if(n){const e=n[1];return((e,t)=>e<1?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]:e>99999?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooLarge"})}]:Hr.filter((t=>t.label.toLowerCase().includes(e.toString()))))(Number.parseInt(e,10),t)}return[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]},zr=(0,qt.b)(vi);class Gr extends j.Component{constructor(e){super(e);const t=void 0===e.value?null:Ni(e.getItems(e.value.toString()),e.value);this.state={inputValue:t?xi(t):e.value?e.value.toString():""}}inputRef=(0,j.createRef)();static defaultProps={onChange:()=>{},initialIsOpen:!1,visibleItemsRange:tn};onChange=e=>{e&&this.props.onChange(e.value)};componentDidUpdate=e=>{if(e.value!==this.props.value){const e=this.props.getItems(this.props.value.toString()),t=Ni(e,this.props.value)?.label||this.props.value.toString();this.setState({inputValue:t})}};focus=()=>{this.inputRef.current&&this.inputRef.current.focus()};blur=()=>{this.inputRef.current&&this.inputRef.current.blur()};onInputValueChanged=e=>{e!==this.state.inputValue&&this.setState({inputValue:e})};render(){const{initialIsOpen:e,placeholder:t,getItems:i,value:n=null,className:r,style:l,optionClassName:o,visibleItemsRange:a,ariaLabel:s}=this.props,d=i(this.state.inputValue),c=null===n?[]:i(n.toString()),u=null!==n&&Ni(c,n)||null,m=Si(d),g=""!==this.state.inputValue.trim();return(0,ie.jsx)(zr,{onChange:this.onChange,itemToString:xi,initialIsOpen:e,selectedItem:u,itemCount:m.length,inputValue:this.state.inputValue,defaultHighlightedIndex:u||g?0:ln(m),children:({getInputProps:e,getMenuProps:i,getItemProps:n,isOpen:c,openMenu:g,closeMenu:p,inputValue:f,highlightedIndex:h,setHighlightedIndex:b,selectItem:y})=>{const v=h>m.length-1?0:h,C={items:d,selectedItem:u,highlightedIndex:v,getItemProps:n,getMenuProps:i,className:"gd-dynamic-select-menu",optionClassName:o,inputValue:f,setHighlightedIndex:b,visibleItemsRange:a};return(0,ie.jsxs)("div",{className:fe("gd-dynamic-select",r),style:l,"aria-labelledby":void 0,children:[(0,ie.jsx)("div",{className:"gd-dynamic-select-input-wrapper",children:(0,ie.jsx)("input",{type:"text",className:"s-relative-range-input gd-input-field","aria-label":s,...e({"aria-labelledby":void 0,ref:this.inputRef,placeholder:u?u.label:t,value:f,onFocus:()=>{this.setState({inputValue:""}),g()},onChange:e=>this.onChangeHandler(e,y),onBlur:()=>this.onBlurHandler(u,y,p)})})}),c&&d.length>0?(0,ie.jsx)(on,{...C}):null]})}})}onBlurHandler=(e,t,i)=>{const{customValueValidator:n,value:r}=this.props;n?(i(),this.onInputValueChanged(r?.toString())):(t(e),this.onInputValueChanged(e?e.label:""))};onChangeHandler=(e,t)=>{const{customValueValidator:i}=this.props,n=e.target.value;i?.(n)&&t({type:"option",value:Number(n),label:n}),this.onInputValueChanged(n)}}function Kr({selectedValue:e,onSelect:t}){const i=B();return(0,ie.jsx)(Gr,{getItems:e=>qr(e,i),onChange:t,value:e,className:"gd-rf-value-dropdown-button s-rf-value-dropdown-button",optionClassName:"s-rf-value-dropdown-item",customValueValidator:Wr})}const Ur=(e,t)=>{const i=e.rankingFilter,n=t.rankingFilter,r=i.operator===n.operator,l=i.value===n.value,o=(0,h.Z)(Ir(i.attributes,n.attributes,ne.Z)),a=(0,ne.Z)(i.measure,n.measure);return r&&l&&o&&a};function $r({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=(()=>{}),onDropDownItemMouseOver:l,onDropDownItemMouseOut:o,customGranularitySelection:a,enableRenamingMeasureToMetric:s}){const d=B(),c=i.rankingFilter,[u,m]=(0,j.useState)(c.value),[p,f]=(0,j.useState)(c.operator),[h,b]=(0,j.useState)(c.measure),[y,v]=(0,j.useState)(c.attributes?.[0]),C=e.find((e=>(0,g.areObjRefsEqual)(e.ref,h))),x=t.find((e=>(0,g.areObjRefsEqual)(e.ref,y))),S=(0,j.useCallback)((()=>y?(0,g.newRankingFilter)(h,[y],p,u):(0,g.newRankingFilter)(h,p,u)),[h,y,p,u]);return(0,ie.jsxs)("div",{className:"gd-dialog gd-dropdown overlay gd-rf-dropdown-body s-rf-dropdown-body",children:[(0,ie.jsx)("div",{className:"gd-rf-dropdown-header",children:(0,ie.jsx)(ke,{id:"rankingFilter.topBottom"})}),(0,ie.jsxs)("div",{className:"gd-rf-dropdown-section",children:[(0,ie.jsxs)("div",{className:"gd-rf-value-section",children:[(0,ie.jsx)(Br,{selectedValue:p,onSelect:f}),(0,ie.jsx)(Kr,{selectedValue:u,onSelect:m}),(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsx)("span",{className:"gd-icon-circle-question gd-rf-value-tooltip-icon s-rf-value-tooltip-icon"}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-value-tooltip",alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:(0,ie.jsx)(ke,{id:"rankingFilter.valueTooltip"})})]})]}),(0,ie.jsx)("div",{className:"gd-rf-dropdown-section-title",children:(0,ie.jsx)(ke,{id:"rankingFilter.outOf"})}),(0,ie.jsx)(Pr,{items:t,selectedItemRef:y,onSelect:v,onDropDownItemMouseOver:l,onDropDownItemMouseOut:o,customGranularitySelection:a}),(0,ie.jsx)("div",{className:"gd-rf-dropdown-section-title",children:(0,ie.jsx)(ke,{id:"rankingFilter.basedOn"})}),(0,ie.jsx)(Tr,{items:e,selectedItemRef:h,onSelect:b,onDropDownItemMouseOver:l,onDropDownItemMouseOut:o,enableRenamingMeasureToMetric:s}),(0,ie.jsx)("div",{className:"gd-rf-dropdown-section-title",children:(0,ie.jsx)(ke,{id:"rankingFilter.preview"})}),(0,ie.jsx)(Vr,{measure:C,attribute:x,operator:p,value:u})]}),(0,ie.jsxs)("div",{className:"gd-rf-dropdown-footer",children:[(0,ie.jsx)(le.Button,{className:"gd-button-secondary gd-button-small s-rf-dropdown-cancel",onClick:()=>r(),value:d.formatMessage({id:"cancel"})}),(0,ie.jsx)(le.Button,{className:"gd-button-action gd-button-small s-rf-dropdown-apply",onClick:()=>{const e=S();n(e)},value:d.formatMessage({id:"apply"}),disabled:Ur(i,S())})]})]})}const Yr=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),Qr=e=>{const{measure:t,attributes:i,operator:n,value:r}=e.rankingFilter,l=i?.[0];return{rankingFilter:{operator:n,value:r,measure:t,...l?{attributes:[l]}:{}}}};function Jr({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=(()=>{}),anchorEl:l,onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s,enableRenamingMeasureToMetric:d}){const[c,u]=(0,j.useState)(Qr(i));return(0,ie.jsx)(le.Overlay,{closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,alignTo:l,alignPoints:Yr,onClose:r,ignoreClicksOnByClass:[".gd-rf-inner-overlay-dropdown"],children:(0,ie.jsx)($r,{measureItems:e,attributeItems:t,filter:c,onApply:e=>{u(e),n(e)},onCancel:r,onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s,enableRenamingMeasureToMetric:d})})}function Xr(e){return(0,ie.jsx)(D.IntlWrapper,{locale:e.locale,children:(0,ie.jsx)(Jr,{...e})})}function el({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=(()=>{}),buttonTitle:l,onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s,locale:d,enableRenamingMeasureToMetric:c}){const[u,m]=(0,j.useState)(!1);return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(fr,{isActive:u,onClick:()=>{m(!u)},title:l,className:"gd-rf-dropdown-button"}),u?(0,ie.jsx)(Xr,{measureItems:e,attributeItems:t,filter:i,onApply:e=>{n(e),m(!1)},onCancel:()=>{r(),m(!1)},anchorEl:".gd-rf-dropdown-button",onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s,locale:d,enableRenamingMeasureToMetric:c}):null]})}var tl=i(47591),il=i(65846),nl=i(29732),rl=i(10469);const ll={transformFilterToPrimaryLabel:(e,t)=>{e.displayFormRef=t.payload.primaryLabelRef,e.displayAsLabelRef||(e.displayAsLabelRef=t.payload.secondaryLabelRef)},setDisplayAsLabel:(e,t)=>{(0,g.areObjRefsEqual)(e.displayAsLabelRef,t.payload.displayAsLabel)||(e.elements.cache={}),e.displayAsLabelRef=t.payload.displayAsLabel},setDisplayFormRef:(e,t)=>{e.displayFormRef=t.payload.displayForm}};var ol=i(69203);const al={setElementsTotalCount:(e,t)=>{e.elements.totalCount=t.payload.totalCount},initTotalCount:ol.Z,initTotalCountStart:e=>{e.elements.totalCountInitialization.status="loading"},initTotalCountSuccess:e=>{e.elements.totalCountInitialization.status="success"},initTotalCountError:(e,t)=>{e.elements.totalCountInitialization.status="error",e.elements.totalCountInitialization.error=t.payload.error},initTotalCountCancel:e=>{e.elements.totalCountInitialization.status="canceled"},setElementsTotalCountWithCurrentSettings:(e,t)=>{e.elements.totalCountWithCurrentSettings=t.payload.totalCount},setOffset:(e,t)=>{e.elements.currentOptions.offset=t.payload.offset},setLimit:(e,t)=>{e.elements.currentOptions.limit=t.payload.limit},setSearch:(e,t)=>{e.elements.currentOptions.search=t.payload.search},setOrder:(e,t)=>{e.elements.currentOptions.order=t.payload.order},setLimitingAttributeFilters:(e,t)=>{e.elements.currentOptions.limitingAttributeFilters=t.payload.filters},setLimitingMeasures:(e,t)=>{e.elements.currentOptions.limitingMeasures=t.payload.filters},setLimitingValidationItems:(e,t)=>{e.elements.currentOptions.limitingValidationItems=t.payload.validateBy},setLimitingDateFilters:(e,t)=>{e.elements.currentOptions.limitingDateFilters=t.payload.filters},setLimitingAttributeFiltersAttributes:(e,t)=>{e.elements.limitingAttributeFiltersAttributes=t.payload.attributes},setCacheId:(e,t)=>{e.elements.cacheId=t.payload.cacheId}},sl={init:ol.Z,initStart:e=>{e.initialization.status="loading"},initSuccess:e=>{e.initialization.status="success",e.initialization.error=void 0},initError:(e,t)=>{e.initialization.status="error",e.initialization.error=t.payload.error},initCancel:e=>{e.initialization.status="canceled"}},dl={loadAttributeRequest:ol.Z,loadAttributeStart:e=>{e.attribute.status="loading",e.attribute.error=void 0,e.attribute.data=void 0},loadAttributeSuccess:(e,t)=>{e.attribute.status="success",e.attribute.data=t.payload.attribute},loadAttributeError:(e,t)=>{e.attribute.status="error",e.attribute.error=t.payload.error},loadAttributeCancelRequest:ol.Z,loadAttributeCancel:e=>{e.attribute.status="canceled"}};var cl=i(20434);const ul=e=>e,ml=(e,t,i)=>"uris"===e.elementsForm||i?t.uri:t.title,gl=e=>e.elementsForm,pl=e=>e.config.withoutApply,fl="initSelection_",hl={loadCustomElementsRequest:ol.Z,loadCustomElementsStart:ol.Z,loadCustomElementsSuccess:(e,t)=>{const i=[],{enableDuplicatedLabelValuesInAttributeFilter:n,options:{elements:r,filterByPrimaryLabel:l},correlation:o}=t.payload,a="loading"===e.initialization.status&&o.startsWith(fl);if(n&&r){const o=(e=>e?(0,cl.isElementsQueryOptionsElementsByValue)(e)?e.values:(0,cl.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e)?e.primaryValues:e.uris:[])(r);o.forEach((r=>{t.payload.elements.filter((e=>l?e.uri===r:e.title===r)).forEach((t=>{const r=ml(e,t,n);e.elements.cache[r]||(e.elements.cache[r]=t),a&&i.push(r)}))}))}else t.payload.elements.forEach((t=>{const r=ml(e,t,n);e.elements.cache[r]||(e.elements.cache[r]=t),a&&i.push(r)}));n&&a&&(e.selection.working.keys=i,e.selection.commited.keys=i)},loadCustomElementsError:ol.Z,loadCustomElementsCancelRequest:ol.Z,loadCustomElementsCancel:ol.Z},bl={loadInitialElementsPageRequest:ol.Z,loadInitialElementsPageStart:e=>{e.elements.initialPageLoad.status="loading",e.elements.initialPageLoad.error=void 0,e.elements.currentOptions.offset=0,e.elements.lastLoadedOptions.offset=0,e.elements.data=[]},loadInitialElementsPageSuccess:(e,t)=>{const{enableDuplicatedLabelValuesInAttributeFilter:i}=t.payload;e.elements.initialPageLoad.status="success",e.elements.totalCountWithCurrentSettings=t.payload.totalCount,t.payload.elements.forEach((t=>{const n=ml(e,t,i);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=t.payload.elements.map((t=>ml(e,t,i))),e.elements.lastLoadedOptions=t.payload.options},loadInitialElementsPageError:(e,t)=>{e.elements.initialPageLoad.status="error",e.elements.initialPageLoad.error=t.payload.error},loadInitialElementsPageCancelRequest:ol.Z,loadInitialElementsPageCancel:e=>{e.attribute.status="canceled"}},yl={loadIrrelevantElementsRequest:ol.Z,loadIrrelevantElementsStart:e=>{e.selection.commited.irrelevantKeys=[],e.selection.working.irrelevantKeys=[]},loadIrrelevantElementsSuccess:(e,t)=>{e.selection.commited.irrelevantKeys=t.payload.elementTitles,e.selection.working.irrelevantKeys=t.payload.elementTitles},loadIrrelevantElementsError:ol.Z,loadIrrelevantElementsCancelRequest:ol.Z,loadIrrelevantElementsCancel:ol.Z},vl={loadNextElementsPageRequest:ol.Z,loadNextElementsPageStart:e=>{e.elements.nextPageLoad.status="loading",e.elements.nextPageLoad.error=void 0},loadNextElementsPageSuccess:(e,t)=>{const{enableDuplicatedLabelValuesInAttributeFilter:i}=t.payload;e.elements.nextPageLoad.status="success",t.payload.elements.forEach((t=>{const n=ml(e,t,i);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=e.elements.data.concat(t.payload.elements.map((t=>ml(e,t,i)))),e.elements.lastLoadedOptions=t.payload.options},loadNextElementsPageError:(e,t)=>{e.elements.nextPageLoad.status="error",e.elements.nextPageLoad.error=t.payload.error},loadNextElementsPageCancelRequest:ol.Z,loadNextElementsPageCancel:e=>{e.elements.nextPageLoad.status="canceled"}};var Cl=i(19119);const xl=(0,Cl.P1)(ul,(e=>e.selection.working.keys)),Sl=(0,Cl.P1)(ul,(e=>e.selection.working.isInverted)),Il=(0,Cl.P1)(ul,(e=>e.selection.working.irrelevantKeys)),El=(0,Cl.P1)(ul,(e=>e.selection.commited.keys)),Fl=(0,Cl.P1)(ul,(e=>e.selection.commited.isInverted)),wl=(0,Cl.P1)(ul,(e=>e.selection.commited.irrelevantKeys)),kl=(0,Cl.P1)(xl,Sl,Il,((e,t,i)=>({keys:e,isInverted:t,irrelevantKeys:i}))),Al=(0,Cl.P1)(El,Fl,wl,((e,t,i)=>({keys:e,isInverted:t,irrelevantKeys:i}))),Dl=(0,Cl.P1)(Sl,xl,Fl,El,((e,t,i,n)=>e!==i||!(0,ne.Z)([...n].sort(),[...t].sort()))),Pl=(0,Cl.P1)(xl,h.Z),Ol={...sl,...dl,...bl,...vl,...hl,...yl,changeSelection:(e,t)=>{e.selection.working.keys=t.payload.selection,t.payload.irrelevantSelection&&(e.selection.working.irrelevantKeys=t.payload.irrelevantSelection),null!==t.payload.isInverted&&void 0!==t.payload.isInverted&&(e.selection.working.isInverted=t.payload.isInverted)},revertSelection:e=>{const t=El(e),i=Fl(e),n=wl(e);e.selection.working.keys=t,e.selection.working.isInverted=i,e.selection.working.irrelevantKeys=n},commitSelection:e=>{const t=xl(e),i=Sl(e),n=Il(e);e.selection.commited.keys=t,e.selection.commited.isInverted=i,e.selection.commited.irrelevantKeys=n},invertSelection:e=>{const t=Sl(e);e.selection.working.isInverted=!t},clearSelection:e=>{e.selection.working.keys=[]},...al,...ll},jl={initialization:{status:"pending"},attribute:{status:"pending"},elements:{cache:{},currentOptions:{offset:0,limit:500,search:"",limitingAttributeFilters:[],limitingDateFilters:[],limitingMeasures:[],limitingValidationItems:[]},initialPageLoad:{status:"pending"},nextPageLoad:{status:"pending"},limitingAttributeFiltersAttributes:[],lastLoadedOptions:{},totalCountInitialization:{status:"pending"}},config:{},selection:{commited:{},working:{}}},Tl=(0,rl.oM)({name:"attributeFilterSlice",initialState:jl,reducers:Ol}),Nl=Tl.reducer,Ml=Tl.actions;function Ll(e,t){if((0,D.isGoodDataSdkError)(t)){const i=t.getCause(),n=i?`\nInner error: ${i}`:"";console.error(`Error while ${e}: ${t.getMessage()}${n}`)}else console.error(`Error while ${e}:`,t)}function Rl(){let e=[];return{invoke:t=>{e.forEach((e=>e(t)))},subscribe:t=>(e.push(t),function(){e=e.filter((e=>e!=t))})}}var Bl=i(30797),_l=i(34857);async function Vl(e,t){return e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t).catch((e=>{throw(0,D.convertError)(e)}))}function*Hl(){return yield(0,_l.fw)("attributeFilterContext")}var Zl=i(34468),Wl=i(44176),ql=i(94207);const zl=(e,t)=>(0,nl.Z)(e.map((e=>t[e]))),Gl=(0,Cl.P1)(ul,(e=>e.elements.data??[])),Kl=(0,Cl.P1)(ul,(e=>e.elements.cache)),Ul=(0,Cl.P1)(Gl,Kl,zl),$l=(0,Cl.P1)(ul,(e=>e.elements.totalCount)),Yl=(0,Cl.P1)(ul,(e=>e.elements.totalCountInitialization?.status)),Ql=(0,Cl.P1)(ul,(e=>e.elements.totalCountInitialization?.error)),Jl=(0,Cl.P1)(ul,(e=>e.elements.totalCountWithCurrentSettings)),Xl=(0,Cl.P1)(ul,(e=>e.config.staticElements??[])),eo=(0,Cl.P1)(ul,(e=>e.elements.currentOptions.search)),to=(0,Cl.P1)(ul,(e=>e.elements.currentOptions.order)),io=(0,Cl.P1)(ul,(e=>e.elements.currentOptions.limit)),no=(0,Cl.P1)(ul,(e=>e.elements?.lastLoadedOptions?.offset??e.elements.currentOptions.offset)),ro=(0,Cl.P1)(ul,(e=>e.elements.currentOptions.limitingAttributeFilters)),lo=(0,Cl.P1)(ul,(e=>e.elements.currentOptions.limitingMeasures)),oo=(0,Cl.P1)(ul,(e=>e.elements.currentOptions.limitingValidationItems)),ao=(0,Cl.P1)(ul,(e=>e.elements.currentOptions.limitingDateFilters)),so=(0,Cl.P1)(ul,(e=>e.elements.cacheId)),co=(0,Cl.P1)(no,io,to,eo,ro,lo,ao,oo,((e,t,i,n,r,l,o,a)=>({limit:t,limitingAttributeFilters:r,limitingDateFilters:o,limitingMeasures:l,limitingValidationItems:a,offset:e,order:i,search:n}))),uo=(0,Cl.P1)(ul,(e=>e.elements.lastLoadedOptions)),mo=(0,Cl.P1)(ul,(e=>e.elements.limitingAttributeFiltersAttributes)),go=(0,Cl.P1)(ul,(e=>e.elementsForm)),po=(0,Cl.P1)(ul,(e=>e.config.hiddenElements??[])),fo=(0,Cl.P1)(go,po,((e,t)=>"uris"===e?{uris:t}:{values:t})),ho=(0,Cl.P1)(ul,(e=>e.displayFormRef)),bo=(0,Cl.P1)(ul,(e=>e.displayAsLabelRef)),yo=(0,Cl.P1)(ul,(e=>e.localIdentifier)),vo=(0,Cl.P1)(ul,(e=>e.originalFilter)),Co=(0,Cl.P1)(go,El,((e,t)=>"uris"===e?{uris:t}:{values:t})),xo=(0,Cl.P1)(go,El,Fl,po,((e,t,i,n)=>{const r=i?(0,Zl.Z)(t,n):(0,Wl.Z)(t,n);return"uris"===e?{uris:r}:{values:r}})),So=(0,Cl.P1)(go,El,Fl,po,Ul,((e,t,i,n,r)=>{const l=i?(0,Zl.Z)(t,n):(0,Wl.Z)(t,n),o=r.filter((e=>l.find((t=>t===e.uri)))).map((e=>e.title)),a=(0,ql.Z)(o);return"uris"===e?{uris:a}:{values:a}})),Io=(0,Cl.P1)(ho,Fl,xo,yo,((e,t,i,n)=>t?(0,g.newNegativeAttributeFilter)(e,i,n):(0,g.newPositiveAttributeFilter)(e,i,n))),Eo=(0,Cl.P1)(ho,bo,Fl,xo,So,yo,((e,t,i,n,r,l)=>i?(0,g.newNegativeAttributeFilter)(t??e,t?r:n,l):(0,g.newPositiveAttributeFilter)(t??e,t?r:n,l)));function*Fo(){yield(0,_l.Fm)([Ml.loadAttributeRequest.match,Ml.loadAttributeCancelRequest.match],wo)}function*wo(e){if(Ml.loadAttributeCancelRequest.match(e))return;const{payload:{correlation:t}}=e;try{const e=yield(0,_l.Ys)(ho),i=yield(0,_l.RE)(Hl);yield(0,_l.gz)(Ml.loadAttributeStart({correlation:t}));const n=yield(0,_l.RE)(Vl,i,e);if(i.enableDuplicatedLabelValuesInAttributeFilter){const i=n.displayForms.find((e=>e.isPrimary)),r=yield(0,_l.Ys)(bo);i?.ref&&r&&!(0,g.areObjRefsEqual)(e,i?.ref)&&!(0,g.areObjRefsEqual)(r,i?.ref)&&console.error("AttributeFilter: Filter's displayForm is not primary and provided displayAsLabel is not primary either -> filter will not work correctly. Please provide primary display form in filter definition."),i?.ref&&!(0,g.areObjRefsEqual)(e,i?.ref)&&(console.warn("AttributeFilter: Filter's displayForm is not primary but enableDuplicatedLabelValuesInAttributeFilter is set -> migrating filter to primary label"),yield(0,_l.gz)(Ml.transformFilterToPrimaryLabel({primaryLabelRef:i?.ref,secondaryLabelRef:e,correlation:t})))}return yield(0,_l.gz)(Ml.loadAttributeSuccess({attribute:n,correlation:t})),n}catch(e){yield(0,_l.gz)(Ml.loadAttributeError({error:e,correlation:t}))}finally{(yield(0,_l.By)())&&(yield(0,_l.gz)(Ml.loadAttributeCancel({correlation:t})))}}async function ko(e,t){const i=t.map((e=>(0,g.filterObjRef)(e.attributeFilter)));return Promise.all(i.map((t=>e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t)))).catch((e=>{throw(0,D.convertError)(e)}))}var Ao=i(8297);class Do{allItems;items;limit;offset;totalCount;constructor(e,t=50,i=0){this.allItems=e,(0,tl.kG)(i>=0,`paging offset must be non-negative, got: ${i}`),(0,tl.kG)(t>0,`limit must be a positive number, got: ${t}`),this.items=e.slice(i,i+t),this.offset=Math.min(i,e.length),this.limit=t,this.totalCount=e.length}async next(){return 0===this.items.length?this:new Do(this.allItems,this.limit,this.offset+this.items.length)}async goTo(e){return 0===this.items.length?this:new Do(this.allItems,this.limit,e*this.items.length)}async all(){return[...this.allItems]}async allSorted(e){return[...this.allItems].sort(e)}}const Po=e=>!!e.capabilities.supportsElementUris,Oo=e=>t=>(0,g.attributeElementsIsEmpty)(e)?t:(0,g.isAttributeElementsByRef)(e)?t.filter((t=>!e.uris.includes(t.uri))):t.filter((t=>!e.values.includes(t.title))),jo=e=>t=>{if(!e)return t;if((0,cl.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e))throw new cl.NotImplemented("Elements by primary display form value are not supported yet");return(0,cl.isElementsQueryOptionsElementsByValue)(e)?t.filter((t=>e.values.includes(t.title))):t.filter((t=>e.uris.includes(t.uri)))},To=e=>t=>e?t.filter((t=>t.title.toLowerCase().includes(e.toLowerCase()))):t;async function No(e,t,i,n,r){return n?.length?async function(e,t,i){let n=To(e.search)(jo(e.elements)(Oo(t.hiddenElements)(i)));return"desc"===e.order&&(n=[...n].reverse()),new Do(n,e.limit,e.offset)}(t,i,n):async function(e,t,i,n){const{backend:r,workspace:l}=e,{displayFormRef:o,elements:a,limit:s,limitingAttributeFilters:d,limitingDateFilters:c,limitingMeasures:u,limitingValidationItems:m,offset:p,search:f,order:b,includeTotalCountWithoutFilters:y,excludePrimaryLabel:v=!0,filterByPrimaryLabel:C,signal:x}=t,S=(0,h.Z)(d)&&(0,h.Z)(c)&&(0,h.Z)(u)&&!f&&!v&&!b&&0===p;if(Po(r)&&(0,cl.isElementsQueryOptionsElementsByValue)(a)&&S){const e=await async function(e,t,i,n,r){const l=n.values,o=[(0,g.newPositiveAttributeFilter)(i,l)];(0,g.attributeElementsIsEmpty)(r.hiddenElements)||o.push((0,g.newNegativeAttributeFilter)(i,r.hiddenElements));const a=await e.workspace(t).execution().forItems([(0,g.newAttribute)(i)],o).execute().catch((e=>{throw(0,D.convertError)(e)})),s=await a.readAll().catch((e=>{throw(0,D.convertError)(e)})),d=D.DataViewFacade.for(s),[c]=d.meta().attributeHeaders();return c.map((([e])=>({title:e.attributeHeaderItem.name,uri:e.attributeHeaderItem.uri})))}(r,l,o,a,i);return new Do(e,s,p)}let I=r.workspace(l).attributes().elements().forDisplayForm(o);const E={cacheId:n,filterByPrimaryLabel:C};s&&(I=I.withLimit(s)),p&&(I=I.withOffset(p)),f&&(E.filter=f),v&&!Po(r)&&(E.excludePrimaryLabel=!0),a&&(E.elements=Po(r)||(0,cl.isValueBasedElementsQueryOptionsElements)(a)?a:{primaryValues:a.uris}),b&&(E.order=b),y&&(E.includeTotalCountWithoutFilters=y),(0,h.Z)(E)||(I=I.withOptions(E)),c?.length&&(I=I.withDateFilters(c));const F=function(e,t,i,n){return(0,g.attributeElementsIsEmpty)(i)?t??[]:[{attributeFilter:(0,g.newNegativeAttributeFilter)(e,i),overAttribute:n.ref},...t??[]]}(o,d,i.hiddenElements,i.attribute);return F.length&&(I=I.withAttributeFilters(F)),u?.length&&(I=I.withMeasures(u)),x&&I.withSignal(x),r.capabilities.supportsAttributeFilterElementsLimiting&&m?.length>0&&(I=I.withAvailableElementsOnly(m)),I.query().catch((e=>{throw(0,D.convertError)(e)}))}(e,t,i,r)}const Mo=(0,Cl.P1)(ul,(e=>e.attribute.data)),Lo=(0,Cl.P1)(ul,(e=>e.attribute.status)),Ro=(0,Cl.P1)(ul,(e=>e.attribute.error));function*Bo(e,t){const i=yield(0,_l.RE)(Hl),n=yield(0,_l.Ys)(fo),r=yield(0,_l.Ys)(Mo),l=yield(0,_l.Ys)(ho),o=yield(0,_l.Ys)(bo),a=yield(0,_l.Ys)(Xl),{enableDuplicatedLabelValuesInAttributeFilter:s}=i,d=s&&o&&!e.search?{filterByPrimaryLabel:!0}:{},c={...e,...d},u=yield(0,_l.RE)(No,i,{displayFormRef:s&&o?o:l,...c},{hiddenElements:n,attribute:r},a,t);return{elements:u.items,totalCount:u.totalCount,options:(0,Ao.Z)(c,"signal"),cacheId:u.cacheId}}const _o=(e,t)=>!e.enableDuplicatedLabelValuesInAttributeFilter&&!e.backend.capabilities.supportsElementUris&&"values"===t;function*Vo(){yield(0,_l.Fm)([Ml.loadInitialElementsPageRequest.match,Ml.loadInitialElementsPageCancelRequest.match],Ho)}function*Ho(e){if(Ml.loadInitialElementsPageCancelRequest.match(e))return;const t=yield(0,_l.RE)(Hl),i=new AbortController,{payload:{correlation:n}}=e;try{yield(0,_l.gz)(Ml.loadInitialElementsPageStart({correlation:n}));const e=yield(0,_l.Ys)(co),r=yield(0,_l.Ys)(so),l=yield(0,_l.Ys)(gl),o={...e,signal:i.signal,excludePrimaryLabel:_o(t,l)},a=yield(0,_l.RE)(Bo,o,r),s=yield(0,_l.RE)(ko,t,e.limitingAttributeFilters??[]);yield(0,_l.gz)(Ml.setLimitingAttributeFiltersAttributes({attributes:s})),yield(0,_l.gz)(Ml.setCacheId({cacheId:a.cacheId})),yield(0,_l.gz)(Ml.loadInitialElementsPageSuccess({...a,correlation:n,enableDuplicatedLabelValuesInAttributeFilter:t.enableDuplicatedLabelValuesInAttributeFilter}))}catch(e){yield(0,_l.gz)(Ml.loadInitialElementsPageError({error:e,correlation:n}))}finally{(yield(0,_l.By)())&&(i.abort(),yield(0,_l.gz)(Ml.loadInitialElementsPageCancel({correlation:n})))}}const Zo=(0,Cl.P1)(ul,(e=>e.elements.nextPageLoad.status)),Wo=(0,Cl.P1)(ul,(e=>e.elements.nextPageLoad.error)),qo=(0,Cl.P1)(uo,(e=>({...e,offset:e.offset+e.limit}))),zo=(0,Cl.P1)(uo,Jl,((e,t)=>e.offset+e.limit<t)),Go=(0,Cl.P1)(co,uo,((e,t)=>!(0,ne.Z)((0,Ao.Z)(e,"offset","excludePrimaryLabel","filterByPrimaryLabel"),(0,Ao.Z)(t,"offset","excludePrimaryLabel","filterByPrimaryLabel"))));function*Ko(){yield(0,_l.Fm)([Ml.loadNextElementsPageRequest.match,Ml.loadNextElementsPageCancelRequest.match,Ml.loadInitialElementsPageRequest.match],Uo)}function*Uo(e){const t=yield(0,_l.RE)(Hl);if(Ml.loadNextElementsPageCancelRequest.match(e)||Ml.loadInitialElementsPageRequest.match(e))return;const{payload:{correlation:i}}=e;if(yield(0,_l.Ys)(zo))try{yield(0,_l.gz)(Ml.loadNextElementsPageStart({correlation:i}));const e=yield(0,_l.Ys)(qo),n=yield(0,_l.Ys)(so),r=yield(0,_l.Ys)(gl),l={...e,excludePrimaryLabel:_o(t,r)},o=yield(0,_l.RE)(Bo,l,n);yield(0,_l.gz)(Ml.loadNextElementsPageSuccess({...o,correlation:i,enableDuplicatedLabelValuesInAttributeFilter:t.enableDuplicatedLabelValuesInAttributeFilter}))}catch(e){yield(0,_l.gz)(Ml.loadNextElementsPageError({error:e,correlation:i}))}finally{(yield(0,_l.By)())&&(yield(0,_l.gz)(Ml.loadNextElementsPageCancel({correlation:i})))}}function*$o(){yield(0,_l.ib)([Ml.loadCustomElementsRequest.match],Yo)}function*Yo(e){const{payload:{correlation:t,options:i}}=e;try{yield(0,_l.gz)(Ml.loadCustomElementsStart({correlation:t}));const e=yield(0,_l.RE)(Hl),{result:n,canceled:r,anotherRequest:l}=yield(0,_l.S3)({result:(0,_l.RE)(Bo,i),anotherRequest:(0,_l.qn)((e=>Ml.loadCustomElementsRequest.match(e)&&(!t||e.payload.correlation===t))),canceled:(0,_l.qn)((e=>Ml.loadCustomElementsCancelRequest.match(e)&&(!t||e.payload.correlation===t)))});if(n)return yield(0,_l.gz)(Ml.loadCustomElementsSuccess({...n,correlation:t,enableDuplicatedLabelValuesInAttributeFilter:e.enableDuplicatedLabelValuesInAttributeFilter})),n;(r||l)&&(yield(0,_l.gz)(Ml.loadCustomElementsCancel({correlation:t})))}catch(e){yield(0,_l.gz)(Ml.loadCustomElementsError({error:e,correlation:t}))}finally{(yield(0,_l.By)())&&(yield(0,_l.gz)(Ml.loadCustomElementsCancel({correlation:t})))}}function*Qo(){yield(0,_l.Fm)([Ml.loadIrrelevantElementsRequest.match,Ml.loadIrrelevantElementsCancelRequest.match],Jo)}function*Jo(e){if(Ml.loadIrrelevantElementsCancelRequest.match(e))return;const t=yield(0,_l.RE)(Hl),i=new AbortController,{payload:{correlation:n}}=e;try{yield(0,_l.gz)(Ml.loadIrrelevantElementsStart({correlation:n}));const e=yield(0,_l.Ys)(gl),r=yield(0,_l.Ys)(co),l=yield(0,_l.Ys)(pl),o=yield(0,_l.Ys)(l?xl:El),a="values"===e?{values:o}:{uris:o},s={...r,signal:i.signal,excludePrimaryLabel:_o(t,e),search:"",elements:a},d=(yield(0,_l.RE)(Bo,s)).elements.map((e=>t.enableDuplicatedLabelValuesInAttributeFilter?e.uri:e.title)),c=(0,Wl.Z)(o,d);yield(0,_l.gz)(Ml.loadIrrelevantElementsSuccess({elementTitles:c,correlation:n}))}catch(e){yield(0,_l.gz)(Ml.loadIrrelevantElementsError({error:e,correlation:n}))}finally{(yield(0,_l.By)())&&(i.abort(),yield(0,_l.gz)(Ml.loadIrrelevantElementsCancel({correlation:n})))}}function*Xo(e){yield(0,_l.rM)(wo,Ml.loadAttributeRequest({correlation:e}));const{error:t}=yield(0,_l.S3)({success:(0,_l.qn)((t=>Ml.loadAttributeSuccess.match(t)&&t.payload.correlation===e)),error:(0,_l.qn)((t=>Ml.loadAttributeError.match(t)&&t.payload.correlation===e)),cancel:(0,_l.qn)((t=>Ml.loadAttributeCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*ea(e){yield(0,_l.rM)(Ho,Ml.loadInitialElementsPageRequest({correlation:e}));const{error:t}=yield(0,_l.S3)({success:(0,_l.qn)((t=>Ml.loadInitialElementsPageSuccess.match(t)&&t.payload.correlation===e)),error:(0,_l.qn)((t=>Ml.loadInitialElementsPageError.match(t)&&t.payload.correlation===e)),cancel:(0,_l.qn)((t=>Ml.loadInitialElementsPageCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*ta(e){yield(0,_l.rM)(Jo,Ml.loadIrrelevantElementsRequest({correlation:e}));const{error:t}=yield(0,_l.S3)({success:(0,_l.qn)((t=>Ml.loadIrrelevantElementsSuccess.match(t)&&t.payload.correlation===e)),error:(0,_l.qn)((t=>Ml.loadIrrelevantElementsError.match(t)&&t.payload.correlation===e)),cancel:(0,_l.qn)((t=>Ml.loadIrrelevantElementsCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*ia(e){const t=yield(0,_l.Ys)(Co),i=yield(0,_l.RE)(Hl),n=yield(0,_l.Ys)(gl),r=(0,g.isAttributeElementsByRef)(t)?t.uris:t.values;if(0===r.length)return;const l=`${fl}${e}`;yield(0,_l.rM)(Yo,Ml.loadCustomElementsRequest({options:{elements:t,offset:0,limit:Math.max(550,r.length),search:void 0,excludePrimaryLabel:_o(i,n)},correlation:l}));const{error:o}=yield(0,_l.S3)({success:(0,_l.qn)((e=>Ml.loadCustomElementsSuccess.match(e)&&e.payload.correlation===l)),error:(0,_l.qn)((e=>Ml.loadCustomElementsError.match(e)&&e.payload.correlation===l)),cancel:(0,_l.qn)((e=>Ml.loadCustomElementsCancel.match(e)&&e.payload.correlation===l))});if(o)throw o.payload.error}function*na(e){const t=`initTotalCount_${e}`,i=yield(0,_l.RE)(Hl),n=yield(0,_l.Ys)(gl);yield(0,_l.rM)(Yo,Ml.loadCustomElementsRequest({options:{limit:1,includeTotalCountWithoutFilters:!0,excludePrimaryLabel:_o(i,n)},correlation:t}));const{success:r,error:l}=yield(0,_l.S3)({success:(0,_l.qn)((e=>Ml.loadCustomElementsSuccess.match(e)&&e.payload.correlation===t)),error:(0,_l.qn)((e=>Ml.loadCustomElementsError.match(e)&&e.payload.correlation===t)),cancel:(0,_l.qn)((e=>Ml.loadCustomElementsCancel.match(e)&&e.payload.correlation===t))});if(l)throw l.payload.error;r&&(yield(0,_l.gz)(Ml.setElementsTotalCount({totalCount:r.payload.totalCount})))}function ra(e){return(0,h.Z)(e)||e.every((e=>!!(0,g.isNegativeAttributeFilter)(e.attributeFilter)&&(0,g.attributeElementsIsEmpty)((0,g.filterAttributeElements)(e.attributeFilter))))}function*la(){yield(0,_l.Fm)(Ml.init.match,oa)}function*oa(e){const{payload:{correlation:t}}=e;try{yield(0,_l.gz)(Ml.initStart({correlation:t}));const e=yield(0,_l.RE)(Hl),i=yield(0,_l.Ys)(po),n=yield(0,_l.Ys)(ro),r=yield(0,_l.Ys)(oo),l=yield(0,_l.Ys)(ao),o=yield(0,_l.Ys)(Pl),a=e.backend.capabilities.supportsShowingFilteredElements,s=!ra(n)||r.length>0||l.length>0,d=[ia,ea];i?.length>0?yield(0,_l.RE)(Xo,t):d.unshift(Xo),s&&d.push(na),s&&!o&&a&&d.push(ta),yield(0,_l.$6)(d.map((e=>(0,_l.RE)(e,t)))),yield(0,_l.gz)(Ml.initSuccess({correlation:t}))}catch(e){yield(0,_l.gz)(Ml.initError({error:e,correlation:t}))}finally{(yield(0,_l.By)())&&(yield(0,_l.$6)([(0,_l.gz)(Ml.initCancel({correlation:t}))]))}}function*aa(){yield(0,_l.Fm)(Ml.initTotalCount.match,sa)}function*sa(e){const{payload:{correlation:t}}=e;try{yield(0,_l.gz)(Ml.initTotalCountStart({correlation:t})),yield(0,_l.RE)(na,t),yield(0,_l.gz)(Ml.initTotalCountSuccess({correlation:t}))}catch(e){yield(0,_l.gz)(Ml.initTotalCountError({error:e,correlation:t}))}finally{(yield(0,_l.By)())&&(yield(0,_l.gz)(Ml.initTotalCountCancel({correlation:t})))}}function*da(){try{yield(0,_l.$6)([Fo,Vo,Ko,$o,Qo,la,aa].map((e=>(0,_l.rM)(e))))}catch(e){console.error("Root saga failed",e)}}const ca=[Ml.loadAttributeError.type,Ml.loadInitialElementsPageError.type,Ml.loadNextElementsPageError.type,Ml.loadCustomElementsError.type,Ml.initError.type],ua=(0,qt.b)(Bl.ZP),ma=(0,Cl.P1)(ul,(e=>e.initialization.status)),ga=(0,Cl.P1)(ul,(e=>e.initialization.error)),pa=(0,Cl.P1)(ul,(e=>e.elements.initialPageLoad.status)),fa=(0,Cl.P1)(ul,(e=>e.elements.initialPageLoad.error));class ha{redux;config;callbacks;constructor(e){this.config=e,this.initializeBridge()}initializeBridge=()=>{this.callbacks=(()=>{const{registerCallback:e,registrations:t,unsubscribeAll:i}=(()=>{const e=[];return{registrations:{initStart:Rl(),initSuccess:Rl(),initError:Rl(),initCancel:Rl(),initTotalCountStart:Rl(),initTotalCountSuccess:Rl(),initTotalCountError:Rl(),initTotalCountCancel:Rl(),loadAttributeStart:Rl(),loadAttributeSuccess:Rl(),loadAttributeError:Rl(),loadAttributeCancel:Rl(),loadInitialElementsPageStart:Rl(),loadInitialElementsPageSuccess:Rl(),loadInitialElementsPageError:Rl(),loadInitialElementsPageCancel:Rl(),loadNextElementsPageStart:Rl(),loadNextElementsPageSuccess:Rl(),loadNextElementsPageError:Rl(),loadNextElementsPageCancel:Rl(),loadCustomElementsStart:Rl(),loadCustomElementsSuccess:Rl(),loadCustomElementsError:Rl(),loadCustomElementsCancel:Rl(),loadIrrelevantElementsStart:Rl(),loadIrrelevantElementsSuccess:Rl(),loadIrrelevantElementsError:Rl(),loadIrrelevantElementsCancel:Rl(),selectionChanged:Rl(),selectionCommitted:Rl(),update:Rl()},registerCallback:(t,i)=>{const n=i.subscribe(t);return e.push(n),n},unsubscribeAll:()=>{e.forEach((e=>{e()}))}}})();return{registrations:t,registerCallback:e,unsubscribeAll:i,eventListener:(e,i)=>{Ml.initStart.match(e)?t.initStart.invoke(e.payload):Ml.initSuccess.match(e)?t.initSuccess.invoke(e.payload):Ml.initError.match(e)?(Ll("initializing",e.payload.error),t.initError.invoke(e.payload)):Ml.initCancel.match(e)&&t.initCancel.invoke(e.payload),Ml.initTotalCountStart.match(e)?t.initTotalCountStart.invoke(e.payload):Ml.initTotalCountSuccess.match(e)?t.initTotalCountSuccess.invoke(e.payload):Ml.initTotalCountError.match(e)?(Ll("initializing total count",e.payload.error),t.initTotalCountError.invoke(e.payload)):Ml.initTotalCountCancel.match(e)&&t.initTotalCountCancel.invoke(e.payload),Ml.loadAttributeStart.match(e)?t.loadAttributeStart.invoke(e.payload):Ml.loadAttributeSuccess.match(e)?t.loadAttributeSuccess.invoke(e.payload):Ml.loadAttributeError.match(e)?(Ll("loading attribute",e.payload.error),t.loadAttributeError.invoke(e.payload)):Ml.loadAttributeCancel.match(e)&&t.loadAttributeCancel.invoke(e.payload),Ml.loadInitialElementsPageStart.match(e)?t.loadInitialElementsPageStart.invoke(e.payload):Ml.loadInitialElementsPageSuccess.match(e)?t.loadInitialElementsPageSuccess.invoke(e.payload):Ml.loadInitialElementsPageError.match(e)?(Ll("loading initial elements page",e.payload.error),t.loadInitialElementsPageError.invoke(e.payload)):Ml.loadInitialElementsPageCancel.match(e)&&t.loadInitialElementsPageCancel.invoke(e.payload),Ml.loadNextElementsPageStart.match(e)?t.loadNextElementsPageStart.invoke(e.payload):Ml.loadNextElementsPageSuccess.match(e)?t.loadNextElementsPageSuccess.invoke(e.payload):Ml.loadNextElementsPageError.match(e)?(Ll("loading next elements page",e.payload.error),t.loadNextElementsPageError.invoke(e.payload)):Ml.loadNextElementsPageCancel.match(e)&&t.loadNextElementsPageCancel.invoke(e.payload),Ml.loadCustomElementsStart.match(e)?t.loadCustomElementsStart.invoke(e.payload):Ml.loadCustomElementsSuccess.match(e)?t.loadCustomElementsSuccess.invoke(e.payload):Ml.loadCustomElementsError.match(e)?(Ll("loading custom elements",e.payload.error),t.loadCustomElementsError.invoke(e.payload)):Ml.loadCustomElementsCancel.match(e)&&t.loadCustomElementsCancel.invoke(e.payload),Ml.loadIrrelevantElementsStart.match(e)?t.loadIrrelevantElementsStart.invoke(e.payload):Ml.loadIrrelevantElementsSuccess.match(e)?t.loadIrrelevantElementsSuccess.invoke(e.payload):Ml.loadIrrelevantElementsError.match(e)?(Ll("loading irrelevant elements",e.payload.error),t.loadIrrelevantElementsError.invoke(e.payload)):Ml.loadIrrelevantElementsCancel.match(e)&&t.loadIrrelevantElementsCancel.invoke(e.payload),[Ml.changeSelection.match,Ml.revertSelection.match,Ml.invertSelection.match,Ml.clearSelection.match].some((t=>t(e)))&&t.selectionChanged.invoke({selection:i(kl)}),Ml.commitSelection.match(e)&&t.selectionCommitted.invoke({selection:i(Al)}),[Ml.initStart.match,Ml.initSuccess.match,Ml.initError.match,Ml.initCancel.match,Ml.loadAttributeStart.match,Ml.loadAttributeSuccess.match,Ml.loadAttributeError.match,Ml.loadAttributeCancel.match,Ml.loadInitialElementsPageStart.match,Ml.loadInitialElementsPageSuccess.match,Ml.loadInitialElementsPageError.match,Ml.loadInitialElementsPageCancel.match,Ml.loadNextElementsPageStart.match,Ml.loadNextElementsPageSuccess.match,Ml.loadNextElementsPageError.match,Ml.loadNextElementsPageCancel.match,Ml.loadIrrelevantElementsStart.match,Ml.loadIrrelevantElementsSuccess.match,Ml.loadIrrelevantElementsError.match,Ml.loadIrrelevantElementsCancel.match,Ml.changeSelection.match,Ml.revertSelection.match,Ml.invertSelection.match,Ml.clearSelection.match,Ml.commitSelection.match,Ml.setLimit.match,Ml.setOrder.match,Ml.setSearch.match,Ml.setLimitingMeasures.match,Ml.setLimitingValidationItems.match,Ml.setLimitingAttributeFilters.match,Ml.setLimitingDateFilters.match].some((t=>t(e)))&&t.update.invoke()}}})(),this.redux=function(e){const t=ua({context:{attributeFilterContext:e}}),i=(0,g.filterObjRef)(e.attributeFilter),n=(0,g.filterLocalIdentifier)(e.attributeFilter),r=(0,g.filterAttributeElements)(e.attributeFilter),l=(0,g.isAttributeElementsByValue)(r)?"values":"uris",o=(0,g.isAttributeElementsByValue)(r)?r.values:r.uris,a=(0,g.isNegativeAttributeFilter)(e.attributeFilter),s=(0,rl.xC)({preloadedState:{...jl,localIdentifier:n,displayFormRef:i,displayAsLabelRef:e.displayAsLabel,elementsForm:l,selection:{commited:{keys:o,isInverted:a,irrelevantKeys:[]},working:{keys:o,isInverted:a,irrelevantKeys:[]}},config:{hiddenElements:e.hiddenElements,staticElements:e.staticElements,withoutApply:e.withoutApply},originalFilter:e.attributeFilter},reducer:Nl,middleware:i=>{return i({thunk:!1,serializableCheck:{ignoredActions:ca,ignoredPaths:["initialization.error","attribute.error","elements.initialPageLoad.error","elements.nextPageLoad.error"]}}).concat([t,(n=e.eventListener,e=>t=>i=>{const r=t(i);return n(r,(t=>t(e.getState()))),r})]);var n},devTools:{name:`AttributeFilter state: ${(0,g.objRefToString)(i)}`}}),d=t.run(da);return{context:e,cancelRootSaga:()=>{d.cancel()},dispatch:e=>{s.dispatch(e)},select:e=>e(s.getState())}}({...this.config,eventListener:(e,t)=>{this.callbacks.eventListener(e,t)}})};init=e=>{this.redux.dispatch(Ml.init({correlation:e}))};getInitStatus=()=>this.redux.select(ma);getInitError=()=>this.redux.select(ga);onInitStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initStart);onInitSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initSuccess);onInitError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initError);onInitCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initCancel);initTotalCount=e=>{this.redux.dispatch(Ml.initTotalCount({correlation:e}))};getInitTotalCountStatus=()=>this.redux.select(Yl);getInitTotalCountError=()=>this.redux.select(Ql);onInitTotalCountStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountStart);onInitTotalCountSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountSuccess);onInitTotalCountError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountError);onInitTotalCountCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountCancel);loadAttribute=e=>{this.redux.dispatch(Ml.loadAttributeRequest({correlation:e}))};cancelAttributeLoad=()=>{this.redux.dispatch(Ml.loadAttributeCancelRequest())};getAttribute=()=>this.redux.select(Mo);getAttributeStatus=()=>this.redux.select(Lo);getAttributeError=()=>this.redux.select(Ro);onLoadAttributeStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeStart);onLoadAttributeSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeSuccess);onLoadAttributeError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeError);onLoadAttributeCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeCancel);loadInitialElementsPage=e=>{this.redux.dispatch(Ml.loadInitialElementsPageRequest({correlation:e}))};cancelInitialElementsPageLoad=()=>{this.redux.dispatch(Ml.loadInitialElementsPageCancelRequest())};getInitialElementsPageStatus=()=>this.redux.select(pa);getInitialElementsPageError=()=>this.redux.select(fa);onLoadInitialElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageStart);onLoadInitialElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageSuccess);onLoadInitialElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageError);onLoadInitialElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageCancel);loadNextElementsPage=e=>{this.redux.dispatch(Ml.loadNextElementsPageRequest({correlation:e}))};cancelNextElementsPageLoad(){this.redux.dispatch(Ml.loadNextElementsPageCancelRequest())}getNextElementsPageStatus=()=>this.redux.select(Zo);getNextElementsPageError=()=>this.redux.select(Wo);onLoadNextElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageStart);onLoadNextElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageSuccess);onLoadNextElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageError);onLoadNextElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageCancel);loadCustomElements=(e,t)=>{this.redux.dispatch(Ml.loadCustomElementsRequest({options:e,correlation:t}))};cancelCustomElementsLoad(e){this.redux.dispatch(Ml.loadCustomElementsCancelRequest({correlation:e}))}onLoadCustomElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsStart);onLoadCustomElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsSuccess);onLoadCustomElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsError);onLoadCustomElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsCancel);loadIrrelevantElements=e=>{this.redux.dispatch(Ml.loadIrrelevantElementsRequest({correlation:e}))};cancelIrrelevantElementsLoad(e){this.redux.dispatch(Ml.loadIrrelevantElementsCancelRequest({correlation:e}))}onLoadIrrelevantElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsStart);onLoadIrrelevantElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsSuccess);onLoadIrrelevantElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsError);onLoadIrrelevantElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsCancel);setDisplayAsLabel=(e,t)=>{this.redux.dispatch(Ml.setDisplayAsLabel({displayAsLabel:e,correlation:t}))};getDisplayAsLabel=()=>this.redux.select(bo);setDisplayForm=(e,t)=>{this.redux.dispatch(Ml.setDisplayFormRef({displayForm:e,correlation:t}))};getOffset=()=>this.redux.select(no);setSearch=e=>{this.redux.dispatch(Ml.setSearch({search:e}))};getSearch=()=>this.redux.select(eo);setLimit=e=>{this.redux.dispatch(Ml.setLimit({limit:e}))};getLimit=()=>this.redux.select(io);setOrder=e=>{this.redux.dispatch(Ml.setOrder({order:e}))};getOrder=()=>this.redux.select(to);setLimitingMeasures=e=>{this.redux.dispatch(Ml.setLimitingMeasures({filters:e}))};getLimitingMeasures=()=>this.redux.select(lo);setLimitingValidationItems=e=>{this.redux.dispatch(Ml.setLimitingValidationItems({validateBy:e}))};getLimitingValidationItems=()=>this.redux.select(oo);setLimitingAttributeFilters=e=>{this.redux.dispatch(Ml.setLimitingAttributeFilters({filters:e}))};getLimitingAttributeFilters=()=>this.redux.select(ro);setLimitingDateFilters=e=>{this.redux.dispatch(Ml.setLimitingDateFilters({filters:e}))};getLimitingDateFilters=()=>this.redux.select(ao);getAllElements=()=>this.redux.select(Ul);getElementsByKey=e=>{const t=this.redux.select(Kl);return zl(e,t)};getTotalCount=()=>this.redux.select($l);getTotalCountWithCurrentSettings=()=>this.redux.select(Jl);getLimitingAttributeFiltersAttributes=()=>this.redux.select(mo);changeMultiSelection=({keys:e,isInverted:t,irrelevantKeys:i})=>{this.redux.dispatch(Ml.changeSelection({selection:e,isInverted:t,irrelevantSelection:i}))};revertMultiSelection=()=>{this.redux.dispatch(Ml.revertSelection())};commitMultiSelection=()=>{this.redux.dispatch(Ml.commitSelection())};invertMultiSelection=()=>{this.redux.dispatch(Ml.invertSelection())};clearMultiSelection=()=>{this.redux.dispatch(Ml.clearSelection())};getWorkingMultiSelection=()=>this.redux.select(kl);getCommittedMultiSelection=()=>this.redux.select(Al);changeSingleSelection=e=>{this.redux.dispatch(Ml.changeSelection({isInverted:!1,selection:(0,nl.Z)([e])}))};revertSingleSelection=()=>{this.redux.dispatch(Ml.revertSelection())};commitSingleSelection=()=>{this.redux.dispatch(Ml.commitSelection())};getWorkingSingleSelection=()=>{const[e,...t]=this.redux.select(xl);return(0,tl.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};getCommittedSingleSelection=()=>{const[e,...t]=this.redux.select(El);return(0,tl.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};onMultiSelectionChanged=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionChanged);onMultiSelectionCommitted=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionCommitted);onSingleSelectionChanged=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionChanged);onSingleSelectionCommitted=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionCommitted);getIsWorkingSelectionEmpty=()=>this.redux.select(Pl);getIsWorkingSelectionChanged=()=>this.redux.select(Dl);getFilter=()=>this.redux.select(Io);getFilterToDisplay=()=>this.redux.select(Eo);getOriginalFilter=()=>this.redux.select(vo);onUpdate=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.update);isLoadElementsOptionsChanged=()=>this.redux.select(Go)}class ba{bridge;config;constructor(e){this.config=e,this.bridge=new ha(e)}validateStaticElementsLoad=()=>{(0,tl.kG)(!(this.config.staticElements?.length&&this.getLimitingAttributeFilters()?.length),"Using limitingAttributeFilters is not supported when using static attribute elements"),(0,tl.kG)(!(this.config.staticElements?.length&&this.getLimitingDateFilters()?.length),"Using limitingDateFilters is not supported when using static attribute elements"),(0,tl.kG)(!(this.config.staticElements?.length&&this.getLimitingMeasures()?.length),"Using limitingMeasures is not supported when using static attribute elements"),(0,tl.kG)(!(this.config.staticElements?.length&&this.getLimitingValidationItems()?.length),"Using limitingValidationItems is not supported when using static attribute elements")};init=(e=(0,il.Z)())=>{this.validateStaticElementsLoad(),this.bridge.init(e)};onInitStart=e=>this.bridge.onInitStart(e);onInitSuccess=e=>this.bridge.onInitSuccess(e);onInitError=e=>this.bridge.onInitError(e);onInitCancel=e=>this.bridge.onInitCancel(e);getInitStatus=()=>this.bridge.getInitStatus();getInitError=()=>this.bridge.getInitError();initTotalCount=(e=(0,il.Z)())=>{this.bridge.initTotalCount(e)};getInitTotalCountStatus=()=>this.bridge.getInitTotalCountStatus();getInitTotalCountError=()=>this.bridge.getInitTotalCountError();onInitTotalCountStart=e=>this.bridge.onInitTotalCountStart(e);onInitTotalCountSuccess=e=>this.bridge.onInitTotalCountSuccess(e);onInitTotalCountError=e=>this.bridge.onInitTotalCountError(e);onInitTotalCountCancel=e=>this.bridge.onInitTotalCountCancel(e);loadAttribute=(e=(0,il.Z)())=>{this.bridge.loadAttribute(e)};cancelAttributeLoad=()=>{this.bridge.cancelAttributeLoad()};getAttribute=()=>this.bridge.getAttribute();getAttributeError=()=>this.bridge.getAttributeError();getAttributeStatus=()=>this.bridge.getAttributeStatus();onLoadAttributeStart=e=>this.bridge.onLoadAttributeStart(e);onLoadAttributeSuccess=e=>this.bridge.onLoadAttributeSuccess(e);onLoadAttributeError=e=>this.bridge.onLoadAttributeError(e);onLoadAttributeCancel=e=>this.bridge.onLoadAttributeCancel(e);loadInitialElementsPage=(e=(0,il.Z)())=>{const t=this.bridge.getInitStatus();"error"!==t&&((0,tl.kG)("success"===t,"Cannot call loadInitialElementsPage() before successful initialization."),this.validateStaticElementsLoad(),this.bridge.loadInitialElementsPage(e))};cancelInitialElementsPageLoad(){this.bridge.cancelInitialElementsPageLoad()}getInitialElementsPageStatus=()=>this.bridge.getInitialElementsPageStatus();getInitialElementsPageError=()=>this.bridge.getInitialElementsPageError();onLoadInitialElementsPageStart=e=>this.bridge.onLoadInitialElementsPageStart(e);onLoadInitialElementsPageSuccess=e=>this.bridge.onLoadInitialElementsPageSuccess(e);onLoadInitialElementsPageError=e=>this.bridge.onLoadInitialElementsPageError(e);onLoadInitialElementsPageCancel=e=>this.bridge.onLoadInitialElementsPageCancel(e);loadNextElementsPage=(e=(0,il.Z)())=>{(0,tl.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadNextElementsPage() before successful initialization."),(0,tl.kG)("success"===this.bridge.getInitialElementsPageStatus(),"Cannot call loadNextElementsPage() before loadInitialElementsPage() completes."),(0,tl.kG)(!this.bridge.isLoadElementsOptionsChanged(),"Cannot call loadNextElementsPage() when load element options were changed. When options are changed, you should call loadInitialElementsPage() first."),this.bridge.loadNextElementsPage(e)};cancelNextElementsPageLoad(){this.bridge.cancelNextElementsPageLoad()}getNextElementsPageStatus=()=>this.bridge.getNextElementsPageStatus();getNextElementsPageError=()=>this.bridge.getNextElementsPageError();onLoadNextElementsPageStart=e=>this.bridge.onLoadNextElementsPageStart(e);onLoadNextElementsPageSuccess=e=>this.bridge.onLoadNextElementsPageSuccess(e);onLoadNextElementsPageError=e=>this.bridge.onLoadNextElementsPageError(e);onLoadNextElementsPageCancel=e=>this.bridge.onLoadNextElementsPageCancel(e);loadCustomElements=(e,t)=>{this.bridge.loadCustomElements(e,t)};cancelCustomElementsLoad(e){this.bridge.cancelCustomElementsLoad(e)}onLoadCustomElementsStart=e=>this.bridge.onLoadCustomElementsStart(e);onLoadCustomElementsSuccess=e=>this.bridge.onLoadCustomElementsSuccess(e);onLoadCustomElementsError=e=>this.bridge.onLoadCustomElementsError(e);onLoadCustomElementsCancel=e=>this.bridge.onLoadCustomElementsCancel(e);loadIrrelevantElements=e=>{this.bridge.loadIrrelevantElements(e)};cancelIrrelevantElementsLoad(e){this.bridge.cancelIrrelevantElementsLoad(e)}onLoadIrrelevantElementsStart=e=>this.bridge.onLoadIrrelevantElementsStart(e);onLoadIrrelevantElementsSuccess=e=>this.bridge.onLoadIrrelevantElementsSuccess(e);onLoadIrrelevantElementsError=e=>this.bridge.onLoadIrrelevantElementsError(e);onLoadIrrelevantElementsCancel=e=>this.bridge.onLoadIrrelevantElementsCancel(e);setDisplayAsLabel=e=>{this.bridge.setDisplayAsLabel(e)};getDisplayAsLabel=()=>this.bridge.getDisplayAsLabel();setDisplayForm=e=>{this.bridge.setDisplayForm(e)};getOffset=()=>this.bridge.getOffset();setSearch=e=>{this.bridge.setSearch(e)};getSearch=()=>this.bridge.getSearch();setLimit=e=>{this.bridge.setLimit(e)};getLimit=()=>this.bridge.getLimit();setOrder=e=>{this.bridge.setOrder(e)};getOrder=()=>this.bridge.getOrder();setLimitingMeasures=e=>{this.bridge.setLimitingMeasures(e)};getLimitingMeasures=()=>this.bridge.getLimitingMeasures();setLimitingValidationItems=e=>{this.bridge.setLimitingValidationItems(e)};getLimitingValidationItems=()=>this.bridge.getLimitingValidationItems();setLimitingAttributeFilters=e=>{this.bridge.setLimitingAttributeFilters(e)};getLimitingAttributeFilters=()=>this.bridge.getLimitingAttributeFilters();setLimitingDateFilters=e=>{this.bridge.setLimitingDateFilters(e)};getLimitingDateFilters=()=>this.bridge.getLimitingDateFilters();getAllElements=()=>this.bridge.getAllElements();getElementsByKey=e=>this.bridge.getElementsByKey(e);getTotalElementsCount=()=>this.bridge.getTotalCount();getTotalElementsCountWithCurrentSettings=()=>this.bridge.getTotalCountWithCurrentSettings();getLimitingAttributeFiltersAttributes=()=>this.bridge.getLimitingAttributeFiltersAttributes();getFilter=()=>this.bridge.getFilter();getFilterToDisplay=()=>this.bridge.getFilterToDisplay();getOriginalFilter=()=>this.bridge.getOriginalFilter();onUpdate=e=>this.bridge.onUpdate(e)}class ya extends ba{constructor(e){super(e)}changeSelection=e=>{this.bridge.changeMultiSelection(e)};revertSelection=()=>{this.bridge.revertMultiSelection()};commitSelection=()=>{this.bridge.commitMultiSelection()};invertSelection=()=>{this.bridge.invertMultiSelection()};clearSelection=()=>{this.bridge.clearMultiSelection()};getWorkingSelection=()=>this.bridge.getWorkingMultiSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedMultiSelection();onSelectionChanged=e=>this.bridge.onMultiSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onMultiSelectionCommitted(e)}class va extends ba{static sanitizeConfig(e){const t=(0,g.filterAttributeElements)(e.attributeFilter),i=((0,g.isAttributeElementsByRef)(t)?t.uris:t.values)[0],n=(0,g.isAttributeElementsByRef)(t)?{uris:[i]}:{values:[i]};return{...e,attributeFilter:(0,g.isPositiveAttributeFilter)(e.attributeFilter)?(0,g.newPositiveAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),n,(0,g.filterLocalIdentifier)(e.attributeFilter)):(0,g.newNegativeAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),n,(0,g.filterLocalIdentifier)(e.attributeFilter))}}constructor(e){super(va.sanitizeConfig(e))}changeSelection=e=>{this.bridge.changeSingleSelection(e)};revertSelection=()=>{this.bridge.revertSingleSelection()};commitSelection=()=>{this.bridge.commitSingleSelection()};getWorkingSelection=()=>this.bridge.getWorkingSingleSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedSingleSelection();onSelectionChanged=e=>this.bridge.onSingleSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onSingleSelectionCommitted(e)}function Ca(e,t,i,n={selectionMode:"multi",displayAsLabel:void 0,enableDuplicatedLabelValuesInAttributeFilter:!0,withoutApply:!1}){const{selectionMode:r,hiddenElements:l,staticElements:o,enableDuplicatedLabelValuesInAttributeFilter:a,displayAsLabel:s,withoutApply:d}=n;return"multi"===r?new ya({backend:e,workspace:t,attributeFilter:i,hiddenElements:l,staticElements:o,enableDuplicatedLabelValuesInAttributeFilter:a,displayAsLabel:s,withoutApply:d}):new va({backend:e,workspace:t,attributeFilter:i,hiddenElements:l,staticElements:o,enableDuplicatedLabelValuesInAttributeFilter:a,displayAsLabel:s,withoutApply:d})}function xa({isOpen:e,isDraggable:t}){return(0,ie.jsx)("div",{className:fe("gd-attribute-filter-dropdown-button__next","s-attribute-filter","gd-message error s-button-error",{"gd-is-active":e,"gd-is-draggable":t}),children:(0,ie.jsx)(ke,{id:"gs.filter.error"})})}const Sa=[{align:"cr cl",offset:{x:0,y:50}}];function Ia({children:e}){const t=le.Icon.QuestionMark;return(0,ie.jsx)("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[(0,ie.jsx)(t,{height:16,width:14,className:"s-attribute-filter-tooltip-icon"}),(0,ie.jsx)(le.Bubble,{className:"gd-attribute-filter-details s-attribute-filter-details-bubble",alignPoints:Sa,arrowStyle:{display:"none"},children:e})]})})}const Ea=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}];function Fa({isOpen:e,title:t,selectedItemsCount:i,showSelectionCount:n=!0,subtitle:r,disabled:l,customIcon:o,isFiltering:a,isLoading:s,isLoaded:d,isError:c,isDraggable:u,icon:m,TooltipContentComponent:g,titleExtension:p,onClick:f,className:h,buttonRef:b,dropdownId:y}){const v=B(),C=(0,j.useRef)(null),[x,S]=(0,j.useState)(!1),I=c?(0,ie.jsx)("i",{className:"gd-icon gd-icon-circle-cross"}):m;(0,j.useEffect)((()=>{const e=C.current;if(!e)return;const t=Math.ceil(e.getBoundingClientRect().width)<e.scrollWidth;S(t)}),[r]);let E=t,F=r;s?(E=v.formatMessage({id:"loading"}),F=v.formatMessage({id:"loading"})):a&&(F=v.formatMessage({id:"filtering"}));const w=(0,j.useCallback)((e=>{(0,le.isActionKey)(e)&&l&&(e.preventDefault(),e.stopPropagation())}),[l]),k=(0,le.useIdPrefixed)("filter-locked-tooltip"),A=(0,ie.jsxs)("div",{className:fe("gd-attribute-filter-dropdown-button__next","s-attribute-filter",`s-${Ln.gl(t)}`,{"gd-message error":c,"gd-is-filtering":a,"gd-is-active":e,"gd-is-loaded":d,"gd-is-draggable":u,disabled:l},h),"aria-haspopup":"dialog","aria-expanded":e,"aria-disabled":l,"aria-describedby":l?k:void 0,onClick:f,onKeyDown:w,"aria-controls":e?y:void 0,role:"button",tabIndex:0,ref:b,children:[I?(0,ie.jsx)("div",{className:"gd-attribute-filter-dropdown-button-icon__next",children:I}):null,(0,ie.jsxs)("div",{className:"gd-attribute-filter-dropdown-button-content__next",children:[(0,ie.jsxs)("div",{className:"gd-attribute-filter-dropdown_button-title-content__next",children:[(0,ie.jsx)("div",{className:"gd-attribute-filter-dropdown-button-title__next",children:(0,ie.jsx)(le.ShortenedText,{tooltipAlignPoints:Ea,className:"s-attribute-filter-button-title",children:`${E}`})}),p,(0,ie.jsx)(Bn,{customIcon:o,disabled:l}),g&&d?(0,ie.jsx)(Ia,{children:(0,ie.jsx)(g,{})}):null]}),(0,ie.jsxs)("div",{className:"gd-attribute-filter-dropdown-button-subtitle__next",children:[(0,ie.jsx)("span",{className:"gd-attribute-filter-dropdown-button-selected-items__next s-attribute-filter-button-subtitle",ref:C,children:F}),n&&x&&d?(0,ie.jsx)("span",{className:"gd-attribute-filter-dropdown-button-selected-items-count__next",children:`(${i})`}):null]})]})]});return l?(0,ie.jsx)(le.UiTooltip,{id:k,anchor:A,content:v.formatMessage({id:"filters.locked.filter.tooltip"}),triggerBy:["focus"],arrowPlacement:"top",showArrow:!0}):A}function wa({onClick:e}){return(0,ie.jsx)(Fa,{isLoading:!0,onClick:e})}function ka({isApplyDisabled:e,onApplyButtonClick:t,onCancelButtonClick:i,withoutApply:n}){const r=B(),l=r.formatMessage({id:"gs.list.cancel"}),o=r.formatMessage({id:"close"}),a=r.formatMessage({id:"gs.list.apply"}),s=n?"gd-attribute-filter-close-button__next close-button s-close":"gd-attribute-filter-cancel-button__next cancel-button s-cancel";return(0,ie.jsxs)("div",{className:"gd-attribute-filter-dropdown-actions__next",children:[(0,ie.jsx)("div",{className:"gd-attribute-filter-dropdown-actions-left-content__next"}),(0,ie.jsxs)("div",{className:"gd-attribute-filter-dropdown-actions-right-content__next",children:[(0,ie.jsx)(le.Button,{className:fe(s,"gd-button-secondary gd-button-small"),onClick:i,value:n?o:l,title:n?o:l}),!n&&(0,ie.jsx)(le.Button,{disabled:e,className:"gd-attribute-filter-apply-button__next gd-button-action gd-button-small s-apply",onClick:t,value:a,title:a})]})]})}const Aa=245,Da=(e,t)=>()=>{throw new D.UnexpectedSdkError(`Component: ${e} is missing in the ${t}.`)};function Pa(e,t){return e.formattedTitle||e.title||`(${t.formatMessage({id:"empty_value"})})`}function Oa(e){return e.uri&&e.uri!==e.title?e.uri:""}function ja(e,t){return e.map((e=>Pa(e,t))).join(", ")}function Ta(e){return e.uri}function Na(e,t,i){const n=0===t.length,r=n&&!e,l=!n&&e,o=!n&&!e;let a=i.formatMessage({id:"gs.list.all"});return l?a=`${i.formatMessage({id:"gs.list.all"})} ${i.formatMessage({id:"gs.list.except"})} ${ja(t,i)}`:o?a=ja(t,i):r&&(a=i.formatMessage({id:"gs.filterLabel.none"})),a}const Ma=(0,j.createContext)({ErrorComponent:Da("ErrorComponent","AttributeFilterComponentsContext"),LoadingComponent:Da("LoadingComponent","AttributeFilterComponentsContext"),DropdownButtonComponent:Da("DropdownButtonComponent","AttributeFilterComponentsContext"),DropdownBodyComponent:Da("DropdownBodyComponent","AttributeFilterComponentsContext"),DropdownActionsComponent:Da("DropdownActionsComponent","AttributeFilterComponentsContext"),ElementsSearchBarComponent:Da("ElementsSearchBarComponent","AttributeFilterComponentsContext"),ElementsSelectComponent:Da("ElementsSelectComponent","AttributeFilterComponentsContext"),ElementsSelectLoadingComponent:Da("ElementsSelectLoadingComponent","AttributeFilterComponentsContext"),ElementsSelectItemComponent:Da("ElementsSelectItemComponent","AttributeFilterComponentsContext"),ElementsSelectErrorComponent:Da("ElementsSelectErrorComponent","AttributeFilterComponentsContext"),ElementsSelectActionsComponent:Da("ElementsSelectActionsComponent","AttributeFilterComponentsContext"),EmptyResultComponent:Da("EmptyResultComponent","AttributeFilterComponentsContext"),StatusBarComponent:Da("StatusBarComponent","AttributeFilterComponentsContext")});Ma.displayName="AttributeFilterComponentsContext";const La=()=>(0,j.useContext)(Ma);function Ra(e){const{children:t,...i}=e;return(0,ie.jsx)(Ma.Provider,{value:i,children:t})}var Ba=i(25614),_a=i(99111);const Va="reset",Ha="parentFilters",Za="irrelevantSelection",Wa="displayFormChanged",qa=500,za=e=>{const t=e.getWorkingSelection(),i=e.getCommittedSelection(),n=e.getInitStatus();return{attributeFilter:e.getFilter(),attributeFilterToDisplay:e.getFilterToDisplay(),initialization:{status:e.getInitStatus(),error:e.getInitError()},attribute:{data:e.getAttribute(),status:e.getAttributeStatus(),error:e.getAttributeError()},elements:{data:e.getAllElements(),totalCount:e.getTotalElementsCount(),totalCountWithCurrentSettings:e.getTotalElementsCountWithCurrentSettings(),initialPageLoad:{status:e.getInitialElementsPageStatus(),error:e.getInitialElementsPageError()},nextPageLoad:{status:e.getNextElementsPageStatus(),error:e.getNextElementsPageError()},options:{search:e.getSearch(),offset:e.getOffset(),limit:e.getLimit(),limitingAttributeFilters:e.getLimitingAttributeFilters(),limitingDateFilters:e.getLimitingDateFilters(),limitingMeasures:e.getLimitingMeasures(),limitingValidationItems:e.getLimitingValidationItems(),order:e.getOrder()}},selection:{committed:{elements:"success"===n?e.getElementsByKey(i.keys):[],keys:i.keys,isInverted:i.isInverted,irrelevantElements:"success"===n?e.getElementsByKey(i.irrelevantKeys):[]},working:{elements:"success"===n?e.getElementsByKey(t.keys):[],keys:t.keys,isInverted:t.isInverted,isChanged:e.isWorkingSelectionChanged(),isEmpty:e.isWorkingSelectionEmpty(),irrelevantElements:"success"===n?e.getElementsByKey(t.irrelevantKeys):[]}}}};const Ga=e=>{const{backend:t,workspace:i,filter:n,displayAsLabel:r,hiddenElements:l,staticElements:o,enableDuplicatedLabelValuesInAttributeFilter:a=!0,withoutApply:s=!1}=e,[,d]=(0,j.useState)(0),c=()=>{d((e=>e+1))},u=(0,j.useRef)(null),m=(0,j.useCallback)((()=>{u.current=Ca(t.withTelemetry("AttributeFilter",{workspace:i,filter:n,hiddenElements:l,staticElements:o}),i,n,{selectionMode:"multi",hiddenElements:l,staticElements:o,enableDuplicatedLabelValuesInAttributeFilter:a,displayAsLabel:r,withoutApply:s})}),[t,i,n,l,o,a,r,s]);u.current||m();const p=u.current,f=(0,D.usePrevious)(e);return(0,j.useEffect)((()=>{const e=p.onUpdate((()=>{c()}));return t===f.backend&&i===f.workspace&&!((e,t,i)=>i?!(0,ne.Z)((0,g.filterObjRef)(e),(0,g.filterObjRef)(t.getFilter()))&&!(0,ne.Z)((0,g.filterObjRef)(e),(0,g.filterObjRef)(t.getOriginalFilter())):!(0,ne.Z)((0,g.filterObjRef)(e),(0,g.filterObjRef)(t.getFilter())))(n,p,a)&&(0,ne.Z)(o,f.staticElements)&&(0,ne.Z)(l,f.hiddenElements)||(m(),c()),()=>{e()}}),[t,i,n,o,l,f,p,m,a]),p},Ka=e=>{const{backend:t,workspace:i,filter:n,workingFilter:r,connectToPlaceholder:l,parentFilters:o,dependentDateFilters:a,parentFilterOverAttribute:s,validateElementsBy:d,resetOnParentFilterChange:c=!0,onApply:u,onSelect:m,onError:p,hiddenElements:f,staticElements:b,elementsOptions:y,displayAsLabel:v,selectionMode:C="multi",selectFirst:x=!1,enableDuplicatedLabelValuesInAttributeFilter:S=!0,enableImmediateAttributeFilterDisplayAsLabelMigration:I=!1,enableAttributeFilterVirtualised:E=!1,withoutApply:F=!1,enableDashboardFiltersApplyModes:w=!1,enableDashboardFiltersApplyWithoutLoading:k=!1}=e,A=F??w,P=(0,D.useBackendStrict)(t,"AttributeFilter"),O=(0,D.useWorkspaceStrict)(i,"AttributeFilter"),T=P.capabilities.supportsSettingConnectingAttributes,N=P.capabilities.supportsKeepingDependentFiltersSelection,M=P.capabilities.supportsCircularDependencyInFilters,L=P.capabilities.supportsShowingFilteredElements,R=P.capabilities.supportsSingleSelectDependentFilters,B=(0,j.useRef)(!1),_=(0,j.useCallback)((e=>{N&&M&&(B.current=e)}),[M,N]),{shouldIncludeLimitingFilters:V,setShouldIncludeLimitingFilters:H}=Qa(L),{filter:Z,setConnectedPlaceholderValue:W}=((e,t)=>{const[i,n]=(0,D.usePlaceholder)(t),r=i??e,l=(0,j.useCallback)((e=>{t&&n(e)}),[t,n]);return{filter:r,setConnectedPlaceholderValue:l}})(n??r,l),q=((e,t,i)=>{const n=(0,D.useResolveValueWithPlaceholders)(e);return(0,j.useMemo)((()=>i?((e,t)=>{if(!e||!t)return[];const i="function"==typeof t?t:()=>t;return e.map(((e,t)=>({attributeFilter:e,overAttribute:i(e,t)}))).filter((e=>!(0,g.filterIsEmpty)(e.attributeFilter)))})(n,t):(e=>e?e.map((e=>({attributeFilter:e,overAttribute:null}))):[])(n)),[i,n,t])})(o,s,T),z=(e=>(0,j.useMemo)((()=>e?e.map((e=>{const{dataSet:t,granularity:i,from:n,to:r,localIdentifier:l,boundedFilter:o}=e.dateFilter;if((0,g.isRelativeDashboardDateFilter)(e)){if((0,g.isAllTimeDashboardDateFilter)(e))return;const a=Number.parseInt(n.toString(),10)??0,s=Number.parseInt(r.toString(),10)??0;return(0,g.newRelativeDateFilter)(t,i,a,s,l,o)}return(0,g.newAbsoluteDateFilter)(t,n.toString(),r.toString(),l)})).filter(Boolean):[]),[e]))(a),G=Ga({backend:P,filter:Z,workspace:O,hiddenElements:f,staticElements:b,enableDuplicatedLabelValuesInAttributeFilter:S,displayAsLabel:v,withoutApply:A}),K=function(e,t,i,n){const r=za(e),l=r.initialization.status,o=r.initialization.error,a="loading"===l||"pending"===l,s=r.attribute.data,d=r.elements.initialPageLoad.status,c=r.elements.initialPageLoad.error,u="loading"===d,m=r.elements.nextPageLoad.status,p=r.elements.nextPageLoad.error,f="loading"===m,b=r.elements.data,y=r.elements.totalCount,v=r.elements.totalCountWithCurrentSettings,C=r.selection.working.isChanged,x=r.selection.working.isEmpty,S=r.selection.working.isInverted,I=r.selection.working.elements,E=r.selection.committed.isInverted,F=r.selection.committed.elements,w=r.elements.options.search,k=r.elements.options.limit,A=r.elements.options.limitingAttributeFilters,D=r.elements.options.limitingDateFilters,P=r.elements.options.limitingValidationItems,O=b.length<v?Math.min(k,v-b.length):0,T=I.length>qa||!S&&x,N=T||!C,M=ra(A),L=i&&"success"===d&&!M,R=i&&"success"===d&&!(0,h.Z)(D),B=i&&"success"===d&&!(0,h.Z)(P),_=function(e){const[t,i]=(0,j.useState)(!1);return(0,j.useEffect)((()=>{const t=[e.onLoadInitialElementsPageStart(n),e.onLoadInitialElementsPageSuccess(r),e.onLoadInitialElementsPageError(r),e.onLoadInitialElementsPageCancel(r),e.onInitStart(n),e.onInitSuccess(r),e.onInitError(r),e.onInitCancel(r)];function n(e){e.correlation===Ha&&i(!0)}function r(e){e.correlation===Ha&&i(!1)}return()=>{t.forEach((e=>{e()}))}}),[e]),t}(e),V=e.getLimitingAttributeFiltersAttributes(),H=s?.displayForms??[],Z=(0,g.filterObjRef)(r.attributeFilter),W=(0,g.filterObjRef)(r.attributeFilterToDisplay);return{attribute:s,offset:r.elements.options.offset,limit:k,isFiltering:_,isInitializing:a,initError:o,isLoadingInitialElementsPage:u,initialElementsPageError:c,isLoadingNextElementsPage:f,nextElementsPageError:p,nextElementsPageSize:O,elements:b,totalElementsCount:y,totalElementsCountWithCurrentSettings:v,isSelectionInvalid:T,isApplyDisabled:N,isWorkingSelectionChanged:C,isWorkingSelectionInverted:S,workingSelectionElements:I,isCommittedSelectionInverted:E,committedSelectionElements:F,searchString:w,isFilteredByParentFilters:L,parentFilterAttributes:V,isFilteredByDependentDateFilters:R,displayForms:H,currentDisplayFormRef:Z,currentDisplayAsDisplayFormRef:W,enableShowingFilteredElements:t,enableAttributeFilterVirtualised:n,irrelevantSelection:t?r.selection.working.irrelevantElements:[],limitingValidationItems:P,isFilteredByLimitingValidationItems:B}}(G,L,V,E);!function(e,t){const{onError:i}=t;(0,j.useEffect)((()=>{function t(e){i?.(e.error)}const n=[e.onInitError(t),e.onLoadAttributeError(t),e.onLoadInitialElementsPageError(t),e.onLoadNextElementsPageError(t),e.onLoadCustomElementsError(t)];return()=>{n.forEach((e=>{e()}))}}),[e,i])}(G,{onError:p}),function(e,t,i,n,r,l){const{filter:o,limitingAttributeFilters:a,limitingDateFilters:s,limitingValidationItems:d=Ua,shouldIncludeLimitingFilters:c,limit:u,resetOnParentFilterChange:m,setConnectedPlaceholderValue:p,onApply:f,onSelect:b,selectionMode:y,shouldReloadElements:v,setShouldReloadElements:C,displayAsLabel:x,withoutApply:S,isSelectionInvalid:I}=t;(0,j.useEffect)((()=>{c&&a.length>0&&e.setLimitingAttributeFilters(a),c&&s.length>0&&e.setLimitingDateFilters(s),c&&d?.length>0&&e.setLimitingValidationItems(d),u&&e.setLimit(u),e.init()}),[e]),(0,j.useEffect)((()=>{const t=c&&!(0,ne.Z)(a,e.getLimitingAttributeFilters()),u=c&&!(0,ne.Z)(s,e.getLimitingDateFilters()),E=((e,t,i)=>i?!$a(e,t.getFilter())&&!$a(e,t.getFilterToDisplay()):!$a(e,t.getFilter()))(o,e,r),F=c&&!(0,ne.Z)(d,e.getLimitingValidationItems()),w={filter:o,limitingAttributeFilters:a,limitingAttributesChanged:t,limitingDateFilters:s,limitingDateFiltersChanged:u,filterChanged:E,setConnectedPlaceholderValue:p,onApply:f,onSelect:b,selectionMode:y,setShouldReloadElements:C,limitingValidationItems:d,limitingValidationItemsChanged:F,displayAsLabel:x,withoutApply:S,isSelectionInvalid:I},k=m?function(e,{filter:t,limitingAttributeFilters:i,limitingAttributesChanged:n,filterChanged:r,setConnectedPlaceholderValue:l,onApply:o,onSelect:a,selectionMode:s,displayAsLabel:d,isSelectionInvalid:c},u){const m=0===i.length||!u;if((0,tl.kG)(m,"It is not possible to automatically reset dependent filters with current backend. Please set attribute filter to not reset on parent filter change (resetOnParentFilterChange prop)."),n){e.changeSelection({keys:[],isInverted:"single"!==s}),e.setLimitingAttributeFilters(i),e.commitSelection();const t=e.getFilter(),n=e.getCommittedSelection()?.isInverted;l(t);const r=e.getDisplayAsLabel();return a?.(t,n,s,[],r,!1,{isSelectionInvalid:c}),o?.(t,n,s,[],r,!1,{isSelectionInvalid:c}),"init-parent"}if(r){const i=(0,g.filterObjRef)(t),n=(0,g.filterAttributeElements)(t),r=(0,g.isAttributeElementsByValue)(n)?n.values:n.uris,l=(0,g.isNegativeAttributeFilter)(t);return e.setDisplayForm(i),e.setDisplayAsLabel(d),e.changeSelection({keys:r,isInverted:l}),e.commitSelection(),"init-self"}}(e,w,n):function(e,{filter:t,limitingAttributeFilters:i,limitingAttributesChanged:n,limitingDateFilters:r,limitingDateFiltersChanged:l,filterChanged:o,setConnectedPlaceholderValue:a,setShouldReloadElements:s,limitingValidationItemsChanged:d,limitingValidationItems:c,displayAsLabel:u,withoutApply:m},p,f,b){if(n||o||d||l){const y=(0,g.filterAttributeElements)(t),v=(0,g.isAttributeElementsByValue)(y)?y.values:y.uris,C=(0,g.isNegativeAttributeFilter)(t),x=e.getCommittedSelection().irrelevantKeys,S=(0,Wl.Z)(x,v),I=e.getLimitingDateFilters().length!==r.length||(0,Ba.Z)(e.getLimitingDateFilters(),r,(e=>(0,g.objRefToString)((0,g.filterObjRef)(e)))).length>0,E=e.getLimitingAttributeFilters().length!==i.length,F=p&&(E||I||!(0,h.Z)(S)),w=F?{irrelevantKeys:[]}:{};if(o||!p||F){if(f){const i=(0,g.filterObjRef)(t);e.setDisplayForm(i),e.setDisplayAsLabel(u)}m&&e.setSearch(""),e.changeSelection({keys:v,isInverted:C,...w}),e.commitSelection()}if(e.setLimitingAttributeFilters(i),e.setLimitingValidationItems(c),e.setLimitingDateFilters(r),a(e.getFilter()),F)return"init-self";if(n||l||d)return s(!0),"init-parent";if(b&&m&&(!(0,h.Z)(e.getAllElements())||!o))return;return"init-self"}}(e,w,i,r,l);!function(e,t,i,n,r){if("init-parent"===t){if(i)return void(n.current&&("success"===e.getInitStatus()?(e.loadInitialElementsPage(Ha),e.loadIrrelevantElements(Za)):e.init(Ha),r(!1)));"success"===e.getInitStatus()?(e.initTotalCount(Ha),e.loadInitialElementsPage(Ha)):e.init(Ha)}"init-self"===t&&e.init()}(e,k,i,v,C)}),[o,a,s,m,e,f,b,p,y,i,n,C,d,x,r,v,S,l,c,I]);const E=(0,j.useRef)(!1);(0,j.useEffect)((()=>(E.current=!0,()=>{E.current=!1})),[]),(0,j.useEffect)((()=>{const t=(0,g.filterObjRef)(e.getOriginalFilter()),i=e.getDisplayAsLabel(),n=i&&!(0,g.areObjRefsEqual)(t,i);if(r&&"loading"!==e.getInitStatus()&&(x&&!i||!x&&n||x&&i&&!(0,g.areObjRefsEqual)(x,i))){const t=e.onLoadCustomElementsSuccess((i=>{i.correlation.includes(Wa)&&(t(),f?.(e.getFilter(),e.getCommittedSelection()?.isInverted,y,e.getElementsByKey(e.getWorkingSelection().keys),x,!1,{isSelectionInvalid:I}))}));return e.setDisplayAsLabel(x),e.init(Wa),()=>{E.current||t()}}}),[e,x,r,f,y,I])}(G,{filter:Z,limitingAttributeFilters:q,limitingDateFilters:z,limitingValidationItems:d,shouldIncludeLimitingFilters:V,limit:y?.limit,onApply:u,onSelect:m,setConnectedPlaceholderValue:W,resetOnParentFilterChange:c,selectionMode:C,shouldReloadElements:B,setShouldReloadElements:_,displayAsLabel:v,withoutApply:A,isSelectionInvalid:A&&K.isSelectionInvalid},N,M,S,k);const U=function(e,t,i,n,r,l){const{onApply:o,onSelect:a,setConnectedPlaceholderValue:s,selectionMode:d,shouldReloadElements:c,setShouldReloadElements:u,shouldIncludeLimitingFilters:m,setShouldIncludeLimitingFilters:p,limitingAttributeFilters:f,limitingDateFilters:b,withoutApply:y,isSelectionInvalid:v,filter:C}=t,x=za(e),S=(0,j.useCallback)(((t,i,n)=>{const l=e.getFilter(),o=e.getWorkingSelection()?.isInverted,a=e.getWorkingSelection().keys,s=!o&&(0,h.Z)(a)||a.length>qa;if(r){const r=e.getDisplayAsLabel(),{attribute:c}=x;if(function(e,t){const i=t.find((e=>e.isPrimary));if(!i)throw new Error("No primary display form found.");const n=(0,g.filterObjRef)(e);return!!n&&(0,g.areObjRefsEqual)(n,i.ref)}(l,c.data?.displayForms))t?.(l,o,d,e.getElementsByKey(a),r,i,{isSelectionInvalid:s,applyToWorkingOnly:n});else{const i=c.data?.displayForms.find((e=>e.isPrimary));if(!i)throw new Error("No primary display form found.");const u=function(e,t){return(0,g.isPositiveAttributeFilter)(e)?{positiveAttributeFilter:{...e.positiveAttributeFilter,displayForm:t}}:{negativeAttributeFilter:{...e.negativeAttributeFilter,displayForm:t}}}(l,i.ref);t?.(u,o,d,e.getElementsByKey(a),r,!0,{isSelectionInvalid:s,applyToWorkingOnly:n})}}else t?.(l,o,d,void 0,void 0,void 0,{isSelectionInvalid:s,applyToWorkingOnly:n})}),[e,r,x,d]),I=(0,j.useCallback)(((t,i)=>{const n=e.getFilter(),l=(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(n)),o=t.map((e=>l||r?e.uri:e.title)),s="single"===d?{irrelevantKeys:[]}:{};e.changeSelection({keys:o,isInverted:i,...s}),y&&e.commitSelection(),S(a,!1,!1)}),[e,d,S,a,r,y]),E=(0,j.useCallback)((0,_a.Z)((t=>{e.getSearch()!==t&&(e.setSearch(t),e.loadInitialElementsPage("search"))}),200),[e]),F=(0,j.useCallback)((()=>{e.loadNextElementsPage()}),[e]),w=(0,j.useCallback)((()=>{if(y){if(v&&y){const t=(0,g.filterAttributeElements)(C),i=(0,g.isAttributeElementsByValue)(t)?t.values:t.uris,n=(0,g.isNegativeAttributeFilter)(C);e.changeSelection({keys:i,isInverted:n})}}else e.revertSelection();e.getSearch().length>0&&(e.setSearch(""),e.loadInitialElementsPage(Va)),i&&!m&&(p(!0),u(!0),e.setLimitingAttributeFilters(f),e.setLimitingDateFilters(b))}),[e,f,b,p,u,m,i,y,v,C]),k=(0,j.useCallback)(((t,i)=>{e.commitSelection(),s(e.getFilter()),S(o,t,i)}),[e,s,S,o]),A=(0,j.useCallback)(((e=!1,t=!1)=>{y&&!e||k(!1,t)}),[y,k]),D=(0,j.useCallback)((()=>{c.current&&(e.loadInitialElementsPage(Va),e.isWorkingSelectionEmpty()||e.loadIrrelevantElements(Za),u(!1))}),[e,c,u]),P=(0,j.useCallback)((()=>{i&&(p(!1),e.changeSelection({...e.getWorkingSelection(),irrelevantKeys:[]}),e.setLimitingAttributeFilters([]),e.setLimitingValidationItems([]),e.setLimitingDateFilters([]),e.loadInitialElementsPage("showFilteredElements"))}),[e,p,i]),O=(0,j.useCallback)((()=>{if(n&&i){const t=e.getWorkingSelection(),i=(0,Wl.Z)(t.keys,t.irrelevantKeys);e.changeSelection({...t,keys:i,irrelevantKeys:[]})}}),[e,n,i]),T=(0,j.useCallback)((()=>k(!0,!1)),[k]);return Ja(e,T,l),{onApply:A,onLoadNextElementsPage:F,onSearch:E,onSelect:I,onReset:w,onOpen:D,onShowFilteredElements:P,onClearIrrelevantSelection:O}}(G,{onApply:u,onSelect:m,setConnectedPlaceholderValue:W,selectionMode:C,shouldReloadElements:B,setShouldReloadElements:_,shouldIncludeLimitingFilters:V,setShouldIncludeLimitingFilters:H,limitingAttributeFilters:q,limitingDateFilters:z,withoutApply:A,isSelectionInvalid:K.isSelectionInvalid,filter:Z},L,N,S,I);Ya(G,{selectFirst:x,onApply:U.onApply,onSelect:U.onSelect,selectionMode:C,enableDuplicatedLabelValuesInAttributeFilter:S,withoutApply:A});const $=function(e,t,i,n){const r="single"===e,l=(0,h.Z)(i),o=(0,g.isPositiveAttributeFilter)(t)&&(0,g.attributeElementsCount)((0,g.filterAttributeElements)(t))<2;if(r){if(!o)return console.error("Provided 'filter' or 'connectToPlaceholder' property is not compatible with given single selection mode. It needs to be positive filter with max one item selected in attribute elements"),!1;if(!l&&!n)return console.error("Parent filtering can not be used together with single selection mode. Use only one of these properties at the same time."),!1}return!0}(C,Z,q,R)?{}:{initError:new D.UnexpectedSdkError};return{...K,...U,...$}},Ua=[],$a=(e,t)=>{if(!e||!t)return!1;const i=(0,g.isPositiveAttributeFilter)(e)===(0,g.isPositiveAttributeFilter)(t),n=(0,g.areObjRefsEqual)((0,g.filterObjRef)(e),(0,g.filterObjRef)(t)),r=(l=(0,g.filterAttributeElements)(e),o=(0,g.filterAttributeElements)(t),(0,g.isAttributeElementsByRef)(l)&&(0,g.isAttributeElementsByRef)(o)&&(0,ne.Z)([...l.uris].sort(),[...o.uris].sort())||(0,g.isAttributeElementsByValue)(l)&&(0,g.isAttributeElementsByValue)(o)&&(0,ne.Z)([...l.values].sort(),[...o.values].sort()));var l,o;return i&&n&&r},Ya=(e,t)=>{const{selectFirst:i,selectionMode:n,onApply:r,onSelect:l,enableDuplicatedLabelValuesInAttributeFilter:o,withoutApply:a}=t,s=e.getCommittedSelection().keys,d=e.getInitStatus(),c=e.getAllElements(),u=e.getFilter();(0,j.useEffect)((()=>{if(i&&"single"===n&&((0,h.Z)(s)||s.length>1)&&"success"===d&&!(0,h.Z)(c)){const t=[(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(u))||o?c[0].uri:c[0].title];e.changeSelection({keys:t,isInverted:!1,irrelevantKeys:[]}),e.commitSelection(),r(!0,!1)}}),[i,n,s,d,c,u,e,r,l,o,a])},Qa=e=>{const[t,i]=(0,j.useState)(!0);return{shouldIncludeLimitingFilters:t,setShouldIncludeLimitingFilters:(0,j.useCallback)((t=>{e&&i(t)}),[e])}},Ja=(e,t,i)=>{const n=(0,j.useRef)(e.getDisplayAsLabel()),r=(0,j.useRef)(!1),l=e.getInitStatus();!i||r.current||"success"!==l||(0,g.areObjRefsEqual)(n.current,e.getDisplayAsLabel())||(0,g.areObjRefsEqual)((0,g.filterObjRef)(e.getOriginalFilter()),(0,g.filterObjRef)(e.getFilter()))||(r.current=!0,t(!0),console.warn("AttributeFilter: Filter label migration reported to filter's parent app. Original filter label:",(0,g.filterObjRef)(e.getOriginalFilter()),"new filter label:",(0,g.filterObjRef)(e.getFilter()),"new filter displayAsLabel:",e.getDisplayAsLabel()))},Xa=(0,j.createContext)(null);Xa.displayName="AttributeFilterContext";const es=()=>(0,j.useContext)(Xa);function ts(e){const{children:t,fullscreenOnMobile:i,title:n,selectionMode:r,selectFirst:l,disabled:o,customIcon:a,enableDuplicatedLabelValuesInAttributeFilter:s=!0,withoutApply:d,workingFilter:c,overlayPositionType:u}=e,m=Ka(e),g=n??m?.attribute?.title??"";return(0,ie.jsx)(Xa.Provider,{value:{...m,fullscreenOnMobile:i,title:g,selectionMode:r,selectFirst:l,disabled:o,customIcon:a,enableDuplicatedLabelValuesInAttributeFilter:s,withoutApply:d,workingFilter:c,overlayPositionType:u},children:t})}function is(e){const{onApplyButtonClick:t,onCancelButtonClick:i,width:n=Aa}=e,{DropdownActionsComponent:r,ElementsSelectComponent:l}=La(),{withoutApply:o}=es(),a=(0,le.useMediaQuery)("mobileDevice"),{initialElementsPageError:s,nextElementsPageError:d,isApplyDisabled:c,isWorkingSelectionChanged:u,isWorkingSelectionInverted:m,isLoadingInitialElementsPage:g,isLoadingNextElementsPage:p,onLoadNextElementsPage:f,elements:h,onSearch:b,onSelect:y,nextElementsPageSize:v,searchString:C,totalElementsCount:x,totalElementsCountWithCurrentSettings:S,workingSelectionElements:I,parentFilterAttributes:E,isFilteredByParentFilters:F,isFilteredByDependentDateFilters:w,isFilteredByLimitingValidationItems:k,fullscreenOnMobile:A,selectionMode:D,title:P,enableShowingFilteredElements:O,onShowFilteredElements:T,irrelevantSelection:N,onClearIrrelevantSelection:M,enableAttributeFilterVirtualised:L}=es(),R=(0,j.useMemo)((()=>E.map((e=>e.title))),[E]),B={width:a&&A?"100%":n},_=(0,j.useCallback)(((e,i)=>{y(e,i),"single"===D&&t()}),[y,t,D]),V=(0,j.useCallback)((e=>{(0,le.isEscapeKey)(e)&&(e.stopPropagation(),i())}),[i]);return(0,ie.jsxs)("div",{className:"gd-attribute-filter-dropdown-body__next",style:B,onKeyDown:V,children:[(0,ie.jsx)(l,{isInverted:m,isLoading:g,isLoadingNextPage:p,items:h,onLoadNextPage:f,onSearch:b,onSelect:_,onApplyButtonClick:t,isApplyDisabled:c,nextPageSize:v,searchString:C,selectedItems:I,totalItemsCount:x,totalItemsCountWithCurrentSettings:S,parentFilterTitles:R,isFilteredByParentFilters:F,error:s??d,attributeTitle:P,enableShowingFilteredElements:O,isFilteredByDependentDateFilters:w,isFilteredByLimitingValidationItems:k,onShowFilteredElements:T,irrelevantSelection:N,onClearIrrelevantSelection:M,withoutApply:o,enableAttributeFilterVirtualised:L}),(0,ie.jsx)(r,{onApplyButtonClick:t,onCancelButtonClick:i,isApplyDisabled:c,isSelectionChanged:u,withoutApply:o})]})}function ns(){return(0,ie.jsx)("div",{})}function rs(e){return(0,ie.jsx)(le.InvertableSelectAllCheckbox,{...e})}function ls(e){return(0,ie.jsx)(le.InvertableSelectSearchBar,{...e})}const os=28,as=40,ss=10,ds=20,cs=32;function us(e){const{items:t,totalItemsCount:i,totalItemsCountWithCurrentSettings:n,isInverted:r,selectedItems:l,onSelect:o,searchString:a,onSearch:s,isLoading:d,isLoadingNextPage:c,nextPageSize:u,onLoadNextPage:m,error:g,attributeTitle:p,isFilteredByParentFilters:f,parentFilterTitles:h,enableShowingFilteredElements:b,onShowFilteredElements:y,irrelevantSelection:v,onClearIrrelevantSelection:C,onApplyButtonClick:x,isApplyDisabled:S,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:E,withoutApply:F}=e,w=B(),k=(0,le.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:A,selectionMode:P,attribute:O}=es(),{ElementsSelectLoadingComponent:T,ElementsSelectItemComponent:N,ElementsSelectErrorComponent:M,EmptyResultComponent:L,ElementsSearchBarComponent:R,ElementsSelectActionsComponent:_,StatusBarComponent:V}=La(),[H,Z]=(0,j.useState)(void 0),W=A&&k?as:os,q=k&&A,z=(0,D.usePrevious)(n),G=(0,j.useMemo)((()=>Math.max((Math.min(z,ss)||1)*W,ds)+cs),[z,W]),K=(0,j.useMemo)((()=>{if(!O)return null;const e=O.displayForms.find((e=>!!e.isPrimary));return e?.title}),[O]),U=(0,j.useCallback)((()=>{Z("show"),y()}),[y,Z]);return(0,ie.jsx)(le.UiAutofocus,{refocusKey:H,children:(0,ie.jsx)(le.InvertableSelectVirtualised,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:q,isSingleSelect:"single"===P,items:t,totalItemsCount:n,itemHeight:W,getItemKey:Ta,getItemTitle:e=>Pa(e,w),isItemQuestionMarkEnabled:e=>!!Oa(e),isInverted:r,selectedItems:l,selectedItemsLimit:qa,onSelect:o,onApplyButtonClick:x,searchString:a,onSearch:s,canSubmitOnKeyDown:!S,isLoading:d,error:g,isLoadingNextPage:c,nextPageItemPlaceholdersCount:u,onLoadNextPage:m,numberOfHiddenSelectedItems:v.length,renderItem:e=>(0,ie.jsx)(N,{...e,primaryLabelTitle:K,fullscreenOnMobile:A}),renderError:()=>(0,ie.jsx)(M,{error:g}),renderLoading:()=>(0,ie.jsx)(T,{height:G}),renderNoData:({height:e})=>(0,ie.jsx)(L,{height:e,isFilteredByParentFilters:f,isFilteredByDependentDateFilters:I,searchString:a,totalItemsCount:i,parentFilterTitles:h,enableShowingFilteredElements:b}),renderSearchBar:({onSearch:e,searchString:t})=>(0,ie.jsx)(R,{onSearch:e,searchString:t,isSmall:!(k&&A)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:i,selectedItemsLimit:r})=>(0,ie.jsx)(V,{getItemTitle:e,isFilteredByParentFilters:f,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:E,isInverted:t,parentFilterTitles:h,selectedItems:i,totalElementsCountWithCurrentSettings:n,selectedItemsLimit:r,attributeTitle:p,enableShowingFilteredElements:b,onShowFilteredElements:U,irrelevantSelection:v,onClearIrrelevantSelection:C,withoutApply:F}),renderActions:({checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isVisible:o})=>(0,ie.jsx)(_,{isVisible:o,checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isApplyDisabled:S,onApplyButtonClick:x})})})}const ms=28,gs=40,ps=10;function fs(e){const{items:t,totalItemsCount:i,totalItemsCountWithCurrentSettings:n,isInverted:r,selectedItems:l,onSelect:o,searchString:a,onSearch:s,isLoading:d,isLoadingNextPage:c,nextPageSize:u,onLoadNextPage:m,error:g,attributeTitle:p,isFilteredByParentFilters:f,parentFilterTitles:h,enableShowingFilteredElements:b,onShowFilteredElements:y,irrelevantSelection:v,onClearIrrelevantSelection:C,onApplyButtonClick:x,isApplyDisabled:S,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:E,enableAttributeFilterVirtualised:F,withoutApply:w}=e,k=B(),A=(0,le.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:P,selectionMode:O,attribute:T}=es(),{ElementsSelectLoadingComponent:N,ElementsSelectItemComponent:M,ElementsSelectErrorComponent:L,EmptyResultComponent:R,ElementsSearchBarComponent:_,ElementsSelectActionsComponent:V,StatusBarComponent:H}=La(),Z=P&&A?gs:ms,W=A&&P,q=(0,D.usePrevious)(n),z=(0,j.useMemo)((()=>Math.max((Math.min(q,ps)||1)*Z,20)+32),[q,Z]),G=(0,j.useMemo)((()=>{if(!T)return null;const e=T.displayForms.find((e=>!!e.isPrimary));return e?.title}),[T]);return(0,ie.jsx)(ie.Fragment,{children:F?(0,ie.jsx)(us,{items:t,totalItemsCount:i,totalItemsCountWithCurrentSettings:n,isInverted:r,selectedItems:l,onSelect:o,searchString:a,onSearch:s,isLoading:d,isLoadingNextPage:c,nextPageSize:u,onLoadNextPage:m,error:g,attributeTitle:p,isFilteredByParentFilters:f,parentFilterTitles:h,enableShowingFilteredElements:b,onShowFilteredElements:y,irrelevantSelection:v,onClearIrrelevantSelection:C,onApplyButtonClick:x,isApplyDisabled:S,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:E,withoutApply:w}):(0,ie.jsx)(le.InvertableSelect,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:W,isSingleSelect:"single"===O,items:t,totalItemsCount:n,itemHeight:Z,getItemKey:Ta,getItemTitle:e=>Pa(e,k),isInverted:r,selectedItems:l,selectedItemsLimit:qa,onSelect:o,searchString:a,onSearch:s,isLoading:d,error:g,isLoadingNextPage:c,nextPageItemPlaceholdersCount:u,onLoadNextPage:m,numberOfHiddenSelectedItems:v.length,renderItem:e=>(0,ie.jsx)(M,{...e,primaryLabelTitle:G,fullscreenOnMobile:P}),renderError:()=>(0,ie.jsx)(L,{error:g}),renderLoading:()=>(0,ie.jsx)(N,{height:z}),renderNoData:({height:e})=>(0,ie.jsx)(R,{height:e,isFilteredByParentFilters:f,isFilteredByDependentDateFilters:I,searchString:a,totalItemsCount:i,parentFilterTitles:h,enableShowingFilteredElements:b}),renderSearchBar:({onSearch:e,searchString:t})=>(0,ie.jsx)(_,{onSearch:e,searchString:t,isSmall:!(A&&P)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:i,selectedItemsLimit:r})=>(0,ie.jsx)(H,{getItemTitle:e,isFilteredByParentFilters:f,isFilteredByLimitingValidationItems:E,isFilteredByDependentDateFilters:I,isInverted:t,parentFilterTitles:h,selectedItems:i,totalElementsCountWithCurrentSettings:n,selectedItemsLimit:r,attributeTitle:p,enableShowingFilteredElements:b,onShowFilteredElements:y,irrelevantSelection:v,onClearIrrelevantSelection:C,withoutApply:w}),renderActions:({checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isVisible:o})=>(0,ie.jsx)(V,{isVisible:o,checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isApplyDisabled:S,onApplyButtonClick:x})})})}function hs(){return(0,ie.jsx)(le.Message,{type:"error",children:(0,ie.jsx)(ke,{id:"gs.list.error"})})}const bs=(0,be.Z)((function(e,t,i){return t=t.toLowerCase(),e+(i?(0,A.Z)(t):t)}));function ys({primaryLabelTitle:e,itemPrimaryTitle:t,id:i,isFocused:n=!1}){const{formatMessage:r}=B();return e&&t?(0,ie.jsx)("div",{role:"gridcell",children:(0,ie.jsx)(le.UiTooltip,{hoverOpenDelay:0,hoverCloseDelay:0,arrowPlacement:"left",optimalPlacement:!0,offset:15,isOpen:!!n||void 0,triggerBy:["focus","hover"],anchor:(0,ie.jsx)("div",{className:fe("gd-list-item-only gd-item-title-tooltip-wrapper",{"gd-list-item-only--isFocusedSelectItem":n}),id:i,tabIndex:n?0:-1,role:"button","aria-label":r({id:"attributesDropdown.alternativeValueTooltip"},{label:e,value:t}),children:(0,ie.jsx)(le.UiIcon,{color:"currentColor",layout:"block",size:13,type:"question",ariaHidden:!0})}),content:(0,ie.jsxs)("div",{className:"gd-item-title-tooltip",children:[(0,ie.jsx)("h4",{children:e}),(0,ie.jsx)("p",{children:t})]})})}):null}const vs=[{align:"bl tc",offset:{x:7,y:0}}];function Cs({item:e,isSelected:t,focusedAction:i,onSelect:n,onSelectOnly:r,onDeselect:l,primaryLabelTitle:o,index:a}){const s=B(),d=(0,j.useRef)(null),c=(0,j.useCallback)((()=>{t?l():n()}),[n,l,t]),u=(0,j.useCallback)((e=>{e.stopPropagation(),r()}),[r]),m=fe("gd-attribute-filter-elements-select-item__next","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${bs(e.title)}`,`s-attribute-filter-list-item-${bs(e.title)}-${bs(e.uri)}`,{"is-selected":t},{"s-attribute-filter-list-item-selected":t},{"gd-attribute-filter-list-empty-item":!e.title},{"gd-attribute-filter-list-item--isFocused":!!i,"gd-attribute-filter-list-item--isFocusedSelectItem":"selectItem"===i}),g=fe("input-checkbox-label",{"gd-empty-value-label":!e.title}),p=Pa(e,s),f=Oa(e),h=le.ListWithActionsFocusStore.useContextStoreOptional((e=>e.makeId));return(0,ie.jsxs)("div",{ref:d,className:m,onClick:c,role:"row",tabIndex:-1,"aria-rowindex":a,"aria-label":p,children:[(0,ie.jsx)("div",{role:"gridcell",className:"gd-attribute-filter-list-item-label",children:(0,ie.jsxs)("label",{className:g,children:[(0,ie.jsx)("input",{tabIndex:"selectItem"===i?0:-1,id:h?.({item:e,action:le.SELECT_ITEM_ACTION}),type:"checkbox",className:"input-checkbox",readOnly:!0,checked:t}),(0,ie.jsx)("span",{className:"input-label-text",children:p})]})}),!e.title&&(0,ie.jsx)("div",{className:"gd-empty-list-item-tooltip-wrapper",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0,children:[(0,ie.jsx)("span",{className:"gd-icon-circle-question gd-empty-value-tooltip-icon"}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-empty-item-bubble",alignTo:".gd-empty-value-tooltip-icon",alignPoints:vs,children:(0,ie.jsx)(ke,{id:"attributesDropdown.empty.item.tooltip"})})]})}),(0,ie.jsx)("div",{className:fe("gd-list-item-only",{"gd-list-item-only--isFocusedSelectItem":"only"===i}),role:"gridcell",children:(0,ie.jsx)(le.UiLink,{onClick:u,id:h?.({item:e,action:"only"}),variant:"primary",flipUnderline:!0,role:"button","aria-label":s.formatMessage({id:"attributesDropdown.onlyLabel"},{itemTitle:p}),tabIndex:"only"===i?0:-1,children:(0,ie.jsx)(ke,{id:"gs.list.only"})})}),(0,ie.jsx)(ys,{primaryLabelTitle:o,itemPrimaryTitle:f,isFocused:"questionMark"===i,id:h?.({item:e,action:"questionMark"})})]})}function xs({height:e}){return(0,ie.jsx)(le.LoadingMask,{height:e})}function Ss(){const e=B();return(0,ie.jsx)(le.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noData"})})}function Is(){const e=B();return(0,ie.jsx)(le.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noResultsMatch"})})}const Es=[{align:"cr cl"}],Fs={"cr cl":[10,0]};function ws(e){const{parentFilterTitles:t,searchString:i,enableShowingFilteredElements:n}=e;return n&&i.length>0?(0,ie.jsx)(Is,{}):n?(0,ie.jsx)("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsxs)("div",{className:"gd-filtered-message__next",children:[(0,ie.jsx)(ke,{id:"attributesDropdown.noRelevantValues"}),(0,ie.jsx)("span",{className:"gd-icon-circle-question"})]}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Es,arrowOffsets:Fs,children:(0,ie.jsx)(ke,{id:"attributesDropdown.noRelevantValues.tooltip",values:{break:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)("br",{}),(0,ie.jsx)("br",{})]})}})})]})}):(0,ie.jsx)("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsxs)("div",{className:"gd-filtered-message__next",children:[(0,ie.jsx)(ke,{id:"attributesDropdown.allItemsFiltered"}),(0,ie.jsx)("span",{className:"gd-icon-circle-question"})]}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Es,arrowOffsets:Fs,children:(0,ie.jsx)(ke,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:t.join(", "),strong:e=>(0,ie.jsx)("strong",{children:e})}})})]})})}function ks({height:e,totalItemsCount:t,searchString:i,isFilteredByParentFilters:n,isFilteredByDependentDateFilters:r,parentFilterTitles:l=[],enableShowingFilteredElements:o=!1}){let a=null;const s=(0,j.useMemo)((()=>({height:e})),[e]);return 0===t?a=(0,ie.jsx)(Ss,{}):n||r?a=(0,ie.jsx)(ws,{parentFilterTitles:l,searchString:i,enableShowingFilteredElements:o}):i.length>0&&(a=(0,ie.jsx)(Is,{})),(0,ie.jsx)("div",{className:"gd-attribute-filter-empty-result__next",style:s,children:a})}function As(){return(0,ie.jsx)("div",{style:{marginTop:-5}})}function Ds({item:e,onSelectOnly:t,isSelected:i,focusedAction:n,fullscreenOnMobile:r=!1,primaryLabelTitle:l,itemsCount:o,index:a}){const s=B(),d=(0,j.useCallback)((e=>{e.stopPropagation(),t()}),[t]),c=(0,j.useMemo)((()=>Pa(e,s)),[e,s]),u=Oa(e),m=(0,le.useMediaQuery)("mobileDevice"),g=fe("gd-single-selection-attribute-filter-elements-select-item","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${bs(e.title)}`,{"is-selected":i},{"s-attribute-filter-list-item-selected":i},{"gd-attribute-filter-list-item--isFocused":!!n,"gd-attribute-filter-single-selection-list-item--isFocusedSelectItem":"selectItem"===n}),p=le.ListWithActionsFocusStore.useContextStoreOptional((e=>e.makeId));return(0,ie.jsxs)("div",{className:g,onClick:d,role:"option","aria-selected":i,"aria-setsize":o,"aria-posinset":a,"aria-label":c,tabIndex:"selectItem"===n?0:-1,id:p?.({item:e,action:le.SELECT_ITEM_ACTION}),children:[(0,ie.jsx)("span",{children:c}),i&&m&&r?(0,ie.jsx)("span",{className:"gd-customizable-checkmark-mobile-navigation-wrapper",children:(0,ie.jsx)(le.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-navigation"})}):null,(0,ie.jsx)(ys,{primaryLabelTitle:l,itemPrimaryTitle:u,isFocused:"questionMark"===n,id:p?.({item:e,action:"questionMark"})})]})}const Ps=[{align:"cr cl"}],Os={"cr cl":[10,0]};function js(e){const{parentFilterTitles:t}=e,i=(0,j.useMemo)((()=>t?t.join(", "):""),[t]);return(0,ie.jsx)("div",{className:"gd-attribute-filter-filtered-status__next s-attribute-filter-dropdown-items-filtered",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsxs)("div",{className:"gd-filtered-message__next",children:[" ",(0,ie.jsx)(ke,{id:"attributesDropdown.itemsFiltered"}),(0,ie.jsx)("span",{className:"gd-icon-circle-question"})]}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Ps,arrowOffsets:Os,children:(0,ie.jsx)(ke,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:i,strong:e=>(0,ie.jsx)("strong",{children:e})}})})]})})}const Ts=[{align:"bl tl"}],Ns={"bl tl":[-10,12]};function Ms({parentFilterTitles:e,irrelevantSelection:t,onClear:i,showClearButton:n=!0}){const r=(0,j.useMemo)((()=>e?e.join(", "):""),[e]);return 0===t.length?null:(0,ie.jsxs)(le.Message,{className:"gd-attribute-filter-status-irrelevant-message s-attribute-filter-status-irrelevant-message",type:"warning",children:[(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsx)(ke,{id:"attributesDropdown.irrelevantValues",values:{nbsp:(0,ie.jsx)(ie.Fragment,{children:" "})}}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Ts,arrowOffsets:Ns,children:(0,ie.jsx)(ke,{id:"attributesDropdown.irrelevantValues.tooltip",values:{parents:r,strong:e=>(0,ie.jsx)("strong",{children:e})}})})]}),n?(0,ie.jsx)("button",{className:"gd-action-clear s-action-clear",onClick:e=>{e.preventDefault(),e.stopPropagation(),i()},children:(0,ie.jsx)(ke,{id:"attributesDropdown.irrelevantValues.clear"})}):null]})}function Ls(e){const{isInverted:t,selectedItems:i,getItemTitle:n,selectedItemsLimit:r,showSelectionStatus:l}=e;return(0,ie.jsx)(le.InvertableSelectStatusBar,{className:"gd-attribute-filter-selection-status__next",isInverted:t,getItemTitle:n,selectedItems:i,selectedItemsLimit:r,showSelectionStatus:l})}const Rs=[{align:"bl tl"}],Bs={"bl tl":[0,8]};function _s({attributeTitle:e,onClick:t,parentFilterTitles:i,isFilteredByLimitingValidationItems:n,className:r}){const l=B(),o=i.length>0?n?Z.relevantValuesParentFiltersLimitsTooltip:Z.relevantValuesParentFiltersTooltip:Z.relevantValuesLimitsTooltip,a=(0,j.useMemo)((()=>i?i.join(", "):""),[i]);return(0,ie.jsxs)("div",{className:fe("gd-attribute-filter-status-show-all s-attribute-filter-status-show-all",r),children:[(0,ie.jsxs)(le.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,ie.jsx)("div",{className:"gd-relevant-values-text",children:(0,ie.jsx)(ke,{id:"attributesDropdown.relevantValues",values:{nbsp:(0,ie.jsx)(ie.Fragment,{children:" "})}})}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Rs,arrowOffsets:Bs,children:l.formatMessage(o,{child:e,parents:a,strong:e=>(0,ie.jsx)("strong",{children:e})})})]}),(0,ie.jsx)("button",{className:"gd-action-show-all s-action-show-all",onClick:e=>{e.preventDefault(),t()},children:(0,ie.jsx)(ke,{id:"attributesDropdown.showAll"})})]})}function Vs(e){const{attributeTitle:t,isFilteredByParentFilters:i,parentFilterTitles:n,totalElementsCountWithCurrentSettings:r,getItemTitle:l,isInverted:o,selectedItems:a,selectedItemsLimit:s,enableShowingFilteredElements:d=!1,onShowFilteredElements:c=(()=>{}),irrelevantSelection:u=[],onClearIrrelevantSelection:m=(()=>{}),isFilteredByLimitingValidationItems:g,isFilteredByDependentDateFilters:p,withoutApply:f=!1}=e;return d?(0,ie.jsxs)("div",{className:"gd-attribute-filter-status-bar__next",children:[i||g||p?(0,ie.jsx)(_s,{attributeTitle:t,onClick:c,parentFilterTitles:n,isFilteredByLimitingValidationItems:g}):null,(0,ie.jsx)(Ls,{isInverted:o,getItemTitle:l,selectedItems:a,selectedItemsLimit:s,showSelectionStatus:!f}),(0,ie.jsx)(Ms,{parentFilterTitles:n,irrelevantSelection:u,onClear:m})]}):(0,ie.jsxs)("div",{className:"gd-attribute-filter-status-bar__next",children:[(0,ie.jsx)(Ls,{isInverted:o,getItemTitle:l,selectedItems:a,selectedItemsLimit:s,showSelectionStatus:!f}),i&&r>0?(0,ie.jsx)(js,{parentFilterTitles:n}):null]})}function Hs(e){const{enableShowingFilteredElements:t,isFilteredByParentFilters:i,parentFilterTitles:n,totalElementsCountWithCurrentSettings:r,attributeTitle:l,onShowFilteredElements:o,irrelevantSelection:a,isFilteredByLimitingValidationItems:s,isFilteredByDependentDateFilters:d}=e;return t?(0,ie.jsxs)("div",{className:"gd-attribute-filter-status-bar__next",children:[i||s||d?(0,ie.jsx)(_s,{attributeTitle:l,onClick:o,parentFilterTitles:n,className:"no-divider",isFilteredByLimitingValidationItems:s}):null,(0,ie.jsx)(Ms,{parentFilterTitles:n,irrelevantSelection:a,showClearButton:!1})]}):(0,ie.jsx)("div",{className:"gd-attribute-filter-status-bar__next",children:i&&r>0?(0,ie.jsx)(js,{parentFilterTitles:n}):null})}const Zs={ErrorComponent:xa,LoadingComponent:wa,DropdownButtonComponent:Fa,DropdownBodyComponent:is,DropdownActionsComponent:ka,ElementsSearchBarComponent:ls,ElementsSelectComponent:fs,ElementsSelectItemComponent:Cs,ElementsSelectErrorComponent:hs,ElementsSelectLoadingComponent:xs,ElementsSelectActionsComponent:rs,EmptyResultComponent:ks,StatusBarComponent:Vs},Ws=({selectionMode:e})=>({...Zs,..."single"===e?{ElementsSelectItemComponent:Ds,ElementsSelectActionsComponent:As,StatusBarComponent:Hs,DropdownActionsComponent:ns}:{}});function qs(e){const{resetOnParentFilterChange:t=!0,children:i,locale:n,backend:r,workspace:l,title:o,filter:a,workingFilter:s,displayAsLabel:d,connectToPlaceholder:c,parentFilters:u,dependentDateFilters:m,parentFilterOverAttribute:g,validateElementsBy:p,hiddenElements:f,staticElements:h,fullscreenOnMobile:b=!1,selectionMode:y="multi",selectFirst:v=!1,disabled:C,customIcon:x,withoutApply:S,overlayPositionType:I,onApply:E,onSelect:F,onError:w,ErrorComponent:k,LoadingComponent:A,DropdownButtonComponent:P,DropdownBodyComponent:O,DropdownActionsComponent:j,ElementsSearchBarComponent:T,ElementsSelectComponent:N,ElementsSelectItemComponent:M,ElementsSelectErrorComponent:L,ElementsSelectLoadingComponent:R,ElementsSelectActionsComponent:B,EmptyResultComponent:_,StatusBarComponent:V,enableDuplicatedLabelValuesInAttributeFilter:H=!0,enableAttributeFilterVirtualised:Z,enableImmediateAttributeFilterDisplayAsLabelMigration:W=!1,enableDashboardFiltersApplyWithoutLoading:q=!1,enableDashboardFiltersApplyModes:z=!1}=e,G=Ws(e);return(0,ie.jsx)(D.IntlWrapper,{locale:n,children:(0,ie.jsx)(Ra,{ErrorComponent:k??G.ErrorComponent,LoadingComponent:A??G.LoadingComponent,DropdownButtonComponent:P??G.DropdownButtonComponent,DropdownBodyComponent:O??G.DropdownBodyComponent,DropdownActionsComponent:j??G.DropdownActionsComponent,ElementsSearchBarComponent:T??G.ElementsSearchBarComponent,ElementsSelectComponent:N??G.ElementsSelectComponent,ElementsSelectItemComponent:M??G.ElementsSelectItemComponent,ElementsSelectErrorComponent:L??G.ElementsSelectErrorComponent,ElementsSelectLoadingComponent:R??G.ElementsSelectLoadingComponent,ElementsSelectActionsComponent:B??G.ElementsSelectActionsComponent,EmptyResultComponent:_??G.EmptyResultComponent,StatusBarComponent:V??G.StatusBarComponent,children:(0,ie.jsx)(ts,{backend:r,workspace:l,title:o,filter:a,workingFilter:s,displayAsLabel:d,connectToPlaceholder:c,resetOnParentFilterChange:t,parentFilters:u,dependentDateFilters:m,parentFilterOverAttribute:g,validateElementsBy:p,onApply:E,onSelect:F,onError:w,hiddenElements:f,staticElements:h,fullscreenOnMobile:b,selectionMode:y,selectFirst:v,disabled:C,customIcon:x,enableDuplicatedLabelValuesInAttributeFilter:H,enableImmediateAttributeFilterDisplayAsLabelMigration:W,enableAttributeFilterVirtualised:Z,withoutApply:S??z,overlayPositionType:I,enableDashboardFiltersApplyWithoutLoading:q,children:i})})})}const zs=[{align:"bc tc"}];function Gs({children:e,errorMessage:t}){return t?(0,ie.jsx)("div",{className:"gd-attribute-filter-button-wrapper",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[e,(0,ie.jsx)(le.Bubble,{className:"bubble-negative gd-attribute-filter-button-error s-attribute-filter-error-bubble",alignPoints:zs,children:(0,ie.jsx)("span",{children:(0,ie.jsx)(ke,{id:"gs.filter.error.tooltip"})})})]})}):(0,ie.jsx)(ie.Fragment,{children:e})}const Ks=[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tl bl",offset:{x:0,y:0}},{align:"tr tl",offset:{x:0,y:-50}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-200}},{align:"tr tl",offset:{x:0,y:-300}},{align:"tr tl",offset:{x:0,y:-400}}];function Us(){const{DropdownButtonComponent:e,DropdownBodyComponent:t,LoadingComponent:i,ErrorComponent:n}=La(),{title:r,isInitializing:l,initError:o,isFiltering:a,committedSelectionElements:s,workingSelectionElements:d,onReset:c,onApply:u,onOpen:m,fullscreenOnMobile:g,isCommittedSelectionInverted:p,isWorkingSelectionInverted:f,selectionMode:h,disabled:b,customIcon:y,withoutApply:v,isSelectionInvalid:C,overlayPositionType:x}=es(),S=(0,le.useMediaQuery)("mobileDevice"),I=function(e,t){const i=(0,j.useRef)(void 0);return t&&(i.current=e),i.current??e}(v?f:p,!C||!v),E=v?d:s,F=function(e,t){return Na(e,t,B())}(I,E),w="single"!==h&&0!==E.length,k=(0,j.useCallback)((e=>{(0,le.isArrowKey)(e)&&e.stopPropagation()}),[]);return(0,ie.jsx)(le.Dropdown,{className:"gd-attribute-filter__next",closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:Ks,fullscreenOnMobile:g,autofocusOnOpen:!0,overlayPositionType:x,renderButton:({toggleDropdown:t,isOpen:s,buttonRef:d,dropdownId:c})=>{const u=b?()=>{}:t;return(0,ie.jsxs)("div",{className:fe({"gd-is-mobile":g&&S&&s}),children:[!!l&&(0,ie.jsx)(i,{onClick:u,isOpen:s}),!l&&!!o&&!r&&(0,ie.jsx)(n,{message:o.message,error:o}),!l&&!!r&&(0,ie.jsx)(Gs,{errorMessage:o?.message,children:(0,ie.jsx)(e,{title:r,subtitle:F,isFiltering:a,isLoaded:!l,isLoading:l,isOpen:s,selectedItemsCount:E.length,showSelectionCount:w,disabled:b,customIcon:y,onClick:u,isError:!!o,buttonRef:d,dropdownId:c})})]})},onOpenStateChanged:e=>{e?m():c()},renderBody:({closeDropdown:e,ariaAttributes:i})=>(0,ie.jsx)("div",{role:"dialog","aria-label":r,id:i.id,className:fe({"gd-is-mobile":g&&S}),style:{height:g&&S?"100%":"auto"},onKeyDown:k,children:(0,ie.jsx)(t,{onApplyButtonClick:()=>{u(!0,v),e()},onCancelButtonClick:e})})})}function $s(e){return function(e){const{connectToPlaceholder:t,filter:i,onApply:n,hiddenElements:r,staticElements:l}=e;(0,tl.kG)(!(i&&t),"It's not possible to combine 'filter' property with 'connectToPlaceholder' property. Either provide a filter, or a placeholer."),(0,tl.kG)(!(i&&!n),"It's not possible to use 'filter' property without 'onApply' property. Either provide 'onApply' callback or use placeholders."),(0,tl.kG)(i||t,"No filter or placeholer provided. Provide one of the properties: 'filter', 'connectToPlaceholder'."),(0,tl.kG)(!(!(0,h.Z)(r)&&(0,h.Z)(l)),"Hidden elements are not supported by the current backend implementation.")}({backend:(0,D.useBackendStrict)(e.backend,"AttributeFilter"),...e}),(0,ie.jsx)(qs,{...e,children:(0,ie.jsx)(Us,{})})}function Ys({title:e,isLoading:t,isFiltering:i,...n}){const r=B();let l=e;return t?l=r.formatMessage({id:"loading"}):i&&(l=r.formatMessage({id:"filtering"})),(0,ie.jsx)(le.DropdownButton,{className:"gd-attribute-filter-dropdown-simple-button__next",disabled:t,value:l,...n})}function Qs({isOpen:e,subtitle:t,title:i,selectedItemsCount:n,onClick:r,isLoading:l,isFiltering:o,showSelectionCount:a=!0}){const s=B();let d=`${i}: ${t}`;(l||o)&&(d=s.formatMessage({id:"loading"}));const c=fe("gd-button-primary","button-dropdown","dropdown-button","gd-button-small","gd-button",{"is-dropdown-open":e},{"is-active":e}),u=fe("gd-button-icon",{"gd-icon-navigateup":e},{"gd-icon-navigatedown":!e}),m=a?`(${n})`:void 0;return(0,ie.jsx)("div",{className:"gd-attribute-filter-dropdown-simple-button__next",children:(0,ie.jsxs)("button",{className:c,onClick:r,title:d,children:[(0,ie.jsx)("span",{className:"gd-button-text",children:(0,ie.jsxs)("div",{className:"gd-attribute-filter-dropdown-simple-button-text",children:[(0,ie.jsx)("div",{className:"gd-attribute-filter-dropdown-simple-button-selection",children:d}),m?(0,ie.jsx)("div",{className:"gd-attribute-filter-dropdown-simple-button-selection-count",children:m}):null]})}),(0,ie.jsx)("span",{className:u,role:"button-icon"})]})})}function Js(e){const{titleWithSelection:t,...i}=e,n=t?Qs:Ys;return(0,ie.jsx)($s,{...i,DropdownButtonComponent:e.DropdownButtonComponent??n})}function Xs(e){const{attributeFilterMode:t,...i}=e;return"hidden"===t?null:(0,ie.jsx)($s,{...i,disabled:"readonly"===t,DropdownButtonComponent:e.DropdownButtonComponent??Fa})}function ed({isOpened:e,text:t,toggleDropdown:i}){const n=B(),r=fe("gd-button-primary","gd-button-small","button-dropdown","dropdown-button","gd-attribute-filter-display-form-button","s-attribute-display-form-button",{"is-active":e}),l=e?"gd-icon-navigateup":"gd-icon-navigatedown",o=n.formatMessage({id:"attributesDropdown.display_as"},{title:t});return(0,ie.jsx)(le.Button,{className:r,title:o,value:o,onClick:i,iconRight:l})}const td=e=>{switch(e){case"GDC.link":return"gd-icon-hyperlink-warning";case"GDC.image":return"gd-icon-image";case"GDC.geo.pin":case"GDC.geo.pin_latitude":case"GDC.geo.pin_longitude":return"gd-icon-earth";default:return"gd-icon-label-warning"}},id=[{align:"cl cr",offset:{x:-10,y:0}},{align:"cr cl",offset:{x:10,y:0}}];function nd(e){const{displayForm:t,selected:i}=e,{title:n,type:r}=t,l=fe("gd-list-item","gd-attribute-display-form","s-attribute-display-form-name",`s-attribute-display-form-name-${Ln.gl(n)}`,td(r),{"is-selected":i});return(0,ie.jsx)("div",{className:l,onClick:t=>{const{displayForm:i,onClick:n}=e;n(i.ref),t.preventDefault()},children:(0,ie.jsx)(le.ShortenedText,{className:"gd-attribute-display-form-name",tooltipAlignPoints:id,children:n})})}const rd=23,ld=[{align:"bl tl",offset:{x:0,y:1}},{align:"tl bl",offset:{x:0,y:-1}}];function od(e){const{displayForms:t,selectedDisplayForm:i,onSelect:n,alignPoints:r}=e,l=(0,j.useMemo)((()=>t.find((e=>(0,g.areObjRefsEqual)(e.ref,i)))?.title),[t,i]);return(0,ie.jsx)(le.Dropdown,{className:"gd-attribute-display-form-dropdown",alignPoints:r??ld,closeOnMouseDrag:!0,closeOnParentScroll:!0,enableEventPropagation:!0,renderButton:({isOpen:e,toggleDropdown:t})=>(0,ie.jsx)(ed,{text:l,isOpened:e,toggleDropdown:t}),renderBody:({closeDropdown:e})=>(0,ie.jsx)(le.DropdownList,{className:"gd-attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body",items:t,itemHeight:rd,renderItem:({item:t})=>{const r=(0,g.areObjRefsEqual)(t.ref,i);return(0,ie.jsx)(nd,{displayForm:t,onClick:t=>{e(),r||n(t)},selected:r},t.id)}})})}function ad(e){const{onSelect:t,alignPoints:i}=e,{displayForms:n,currentDisplayAsDisplayFormRef:r}=es();return(0,ie.jsx)(od,{displayForms:n,selectedDisplayForm:r,alignPoints:i,onSelect:t})}const sd=[{align:"bc tc",offset:{x:-1,y:5}}];function dd({onConfiguration:e}){return(0,ie.jsx)("div",{className:"gd-attribute-filter-configuration-button",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[(0,ie.jsx)(le.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:e}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary",alignPoints:sd,children:(0,ie.jsx)(ke,{id:"attributesDropdown.configuration"})})]})})}const cd=[{align:"bc tc",offset:{x:-1,y:5}}];function ud({onDelete:e}){return(0,ie.jsx)("div",{className:"gd-attribute-filter-delete-button",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[(0,ie.jsx)(le.Button,{className:"gd-button-link gd-button-icon-only gd-button-small gd-icon-trash gd-delete-button s-delete-button",disabled:!1,onClick:e}),(0,ie.jsx)(le.Bubble,{className:"bubble-primary",alignPoints:cd,children:(0,ie.jsx)(ke,{id:"attributesDropdown.removeTooltip"})})]})})}function md({title:e,defaultAttributeFilterTitle:t,attributeDataSet:i}){return(0,ie.jsxs)("div",{className:"gd-attribute-filter-tooltip-content s-attribute-filter-tooltip-content",children:[(0,ie.jsx)("h3",{className:"s-attribute-filter-tooltip-header",children:e??t}),(0,ie.jsx)("h4",{children:(0,ie.jsx)(ke,{id:"attributesDropdown.details.type"})}),(0,ie.jsx)("p",{className:"s-attribute-filter-tooltip-item-name",children:t}),(0,ie.jsx)("h4",{children:(0,ie.jsx)(ke,{id:"attributesDropdown.details.dataset"})}),(0,ie.jsx)("p",{className:"s-attribute-filter-tooltip-item-dataset",children:i.title})]})}function gd(e){return(0,ie.jsx)("div",{className:"gd-empty-select-search-bar"})}const pd=(e,t)=>{const{onClick:i}=e,{isOpen:n}=(0,D.usePrevious)(e);(0,j.useEffect)((()=>{t&&!n&&i()}),[i,t,n])},fd=(e,t)=>{const{isOpen:i}=e,{isOpen:n}=(0,D.usePrevious)(e);(0,j.useEffect)((()=>{t&&n&&!i&&t()}),[t,i,n])},hd=e=>{const{onSearch:t,searchString:i}=e,[n,r]=(0,j.useState)(i);(0,j.useEffect)((()=>{r(i)}),[i]);const l=(0,j.useCallback)((e=>{r(e),t(e)}),[t]);return{onSearch:l,search:n}};function bd({tooltipContent:e}){const t=le.Icon.BoldHyperlink;return(0,ie.jsx)("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip",children:(0,ie.jsxs)(le.BubbleHoverTrigger,{children:[(0,ie.jsx)(t,{width:12,height:16}),(0,ie.jsx)(le.Bubble,{arrowOffsets:{"bc tl":[-12,9],"bc tr":[12,9]},alignPoints:[{align:"bc tl"},{align:"bc tr"}],children:(0,ie.jsx)("div",{className:"gd-attribute-filter-dropdown-button-icon-tooltip__content",children:e})})]})})}},67709:(e,t,i)=>{i.d(t,{Z:()=>n});const n=function(e,t,i,n){var r=-1,l=null==e?0:e.length;for(n&&l&&(i=e[++r]);++r<l;)i=t(i,e[r],r,e);return i}},3956:(e,t,i)=>{i.d(t,{Z:()=>n});const n=function(e){return function(t){return null==e?void 0:e[t]}}},5723:(e,t,i)=>{i.d(t,{Z:()=>N});var n=i(67709);const r=(0,i(3956).Z)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});var l=i(72402),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var s=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var d=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var c="\\ud800-\\udfff",u="\\u2700-\\u27bf",m="a-z\\xdf-\\xf6\\xf8-\\xff",g="A-Z\\xc0-\\xd6\\xd8-\\xde",p="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="["+p+"]",h="\\d+",b="["+u+"]",y="["+m+"]",v="[^"+c+p+h+u+m+g+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",S="["+g+"]",I="(?:"+y+"|"+v+")",E="(?:"+S+"|"+v+")",F="(?:['’](?:d|ll|m|re|s|t|ve))?",w="(?:['’](?:D|LL|M|RE|S|T|VE))?",k="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",A="[\\ufe0e\\ufe0f]?",D=A+k+"(?:\\u200d(?:"+["[^"+c+"]",C,x].join("|")+")"+A+k+")*",P="(?:"+[b,C,x].join("|")+")"+D,O=RegExp([S+"?"+y+"+"+F+"(?="+[f,S,"$"].join("|")+")",E+"+"+w+"(?="+[f,S+I,"$"].join("|")+")",S+"?"+I+"+"+F,S+"+"+w,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",h,P].join("|"),"g");const j=function(e,t,i){return e=(0,l.Z)(e),void 0===(t=i?void 0:t)?function(e){return d.test(e)}(e)?function(e){return e.match(O)||[]}(e):function(e){return e.match(s)||[]}(e):e.match(t)||[]};var T=RegExp("['’]","g");const N=function(e){return function(t){return(0,n.Z)(j(function(e){return(e=(0,l.Z)(e))&&e.replace(o,r).replace(a,"")}(t).replace(T,"")),e,"")}}}}]);