(self.webpackChunkradial_bar_chart_plugin=self.webpackChunkradial_bar_chart_plugin||[]).push([[6149],{49029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},18674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},36128:(e,t,n)=>{var r=n(20731),i=n(21078),l=n(45652);e.exports=function(e,t,n){var a=e.length;if(a<2)return a?l(e[0]):[];for(var o=-1,s=Array(a);++o<a;)for(var c=e[o],u=-1;++u<a;)u!=o&&(s[o]=r(s[o]||c,e[u],t,n));return l(i(s,1),t,n)}},35393:(e,t,n)=>{var r=n(62663),i=n(53816),l=n(58748),a=RegExp("['’]","g");e.exports=function(e){return function(t){return r(l(i(t).replace(a,"")),e,"")}}},69389:(e,t,n)=>{var r=n(18674)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=r},93157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},2757:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+l+"]",o="\\d+",s="["+n+"]",c="["+r+"]",u="[^"+t+l+o+n+r+i+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="["+i+"]",p="(?:"+c+"|"+u+")",h="(?:"+g+"|"+u+")",f="(?:['’](?:d|ll|m|re|s|t|ve))?",b="(?:['’](?:D|LL|M|RE|S|T|VE))?",E="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",v="[\\ufe0e\\ufe0f]?",y=v+E+"(?:\\u200d(?:"+["[^"+t+"]",d,m].join("|")+")"+v+E+")*",C="(?:"+[s,d,m].join("|")+")"+y,S=RegExp([g+"?"+c+"+"+f+"(?="+[a,g,"$"].join("|")+")",h+"+"+b+"(?="+[a,g+p,"$"].join("|")+")",g+"?"+p+"+"+f,g+"+"+b,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,C].join("|"),"g");e.exports=function(e){return e.match(S)||[]}},68929:(e,t,n)=>{var r=n(48403),i=n(35393)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=i},53816:(e,t,n)=>{var r=n(69389),i=n(79833),l=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(l,r).replace(a,"")}},21804:(e,t,n)=>{var r=n(35393)((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));e.exports=r},58748:(e,t,n)=>{var r=n(49029),i=n(93157),l=n(79833),a=n(2757);e.exports=function(e,t,n){return e=l(e),void 0===(t=n?void 0:t)?i(e)?a(e):r(e):e.match(t)||[]}},72905:(e,t,n)=>{var r=n(34963),i=n(5976),l=n(36128),a=n(29246),o=n(10928),s=i((function(e){var t=o(e);return t="function"==typeof t?t:void 0,l(r(e,a),void 0,t)}));e.exports=s},56149:(e,t,n)=>{n.r(t),n.d(t,{AttributeDatasetInfo:()=>so,AttributeDisplayFormSelect:()=>ro,AttributeFilter:()=>ja,AttributeFilterAllValuesFilteredResult:()=>Ia,AttributeFilterButton:()=>Qa,AttributeFilterButtonToolip:()=>ia,AttributeFilterConfigurationButton:()=>lo,AttributeFilterDeleteButton:()=>oo,AttributeFilterDependencyTooltip:()=>po,AttributeFilterDropdownActions:()=>da,AttributeFilterDropdownBody:()=>ua,AttributeFilterDropdownButton:()=>aa,AttributeFilterElementsActions:()=>La,AttributeFilterElementsSearchBar:()=>ma,AttributeFilterElementsSelect:()=>ga,AttributeFilterElementsSelectError:()=>ba,AttributeFilterElementsSelectItem:()=>fa,AttributeFilterElementsSelectLoading:()=>Ea,AttributeFilterEmptyAttributeResult:()=>ya,AttributeFilterEmptyResult:()=>wa,AttributeFilterEmptySearchResult:()=>va,AttributeFilterError:()=>sa,AttributeFilterFilteredStatus:()=>xa,AttributeFilterLoading:()=>oa,AttributeFilterSelectionStatus:()=>Pa,AttributeFilterSimpleDropdownButton:()=>$a,AttributeFilterSimpleDropdownButtonWithSelection:()=>Ya,AttributeFilterStatusBar:()=>Ra,DateFilter:()=>On,DateFilterHelpers:()=>z,EmptyElementsSearchBar:()=>co,MeasureValueFilter:()=>ir,MeasureValueFilterDropdown:()=>nr,RankingFilter:()=>Or,RankingFilterDropdown:()=>Ar,SingleSelectionAttributeFilterElementsSelectItem:()=>_a,SingleSelectionAttributeFilterStatusBar:()=>Va,defaultDateFilterOptions:()=>m,filterVisibleDateFilterOptions:()=>A,getLocalizedIcuDateFormatPattern:()=>Ce,isAbsoluteDateFilterOption:()=>k,isRelativeDateFilterOption:()=>F,isUiRelativeDateFilterForm:()=>w,isWarningMessage:()=>Wn,newAttributeFilterHandler:()=>Ll,useAttributeFilterContext:()=>ea,useAttributeFilterController:()=>Yl,useAttributeFilterHandler:()=>Ul,useAttributeFilterSearch:()=>go,useAutoOpenAttributeFilterDropdownButton:()=>uo,useOnCloseAttributeFilterDropdownButton:()=>mo});const r={"GDC.time.minute":"minute","GDC.time.hour":"hour","GDC.time.date":"day","GDC.time.week_us":"week","GDC.time.month":"month","GDC.time.quarter":"quarter","GDC.time.year":"year"};var i=n(30381);const l="YYYY-MM-DD",a="YYYY-MM-DD HH:mm",o="HH:mm",s=", HH:mm",c="00:00",u="23:59",d="MM/dd/yyyy",m={allTime:{localIdentifier:"ALL_TIME",type:"allTime",name:"",visible:!0},absoluteForm:{localIdentifier:"ABSOLUTE_FORM",type:"absoluteForm",from:i().subtract(1,"month").startOf("day").format(l),to:i().startOf("day").format(l),name:"",visible:!0},absolutePreset:[],relativeForm:{localIdentifier:"RELATIVE_FORM",type:"relativeForm",granularity:"GDC.time.month",from:void 0,to:void 0,name:"",visible:!0},relativePreset:{"GDC.time.date":[{from:-6,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_7_DAYS",type:"relativePreset",visible:!0,name:""},{from:-29,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_30_DAYS",type:"relativePreset",visible:!0,name:""},{from:-89,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_90_DAYS",type:"relativePreset",visible:!0,name:""}],"GDC.time.month":[{from:0,to:0,granularity:"GDC.time.month",localIdentifier:"THIS_MONTH",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.month",localIdentifier:"LAST_MONTH",type:"relativePreset",visible:!0,name:""},{from:-11,to:0,granularity:"GDC.time.month",localIdentifier:"LAST_12_MONTHS",type:"relativePreset",visible:!0,name:""}],"GDC.time.quarter":[{from:0,to:0,granularity:"GDC.time.quarter",localIdentifier:"THIS_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.quarter",localIdentifier:"LAST_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-3,to:0,granularity:"GDC.time.quarter",localIdentifier:"LAST_4_QUARTERS",type:"relativePreset",visible:!0,name:""}],"GDC.time.year":[{from:0,to:0,granularity:"GDC.time.year",localIdentifier:"THIS_YEAR",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.year",localIdentifier:"LAST_YEAR",type:"relativePreset",visible:!0,name:""}]}};var g=n(53244),p=n(47037),h=n(47960);const f=(e,t=l)=>h(e)?i(e).local().format(t):e,b=e=>p(e)?new Date(i(e,a).format()):e,E=(0,n(50049).vU)({minute:{id:"filters.granularity.minutes"},hour:{id:"filters.granularity.hours"},day:{id:"filters.granularity.days"},week:{id:"filters.granularity.weeks"},month:{id:"filters.granularity.months"},quarter:{id:"filters.granularity.quarters"},year:{id:"filters.granularity.years"},allTimeExcluded:{id:"filters.allTime.excludeCurrentPeriod"},minuteExcluded:{id:"filters.minute.excludeCurrentPeriod"},hourExcluded:{id:"filters.hour.excludeCurrentPeriod"},dayExcluded:{id:"filters.day.excludeCurrentPeriod"},weekExcluded:{id:"filters.week.excludeCurrentPeriod"},monthExcluded:{id:"filters.month.excludeCurrentPeriod"},quarterExcluded:{id:"filters.quarter.excludeCurrentPeriod"},yearExcluded:{id:"filters.year.excludeCurrentPeriod"},minute_history:{id:"filters.floatingRange.option.minute.offset.history"},minute_today:{id:"filters.floatingRange.option.minute.offset.today"},minute_future:{id:"filters.floatingRange.option.minute.offset.future"},hour_history:{id:"filters.floatingRange.option.hour.offset.history"},hour_today:{id:"filters.floatingRange.option.hour.offset.today"},hour_future:{id:"filters.floatingRange.option.hour.offset.future"},day_history:{id:"filters.floatingRange.option.day.offset.history"},day_today:{id:"filters.floatingRange.option.day.offset.today"},day_future:{id:"filters.floatingRange.option.day.offset.future"},week_history:{id:"filters.floatingRange.option.week.offset.history"},week_today:{id:"filters.floatingRange.option.week.offset.today"},week_future:{id:"filters.floatingRange.option.week.offset.future"},month_history:{id:"filters.floatingRange.option.month.offset.history"},month_today:{id:"filters.floatingRange.option.month.offset.today"},month_future:{id:"filters.floatingRange.option.month.offset.future"},quarter_history:{id:"filters.floatingRange.option.quarter.offset.history"},quarter_today:{id:"filters.floatingRange.option.quarter.offset.today"},quarter_future:{id:"filters.floatingRange.option.quarter.offset.future"},year_history:{id:"filters.floatingRange.option.year.offset.history"},year_today:{id:"filters.floatingRange.option.year.offset.today"},year_future:{id:"filters.floatingRange.option.year.offset.future"},"GDC.time.minute":{id:"filters.minute.title"},"GDC.time.hour":{id:"filters.hour.title"},"GDC.time.date":{id:"filters.day.title"},"GDC.time.week_us":{id:"filters.week.title"},"GDC.time.month":{id:"filters.month.title"},"GDC.time.quarter":{id:"filters.quarter.title"},"GDC.time.year":{id:"filters.year.title"},top:{id:"rankingFilter.top"},bottom:{id:"rankingFilter.bottom"},topWithAttr:{id:"rankingFilter.preview.top_with_attribute"},topWithoutAttr:{id:"rankingFilter.preview.top_without_attribute"},bottomWithAttr:{id:"rankingFilter.preview.bottom_with_attribute"},bottomWithoutAttr:{id:"rankingFilter.preview.bottom_without_attribute"},ALL:{id:"mvf.operator.all"},GREATER_THAN:{id:"mvf.operator.greaterThan"},GREATER_THAN_OR_EQUAL_TO:{id:"mvf.operator.greaterThanOrEqualTo"},LESS_THAN:{id:"mvf.operator.lessThan"},LESS_THAN_OR_EQUAL_TO:{id:"mvf.operator.lessThanOrEqualTo"},EQUAL_TO:{id:"mvf.operator.equalTo"},NOT_EQUAL_TO:{id:"mvf.operator.notEqualTo"},BETWEEN:{id:"mvf.operator.between"},NOT_BETWEEN:{id:"mvf.operator.notBetween"},incorrectFormat:{id:"filters.staticPeriod.incorrectFormat"},endDateBeforeStartDate:{id:"filters.staticPeriod.endDateBeforeStartDate"},thisMinute:{id:"filters.thisMinute.title"},lastMinute:{id:"filters.lastMinute.title"},nextMinute:{id:"filters.nextMinute.title"},thisHour:{id:"filters.thisHour.title"},lastHour:{id:"filters.lastHour.title"},nextHour:{id:"filters.nextHour.title"},thisDay:{id:"filters.thisDay.title"},lastDay:{id:"filters.lastDay.title"},nextDay:{id:"filters.nextDay.title"},thisWeek:{id:"filters.thisWeek.title"},lastWeek:{id:"filters.lastWeek.title"},nextWeek:{id:"filters.nextWeek.title"},thisMonth:{id:"filters.thisMonth.title"},lastMonth:{id:"filters.lastMonth.title"},nextMonth:{id:"filters.nextMonth.title"},thisQuarter:{id:"filters.thisQuarter.title"},lastQuarter:{id:"filters.lastQuarter.title"},nextQuarter:{id:"filters.nextQuarter.title"},thisYear:{id:"filters.thisYear.title"},lastYear:{id:"filters.lastYear.title"},nextYear:{id:"filters.nextYear.title"},lastNMinutes:{id:"filters.lastNMinutes"},lastNHours:{id:"filters.lastNHours"},lastNDays:{id:"filters.lastNDays"},lastNWeeks:{id:"filters.lastNWeeks"},lastNMonths:{id:"filters.lastNMonths"},lastNQuarters:{id:"filters.lastNQuarters"},lastNYears:{id:"filters.lastNYears"},nextNMinutes:{id:"filters.nextNMinutes"},nextNHours:{id:"filters.nextNHours"},nextNDays:{id:"filters.nextNDays"},nextNWeeks:{id:"filters.nextNWeeks"},nextNMonths:{id:"filters.nextNMonths"},nextNQuarters:{id:"filters.nextNQuarters"},nextNYears:{id:"filters.nextNYears"},"minutes.past":{id:"filters.interval.minutes.past"},"minutes.past.sameValue":{id:"filters.interval.minutes.past.sameValue"},"minutes.future":{id:"filters.interval.minutes.future"},"minutes.future.sameValue":{id:"filters.interval.minutes.future.sameValue"},"minutes.mixed":{id:"filters.interval.minutes.mixed"},"hours.past":{id:"filters.interval.hours.past"},"hours.past.sameValue":{id:"filters.interval.hours.past.sameValue"},"hours.future":{id:"filters.interval.hours.future"},"hours.future.sameValue":{id:"filters.interval.hours.future.sameValue"},"hours.mixed":{id:"filters.interval.hours.mixed"},"days.past":{id:"filters.interval.days.past"},"days.past.sameValue":{id:"filters.interval.days.past.sameValue"},"days.future":{id:"filters.interval.days.future"},"days.future.sameValue":{id:"filters.interval.days.future.sameValue"},"days.mixed":{id:"filters.interval.days.mixed"},"weeks.past":{id:"filters.interval.weeks.past"},"weeks.past.sameValue":{id:"filters.interval.weeks.past.sameValue"},"weeks.future":{id:"filters.interval.weeks.future"},"weeks.future.sameValue":{id:"filters.interval.weeks.future.sameValue"},"weeks.mixed":{id:"filters.interval.weeks.mixed"},"months.past":{id:"filters.interval.months.past"},"months.past.sameValue":{id:"filters.interval.months.past.sameValue"},"months.future":{id:"filters.interval.months.future"},"months.future.sameValue":{id:"filters.interval.months.future.sameValue"},"months.mixed":{id:"filters.interval.months.mixed"},"quarters.past":{id:"filters.interval.quarters.past"},"quarters.past.sameValue":{id:"filters.interval.quarters.past.sameValue"},"quarters.future":{id:"filters.interval.quarters.future"},"quarters.future.sameValue":{id:"filters.interval.quarters.future.sameValue"},"quarters.mixed":{id:"filters.interval.quarters.mixed"},"years.past":{id:"filters.interval.years.past"},"years.past.sameValue":{id:"filters.interval.years.past.sameValue"},"years.future":{id:"filters.interval.years.future"},"years.future.sameValue":{id:"filters.interval.years.future.sameValue"},"years.mixed":{id:"filters.interval.years.mixed"}}),v=e=>{const t={};return e.visible||(t[e.type]={}),t},y=e=>(0,g.isAbsoluteDateFilterForm)(e)?(e=>{const t=v(e);return["from","to"].forEach((n=>{e[n]||(t.absoluteForm=t.absoluteForm||{},void 0===e[n]&&(t.absoluteForm[n]=E.incorrectFormat.id))})),t.absoluteForm||b(e.from)>b(e.to)&&(t.absoluteForm={to:E.endDateBeforeStartDate.id}),t.absoluteForm?t:{}})(e):(0,g.isRelativeDateFilterForm)(e)?(e=>{const t=v(e);return["from","to"].forEach((n=>{void 0===e[n]&&(t.relativeForm=t.relativeForm||{})})),t.relativeForm?t:{}})(e):v(e),C=(e,t)=>{if(!e||!t)return e;if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterForm)(e))return e;if((0,g.isRelativeDateFilterPreset)(e)){const{from:t,to:n}=e,r=0===n&&t<n;return{...e,from:r?e.from-1:e.from,to:r?-1:n}}throw new Error("Unknown date filter value type")},S=e=>!!e.visible&&!!(0,g.isRelativeDateFilterPreset)(e)&&0===e.to&&e.from<e.to;var I=n(41609);const w=e=>!I(e)&&"relativeForm"===e.type,k=e=>(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e),F=e=>(0,g.isRelativeDateFilterForm)(e)||(0,g.isRelativeDateFilterPreset)(e);function x(e){return e?.visible}function P(e){return x(e)?e:void 0}function D(e){const{absoluteForm:t,absolutePreset:n,allTime:r,relativeForm:i,relativePreset:l}=e;return{...r&&{allTime:r},...t&&{absoluteForm:t},...!I(n)&&{absolutePreset:n},...i&&{relativeForm:i},...!I(l)&&{relativePreset:l}}}function A(e){const t=P(e.allTime),n=P(e.absoluteForm),r=P(e.relativeForm),i=e.absolutePreset?.filter(x);return D({allTime:t,absoluteForm:n,absolutePreset:i,relativeForm:r,relativePreset:e.relativePreset&&(l=e.relativePreset,Object.keys(l).reduce(((e,t)=>{const n=l[t].filter(x);return n.length&&(e[t]=n),e}),{}))});var l}function O(e){return e.from>e.to?{...e,from:e.to,to:e.from}:e}function N(e){const t=e.absolutePreset?.map(O),n=e.relativePreset&&function(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n];return t[n]=r.map(O),t}),{})}(e.relativePreset);return D({...e,absolutePreset:t,relativePreset:n})}var T=n(15616),M=n(48403),R=n(2525);const L=(e,t,n=c)=>p(e)&&t&&1===e.split(" ").length?`${e} ${n}`:e,_=(e,t,n)=>{const r=n.includes(o),l=n.replace(s,""),a=L(e,r,c),d=L(t,r,u),m=b(a),g=b(d),p=(f=g,0===(h=m).getHours()&&0===h.getMinutes()&&23===f.getHours()&&59===f.getMinutes());var h,f;if(i(m).isSame(g,"day"))return r&&!p?`${T(m,l)}, ${((e,t)=>{const n=T(e,o),r=T(t,o);return n===r?n:`${n} – ${r}`})(m,g)}`:T(m,l);const E=p?l:n;return`${T(m,E)} – ${T(g,E)}`},B=[{predicate:(e,t)=>0===e&&0===t,formatter:(e,t,n,r)=>r.formatMessage(E[`this${M(n)}`])},{predicate:(e,t)=>1===e&&1===t,formatter:(e,t,n,r)=>r.formatMessage(E[`next${M(n)}`])},{predicate:(e,t)=>-1===e&&-1===t,formatter:(e,t,n,r)=>r.formatMessage(E[`last${M(n)}`])},{predicate:e=>0===e,formatter:(e,t,n,r)=>r.formatMessage(E[`nextN${M(n)}s`],{n:Math.abs(t)+1})},{predicate:(e,t)=>0===t,formatter:(e,t,n,r)=>r.formatMessage(E[`lastN${M(n)}s`],{n:Math.abs(e)+1})},{predicate:(e,t)=>e<0&&e===t,formatter:(e,t,n,r)=>r.formatMessage(E[`${n}s.past.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e>0&&e===t,formatter:(e,t,n,r)=>r.formatMessage(E[`${n}s.future.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e<0&&t<0,formatter:(e,t,n,r)=>r.formatMessage(E[`${n}s.past`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:(e,t)=>e>0&&t>0,formatter:(e,t,n,r)=>r.formatMessage(E[`${n}s.future`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:()=>!0,formatter:(e,t,n,r)=>r.formatMessage(E[`${n}s.mixed`],{from:Math.abs(e),to:Math.abs(t)})}],V=(e,t,n,i)=>{const l=r[n],{formatter:a}=B.find((n=>n.predicate(e,t)));return a(e,t,l,i)},H=(e,t,n)=>{if((0,g.isAbsoluteDateFilterForm)(e)||(0,g.isRelativeDateFilterForm)(e))return q(e,t,n);if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterPreset)(e))return e.name||q(e,t,n);throw new Error("Unknown DateFilterOption type")},Z=(e,t,n=d)=>{const r=(0,R.getIntl)(t);return H(e,r,n)},q=(e,t,n)=>{if((0,g.isAbsoluteDateFilterForm)(e))return((e,t)=>e.from&&e.to?_(e.from,e.to,t):"")(e,n);if((0,g.isAbsoluteDateFilterPreset)(e))return((e,t)=>_(e.from,e.to,t))(e,n);if((0,g.isAllTimeDateFilterOption)(e))return(e=>e.formatMessage({id:"filters.allTime.title"}))(t);if((0,g.isRelativeDateFilterForm)(e))return((e,t)=>"number"==typeof e.from&&"number"==typeof e.to?V(e.from,e.to,e.granularity,t):"")(e,t);if((0,g.isRelativeDateFilterPreset)(e))return((e,t)=>V(e.from,e.to,e.granularity,t))(e,t);throw new Error("Unknown DateFilterOption type")},z={validateFilterOption:y,getDateFilterTitle:Z,getDateFilterTitleUsingTranslator:(e,t,n=d)=>H(e,t,n),getDateFilterRepresentation:(e,t,n=d)=>{const r=(0,R.getIntl)(t);return q(e,r,n)},granularityIntlCodes:r,applyExcludeCurrentPeriod:C,defaultDateFilterOptions:m,canExcludeCurrentPeriod:S,mapOptionToAfm:(e,t,n)=>{const r=C(e,n);if((0,g.isAllTimeDateFilterOption)(r))return null;if(k(r))return((e,t)=>({absoluteDateFilter:{dataSet:t,from:e.from,to:e.to}}))(r,t);if(F(r))return((e,t)=>({relativeDateFilter:{dataSet:t,from:e.from,to:e.to,granularity:e.granularity}}))(r,t);throw new Error("Unknown date filter value provided")},formatAbsoluteDateRange:_,formatRelativeDateRange:V,filterVisibleDateFilterOptions:A};var W=n(59882),G=n(18446),U=n(14293),K=n(50308),$=n(59242),Y=n(1852),j=n(25356),Q=n(65165);const J=(e=>`only screen and (min-width:${e.lower}px) and (max-width:${e.upper}px)`)({lower:0,upper:640});var X=n(44012),ee=n(94184);const te=[{align:"bc tl",offset:{x:0,y:5}}],ne=({customIcon:e,disabled:t})=>{if(!e)return null;const{icon:n,tooltip:r,bubbleClassNames:i,bubbleAlignPoints:l}=e,a=ee(["gd-filter-button-custom-icon-wrapper","s-gd-filter-button-custom-icon-wrapper"],{"disabled s-disabled":t});return W.createElement("div",{className:a},W.createElement(Q.BubbleHoverTrigger,null,W.createElement("i",{className:`gd-filter-button-custom-icon s-gd-filter-button-custom-icon ${n}`}),W.createElement(Q.Bubble,{className:`bubble-primary ${i||""}`,alignPoints:l||te},r)))},re=({isOpen:e,isMobile:t,title:n,children:r,disabled:i,customIcon:l})=>W.createElement("div",{className:ee("s-date-filter-button","gd-date-filter-button","dropdown-button",t&&"gd-date-filter-button-mobile",e&&"is-active",i&&"disabled")},W.createElement("div",{className:"button-content"},W.createElement("div",{className:"s-date-filter-title button-title"},n),W.createElement("div",{className:"button-subtitle"},r)),W.createElement(ne,{customIcon:l,disabled:i}));var ie=n(74806);const le=(0,ie.ZP)((({dateFormat:e,filter:t,intl:n})=>W.createElement(W.Fragment,null,Z(t,(0,R.resolveLocale)(n.locale),e)))),ae=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}],oe=({dateFilterOption:e,dateFormat:t,isOpen:n=!1,isMobile:r=!0,customFilterName:i,disabled:l,customIcon:a})=>{const o=i?W.createElement(Q.ShortenedText,{tooltipAlignPoints:ae},i):W.createElement(X.Z,{id:"dateFilterDropdown.title"});return W.createElement(re,{title:o,isOpen:n,isMobile:r,disabled:l,customIcon:a},W.createElement("span",{className:"s-button-text"},W.createElement(le,{filter:e,dateFormat:t})))},se=(0,j.b)(Y),ce=({isSelected:e,className:t,children:n,...r})=>W.createElement(W.Fragment,null,W.createElement("button",{className:ee("gd-list-item","gd-filter-list-item",{"is-selected":e,"gd-filter-list-item-selected":e},t),...r},n,e?W.createElement(se,{query:J},W.createElement(Q.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-date-filter"})):null)),ue=e=>{const t=!e.disabled&&e.granularity?E[`${r[e.granularity]}Excluded`].id:E.allTimeExcluded.id;return W.createElement(X.Z,{id:t},((...e)=>W.createElement("span",{className:"input-label-text"},e)))},de=[{align:"tc bc"}],me=({value:e,onChange:t,disabled:n,granularity:r})=>W.createElement("div",{className:"gd-extended-date-filter-exclude-current"},W.createElement(Q.BubbleHoverTrigger,null,W.createElement("label",{className:ee("s-exclude-current-period","input-checkbox-label",{"s-exclude-current-perod-enabled":!n,"s-exclude-current-perod-disabled":n})},W.createElement("input",{type:"checkbox",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked),disabled:n})," ",W.createElement(ue,{granularity:r,disabled:n})),n?W.createElement(Q.Bubble,{alignPoints:de},W.createElement(X.Z,{id:"filters.excludeCurrentPeriod.unavailable"})):null)),ge=({className:e,children:t,...n})=>W.createElement("div",{className:ee("gd-visible-scrollbar",e),...n},t),pe=({className:e,filterOption:t,selectedFilterOption:n,onSelectedFilterOptionChange:r})=>W.createElement(ce,{isSelected:t.localIdentifier===n.localIdentifier,onClick:()=>r(t),className:ee("s-all-time",e)},t.name?t.name:W.createElement(X.Z,{id:"filters.allTime.title"})),he=({children:e,isMobile:t,className:n,...r})=>W.createElement("div",{className:ee(n,"gd-date-filter-form-wrapper",!t&&"gd-date-filter-form-wrapper-desktop"),...r},W.createElement("div",{className:"gd-date-filter-form-wrapper-inner"},e));var fe=n(12595);const be=e=>i(e).format(l);var Ee=n(2498);const ve=e=>{const t=i().locale(Ee.Z(e)),n=t?.localeData&&t.localeData();return n?._longDateFormat?.L},ye={"en-US":"M/d/y","en-GB":"dd/MM/y","cs-CZ":"d. M. y","de-DE":"d.M.y","es-ES":"d/M/y","fr-FR":"dd/MM/y","ja-JP":"y/M/d","nl-NL":"d-M-y","pt-BR":"dd/MM/y","pt-PT":"dd/MM/y","zh-Hans":"y/M/d","ru-RU":"dd.MM.y"},Ce=e=>ye[e]??ye["en-US"],Se=(0,ie.ZP)((e=>{const{dateFormat:t,errorId:n,intl:r}=e;return W.createElement("div",{className:"gd-date-range-picker-error-message s-absolute-range-error"},W.createElement(X.Z,{id:n,values:{format:t||ve(r.locale)}}))}));var Ie=n(39989),we=n(91884);class ke extends W.Component{inputRef=W.createRef();invokeInputMethod=e=>{this.inputRef.current&&this.inputRef.current[e]()};blur=()=>this.invokeInputMethod("blur");focus=()=>this.invokeInputMethod("focus");get value(){return this.inputRef.current?this.inputRef.current.value:""}render(){const{className:e}=this.props;return W.createElement("span",{className:ee(e)},W.createElement("span",{className:"gd-icon-calendar"}),W.createElement("input",{...this.props,ref:this.inputRef,className:"input-text s-date-range-picker-input-field"}))}}function Fe(e,t){return T(e,t)}const xe=W.forwardRef(((e,t)=>{const{placeholderDate:n,value:r,onChange:l,dateFormat:a,handleDayClick:s,isMobile:c,isTimeEnabled:u,onKeyDown:d,className:m,error:g=!1}=e,[p,h]=(0,W.useState)((e=>i(e).format(o))(r)),[f,E]=(0,W.useState)(Fe(r,a));(0,W.useEffect)((()=>{E(Fe(r,a))}),[r,a]);const v=e=>{l((e=>{if(u&&e){const t=r??i(p,o).toDate();e.setHours(t.getHours()),e.setMinutes(t.getMinutes())}return e})(e))};return W.createElement("div",{className:ee(m,u&&"gd-flex-row")},c?W.createElement(ke,{type:"date",className:ee("s-date-range-picker-date","gd-date-range-picker-input","gd-date-range-picker-input-native",g&&"gd-date-range-picker-input-error"),placeholder:n,onChange:e=>v(b(e.target.value)),value:be(r)}):W.createElement("div",{className:ee("gd-date-range-picker-input",g&&"gd-date-range-picker-input-error")},W.createElement("span",null,W.createElement("span",{className:"gd-icon-calendar"}),W.createElement("input",{onKeyDown:d,ref:t,placeholder:n,onChange:e=>(e=>{E(e);const t=function(e,t){try{const n=we(e,t,new Date);return Ie(n)&&n.getFullYear()>=1e3&&e===Fe(n,t)?n:void 0}catch{return}}(e,a);v(t)})(e.target.value),onClick:s,onFocus:s,value:f,className:"input-text s-date-range-picker-input-field"}))),u?W.createElement("span",{className:ee("gd-date-range-picker-input","gd-date-range-picker-input-time","s-date-range-picker-input-time",g&&"gd-date-range-picker-input-error")},W.createElement("span",{className:"gd-icon-clock"}),W.createElement("input",{type:"time",className:"input-text",onChange:e=>(e=>{const t=r??new Date,n=i(e,o);n.isValid()&&(t.setHours(n.hours()),t.setMinutes(n.minutes()),h(e)),l(t)})(e.target.value),value:p})):null)}));xe.displayName="DateTimePickerComponent";const Pe=(0,ie.ZP)(xe,{forwardRef:!0});Pe.displayName="DateTimePicker";var De=n(82512),Ae=n(76119),Oe=n(19962),Ne=n(63126),Te=n(42180),Me=n(70390),Re=n(63086);const Le={"en-US":De,"de-DE":Ae,"es-ES":Oe,"fr-FR":Ne,"ja-JP":Te,"nl-NL":Me,"pt-BR":n(81333),"pt-PT":Re,"zh-Hans":n(24602),"ru-RU":n(66754)},_e=[{align:"bl tl",offset:{x:0,y:1}}];function Be(e){switch(e){case"Sunday":return 0;case"Monday":return 1;default:throw new Error(`Unknown week start ${e}`)}}class Ve extends W.Component{dateRangePickerInputFrom=W.createRef();dateRangePickerInputTo=W.createRef();dateRangePickerContainer=W.createRef();constructor(e){super(e),this.state={isOpen:!1,inputFromValue:this.props.range.from,inputToValue:this.props.range.to,selectedRange:{from:this.props.range.from,to:this.props.range.to},monthDate:null,selectedInput:null},this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleRangeSelect=this.handleRangeSelect.bind(this),this.handleFromDayClick=this.handleFromDayClick.bind(this),this.handleToDayClick=this.handleToDayClick.bind(this),this.handleFromChange=this.handleFromChange.bind(this),this.handleToChange=this.handleToChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}render(){const{dateFormat:e,range:{from:t,to:n},dayPickerProps:r,intl:i,isMobile:l,errors:{from:a,to:o}={from:void 0,to:void 0},isTimeEnabled:s,weekStart:c="Sunday",shouldOverlayDatePicker:d=!1}=this.props;var m;const g=(S={mode:"range",showOutsideDays:!0,modifiers:{start:t,end:n},selected:{from:t,to:n},locale:(m=i.locale,Le[m])},(I=r)?((e,t)=>{return{...e,...t,...(n=e.modifiers,r=t.modifiers,n?{modifiers:{...n,...r}}:void 0)};var n,r})(S,I):S),p={root:`gd-date-range-picker-picker s-date-range-calendar-${this.state.selectedInput}`},h=W.createElement("div",{className:"gd-date-range-picker-wrapper",ref:this.dateRangePickerContainer},W.createElement(fe._W,{...g,onSelect:this.handleRangeSelect,selected:this.state.selectedRange,month:this.state.monthDate,classNames:p,onMonthChange:this.handleMonthChanged,weekStartsOn:Be(c)})),f=W.createElement(Q.Overlay,{alignTo:`.gd-date-range-picker-${s?this.state.selectedInput:"from"}`,alignPoints:_e,closeOnOutsideClick:!0,closeOnMouseDrag:!0,closeOnParentScroll:!0},h),b=W.createElement(Pe,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputFrom,placeholderDate:i.formatMessage({id:"filters.from"}),onChange:this.handleFromChange,value:this.state.inputFromValue,dateFormat:e,isMobile:l,handleDayClick:this.handleFromDayClick,isTimeEnabled:s,className:ee("s-date-range-picker-from","gd-date-range-picker-from"),error:void 0!==a}),E=W.createElement(Pe,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputTo,placeholderDate:i.formatMessage({id:"filters.to"}),onChange:this.handleToChange,value:this.state.inputToValue,dateFormat:e,isMobile:l,handleDayClick:this.handleToDayClick,isTimeEnabled:s,className:ee("s-date-range-picker-to","gd-date-range-picker-to"),defaultTime:u,error:void 0!==o}),v=d?f:h,y="from"===this.state.selectedInput&&this.state.isOpen,C="to"===this.state.selectedInput&&this.state.isOpen;var S,I;return W.createElement(W.Fragment,null,s?W.createElement("div",{className:"gd-date-range-picker datetime s-date-range-picker"},W.createElement("label",null,i.formatMessage({id:"filters.from"})),b,y?v:null,W.createElement("label",null,i.formatMessage({id:"filters.to"})),E,C?v:null):W.createElement(W.Fragment,null,W.createElement("div",{className:"gd-date-range-picker gd-flex-row s-date-range-picker"},b,W.createElement("span",{className:"gd-date-range-picker-dash"},"–"),E),this.state.isOpen?v:null),a||o?W.createElement(Se,{dateFormat:e,errorId:a||o}):null)}onKeyDown(e){"Escape"!==e.key&&"Tab"!==e.key||this.setState({isOpen:!1})}handleMonthChanged(e){this.setState({monthDate:e})}setTimeForDate(e,t){const n=new Date(e);return n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n}handleRangeSelect=(e,t)=>{let n,r;"from"==this.state.selectedInput?(n=this.setTimeForDate(t,this.state.inputFromValue),r=this.state.inputToValue):(n=this.state.inputFromValue,r=this.setTimeForDate(t,this.state.inputToValue)),this.setState({inputFromValue:n,inputToValue:r,selectedRange:{from:n,to:r},isOpen:!1},(()=>{this.updateRange(n,r)}))};handleClickOutside(e){this.dateRangePickerContainer.current&&!this.dateRangePickerContainer.current.contains(e.target)&&this.dateRangePickerInputFrom&&!this.dateRangePickerInputFrom.current.contains(e.target)&&this.dateRangePickerInputTo&&!this.dateRangePickerInputTo.current.contains(e.target)&&this.setState({isOpen:!1})}updateRange=(e,t)=>{this.props.onRangeChange({from:e,to:t})};handleFromDayClick=()=>{this.setState({selectedInput:"from",isOpen:!0,monthDate:this.props.range.from})};handleToDayClick=()=>{this.setState({selectedInput:"to",isOpen:!0,monthDate:this.props.range.to})};handleFromChange=e=>{e&&this.setState({inputFromValue:e}),this.setState({selectedRange:{from:e,to:this.state.selectedRange.to},monthDate:e},(()=>{this.updateRange(e,this.state.selectedRange.to)}))};handleToChange=e=>{e&&this.setState({inputToValue:e}),this.setState({selectedRange:{from:this.state.selectedRange.from,to:e},monthDate:e},(()=>{this.updateRange(this.state.selectedRange.from,e)}))}}const He=(0,ie.ZP)(Ve),Ze=(e,t=!1)=>{const n=e.from&&e.from.split(" ").length>1,r=e.to&&e.to.split(" ").length>1,i=e&&b(e.from),l=e&&b(e.to);return i&&!n&&t&&(i.setHours(0),i.setMinutes(0)),l&&!r&&t&&(l.setHours(23),l.setMinutes(59)),{from:i,to:l}},qe={mode:"range",weekStartsOn:0};class ze extends W.Component{render(){const{dateFormat:e,isMobile:t,selectedFilterOption:n,errors:r,isTimeEnabled:i,weekStart:l,shouldOverlayDatePicker:a}=this.props;return W.createElement(He,{dateFormat:e,onRangeChange:this.handleRangeChange,range:Ze(n,i),errors:r,isMobile:t,dayPickerProps:qe,isTimeEnabled:i,weekStart:l,shouldOverlayDatePicker:a})}handleRangeChange=e=>{const{selectedFilterOption:t,isTimeEnabled:n}=this.props;this.props.onSelectedFilterOptionChange(((e,t,n)=>{const r=n?a:l;return{from:f(e.from,r),to:f(e.to,r),localIdentifier:t,type:"absoluteForm",name:"",visible:!0}})(e,t.localIdentifier,n))}}const We=({children:e,className:t,bubbleAlignPoints:n,...r})=>W.createElement("span",{className:ee("gd-list-item-tooltip",t),...r},W.createElement(Q.BubbleHoverTrigger,null,W.createElement("span",{className:"gd-icon-circle-question gd-list-item-tooltip-icon"}),W.createElement(Q.Bubble,{alignPoints:n},e)));var Ge=n(89734);const Ue=({className:e,children:t,...n})=>W.createElement("div",{className:ee("gd-tabs small is-condensed",e),...n},t),Ke=({selected:e,className:t,children:n,...r})=>W.createElement("div",{className:ee(e&&"is-active","gd-tab",t),...r},n),$e={"GDC.time.year":0,"GDC.time.quarter":1,"GDC.time.month":2,"GDC.time.week_us":3,"GDC.time.date":4,"GDC.time.hour":5,"GDC.time.minute":6},Ye=({availableGranularities:e,onSelectedGranularityChange:t,selectedGranularity:n})=>{return W.createElement(Ue,{className:"gd-relative-filter-form-granularity-tabs s-relative-filter-form-granularity-tabs"},(i=e,Ge(i,(e=>$e[e]))).map((e=>{const i=r[e];return W.createElement(Ke,{key:e,selected:e===n,onClick:()=>t(e),className:`s-granularity-${i}`},W.createElement(X.Z,{id:E[i].id}))})));var i};var je=n(63366),Qe=n(87462),Je=n(97326),Xe=n(94578),et=n(45697),tt=n.n(et),nt=n(9155);function rt(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function it(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function lt(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return it(n.overflowY,t)||it(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function at(e,t,n,r,i,l,a,o){return l<e&&a>t||l>e&&a<t?0:l<=e&&o<=n||a>=t&&o>=n?l-e-r:a>t&&o<n||l<e&&o>n?a-t+i:0}n(59864);var ot=0;function st(e){return"function"==typeof e?e:ct}function ct(){}function ut(e,t){if(null!==e){var n=function(e,t){var n=window,r=t.scrollMode,i=t.block,l=t.inline,a=t.boundary,o=t.skipOverflowHiddenElements,s="function"==typeof a?a:function(e){return e!==a};if(!rt(e))throw new TypeError("Invalid target");for(var c,u,d=document.scrollingElement||document.documentElement,m=[],g=e;rt(g)&&s(g);){if((g=null==(u=(c=g).parentElement)?c.getRootNode().host||null:u)===d){m.push(g);break}null!=g&&g===document.body&&lt(g)&&!lt(document.documentElement)||null!=g&&lt(g,o)&&m.push(g)}for(var p=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,E=e.getBoundingClientRect(),v=E.height,y=E.width,C=E.top,S=E.right,I=E.bottom,w=E.left,k="start"===i||"nearest"===i?C:"end"===i?I:C+v/2,F="center"===l?w+y/2:"end"===l?S:w,x=[],P=0;P<m.length;P++){var D=m[P],A=D.getBoundingClientRect(),O=A.height,N=A.width,T=A.top,M=A.right,R=A.bottom,L=A.left;if("if-needed"===r&&C>=0&&w>=0&&I<=h&&S<=p&&C>=T&&I<=R&&w>=L&&S<=M)return x;var _=getComputedStyle(D),B=parseInt(_.borderLeftWidth,10),V=parseInt(_.borderTopWidth,10),H=parseInt(_.borderRightWidth,10),Z=parseInt(_.borderBottomWidth,10),q=0,z=0,W="offsetWidth"in D?D.offsetWidth-D.clientWidth-B-H:0,G="offsetHeight"in D?D.offsetHeight-D.clientHeight-V-Z:0,U="offsetWidth"in D?0===D.offsetWidth?0:N/D.offsetWidth:0,K="offsetHeight"in D?0===D.offsetHeight?0:O/D.offsetHeight:0;if(d===D)q="start"===i?k:"end"===i?k-h:"nearest"===i?at(b,b+h,h,V,Z,b+k,b+k+v,v):k-h/2,z="start"===l?F:"center"===l?F-p/2:"end"===l?F-p:at(f,f+p,p,B,H,f+F,f+F+y,y),q=Math.max(0,q+b),z=Math.max(0,z+f);else{q="start"===i?k-T-V:"end"===i?k-R+Z+G:"nearest"===i?at(T,R,O,V,Z+G,k,k+v,v):k-(T+O/2)+G/2,z="start"===l?F-L-B:"center"===l?F-(L+N/2)+W/2:"end"===l?F-M+H+W:at(L,M,N,B,H+W,F,F+y,y);var $=D.scrollLeft,Y=D.scrollTop;k+=Y-(q=Math.max(0,Math.min(Y+q/K,D.scrollHeight-O/K+G))),F+=$-(z=Math.max(0,Math.min($+z/U,D.scrollWidth-N/U+W)))}x.push({el:D,top:q,left:z})}return x}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach((function(e){var t=e.el,n=e.top,r=e.left;t.scrollTop=n,t.scrollLeft=r}))}}function dt(e,t){return e===t||e.contains&&e.contains(t)}function mt(e,t){var n;function r(){n&&clearTimeout(n)}function i(){for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];r(),n=setTimeout((function(){n=null,e.apply(void 0,l)}),t)}return i.cancel=r,i}function gt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return t&&t.apply(void 0,[e].concat(r)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function ht(e){var t=e.isOpen,n=e.selectedItem,r=e.resultCount,i=e.previousResultCount,l=e.itemToString;return t?r?r!==i?r+" result"+(1===r?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":n?l(n):""}function ft(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}var bt=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function Et(e){void 0===e&&(e={});var t={};return bt.forEach((function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}function vt(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function yt(e,t,n){var r=n-1;("number"!=typeof t||t<0||t>=n)&&(t=e>0?-1:r+1);var i=t+e;return i<0?i=r:i>r&&(i=0),i}var Ct=mt((function(){St().textContent=""}),500);function St(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var It=Object.freeze({__proto__:null,unknown:0,mouseUp:1,itemMouseEnter:2,keyDownArrowUp:3,keyDownArrowDown:4,keyDownEscape:5,keyDownEnter:6,keyDownHome:7,keyDownEnd:8,clickItem:9,blurInput:10,changeInput:11,keyDownSpaceButton:12,clickButton:13,blurButton:14,controlledPropUpdatedSelectedItem:15,touchEnd:16}),wt=function(){var e=function(e){function t(t){var n=e.call(this,t)||this;n.id=n.props.id||"downshift-"+String(ot++),n.menuId=n.props.menuId||n.id+"-menu",n.labelId=n.props.labelId||n.id+"-label",n.inputId=n.props.inputId||n.id+"-input",n.getItemId=n.props.getItemId||function(e){return n.id+"-item-"+e},n.input=null,n.items=[],n.itemCount=null,n.previousResultCount=0,n.timeoutIds=[],n.internalSetTimeout=function(e,t){var r=setTimeout((function(){n.timeoutIds=n.timeoutIds.filter((function(e){return e!==r})),e()}),t);n.timeoutIds.push(r)},n.setItemCount=function(e){n.itemCount=e},n.unsetItemCount=function(){n.itemCount=null},n.setHighlightedIndex=function(e,t){void 0===e&&(e=n.props.defaultHighlightedIndex),void 0===t&&(t={}),t=Et(t),n.internalSetState((0,Qe.Z)({highlightedIndex:e},t))},n.clearSelection=function(e){n.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:n.props.defaultHighlightedIndex,isOpen:n.props.defaultIsOpen},e)},n.selectItem=function(e,t,r){t=Et(t),n.internalSetState((0,Qe.Z)({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,selectedItem:e,inputValue:n.props.itemToString(e)},t),r)},n.selectItemAtIndex=function(e,t,r){var i=n.items[e];null!=i&&n.selectItem(i,t,r)},n.selectHighlightedItem=function(e,t){return n.selectItemAtIndex(n.getState().highlightedIndex,e,t)},n.internalSetState=function(e,t){var r,i,l={},a="function"==typeof e;return!a&&e.hasOwnProperty("inputValue")&&n.props.onInputValueChange(e.inputValue,(0,Qe.Z)({},n.getStateAndHelpers(),{},e)),n.setState((function(t){t=n.getState(t);var o=a?e(t):e;o=n.props.stateReducer(t,o),r=o.hasOwnProperty("selectedItem");var s={},c={};return r&&o.selectedItem!==t.selectedItem&&(i=o.selectedItem),o.type=o.type||0,Object.keys(o).forEach((function(e){t[e]!==o[e]&&(l[e]=o[e]),"type"!==e&&(c[e]=o[e],n.isControlledProp(e)||(s[e]=o[e]))})),a&&o.hasOwnProperty("inputValue")&&n.props.onInputValueChange(o.inputValue,(0,Qe.Z)({},n.getStateAndHelpers(),{},o)),s}),(function(){st(t)(),Object.keys(l).length>1&&n.props.onStateChange(l,n.getStateAndHelpers()),r&&n.props.onSelect(e.selectedItem,n.getStateAndHelpers()),void 0!==i&&n.props.onChange(i,n.getStateAndHelpers()),n.props.onUserAction(l,n.getStateAndHelpers())}))},n.rootRef=function(e){return n._rootNode=e},n.getRootProps=function(e,t){var r,i=void 0===e?{}:e,l=i.refKey,a=void 0===l?"ref":l,o=i.ref,s=(0,je.Z)(i,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,u=void 0!==c&&c;n.getRootProps.called=!0,n.getRootProps.refKey=a,n.getRootProps.suppressRefError=u;var d=n.getState().isOpen;return(0,Qe.Z)(((r={})[a]=pt(o,n.rootRef),r.role="combobox",r["aria-expanded"]=d,r["aria-haspopup"]="listbox",r["aria-owns"]=d?n.menuId:null,r["aria-labelledby"]=n.labelId,r),s)},n.keyDownHandlers={ArrowDown:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var n=e.shiftKey?5:1;this.moveHighlightedIndex(n,{type:4})}else this.internalSetState({isOpen:!0,type:4},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(yt(1,t.getState().highlightedIndex,e),{type:4})}))},ArrowUp:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var n=e.shiftKey?-5:-1;this.moveHighlightedIndex(n,{type:3})}else this.internalSetState({isOpen:!0,type:3},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(yt(-1,t.getState().highlightedIndex,e),{type:4})}))},Enter:function(e){var t=this.getState(),n=t.isOpen,r=t.highlightedIndex;if(n&&null!=r){e.preventDefault();var i=this.items[r],l=this.getItemNodeFromIndex(r);if(null==i||l&&l.hasAttribute("disabled"))return;this.selectHighlightedItem({type:6})}},Escape:function(e){e.preventDefault(),this.reset({type:5,selectedItem:null,inputValue:""})}},n.buttonKeyDownHandlers=(0,Qe.Z)({},n.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:12})}}),n.inputKeyDownHandlers=(0,Qe.Z)({},n.keyDownHandlers,{Home:function(e){this.highlightFirstOrLastIndex(e,!0,{type:7})},End:function(e){this.highlightFirstOrLastIndex(e,!1,{type:8})}}),n.getToggleButtonProps=function(e){var t=void 0===e?{}:e,r=t.onClick,i=(t.onPress,t.onKeyDown),l=t.onKeyUp,a=t.onBlur,o=(0,je.Z)(t,["onClick","onPress","onKeyDown","onKeyUp","onBlur"]),s=n.getState().isOpen,c={onClick:gt(r,n.buttonHandleClick),onKeyDown:gt(i,n.buttonHandleKeyDown),onKeyUp:gt(l,n.buttonHandleKeyUp),onBlur:gt(a,n.buttonHandleBlur)},u=o.disabled?{}:c;return(0,Qe.Z)({type:"button",role:"button","aria-label":s?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},u,{},o)},n.buttonHandleKeyUp=function(e){e.preventDefault()},n.buttonHandleKeyDown=function(e){var t=vt(e);n.buttonKeyDownHandlers[t]&&n.buttonKeyDownHandlers[t].call((0,Je.Z)(n),e)},n.buttonHandleClick=function(e){e.preventDefault(),n.props.environment.document.activeElement===n.props.environment.document.body&&e.target.focus(),n.internalSetTimeout((function(){return n.toggleMenu({type:13})}))},n.buttonHandleBlur=function(e){var t=e.target;n.internalSetTimeout((function(){n.isMouseDown||null!=n.props.environment.document.activeElement&&n.props.environment.document.activeElement.id===n.inputId||n.props.environment.document.activeElement===t||n.reset({type:14})}))},n.getLabelProps=function(e){return(0,Qe.Z)({htmlFor:n.inputId,id:n.labelId},e)},n.getInputProps=function(e){var t,r=void 0===e?{}:e,i=r.onKeyDown,l=r.onBlur,a=r.onChange,o=r.onInput,s=(r.onChangeText,(0,je.Z)(r,["onKeyDown","onBlur","onChange","onInput","onChangeText"])),c={},u=n.getState(),d=u.inputValue,m=u.isOpen,g=u.highlightedIndex;return s.disabled||((t={}).onChange=gt(a,o,n.inputHandleChange),t.onKeyDown=gt(i,n.inputHandleKeyDown),t.onBlur=gt(l,n.inputHandleBlur),c=t),(0,Qe.Z)({"aria-autocomplete":"list","aria-activedescendant":m&&"number"==typeof g&&g>=0?n.getItemId(g):null,"aria-controls":m?n.menuId:null,"aria-labelledby":n.labelId,autoComplete:"off",value:d,id:n.inputId},c,{},s)},n.inputHandleKeyDown=function(e){var t=vt(e);t&&n.inputKeyDownHandlers[t]&&n.inputKeyDownHandlers[t].call((0,Je.Z)(n),e)},n.inputHandleChange=function(e){n.internalSetState({type:11,isOpen:!0,inputValue:e.target.value,highlightedIndex:n.props.defaultHighlightedIndex})},n.inputHandleBlur=function(){n.internalSetTimeout((function(){var e=n.props.environment.document&&!!n.props.environment.document.activeElement&&!!n.props.environment.document.activeElement.dataset&&n.props.environment.document.activeElement.dataset.toggle&&n._rootNode&&n._rootNode.contains(n.props.environment.document.activeElement);n.isMouseDown||e||n.reset({type:10})}))},n.menuRef=function(e){n._menuNode=e},n.getMenuProps=function(e,t){var r,i=void 0===e?{}:e,l=i.refKey,a=void 0===l?"ref":l,o=i.ref,s=(0,je.Z)(i,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,u=void 0!==c&&c;return n.getMenuProps.called=!0,n.getMenuProps.refKey=a,n.getMenuProps.suppressRefError=u,(0,Qe.Z)(((r={})[a]=pt(o,n.menuRef),r.role="listbox",r["aria-labelledby"]=s&&s["aria-label"]?null:n.labelId,r.id=n.menuId,r),s)},n.getItemProps=function(e){var t,r=void 0===e?{}:e,i=r.onMouseMove,l=r.onMouseDown,a=r.onClick,o=(r.onPress,r.index),s=r.item,c=void 0===s?void 0:s,u=(0,je.Z)(r,["onMouseMove","onMouseDown","onClick","onPress","index","item"]);void 0===o?(n.items.push(c),o=n.items.indexOf(c)):n.items[o]=c;var d=a,m=((t={onMouseMove:gt(i,(function(){o!==n.getState().highlightedIndex&&(n.setHighlightedIndex(o,{type:2}),n.avoidScrolling=!0,n.internalSetTimeout((function(){return n.avoidScrolling=!1}),250))})),onMouseDown:gt(l,(function(e){e.preventDefault()}))}).onClick=gt(d,(function(){n.selectItemAtIndex(o,{type:9})})),t),g=u.disabled?{onMouseDown:m.onMouseDown}:m;return(0,Qe.Z)({id:n.getItemId(o),role:"option","aria-selected":n.getState().highlightedIndex===o},g,{},u)},n.clearItems=function(){n.items=[]},n.reset=function(e,t){void 0===e&&(e={}),e=Et(e),n.internalSetState((function(t){var r=t.selectedItem;return(0,Qe.Z)({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,inputValue:n.props.itemToString(r)},e)}),t)},n.toggleMenu=function(e,t){void 0===e&&(e={}),e=Et(e),n.internalSetState((function(t){var r=t.isOpen;return(0,Qe.Z)({isOpen:!r},r&&{highlightedIndex:n.props.defaultHighlightedIndex},{},e)}),(function(){var r=n.getState(),i=r.isOpen,l=r.highlightedIndex;i&&n.getItemCount()>0&&"number"==typeof l&&n.setHighlightedIndex(l,e),st(t)()}))},n.openMenu=function(e){n.internalSetState({isOpen:!0},e)},n.closeMenu=function(e){n.internalSetState({isOpen:!1},e)},n.updateStatus=mt((function(){var e=n.getState(),t=n.items[e.highlightedIndex],r=n.getItemCount(),i=n.props.getA11yStatusMessage((0,Qe.Z)({itemToString:n.props.itemToString,previousResultCount:n.previousResultCount,resultCount:r,highlightedItem:t},e));n.previousResultCount=r,function(e,t){var n=St(t);e&&(n.textContent=e,Ct())}(i,n.props.environment.document)}),200);var r=n.props,i=r.defaultHighlightedIndex,l=r.initialHighlightedIndex,a=void 0===l?i:l,o=r.defaultIsOpen,s=r.initialIsOpen,c=void 0===s?o:s,u=r.initialInputValue,d=void 0===u?"":u,m=r.initialSelectedItem,g=void 0===m?null:m,p=n.getState({highlightedIndex:a,isOpen:c,inputValue:d,selectedItem:g});return null!=p.selectedItem&&void 0===n.props.initialInputValue&&(p.inputValue=n.props.itemToString(p.selectedItem)),n.state=p,n}(0,Xe.Z)(t,e);var n=t.prototype;return n.internalClearTimeouts=function(){this.timeoutIds.forEach((function(e){clearTimeout(e)})),this.timeoutIds=[]},n.getState=function(e){var t=this;return void 0===e&&(e=this.state),Object.keys(e).reduce((function(n,r){return n[r]=t.isControlledProp(r)?t.props[r]:e[r],n}),{})},n.isControlledProp=function(e){return void 0!==this.props[e]},n.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},n.getItemNodeFromIndex=function(e){return this.props.environment.document.getElementById(this.getItemId(e))},n.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},n.moveHighlightedIndex=function(e,t){var n=this.getItemCount();if(n>0){var r=yt(e,this.getState().highlightedIndex,n);this.setHighlightedIndex(r,t)}},n.highlightFirstOrLastIndex=function(e,t,n){var r=this.getItemCount()-1;r<0||!this.getState().isOpen||(e.preventDefault(),this.setHighlightedIndex(t?0:r,n))},n.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,n=e.inputValue,r=e.selectedItem,i=e.isOpen,l=this.props.itemToString,a=this.id,o=this.getRootProps,s=this.getToggleButtonProps,c=this.getLabelProps,u=this.getMenuProps,d=this.getInputProps,m=this.getItemProps,g=this.openMenu,p=this.closeMenu,h=this.toggleMenu,f=this.selectItem,b=this.selectItemAtIndex,E=this.selectHighlightedItem,v=this.setHighlightedIndex,y=this.clearSelection,C=this.clearItems;return{getRootProps:o,getToggleButtonProps:s,getLabelProps:c,getMenuProps:u,getInputProps:d,getItemProps:m,reset:this.reset,openMenu:g,closeMenu:p,toggleMenu:h,selectItem:f,selectItemAtIndex:b,selectHighlightedItem:E,setHighlightedIndex:v,clearSelection:y,clearItems:C,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:l,id:a,highlightedIndex:t,inputValue:n,isOpen:i,selectedItem:r}},n.componentDidMount=function(){var e=this,t=function(t,n){void 0===n&&(n=!0);var r=e.props.environment.document;return[e._rootNode,e._menuNode].some((function(e){return e&&(dt(e,t)||n&&dt(e,r.activeElement))}))},n=function(){e.isMouseDown=!0},r=function(n){e.isMouseDown=!1,!t(n.target)&&e.getState().isOpen&&e.reset({type:1},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},i=function(){e.isTouchMove=!1},l=function(){e.isTouchMove=!0},a=function(n){var r=t(n.target,!1);e.isTouchMove||r||!e.getState().isOpen||e.reset({type:16},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},o=this.props.environment;o.addEventListener("mousedown",n),o.addEventListener("mouseup",r),o.addEventListener("touchstart",i),o.addEventListener("touchmove",l),o.addEventListener("touchend",a),this.cleanup=function(){e.internalClearTimeouts(),e.updateStatus.cancel(),o.removeEventListener("mousedown",n),o.removeEventListener("mouseup",r),o.removeEventListener("touchstart",i),o.removeEventListener("touchmove",l),o.removeEventListener("touchend",a)}},n.shouldScroll=function(e,t){var n=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,r=(void 0===t.highlightedIndex?e:t).highlightedIndex;return n&&this.getState().isOpen&&!e.isOpen||n!==r},n.componentDidUpdate=function(e,t){this.isControlledProp("selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:15,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},n.componentWillUnmount=function(){this.cleanup()},n.render=function(){var e=ft(this.props.children,ct);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var t=ft(e(this.getStateAndHelpers()));return t?this.getRootProps.called||this.props.suppressRefError?t:function(e){return"string"==typeof e.type}(t)?(0,nt.cloneElement)(t,this.getRootProps(function(e){return e.props}(t))):void 0:null},t}(nt.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:ht,itemToString:function(e){return null==e?"":String(e)},onStateChange:ct,onInputValueChange:ct,onUserAction:ct,onChange:ct,onSelect:ct,onOuterClick:ct,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?{}:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:ut},e.stateChangeTypes=It,e}();tt().array.isRequired,tt().func,tt().func,tt().func,tt().bool,tt().number,tt().number,tt().number,tt().bool,tt().bool,tt().bool,tt().any,tt().any,tt().any,tt().string,tt().string,tt().string,tt().func,tt().string,tt().func,tt().func,tt().func,tt().func,tt().func,tt().shape({addEventListener:tt().func,removeEventListener:tt().func,document:tt().shape({getElementById:tt().func,activeElement:tt().any,body:tt().any})}),"undefined"==typeof window||window;const kt=wt,Ft=e=>"option"===e?.type&&e.label?e.label:"",xt=e=>e.filter((e=>"option"===e.type));var Pt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Dt(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(i=t[n])||Pt(r)&&Pt(i)))return!1;var r,i;return!0}const At=function(e,t){var n;void 0===t&&(t=Dt);var r,i=[],l=!1;return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return l&&n===this&&t(a,i)||(r=e.apply(this,a),l=!0,n=this,i=a),r}};var Ot=n(31049),Nt="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Tt(e){cancelAnimationFrame(e.id)}var Mt=-1;function Rt(e){if(void 0===e&&(e=!1),-1===Mt||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),Mt=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Mt}var Lt=null;function _t(e){if(void 0===e&&(e=!1),null===Lt||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?Lt="positive-descending":(t.scrollLeft=1,Lt=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Lt}return Lt}var Bt=function(e,t){return e};function Vt(e){var t,n=e.getItemOffset,r=e.getEstimatedTotalSize,i=e.getItemSize,l=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,o=e.getStopIndexForStartIndex,s=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return t=function(e){function t(t){var r;return(r=e.call(this,t)||this)._instanceProps=s(r.props,(0,Je.Z)(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:(0,Je.Z)(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=At((function(e,t,n,i){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:i})})),r._callOnScroll=void 0,r._callOnScroll=At((function(e,t,n){return r.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),r._getItemStyle=void 0,r._getItemStyle=function(e){var t,l=r.props,a=l.direction,o=l.itemSize,s=l.layout,u=r._getItemStyleCache(c&&o,c&&s,c&&a);if(u.hasOwnProperty(e))t=u[e];else{var d=n(r.props,e,r._instanceProps),m=i(r.props,e,r._instanceProps),g="horizontal"===a||"horizontal"===s,p="rtl"===a,h=g?d:0;u[e]=t={position:"absolute",left:p?void 0:h,right:p?h:void 0,top:g?0:d,height:g?"100%":m,width:g?m:"100%"}}return t},r._getItemStyleCache=void 0,r._getItemStyleCache=At((function(e,t,n){return{}})),r._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,i=t.scrollLeft,l=t.scrollWidth;r.setState((function(e){if(e.scrollOffset===i)return null;var t=r.props.direction,a=i;if("rtl"===t)switch(_t()){case"negative":a=-i;break;case"positive-descending":a=l-n-i}return a=Math.max(0,Math.min(a,l-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,i=t.scrollHeight,l=t.scrollTop;r.setState((function(e){if(e.scrollOffset===l)return null;var t=Math.max(0,Math.min(l,i-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){var e,t,n,i;null!==r._resetIsScrollingTimeoutId&&Tt(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=(e=r._resetIsScrolling,t=150,n=Nt(),i={id:requestAnimationFrame((function r(){Nt()-n>=t?e.call(null):i.id=requestAnimationFrame(r)}))})},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1,null)}))},r}(0,Xe.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return Ht(e,t),u(e),null};var d=t.prototype;return d.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},d.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props,r=n.itemCount,i=n.layout,a=this.state.scrollOffset;e=Math.max(0,Math.min(e,r-1));var o=0;if(this._outerRef){var s=this._outerRef;o="vertical"===i?s.scrollWidth>s.clientWidth?Rt():0:s.scrollHeight>s.clientHeight?Rt():0}this.scrollTo(l(this.props,e,t,a,this._instanceProps,o))},d.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===r?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()},d.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,r=this.state,i=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var l=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(_t()){case"negative":l.scrollLeft=-i;break;case"positive-ascending":l.scrollLeft=i;break;default:var a=l.clientWidth,o=l.scrollWidth;l.scrollLeft=o-a-i}else l.scrollLeft=i;else l.scrollTop=i}this._callPropsCallbacks()},d.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Tt(this._resetIsScrollingTimeoutId)},d.render=function(){var e=this.props,t=e.children,n=e.className,i=e.direction,l=e.height,a=e.innerRef,o=e.innerElementType,s=e.innerTagName,c=e.itemCount,u=e.itemData,d=e.itemKey,m=void 0===d?Bt:d,g=e.layout,p=e.outerElementType,h=e.outerTagName,f=e.style,b=e.useIsScrolling,E=e.width,v=this.state.isScrolling,y="horizontal"===i||"horizontal"===g,C=y?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),I=S[0],w=S[1],k=[];if(c>0)for(var F=I;F<=w;F++)k.push((0,Ot.createElement)(t,{data:u,key:m(F,u),index:F,isScrolling:b?v:void 0,style:this._getItemStyle(F)}));var x=r(this.props,this._instanceProps);return(0,Ot.createElement)(p||h||"div",{className:n,onScroll:C,ref:this._outerRefSetter,style:(0,Qe.Z)({position:"relative",height:l,width:E,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},f)},(0,Ot.createElement)(o||s||"div",{children:k,ref:a,style:{height:y?"100%":x,pointerEvents:v?"none":void 0,width:y?x:"100%"}}))},d._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],r=e[2],i=e[3];this._callOnItemsRendered(t,n,r,i)}if("function"==typeof this.props.onScroll){var l=this.state,a=l.scrollDirection,o=l.scrollOffset,s=l.scrollUpdateWasRequested;this._callOnScroll(a,o,s)}},d._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,i=r.isScrolling,l=r.scrollDirection,s=r.scrollOffset;if(0===t)return[0,0,0,0];var c=a(this.props,s,this._instanceProps),u=o(this.props,c,s,this._instanceProps),d=i&&"backward"!==l?1:Math.max(1,n),m=i&&"forward"!==l?1:Math.max(1,n);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,u+m)),c,u]},t}(Ot.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Ht=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Zt=function(e,t,n){var r=e.itemSize,i=n.itemMetadataMap,l=n.lastMeasuredIndex;if(t>l){var a=0;if(l>=0){var o=i[l];a=o.offset+o.size}for(var s=l+1;s<=t;s++){var c=r(s);i[s]={offset:a,size:c},a+=c}n.lastMeasuredIndex=t}return i[t]},qt=function(e,t,n,r,i){for(;r<=n;){var l=r+Math.floor((n-r)/2),a=Zt(e,l,t).offset;if(a===i)return l;a<i?r=l+1:a>i&&(n=l-1)}return r>0?r-1:0},zt=function(e,t){var n=e.itemCount,r=t.itemMetadataMap,i=t.estimatedItemSize,l=t.lastMeasuredIndex,a=0;if(l>=n&&(l=n-1),l>=0){var o=r[l];a=o.offset+o.size}return a+(n-l-1)*i},Wt=Vt({getItemOffset:function(e,t,n){return Zt(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:zt,getOffsetForIndexAndAlignment:function(e,t,n,r,i,l){var a=e.direction,o=e.height,s=e.layout,c=e.width,u="horizontal"===a||"horizontal"===s?c:o,d=Zt(e,t,i),m=zt(e,i),g=Math.max(0,Math.min(m-u,d.offset)),p=Math.max(0,d.offset-u+d.size+l);switch("smart"===n&&(n=r>=p-u&&r<=g+u?"auto":"center"),n){case"start":return g;case"end":return p;case"center":return Math.round(p+(g-p)/2);default:return r>=p&&r<=g?r:r<p?p:g}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var r=t.itemMetadataMap,i=t.lastMeasuredIndex;return(i>0?r[i].offset:0)>=n?qt(e,t,i,0,n):function(e,t,n,r){for(var i=e.itemCount,l=1;n<i&&Zt(e,n,t).offset<r;)n+=l,l*=2;return qt(e,t,Math.min(n,i-1),Math.floor(n/2),r)}(e,t,Math.max(0,i),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,r){for(var i=e.direction,l=e.height,a=e.itemCount,o=e.layout,s=e.width,c="horizontal"===i||"horizontal"===o?s:l,u=Zt(e,t,r),d=n+c,m=u.offset+u.size,g=t;g<a-1&&m<d;)g++,m+=Zt(e,g,r).size;return g},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,r){void 0===r&&(r=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),r&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),Gt=n(96026);const Ut=({isFocused:e,isSelected:t,className:n,children:r,...i})=>W.createElement("div",{className:ee("gd-list-item","gd-select-option",t&&"gd-select-option-is-selected",e&&"gd-select-option-is-focused s-select-item-focused",n),...i},r),Kt=({children:e,className:t,...n})=>W.createElement("div",{className:ee("gd-select-heading gd-list-item gd-list-item-header",t),...n},e),$t=({className:e,...t})=>W.createElement("hr",{className:ee("gd-separator-generic",e),...t}),Yt=({className:e,...t})=>W.createElement("div",{className:ee("gd-select-separator",e),...t},W.createElement($t,null)),jt={option:32,heading:22,error:22,separator:1},Qt=e=>t=>{const n=e[t].type;return jt[n]},Jt=e=>Math.floor(e.length/2);class Xt extends W.Component{static defaultProps={selectedItem:null,visibleItemsRange:3};listRef=W.createRef();render(){const{items:e,selectedItem:t,highlightedIndex:n,getItemProps:r,getMenuProps:i,className:l,optionClassName:a,visibleItemsRange:o}=this.props,s=(({items:e,selectedItem:t,highlightedIndex:n,getItemProps:r,optionClassName:i})=>function({index:l,style:a}){const o=xt(e),s=e[l];return"option"===s.type?W.createElement(Ut,{...r({key:`${s.type}-${s.value}`,item:s,index:o.indexOf(s),isSelected:!(!t||!s)&&t.value===s.value,className:i}),isFocused:!(!o[n]||!s)&&o[n].value===s.value,style:a},s.label):"heading"===s.type||"error"===s.type?W.createElement(Kt,{key:`${s.type}-${s.label}`,style:a},s.label):"separator"===s.type?W.createElement(Yt,{key:`${s.type}-${l}`,style:a}):null})({items:e,selectedItem:t,highlightedIndex:n,getItemProps:r,optionClassName:a}),c=Jt(xt(e)),u=Gt(Math.max(c-o,0),Math.min(c+o+1,e.length)).reduce(((t,n)=>t+Qt(e)(n)),0);return W.createElement("div",{...i({className:ee("gd-select-menu-wrapper",l)})},W.createElement("div",{className:"gd-select-menu s-select-menu"},W.createElement(Wt,{className:"List",ref:this.listRef,itemCount:e.length,itemSize:Qt(e),height:u,width:"100%",overscanCount:10,estimatedItemSize:jt.option,style:1===e.length?{overflow:"hidden"}:void 0},s)))}scrollToIndex=(e=this.props.highlightedIndex)=>{if(this.listRef.current){const{items:t}=this.props,n=xt(t)[null!==e?e:Jt(xt(t))],r=t.indexOf(n);this.listRef.current.scrollToItem(r,"center")}};scrollToTop=()=>{this.listRef.current&&this.listRef.current.scrollTo(0)};componentDidUpdate=e=>{const{highlightedIndex:t,items:n,setHighlightedIndex:r,inputValue:i}=this.props,l=xt(e.items).length-1,a=xt(n).length-1,o=0===e.highlightedIndex&&t===a,s=e.highlightedIndex===l&&0===t,c=""===i.trim(),u=""!==e.inputValue.trim()&&c,d=e.inputValue.trim()!==i.trim(),m=Jt(xt(n));u?r(m):d&&r(0);const g=1===this.props.items.length;u?this.scrollToIndex(m):o||s?this.scrollToIndex():g&&this.scrollToTop()};componentDidMount(){if(this.props.inputValue)this.scrollToIndex();else{const e=Jt(xt(this.props.items));this.props.setHighlightedIndex(e),this.scrollToIndex(e)}}}const en="GDC.time.date",tn={inputCategory:"Empty"},nn={inputCategory:"TooBig"},rn={"GDC.time.minute":120,"GDC.time.hour":48,[en]:365,"GDC.time.week_us":104,"GDC.time.month":60,"GDC.time.quarter":20,"GDC.time.year":20},ln=(e,t,n)=>{const i=r[t],l=e<0?"history":0===e?"today":"future";return{type:"option",value:e,label:n.formatMessage(E[`${i}_${l}`],{offset:e,n:Math.abs(e)})}},an=(e,t,n)=>e.map((e=>ln(e,t,n))),on=(e,t,n,r)=>{const i=e.toLowerCase(),l=((e,t,n)=>{const r=[-1,0,1],i=Math.abs(e),l=void 0!==e&&i>1?[-i,...r,i]:r;return an(l,t,n)})(t,n,r).filter((e=>e.label.toLowerCase().includes(i)));return l.length>0?l:(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.noMatch"})}])(r)},sn=(e,t)=>xt(e).find((e=>e.value===t));function cn(e="",t=en,n){const r=(e=>e?.trim())(e),i=(e=>{if(!e)return tn;const t=/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e);if(t){const r=t[1],i=Number.parseInt(r,10);return n=i,Math.abs(n)<=99999?{offset:i,isOnlyNumber:r===e,inputCategory:"Numeric"}:nn}var n;return{inputCategory:"Textual",trimmedValue:e}})(r);switch(i.inputCategory){case"Empty":return((e,t)=>{const n=rn[e],r=an(Gt(-n,0),e,t),i=an(Gt(1,n+1),e,t);return[...r,{type:"separator"},ln(0,e,t),{type:"separator"},...i]})(t,n);case"TooBig":return(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.tooBig"},{limit:99999})}])(n);case"Textual":return on(i.trimmedValue,void 0,t,n);case"Numeric":{const{offset:e,isOnlyNumber:l}=i;return l?((e,t,n)=>an(e>0?[e,-e]:[e],t,n))(e,t,n):on(r,e,t,n)}}}const un=(0,j.b)(kt);class dn extends W.Component{constructor(e){super(e);const t=void 0!==e.value?sn(e.getItems(e.value.toString()),e.value):null;this.state={inputValue:t?Ft(t):e.value?e.value.toString():""}}inputRef=W.createRef();static defaultProps={onChange:K,initialIsOpen:!1,visibleItemsRange:3};onChange=e=>{e&&this.props.onChange(e.value)};componentDidUpdate=e=>{if(e.value!==this.props.value){const e=this.props.getItems(this.props.value.toString()),t=sn(e,this.props.value)?.label||this.props.value.toString();this.setState({inputValue:t})}};focus=()=>{this.inputRef.current&&this.inputRef.current.focus()};blur=()=>{this.inputRef.current&&this.inputRef.current.blur()};onInputValueChanged=e=>{e!==this.state.inputValue&&this.setState({inputValue:e})};render(){const{initialIsOpen:e,placeholder:t,getItems:n,value:r=null,className:i,style:l,optionClassName:a,visibleItemsRange:o}=this.props,s=n(this.state.inputValue),c=null!==r?n(r.toString()):[],u=null!==r&&sn(c,r)||null,d=xt(s),m=""!==this.state.inputValue.trim();return W.createElement(un,{onChange:this.onChange,itemToString:Ft,initialIsOpen:e,selectedItem:u,itemCount:d.length,inputValue:this.state.inputValue,defaultHighlightedIndex:u||m?0:Jt(d)},(({getInputProps:e,getMenuProps:n,getItemProps:r,isOpen:c,openMenu:m,closeMenu:g,inputValue:p,highlightedIndex:h,setHighlightedIndex:f,selectItem:b})=>{const E=h>d.length-1?0:h,v={items:s,selectedItem:u,highlightedIndex:E,getItemProps:r,getMenuProps:n,className:"gd-dynamic-select-menu",optionClassName:a,inputValue:p,setHighlightedIndex:f,visibleItemsRange:o};return W.createElement("div",{className:ee("gd-dynamic-select",i),style:l},W.createElement("div",{className:"gd-dynamic-select-input-wrapper"},W.createElement("input",{type:"text",className:"s-relative-range-input gd-input-field",...e({ref:this.inputRef,placeholder:u?u.label:t,value:p,onFocus:()=>{this.setState({inputValue:""}),m()},onChange:e=>this.onChangeHandler(e,b),onBlur:()=>this.onBlurHandler(u,b,g)})})),c&&s.length>0?W.createElement(Xt,{...v}):null)}))}onBlurHandler=(e,t,n)=>{const{customValueValidator:r,value:i}=this.props;r?(n(),this.onInputValueChanged(i?.toString())):(t(e),this.onInputValueChanged(e?e.label:""))};onChangeHandler=(e,t)=>{const{customValueValidator:n}=this.props,r=e.target.value;n?.(r)&&t({type:"option",value:Number(r),label:r}),this.onInputValueChanged(r)}}class mn extends W.Component{toFieldRef=W.createRef();render(){const{handleFromChange:e,handleToChange:t}=this,{selectedFilterOption:n,intl:r,isMobile:i}=this.props,l={visibleItemsRange:i?5:3,optionClassName:"s-relative-date-filter-option s-do-not-close-dropdown-on-click",getItems:e=>{const t=cn(e,n.granularity,r);return i?t.filter((e=>"separator"!==e.type)):t}};return W.createElement("div",{className:"gd-relative-range-picker s-relative-range-picker"},W.createElement(dn,{value:n.from,onChange:e,placeholder:r.formatMessage({id:"filters.from"}),className:ee("gd-relative-range-picker-picker","s-relative-range-picker-from",i&&"gd-relative-range-picker-picker-mobile"),...l}),W.createElement("span",{className:"gd-relative-range-picker-dash"},"–"),W.createElement(dn,{value:n.to,onChange:t,placeholder:r.formatMessage({id:"filters.to"}),className:ee("gd-relative-range-picker-picker","s-relative-range-picker-to",i&&"gd-relative-range-picker-picker-mobile"),...l,ref:this.toFieldRef}))}isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0;focusToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout((()=>{this.toFieldRef.current?.focus()}),0):this.toFieldRef.current.focus())};blurToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout((()=>{this.toFieldRef.current?.blur()}),0):this.toFieldRef.current.blur())};handleFromChange=e=>{this.props.onSelectedFilterOptionChange({...this.props.selectedFilterOption,from:e}),void 0!==e&&this.focusToField()};handleToChange=e=>{this.props.onSelectedFilterOptionChange({...this.props.selectedFilterOption,to:e}),this.blurToField()}}const gn=(0,ie.ZP)(mn),pn=({selectedFilterOption:e,availableGranularities:t,onSelectedFilterOptionChange:n,isMobile:r})=>W.createElement(W.Fragment,null,W.createElement(Ye,{availableGranularities:t,selectedGranularity:e.granularity,onSelectedGranularityChange:t=>n({...e,...e.granularity!==t&&{from:void 0,to:void 0},granularity:t})}),W.createElement(gn,{selectedFilterOption:e,onSelectedFilterOptionChange:n,key:e.granularity,isMobile:r}));var hn=n(21804);const fn=({children:e,className:t,...n})=>W.createElement("div",{className:ee("gd-list-item gd-list-item-header gd-filter-list-heading",t),...n},e),bn=({granularity:e})=>{const t=E[e]||null;return t?W.createElement(X.Z,{id:t.id}):null},En=["GDC.time.year","GDC.time.quarter","GDC.time.month","GDC.time.week_us","GDC.time.date","GDC.time.hour","GDC.time.minute"],vn=({dateFormat:e,filterOption:t,selectedFilterOption:n,onSelectedFilterOptionChange:r,className:i})=>{const l=En.filter((e=>Boolean(t?.[e]?.length>0))).map((e=>({granularity:e,items:t[e]})));return W.createElement(W.Fragment,null,l.map((t=>W.createElement(W.Fragment,{key:t.granularity},W.createElement(fn,{className:i},W.createElement(bn,{granularity:t.granularity})),t.items.map((t=>W.createElement(ce,{key:t.localIdentifier,isSelected:t.localIdentifier===n.localIdentifier,onClick:()=>r(t),className:ee(`s-relative-preset-${hn(t.localIdentifier)}`,i)},W.createElement(le,{filter:t,dateFormat:e}))))))))},yn=()=>W.createElement("div",{className:"s-extended-date-filter-edit-mode-message gd-extended-date-filter-edit-mode-message"},W.createElement("div",{className:"gd-extended-date-filter-edit-mode-message-text"},W.createElement(X.Z,{id:"dateFilterDropdown.setDefault",values:{nbsp:W.createElement(W.Fragment,null," ")}})),W.createElement("hr",{className:"gd-separator-generic"})),Cn=({children:e,changeRoute:t,...n})=>W.createElement("button",{className:"gd-extended-date-filter-header s-do-not-close-dropdown-on-click",onClick:e=>{e.preventDefault(),t(null)},...n},W.createElement("span",{className:"gd-icon-navigateleft"})," ",e),Sn=(0,ie.ZP)((e=>W.createElement(Q.Button,{type:"button",value:e.intl.formatMessage({id:e.messageId}),className:e.className,disabled:e.disabled,onClick:e.onClick}))),In=[{align:"bc tc",offset:{x:-1,y:5}}],wn=e=>{const{onConfiguration:t}=e;return W.createElement("div",{className:"gd-date-filter-configuration-button s-gd-date-filter-configuration-button"},W.createElement(Q.BubbleHoverTrigger,null,W.createElement(Q.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:t}),W.createElement(Q.Bubble,{className:"bubble-primary",alignPoints:In},W.createElement(X.Z,{id:"dateFilterDropdown.configuration"}))))},kn=({filterOptions:e,dateFormat:t,selectedFilterOption:n,onSelectedFilterOptionChange:r,className:i})=>W.createElement(W.Fragment,null,e.map((e=>W.createElement(ce,{key:e.localIdentifier,isSelected:e.localIdentifier===n.localIdentifier,onClick:()=>r(e),className:ee(`s-absolute-preset-${hn(e.localIdentifier)}`,i)},W.createElement(le,{filter:e,dateFormat:t}))))),Fn="gd-date-filter-item-mobile";class xn extends W.Component{state={route:null};changeRoute=(e=null)=>{this.setState({route:e})};componentDidMount(){this.props.isMobile&&((0,g.isAbsoluteDateFilterForm)(this.props.selectedFilterOption)?this.changeRoute("absoluteForm"):(0,g.isRelativeDateFilterForm)(this.props.selectedFilterOption)&&this.changeRoute("relativeForm"))}render(){const{isExcludeCurrentPeriodEnabled:e,isMobile:t,onApplyClick:n,onCancelClick:r,closeDropdown:i,onConfigurationClick:l,dateFilterButton:a,errors:o,isConfigurationEnabled:s}=this.props,{route:c}=this.state,u=!t||e;return W.createElement("div",{className:"gd-extended-date-filter-container"},W.createElement("div",{className:ee("gd-extended-date-filter-body","s-extended-date-filters-body",t&&"gd-extended-date-filter-body-mobile")},null===c&&t?W.createElement("div",{onClick:()=>{r(),i()}},a):null,this.renderDateFilterBody(),u?this.renderExcludeCurrent():null,W.createElement("div",{className:ee("gd-extended-date-filter-actions")},W.createElement("div",{className:"gd-extended-date-filter-actions-left-content"},s?W.createElement(wn,{onConfiguration:l}):null),W.createElement("div",{className:"gd-extended-date-filter-actions-buttons"},W.createElement(Sn,{messageId:"cancel",className:"gd-button-secondary gd-button-small s-date-filter-cancel",onClick:()=>{r(),i()}}),W.createElement(Sn,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!I(o),onClick:()=>{n(),i()}})))))}renderDateFilterBody=()=>{const{isExcludeCurrentPeriodEnabled:e,isMobile:t,isEditMode:n,selectedFilterOption:r,showHeaderMessage:i=!0}=this.props,l=!t||e,a=this.calculateHeight(l);let o={},s={};return a&&(o={display:"block",height:`${a}px`},s={minHeight:`${a}px`}),W.createElement(W.Fragment,null,W.createElement("div",{className:ee("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,g.isRelativeDateFilterForm)(r)}),style:o},n&&!t&&i?W.createElement(yn,null):null,t?this.renderMobileContent():W.createElement(ge,{className:"gd-extended-date-filter-body-scrollable",style:s},this.renderDefaultContent())))};renderAllTime=()=>{const{filterOptions:e,isMobile:t,selectedFilterOption:n,onSelectedFilterOptionChange:r}=this.props;return e.allTime?W.createElement(pe,{filterOption:e.allTime,selectedFilterOption:n,onSelectedFilterOptionChange:r,className:t?Fn:void 0}):null};renderAbsoluteForm=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:r,isTimeForAbsoluteRangeEnabled:i,isMobile:l,errors:a,weekStart:o}=this.props;if(!t.absoluteForm)return null;const{route:s}=this.state,c=t.absoluteForm.localIdentifier===n.localIdentifier,u="absoluteForm"===s;return W.createElement(W.Fragment,null,l&&u?null:W.createElement(ce,{isSelected:c,onClick:()=>{this.changeRoute("absoluteForm"),(0,g.isAbsoluteDateFilterForm)(n)||r(t.absoluteForm)},className:ee("s-absolute-form","s-do-not-close-dropdown-on-click",l&&Fn)},t.absoluteForm.name?t.absoluteForm.name:W.createElement(X.Z,{id:"filters.staticPeriod"})),!c||l&&!u?null:W.createElement(he,{isMobile:l},W.createElement(ze,{dateFormat:e,errors:a?.absoluteForm||void 0,onSelectedFilterOptionChange:r,selectedFilterOption:n,isMobile:l,isTimeEnabled:i,weekStart:o})))};renderRelativeForm=()=>{const{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:n,availableGranularities:r,isMobile:i}=this.props;if(!e.relativeForm)return null;const{route:l}=this.state,a=e.relativeForm.localIdentifier===t.localIdentifier,o="relativeForm"===l;return W.createElement(W.Fragment,null,i&&o?null:W.createElement(ce,{isSelected:a,onClick:()=>{this.changeRoute("relativeForm"),(0,g.isRelativeDateFilterForm)(t)||n(e.relativeForm)},className:ee("s-relative-form","s-do-not-close-dropdown-on-click",i&&Fn)},e.relativeForm.name?e.relativeForm.name:W.createElement(X.Z,{id:"filters.floatingRange"}),i?null:W.createElement(We,{bubbleAlignPoints:[{align:"cr cl"}]},W.createElement(X.Z,{id:"filters.floatingRange.tooltip"}))),!a||i&&!o?null:W.createElement(he,{isMobile:i},W.createElement(pn,{onSelectedFilterOptionChange:e=>{n(e)},selectedFilterOption:t,availableGranularities:r,isMobile:i})))};renderAbsolutePreset=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:r,isMobile:i}=this.props;return t.absolutePreset&&t.absolutePreset.length>0?W.createElement(kn,{dateFormat:e,filterOptions:t.absolutePreset,selectedFilterOption:n,onSelectedFilterOptionChange:r,className:i?Fn:void 0}):null};renderRelativePreset=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:r,isMobile:i}=this.props;return t.relativePreset?W.createElement(vn,{dateFormat:e,filterOption:t.relativePreset,selectedFilterOption:n,onSelectedFilterOptionChange:r,className:i?Fn:void 0}):null};renderExcludeCurrent=()=>{const{selectedFilterOption:e,onExcludeCurrentPeriodChange:t,excludeCurrentPeriod:n,isExcludeCurrentPeriodEnabled:r}=this.props;return W.createElement(me,{value:n,onChange:t,disabled:!r,granularity:(i=e,w(i)||(0,g.isRelativeDateFilterPreset)(i)?i.granularity:void 0)});var i};renderMobileContent(){const{route:e}=this.state;return"absoluteForm"===e?W.createElement(W.Fragment,null,W.createElement(Cn,{changeRoute:this.changeRoute},W.createElement(X.Z,{id:"filters.staticPeriod"})),this.renderAbsoluteForm()):"relativeForm"===e?I(this.props.availableGranularities)?null:W.createElement(W.Fragment,null,W.createElement(Cn,{changeRoute:this.changeRoute},W.createElement(X.Z,{id:"filters.floatingRange"})),this.renderRelativeForm()):this.renderDefaultContent()}renderDefaultContent(){return W.createElement(W.Fragment,null,this.renderAllTime(),this.renderAbsoluteForm(),I(this.props.availableGranularities)?null:this.renderRelativeForm(),this.renderAbsolutePreset(),this.renderRelativePreset())}calculateHeight=e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}}}const Pn=(0,j.b)(Y),Dn=(e,t=!1)=>t?e+s:e,An=({originalSelectedFilterOption:e,originalExcludeCurrentPeriod:t,onDropdownOpenChanged:n,customFilterName:r,dateFormat:i,disabled:l,openOnInit:a,locale:o,filterOptions:s,isTimeForAbsoluteRangeEnabled:c,weekStart:u,customIcon:m,FilterConfigurationComponent:g,onApplyClick:p,onCancelClick:h,showDropDownHeaderMessage:f,...b})=>{const[E,v]=(0,W.useState)(!1),y=(e=>{try{return T(new Date,e),e}catch{return console.warn(`Unsupported date format ${e}, the default format ${d} is used instead.`),d}})(i),S=(0,W.useMemo)((()=>$(A,N)(s)),[s]),I=()=>{v(!1)},w=()=>{v(!0)},k=()=>{I(),h()},F=e=>{n(e),e||I()};return W.createElement(R.IntlWrapper,{locale:o||"en-US"},W.createElement(Pn,{query:J},(n=>{const i=(i=!1)=>W.createElement(oe,{disabled:l,isMobile:n,isOpen:i,dateFilterOption:C(e,t),dateFormat:Dn(y,c),customFilterName:r,customIcon:m});return W.createElement(Q.Dropdown,{openOnInit:a,closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-50}}],onOpenStateChanged:F,renderButton:({isOpen:e,toggleDropdown:t})=>W.createElement("span",{onClick:l?K:t},i(e)),ignoreClicksOnByClass:[".s-do-not-close-dropdown-on-click",".rdp-day"],renderBody:({closeDropdown:e})=>E?W.createElement(g,{onSaveButtonClick:I,onCancelButtonClick:k}):W.createElement(xn,{...b,showHeaderMessage:f,onApplyClick:p,onCancelClick:h,filterOptions:S,isMobile:n,closeDropdown:e,dateFilterButton:i(),dateFormat:y,isTimeForAbsoluteRangeEnabled:c,weekStart:u,isConfigurationEnabled:void 0!==g,onConfigurationClick:w})})})))};class On extends W.PureComponent{static defaultProps={dateFormat:d,isEditMode:!1,isTimeForAbsoluteRangeEnabled:!1,locale:"en-US",onCancel:K,onOpen:K,onClose:K,weekStart:"Sunday"};static getDerivedStateFromProps(e,t){return G(e.selectedFilterOption,t.initSelectedFilterOption)&&e.excludeCurrentPeriod===t.initExcludeCurrentPeriod?null:On.getStateFromProps(e)}static getStateFromProps(e){const t=S(e.selectedFilterOption);return{initSelectedFilterOption:e.selectedFilterOption,selectedFilterOption:e.selectedFilterOption,initExcludeCurrentPeriod:e.excludeCurrentPeriod,excludeCurrentPeriod:!!t&&e.excludeCurrentPeriod,isTimeForAbsoluteRangeEnabled:e.isTimeForAbsoluteRangeEnabled,isExcludeCurrentPeriodEnabled:t}}static getStateFromSelectedOption=(e,t)=>{const n=S(e);return{selectedFilterOption:e,excludeCurrentPeriod:!!n&&t,isExcludeCurrentPeriodEnabled:n}};static checkInitialFilterOption=e=>{(0,g.isAbsoluteDateFilterForm)(e)&&(U(e.from)||U(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from absoluteForm filter option must be specified."),w(e)&&(U(e.from)||U(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from relativeForm filter option must be specified.")};constructor(e){super(e),this.state=On.getStateFromProps(e)}componentDidMount(){On.checkInitialFilterOption(this.props.selectedFilterOption)}render(){const{customFilterName:e,dateFilterMode:t,dateFormat:n,filterOptions:r,selectedFilterOption:i,excludeCurrentPeriod:l,availableGranularities:a,isEditMode:o,openOnInit:s,locale:c,isTimeForAbsoluteRangeEnabled:u,weekStart:d,customIcon:m,showDropDownHeaderMessage:g,FilterConfigurationComponent:p}=this.props,{excludeCurrentPeriod:h,selectedFilterOption:f,isExcludeCurrentPeriodEnabled:b}=this.state;return"hidden"===t?null:W.createElement(An,{availableGranularities:a,customFilterName:e,dateFormat:n,openOnInit:s,showDropDownHeaderMessage:g,disabled:"readonly"===t,excludeCurrentPeriod:h,originalExcludeCurrentPeriod:l,isExcludeCurrentPeriodEnabled:b,isTimeForAbsoluteRangeEnabled:u,isEditMode:o,filterOptions:r,selectedFilterOption:f,originalSelectedFilterOption:i,locale:c,onApplyClick:this.handleApplyClick,onCancelClick:this.onCancelClicked,onDropdownOpenChanged:this.onDropdownOpenChanged,onExcludeCurrentPeriodChange:this.handleExcludeCurrentPeriodChange,onSelectedFilterOptionChange:this.handleSelectedFilterOptionChange,errors:y(f),weekStart:d,customIcon:m,FilterConfigurationComponent:p})}handleApplyClick=()=>{const e=(t=this.state.selectedFilterOption,w(t)&&t.from>t.to?{...t,from:t.to,to:t.from}:t);var t;this.props.onApply(e,this.state.excludeCurrentPeriod)};onChangesDiscarded=()=>{this.setState((()=>On.getStateFromProps(this.props)))};onCancelClicked=()=>{this.props.onCancel(),this.onChangesDiscarded()};onDropdownOpenChanged=e=>{e?this.props.onOpen():(this.props.onClose(),this.onChangesDiscarded())};handleExcludeCurrentPeriodChange=e=>{this.setState({excludeCurrentPeriod:e})};handleSelectedFilterOptionChange=e=>{this.setState((t=>On.getStateFromSelectedOption(e,t.excludeCurrentPeriod)))}}var Nn=n(56541);const Tn=e=>E[e].id,Mn=e=>({ALL:"all",GREATER_THAN:"greater-than",GREATER_THAN_OR_EQUAL_TO:"greater-than-equal-to",LESS_THAN:"less-than",LESS_THAN_OR_EQUAL_TO:"less-than-equal-to",EQUAL_TO:"equal-to",NOT_EQUAL_TO:"not-equal-to",BETWEEN:"between",NOT_BETWEEN:"not-between"}[e]);class Rn extends W.PureComponent{static defaultProps={onClick:K,bubbleText:null};render(){const{intl:e,operator:t,selectedOperator:n,bubbleText:r}=this.props,i=ee("gd-list-item","gd-list-item-shortened",`s-mvf-operator-${Nn.gl(t)}`,{"is-selected":n===t}),l=e.formatMessage({id:Tn(t)});return W.createElement("div",{className:i,onClick:this.handleOnClick},W.createElement("div",{className:`gd-icon-${Mn(t)}`,title:l}),W.createElement("span",{title:l},M(l)),r?this.renderBubble(r):null)}handleOnClick=e=>{const{operator:t,onClick:n}=this.props;n(t),e.preventDefault()};renderBubble(e){return W.createElement("div",{className:"tooltip-bubble"},W.createElement(Q.BubbleHoverTrigger,{tagName:"div",showDelay:400,hideDelay:200},W.createElement("div",{className:"inlineBubbleHelp"}),W.createElement(Q.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},e)))}}const Ln=(0,ie.ZP)(Rn);class _n extends W.PureComponent{render(){const{onSelect:e,onClose:t,selectedOperator:n,alignTo:r,intl:i}=this.props;return W.createElement(Q.Overlay,{closeOnOutsideClick:!0,alignTo:r,alignPoints:[{align:"bl tl"}],onClose:t},W.createElement("div",{className:"gd-dropdown overlay"},W.createElement("div",{className:"gd-mvf-operator-dropdown-body s-mvf-operator-dropdown-body"},W.createElement(Ln,{operator:"ALL",selectedOperator:n,onClick:e}),W.createElement(Q.Separator,null),W.createElement(Ln,{operator:"GREATER_THAN",selectedOperator:n,onClick:e}),W.createElement(Ln,{operator:"GREATER_THAN_OR_EQUAL_TO",selectedOperator:n,onClick:e}),W.createElement(Q.Separator,null),W.createElement(Ln,{operator:"LESS_THAN",selectedOperator:n,onClick:e}),W.createElement(Ln,{operator:"LESS_THAN_OR_EQUAL_TO",selectedOperator:n,onClick:e}),W.createElement(Q.Separator,null),W.createElement(Ln,{operator:"BETWEEN",selectedOperator:n,onClick:e,bubbleText:i.formatMessage({id:"mvf.operator.between.tooltip.bubble"})}),W.createElement(Ln,{operator:"NOT_BETWEEN",selectedOperator:n,onClick:e,bubbleText:i.formatMessage({id:"mvf.operator.notBetween.tooltip.bubble"})}),W.createElement(Q.Separator,null),W.createElement(Ln,{operator:"EQUAL_TO",selectedOperator:n,onClick:e}),W.createElement(Ln,{operator:"NOT_EQUAL_TO",selectedOperator:n,onClick:e}))))}}const Bn=(0,ie.ZP)(_n);class Vn extends W.PureComponent{state={opened:!1};render(){return W.createElement(W.Fragment,null,this.renderDropdownButton(),this.state.opened?W.createElement(Bn,{alignTo:".gd-mvf-operator-dropdown-button",onSelect:this.handleOperatorSelected,selectedOperator:this.props.operator,onClose:this.closeOperatorDropdown}):null)}renderDropdownButton(){const{intl:e,operator:t,isDisabled:n}=this.props,{opened:r}=this.state,i=M(e.formatMessage({id:Tn(t)})),l=ee("gd-mvf-operator-dropdown-button","s-mvf-operator-dropdown-button",`s-mvf-operator-dropdown-button-${Nn.gl(t)}`,"gd-button-primary","gd-button-small",{"button-dropdown":!0,"is-dropdown-open":r,"is-active":r});return W.createElement(Q.Button,{title:i,className:l,value:i,onClick:this.handleOperatorDropdownButtonClick,iconLeft:`gd-icon-${Mn(t)}`,iconRight:r?"gd-icon-navigateup":"gd-icon-navigatedown",disabled:n})}handleOperatorSelected=e=>{this.closeOperatorDropdown(),this.props.onSelect(e)};closeOperatorDropdown=()=>this.setState({opened:!1});handleOperatorDropdownButtonClick=()=>this.setState((e=>({...e,opened:!e.opened})))}const Hn=(0,ie.ZP)(Vn),Zn=({from:e,to:t,usePercentage:n,disableAutofocus:r,onFromChange:i,onToChange:l,onEnterKeyPress:a,separators:o})=>W.createElement("div",{className:"gd-mvf-range-input"},W.createElement(Q.InputWithNumberFormat,{className:"s-mvf-range-from-input",value:e,onChange:i,onEnterKeyPress:a,isSmall:!0,autofocus:!r,suffix:n?"%":"",separators:o}),W.createElement(Q.InputWithNumberFormat,{className:"s-mvf-range-to-input",value:t,onChange:l,onEnterKeyPress:a,isSmall:!0,suffix:n?"%":"",separators:o})),qn=({value:e,usePercentage:t,disableAutofocus:n,onValueChange:r,onEnterKeyPress:i,separators:l})=>W.createElement(Q.InputWithNumberFormat,{className:"s-mvf-comparison-value-input",value:e,onEnterKeyPress:i,onChange:r,isSmall:!0,autofocus:!n,suffix:t?"%":"",separators:l}),zn=({checked:e=!1,onChange:t,intl:n})=>W.createElement("label",{className:"input-checkbox-label gd-mvf-treat-null-values-as-zero s-treat-null-values-as-zero"},W.createElement("input",{type:"checkbox",name:"treat-null-values-as",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked)}),W.createElement("span",{className:"input-label-text"},n.formatMessage({id:"mvf.treatNullValuesAsZeroLabel"}),W.createElement(Q.BubbleHoverTrigger,{showDelay:400,hideDelay:200},W.createElement("span",{className:"inlineBubbleHelp"}),W.createElement(Q.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},n.formatMessage({id:"mvf.treatNullValuesAsZeroTooltip"})))));function Wn(e){return!I(e)&&!!e.severity}const Gn=({warningMessage:e,className:t})=>{const n=ee("gd-mvf-warning-message",(e=>{if("string"==typeof e)return"gd-mvf-warning-message-low s-mvf-warning-message-low";switch(e.severity){case"low":return"gd-mvf-warning-message-low s-mvf-warning-message-low";case"medium":return"gd-mvf-warning-message-medium s-mvf-warning-message-medium";case"high":return"gd-mvf-warning-message-high s-mvf-warning-message-high"}})(e),t,"s-mvf-warning-message");return W.createElement("div",{className:n},Wn(e)?e.text:e)},Un=6;class Kn extends W.PureComponent{constructor(e){super(e);const{operator:t,value:n,usePercentage:r,treatNullAsZeroValue:i}=e;this.state={operator:t||"ALL",value:(r?this.convertToPercentageValue(n,t):n)||{},enabledTreatNullValuesAsZero:i}}render(){const{onCancel:e,warningMessage:t,displayTreatNullAsZeroOption:n,enableOperatorSelection:r,intl:i}=this.props,{operator:l,enabledTreatNullValuesAsZero:a}=this.state;return W.createElement("div",{className:"gd-mvf-dropdown-body gd-dialog gd-dropdown overlay s-mvf-dropdown-body"},W.createElement("div",{className:"gd-mvf-dropdown-content"},t?W.createElement("div",{className:"gd-mvf-dropdown-section"},W.createElement(Gn,{warningMessage:t})):null,W.createElement("div",{className:"gd-mvf-dropdown-section"},W.createElement(Hn,{onSelect:this.handleOperatorSelection,operator:l,isDisabled:!r})),"ALL"!==l?W.createElement("div",{className:"gd-mvf-dropdown-section"},this.renderInputSection()," ",n?W.createElement(zn,{onChange:this.handleTreatNullAsZeroClicked,checked:a,intl:i}):null):null),W.createElement("div",{className:"gd-mvf-dropdown-footer"},W.createElement(Q.Button,{className:"gd-button-secondary gd-button-small s-mvf-dropdown-cancel",onClick:e,value:i.formatMessage({id:"cancel"})}),W.createElement(Q.Button,{className:"gd-button-action gd-button-small s-mvf-dropdown-apply",onClick:this.onApply,value:i.formatMessage({id:"apply"}),disabled:this.isApplyButtonDisabled()})))}renderInputSection=()=>{const{usePercentage:e,disableAutofocus:t,separators:n}=this.props,{operator:r,value:{value:i=null,from:l=null,to:a=null}}=this.state;return(0,g.isComparisonConditionOperator)(r)?W.createElement(qn,{value:i,usePercentage:e,onValueChange:this.handleValueChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:n}):(0,g.isRangeConditionOperator)(r)?W.createElement(Zn,{from:l,to:a,usePercentage:e,onFromChange:this.handleFromChange,onToChange:this.handleToChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:n}):null};isApplyButtonDisabledForComparison(){const{value:e=null}=this.state.value;return null===e||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.value:e===this.props.value.value)}isApplyButtonDisabledForRange(){const{from:e=null,to:t=null}=this.state.value;return null===e||null===t||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.from&&this.trimToPrecision(this.fromPercentToDecimal(t))===this.props.value.to:e===this.props.value.from&&t===this.props.value.to)}isChanged=()=>this.state.operator!==this.props.operator||this.state.enabledTreatNullValuesAsZero!==this.props.treatNullAsZeroValue;isApplyButtonDisabledForAll(){return"ALL"===this.props.operator}isApplyButtonDisabled=()=>{const{operator:e}=this.state;return(0,g.isComparisonConditionOperator)(e)?this.isApplyButtonDisabledForComparison():(0,g.isRangeConditionOperator)(e)?this.isApplyButtonDisabledForRange():this.isApplyButtonDisabledForAll()};handleOperatorSelection=e=>this.setState({operator:e});handleValueChange=e=>{this.setState({value:{...this.state.value,value:e}})};handleFromChange=e=>{this.setState({value:{...this.state.value,from:e}})};handleToChange=e=>{this.setState({value:{...this.state.value,to:e}})};handleTreatNullAsZeroClicked=e=>{this.setState({enabledTreatNullValuesAsZero:e})};trimToPrecision=e=>{const{valuePrecision:t=Un}=this.props;return e?parseFloat(e.toFixed(t)):e};fromPercentToDecimal=e=>e?e/100:e;fromDecimalToPercent=e=>e?100*e:e;convertToRawValue=(e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromPercentToDecimal(e.value))}:{from:this.trimToPrecision(this.fromPercentToDecimal(e.from)),to:this.trimToPrecision(this.fromPercentToDecimal(e.to))}:e;convertToPercentageValue=(e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromDecimalToPercent(e.value))}:{from:this.trimToPrecision(this.fromDecimalToPercent(e.from)),to:this.trimToPrecision(this.fromDecimalToPercent(e.to))}:e;onApply=()=>{if(this.isApplyButtonDisabled())return;const{enabledTreatNullValuesAsZero:e,operator:t,value:n}=this.state,{usePercentage:r}=this.props,i="ALL"===t?null:t,l=r?this.convertToRawValue(n,t):n;this.props.onApply(i,l,e)}}const $n=(0,ie.ZP)(Kn);class Yn extends W.PureComponent{render(){return W.createElement(R.IntlWrapper,{locale:this.props.locale},W.createElement($n,{...this.props}))}}const jn=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}})));class Qn extends W.PureComponent{static defaultProps={value:{},operator:"ALL",displayTreatNullAsZeroOption:!1,treatNullAsZeroValue:!1};render(){const{operator:e,value:t,usePercentage:n,warningMessage:r,locale:i,onCancel:l,anchorEl:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:u}=this.props,d=null!==e?e:"ALL";return W.createElement(Q.Overlay,{alignTo:a,alignPoints:jn,closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,onClose:l},W.createElement(Yn,{operator:d,value:t,usePercentage:n,warningMessage:r,locale:i,onCancel:l,onApply:this.onApply,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:u}))}onApply=(e,t,n)=>{this.props.onApply(e,t,n)}}const Jn=(0,ie.ZP)(Qn);class Xn extends W.PureComponent{render(){return W.createElement(R.IntlWrapper,{locale:this.props.locale},W.createElement(Jn,{...this.props}))}}const er=e=>{if(!e)return{};const t=(0,g.measureValueFilterCondition)(e);return t?(0,g.isRangeCondition)(t)?{from:t.range.from,to:t.range.to}:{value:t.comparison.value}:{}},tr=(e,t)=>{if(!e||!(0,g.measureValueFilterCondition)(e))return void 0!==t&&t;const n=(0,g.measureValueFilterCondition)(e);return(0,g.isComparisonCondition)(n)&&void 0!==n.comparison.treatNullValuesAs||(0,g.isRangeCondition)(n)&&void 0!==n.range.treatNullValuesAs||!1};class nr extends W.PureComponent{static defaultProps={displayTreatNullAsZeroOption:!1,treatNullAsZeroDefaultValue:!1,enableOperatorSelection:!0};render(){const{filter:e,onCancel:t,usePercentage:n,warningMessage:r,locale:i,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroDefaultValue:s,enableOperatorSelection:c}=this.props;return W.createElement(Xn,{onApply:this.onApply,onCancel:t,operator:e&&(0,g.measureValueFilterOperator)(e)||null,value:e&&er(e)||null,usePercentage:n,warningMessage:r,locale:i,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroValue:tr(e,s),enableOperatorSelection:c})}onApply=(e,t,n)=>{const{filter:r,measureIdentifier:i,onApply:l}=this.props;null===e||"ALL"===e?l(null):(0,g.isRangeConditionOperator)(e)?l((0,g.newMeasureValueFilter)({localIdentifier:i}||r.measureValueFilter.measure,e,t.from??0,t.to??0,n?0:void 0)):l((0,g.newMeasureValueFilter)({localIdentifier:i}||r.measureValueFilter.measure,e,t.value??0,n?0:void 0))}}const rr=({isActive:e,buttonTitle:t,onClick:n})=>{const r=ee("gd-mvf-dropdown-button","s-mvf-dropdown-button","gd-button","gd-button-secondary","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e});return W.createElement("button",{className:r,onClick:n},t)};class ir extends W.PureComponent{static defaultProps={onCancel:K};state={displayDropdown:!1};buttonRef=W.createRef();render(){const{displayDropdown:e}=this.state,{filter:t,measureIdentifier:n,buttonTitle:r,usePercentage:i,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:u}=this.props;return W.createElement(W.Fragment,null,W.createElement("div",{ref:this.buttonRef},W.createElement(rr,{onClick:this.toggleDropdown,isActive:e,buttonTitle:r})),e?W.createElement(nr,{onApply:this.onApply,onCancel:this.onCancel,filter:t,measureIdentifier:n,usePercentage:i,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:u,anchorEl:this.buttonRef.current}):null)}onApply=e=>{this.closeDropdown(),this.props.onApply(e)};onCancel=()=>{this.closeDropdown(),this.props.onCancel()};closeDropdown=()=>{this.setState({displayDropdown:!1})};toggleDropdown=()=>{this.setState((e=>({...e,displayDropdown:!e.displayDropdown})))}}const lr=({isActive:e,onClick:t,title:n,className:r})=>{const i=ee("gd-button","gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e},"s-rf-dropdown-button",r);return W.createElement("button",{className:i,onClick:t},n)},ar=({title:e,value:t,isSelected:n,onSelect:r})=>{const i=ee("gd-list-item","gd-list-item-shortened",{"is-selected":n},"gd-button-link",`s-rf-operator-${Nn.gl(e)}`);return W.createElement("button",{className:i,onClick:()=>r(t)},W.createElement("span",null,e))},or=(0,ie.ZP)((({items:e,selectedValue:t,onSelect:n,onClose:r,intl:i})=>W.createElement(Q.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-operator-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:r},W.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-operator-dropdown-body s-rf-operator-dropdown-body"},e.map((({value:e,translationId:r})=>{const l=i.formatMessage({id:r});return W.createElement(ar,{key:e,title:l,value:e,isSelected:e===t,onSelect:n})})))))),sr=[{value:"TOP",translationId:E.top.id},{value:"BOTTOM",translationId:E.bottom.id}],cr=(0,ie.ZP)((({selectedValue:e,onSelect:t,intl:n})=>{const[r,i]=(0,W.useState)(!1),l=ee("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":r,"gd-icon-navigatedown":!r},"gd-rf-operator-dropdown-button","s-rf-operator-dropdown-button"),a=n.formatMessage({id:(o=e,sr.find((({value:e})=>e===o)).translationId)});var o;return W.createElement(W.Fragment,null,W.createElement(Q.Button,{className:l,value:a,onClick:()=>{i(!r)}}),r?W.createElement(or,{items:sr,selectedValue:e,onSelect:e=>{t(e),i(!1)},onClose:()=>i(!1)}):null)})),ur=[3,5,10,15,20,25,50,100].map((e=>({type:"option",value:e,label:`${e}`}))),dr=e=>/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e),mr=e=>e&&dr(e)&&Number(e)>0&&Number(e)<=99999,gr=(0,ie.ZP)((({selectedValue:e,onSelect:t,intl:n})=>W.createElement(dn,{getItems:e=>((e,t)=>{if(!e)return ur;const n=(e=>e?.trim())(e),r=dr(n);if(r){const e=r[1];return((e,t)=>e<1?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]:e>99999?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooLarge"})}]:ur.filter((t=>t.label.toLowerCase().includes(e.toString()))))(Number.parseInt(e,10),t)}return[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]})(e,n),onChange:t,value:e,className:"gd-rf-value-dropdown-button s-rf-value-dropdown-button",optionClassName:"s-rf-value-dropdown-item",customValueValidator:mr}))),pr=({item:e,iconClass:t,isSelected:n,onSelect:r,onDropDownItemMouseOver:i,onDropDownItemMouseOut:l,customGranularitySelection:a})=>{const{title:o,ref:s}=e,c=a&&!a.enable,u=ee("gd-list-item","gd-list-item-shortened",{"is-selected":n,"is-disabled":c},"gd-button-link",t,`s-rf-attribute-${Nn.gl(o)}`);return c?W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement(Q.Button,{className:u,value:o,title:o,disabled:!0}),W.createElement(Q.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-disabled-attribute-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},a.warningMessage)):W.createElement("button",{className:u,onClick:()=>r(s),onMouseOver:()=>{i&&i(s)},onMouseOut:()=>{l&&l()},title:o},W.createElement("span",null,o))},hr=({isSelected:e,onSelect:t})=>{const n=ee("gd-list-item","gd-list-item-shortened",{"is-selected":e},"gd-button-link","s-rf-attribute-all-records");return W.createElement("button",{className:n,onClick:()=>t()},W.createElement(X.Z,{id:"rankingFilter.allRecords"}),W.createElement("div",null,W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("span",{className:"gd-icon-circle-question gd-rf-attribute-all-records-icon s-rf-attribute-all-records-icon"}),W.createElement(Q.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-all-records-bubble",arrowOffsets:{"cr cl":[16,0],"cl cr":[-16,0]},alignPoints:[{align:"cr cl"},{align:"cl cr"}]},W.createElement(X.Z,{id:"rankingFilter.allRecords.tooltip"})))))},fr=({items:e,selectedItemRef:t,onSelect:n,onClose:r,onDropDownItemMouseOver:i,onDropDownItemMouseOut:l,customGranularitySelection:a})=>W.createElement(Q.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-attribute-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:r},W.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-attribute-dropdown-body s-rf-attribute-dropdown-body"},e.map((e=>{const{type:r,ref:o}=e;return W.createElement(pr,{key:(0,g.objRefToString)(o),iconClass:"DATE"===r?"gd-icon-date":"gd-icon-attribute",item:e,isSelected:(0,g.areObjRefsEqual)(o,t),onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:l,customGranularitySelection:a})})),W.createElement("div",{className:"gd-rf-attribute-dropdown-separator"}),W.createElement(hr,{isSelected:!t,onSelect:n}))),br=(0,ie.ZP)((({items:e,selectedItemRef:t,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:i,customGranularitySelection:l,intl:a})=>{const[o,s]=(0,W.useState)(!1),c=1===e.length,u=ee("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":o,"gd-icon-navigatedown":!o},"gd-rf-attribute-dropdown-button","s-rf-attribute-dropdown-button"),d=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),m=((e,t)=>e?e.title:t.formatMessage({id:"rankingFilter.allRecords"}))(d,a);return c?W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement(Q.Button,{className:u,value:m,disabled:!0}),W.createElement(Q.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-no-options-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},W.createElement(X.Z,{id:"rankingFilter.attributeDropdown.oneAttributeTooltip"}))):W.createElement(W.Fragment,null,W.createElement(Q.Button,{className:u,value:m,onClick:()=>{s(!o)},iconLeft:(p=d,p?"DATE"===p.type?"gd-icon-date":"gd-icon-attribute":null)}),o?W.createElement(fr,{items:e,selectedItemRef:t,onSelect:e=>{n(e),s(!1),i?.()},onClose:()=>s(!1),onDropDownItemMouseOver:r,onDropDownItemMouseOut:i,customGranularitySelection:l}):null);var p})),Er=({item:e,isSelected:t,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:i,enableRenamingMeasureToMetric:l})=>{const{title:a,ref:o,sequenceNumber:s}=e,c=ee("gd-list-item","gd-list-item-shortened",{"is-selected":t},"gd-button-link",l?"gd-icon-metric":"gd-icon-measure",`s-rf-measure-${Nn.gl(a)}`);return W.createElement("button",{className:c,onClick:()=>n(o),onMouseOver:()=>{r&&r(o)},onMouseOut:()=>{i&&i()},title:a},W.createElement("span",{className:"gd-rf-measure-title"},a),s?W.createElement("span",{className:"gd-rf-sequence-number"},s):null)},vr=({items:e,selectedItemRef:t,onSelect:n,onClose:r,onDropDownItemMouseOver:i,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})=>W.createElement(Q.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-measure-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:r},W.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-measure-dropdown-body s-rf-measure-dropdown-body"},e.map((e=>{const{ref:r}=e;return W.createElement(Er,{key:(0,g.objRefToString)(r),item:e,isSelected:(0,g.areObjRefsEqual)(r,t),onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})})))),yr=({items:e,selectedItemRef:t,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:i,enableRenamingMeasureToMetric:l})=>{const[a,o]=(0,W.useState)(!1),s=ee("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":a,"gd-icon-navigatedown":!a},"gd-rf-measure-dropdown-button","s-rf-measure-dropdown-button"),c=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),u=c?.title;return W.createElement(W.Fragment,null,W.createElement(Q.Button,{className:s,value:u,onClick:()=>{o(!a)},iconLeft:l?"gd-icon-metric":"gd-icon-measure"}),a?W.createElement(vr,{items:e,selectedItemRef:t,onSelect:e=>{n(e),o(!1),i?.()},onClose:()=>o(!1),onDropDownItemMouseOver:r,onDropDownItemMouseOut:i,enableRenamingMeasureToMetric:l}):null)};var Cr=n(72905);const Sr=(e,t)=>{switch(e){case"TOP":return t?E.topWithAttr.id:E.topWithoutAttr.id;case"BOTTOM":return t?E.bottomWithAttr.id:E.bottomWithoutAttr.id;default:throw new Error(`Operator '${e}' is not supported!`)}},Ir=({operator:e,value:t,measure:n,attribute:r})=>W.createElement("div",{className:"gd-rf-preview s-rf-preview"},W.createElement(X.Z,{id:Sr(e,r),tagName:"span",values:{measure:n.title,attribute:r?.title,operator:e,value:t,strong:e=>W.createElement("strong",null,e)}})),wr=(e,t)=>{const n=e.rankingFilter,r=t.rankingFilter,i=n.operator===r.operator,l=n.value===r.value,a=I(Cr(n.attributes,r.attributes,G)),o=G(n.measure,r.measure);return i&&l&&a&&o},kr=({measureItems:e,attributeItems:t,filter:n,onApply:r,onCancel:i,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o,intl:s,enableRenamingMeasureToMetric:c})=>{const u=n.rankingFilter,[d,m]=(0,W.useState)(u.value),[p,h]=(0,W.useState)(u.operator),[f,b]=(0,W.useState)(u.measure),[E,v]=(0,W.useState)(u.attributes?.[0]),y=e.find((e=>(0,g.areObjRefsEqual)(e.ref,f))),C=t.find((e=>(0,g.areObjRefsEqual)(e.ref,E))),S=(0,W.useCallback)((()=>E?(0,g.newRankingFilter)(f,[E],p,d):(0,g.newRankingFilter)(f,p,d)),[f,E,p,d]);return W.createElement("div",{className:"gd-dialog gd-dropdown overlay gd-rf-dropdown-body s-rf-dropdown-body"},W.createElement("div",{className:"gd-rf-dropdown-header"},W.createElement(X.Z,{id:"rankingFilter.topBottom"})),W.createElement("div",{className:"gd-rf-dropdown-section"},W.createElement("div",{className:"gd-rf-value-section"},W.createElement(cr,{selectedValue:p,onSelect:h}),W.createElement(gr,{selectedValue:d,onSelect:m}),W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("span",{className:"gd-icon-circle-question gd-rf-value-tooltip-icon s-rf-value-tooltip-icon"}),W.createElement(Q.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-value-tooltip",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},W.createElement(X.Z,{id:"rankingFilter.valueTooltip"})))),W.createElement("div",{className:"gd-rf-dropdown-section-title"},W.createElement(X.Z,{id:"rankingFilter.outOf"})),W.createElement(br,{items:t,selectedItemRef:E,onSelect:v,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o}),W.createElement("div",{className:"gd-rf-dropdown-section-title"},W.createElement(X.Z,{id:"rankingFilter.basedOn"})),W.createElement(yr,{items:e,selectedItemRef:f,onSelect:b,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,enableRenamingMeasureToMetric:c}),W.createElement("div",{className:"gd-rf-dropdown-section-title"},W.createElement(X.Z,{id:"rankingFilter.preview"})),W.createElement(Ir,{measure:y,attribute:C,operator:p,value:d})),W.createElement("div",{className:"gd-rf-dropdown-footer"},W.createElement(Q.Button,{className:"gd-button-secondary gd-button-small s-rf-dropdown-cancel",onClick:()=>i(),value:s.formatMessage({id:"cancel"})}),W.createElement(Q.Button,{className:"gd-button-action gd-button-small s-rf-dropdown-apply",onClick:()=>{const e=S();r(e)},value:s.formatMessage({id:"apply"}),disabled:wr(n,S())})))};kr.defaultProps={onCancel:K};const Fr=(0,ie.ZP)(kr),xr=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),Pr=({measureItems:e,attributeItems:t,filter:n,onApply:r,onCancel:i,anchorEl:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c})=>{const[u,d]=(0,W.useState)((e=>{const{measure:t,attributes:n,operator:r,value:i}=e.rankingFilter,l=n?.[0];return{rankingFilter:{operator:r,value:i,measure:t,...l?{attributes:[l]}:{}}}})(n));return W.createElement(Q.Overlay,{closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,alignTo:l,alignPoints:xr,onClose:i,ignoreClicksOnByClass:[".gd-rf-inner-overlay-dropdown"]},W.createElement(Fr,{measureItems:e,attributeItems:t,filter:u,onApply:e=>{d(e),r(e)},onCancel:i,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c}))};Pr.defaultProps={onCancel:K};const Dr=(0,ie.ZP)(Pr),Ar=e=>W.createElement(R.IntlWrapper,{locale:e.locale},W.createElement(Dr,{...e})),Or=({measureItems:e,attributeItems:t,filter:n,onApply:r,onCancel:i,buttonTitle:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:u})=>{const[d,m]=(0,W.useState)(!1);return W.createElement(W.Fragment,null,W.createElement(lr,{isActive:d,onClick:()=>{m(!d)},title:l,className:"gd-rf-dropdown-button"}),d?W.createElement(Ar,{measureItems:e,attributeItems:t,filter:n,onApply:e=>{r(e),m(!1)},onCancel:()=>{i(),m(!1)},anchorEl:".gd-rf-dropdown-button",onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:u}):null)};Or.defaultProps={onCancel:K};var Nr=n(44586),Tr=n(47591),Mr=n(39693),Rr=n(24268),Lr=n(30797),_r=n(6557);const Br={init:_r,initStart:e=>{e.initialization.status="loading"},initSuccess:e=>{e.initialization.status="success"},initError:(e,t)=>{e.initialization.status="error",e.initialization.error=t.payload.error},initCancel:e=>{e.initialization.status="canceled"}},Vr={loadAttributeRequest:_r,loadAttributeStart:e=>{e.attribute.status="loading",e.attribute.error=void 0,e.attribute.data=void 0},loadAttributeSuccess:(e,t)=>{e.attribute.status="success",e.attribute.data=t.payload.attribute},loadAttributeError:(e,t)=>{e.attribute.status="error",e.attribute.error=t.payload.error},loadAttributeCancelRequest:_r,loadAttributeCancel:e=>{e.attribute.status="canceled"}},Hr=e=>e,Zr=(e,t)=>"uris"===e.elementsForm?t.uri:t.title,qr=e=>e.elementsForm,zr={loadCustomElementsRequest:_r,loadCustomElementsStart:_r,loadCustomElementsSuccess:(e,t)=>{t.payload.elements.forEach((t=>{const n=Zr(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)}))},loadCustomElementsError:_r,loadCustomElementsCancelRequest:_r,loadCustomElementsCancel:_r},Wr={loadInitialElementsPageRequest:_r,loadInitialElementsPageStart:e=>{e.elements.initialPageLoad.status="loading",e.elements.initialPageLoad.error=void 0,e.elements.currentOptions.offset=0,e.elements.lastLoadedOptions.offset=0,e.elements.data=[]},loadInitialElementsPageSuccess:(e,t)=>{e.elements.initialPageLoad.status="success",e.elements.totalCountWithCurrentSettings=t.payload.totalCount,t.payload.elements.forEach((t=>{const n=Zr(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=t.payload.elements.map((t=>Zr(e,t))),e.elements.lastLoadedOptions=t.payload.options},loadInitialElementsPageError:(e,t)=>{e.elements.initialPageLoad.status="error",e.elements.initialPageLoad.error=t.payload.error},loadInitialElementsPageCancelRequest:_r,loadInitialElementsPageCancel:e=>{e.attribute.status="canceled"}},Gr={loadNextElementsPageRequest:_r,loadNextElementsPageStart:e=>{e.elements.nextPageLoad.status="loading",e.elements.nextPageLoad.error=void 0},loadNextElementsPageSuccess:(e,t)=>{e.elements.nextPageLoad.status="success",t.payload.elements.forEach((t=>{const n=Zr(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=e.elements.data.concat(t.payload.elements.map((t=>Zr(e,t)))),e.elements.lastLoadedOptions=t.payload.options},loadNextElementsPageError:(e,t)=>{e.elements.nextPageLoad.status="error",e.elements.nextPageLoad.error=t.payload.error},loadNextElementsPageCancelRequest:_r,loadNextElementsPageCancel:e=>{e.elements.nextPageLoad.status="canceled"}};var Ur=n(20573);const Kr=(0,Ur.createSelector)(Hr,(e=>e.selection.working.keys)),$r=(0,Ur.createSelector)(Hr,(e=>e.selection.working.isInverted)),Yr=(0,Ur.createSelector)(Hr,(e=>e.selection.working.irrelevantKeys)),jr=(0,Ur.createSelector)(Hr,(e=>e.selection.commited.keys)),Qr=(0,Ur.createSelector)(Hr,(e=>e.selection.commited.isInverted)),Jr=(0,Ur.createSelector)(Hr,(e=>e.selection.commited.irrelevantKeys)),Xr=(0,Ur.createSelector)(Kr,$r,Yr,((e,t,n)=>({keys:e,isInverted:t,irrelevantKeys:n}))),ei=(0,Ur.createSelector)(jr,Qr,Jr,((e,t,n)=>({keys:e,isInverted:t,irrelevantKeys:n}))),ti=(0,Ur.createSelector)($r,Kr,Qr,jr,((e,t,n,r)=>e!==n||!G([...r].sort(),[...t].sort()))),ni=(0,Ur.createSelector)(Kr,I),ri={...Br,...Vr,...Wr,...Gr,...zr,loadIrrelevantElementsRequest:_r,loadIrrelevantElementsStart:e=>{e.selection.commited.irrelevantKeys=[],e.selection.working.irrelevantKeys=[]},loadIrrelevantElementsSuccess:(e,t)=>{e.selection.commited.irrelevantKeys=t.payload.elementTitles,e.selection.working.irrelevantKeys=t.payload.elementTitles},loadIrrelevantElementsError:_r,loadIrrelevantElementsCancelRequest:_r,loadIrrelevantElementsCancel:_r,changeSelection:(e,t)=>{e.selection.working.keys=t.payload.selection,t.payload.irrelevantSelection&&(e.selection.working.irrelevantKeys=t.payload.irrelevantSelection),U(t.payload.isInverted)||(e.selection.working.isInverted=t.payload.isInverted)},revertSelection:e=>{const t=jr(e),n=Qr(e),r=Jr(e);e.selection.working.keys=t,e.selection.working.isInverted=n,e.selection.working.irrelevantKeys=r},commitSelection:e=>{const t=Kr(e),n=$r(e),r=Yr(e);e.selection.commited.keys=t,e.selection.commited.isInverted=n,e.selection.commited.irrelevantKeys=r},invertSelection:e=>{const t=$r(e);e.selection.working.isInverted=!t},clearSelection:e=>{e.selection.working.keys=[]},setElementsTotalCount:(e,t)=>{e.elements.totalCount=t.payload.totalCount},initTotalCount:_r,initTotalCountStart:e=>{e.elements.totalCountInitialization.status="loading"},initTotalCountSuccess:e=>{e.elements.totalCountInitialization.status="success"},initTotalCountError:(e,t)=>{e.elements.totalCountInitialization.status="error",e.elements.totalCountInitialization.error=t.payload.error},initTotalCountCancel:e=>{e.elements.totalCountInitialization.status="canceled"},setElementsTotalCountWithCurrentSettings:(e,t)=>{e.elements.totalCountWithCurrentSettings=t.payload.totalCount},setOffset:(e,t)=>{e.elements.currentOptions.offset=t.payload.offset},setLimit:(e,t)=>{e.elements.currentOptions.limit=t.payload.limit},setSearch:(e,t)=>{e.elements.currentOptions.search=t.payload.search},setOrder:(e,t)=>{e.elements.currentOptions.order=t.payload.order},setLimitingAttributeFilters:(e,t)=>{e.elements.currentOptions.limitingAttributeFilters=t.payload.filters},setLimitingMeasures:(e,t)=>{e.elements.currentOptions.limitingMeasures=t.payload.filters},setLimitingDateFilters:(e,t)=>{e.elements.currentOptions.limitingDateFilters=t.payload.filters},setLimitingAttributeFiltersAttributes:(e,t)=>{e.elements.limitingAttributeFiltersAttributes=t.payload.attributes}},ii={initialization:{status:"pending"},attribute:{status:"pending"},elements:{cache:{},currentOptions:{offset:0,limit:500,search:"",limitingAttributeFilters:[],limitingDateFilters:[],limitingMeasures:[]},initialPageLoad:{status:"pending"},nextPageLoad:{status:"pending"},limitingAttributeFiltersAttributes:[],lastLoadedOptions:{},totalCountInitialization:{status:"pending"}},config:{},selection:{commited:{},working:{}}},li=(0,Rr.oM)({name:"attributeFilterSlice",initialState:ii,reducers:ri}),ai=li.reducer,oi=li.actions;var si=n(34857);function*ci(){return yield(0,si.fw)("attributeFilterContext")}var ui=n(91966),di=n(93386);const mi=(0,Ur.createSelector)(Hr,(e=>e.elementsForm)),gi=(0,Ur.createSelector)(Hr,(e=>e.config.hiddenElements??[])),pi=(0,Ur.createSelector)(mi,gi,((e,t)=>"uris"===e?{uris:t}:{values:t})),hi=(0,Ur.createSelector)(Hr,(e=>e.displayFormRef)),fi=(0,Ur.createSelector)(mi,jr,((e,t)=>"uris"===e?{uris:t}:{values:t})),bi=(0,Ur.createSelector)(mi,jr,Qr,gi,((e,t,n,r)=>{const i=n?di(t,r):ui(t,r);return"uris"===e?{uris:i}:{values:i}})),Ei=(0,Ur.createSelector)(hi,Qr,bi,((e,t,n)=>t?(0,g.newNegativeAttributeFilter)(e,n):(0,g.newPositiveAttributeFilter)(e,n)));async function vi(e,t){return e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t).catch((e=>{throw(0,R.convertError)(e)}))}function*yi(){yield(0,si.Fm)([oi.loadAttributeRequest.match,oi.loadAttributeCancelRequest.match],Ci)}function*Ci(e){if(oi.loadAttributeCancelRequest.match(e))return;const{payload:{correlation:t}}=e;try{const e=yield(0,si.Ys)(hi),n=yield(0,si.RE)(ci);yield(0,si.gz)(oi.loadAttributeStart({correlation:t}));const r=yield(0,si.RE)(vi,n,e);return yield(0,si.gz)(oi.loadAttributeSuccess({attribute:r,correlation:t})),r}catch(e){yield(0,si.gz)(oi.loadAttributeError({error:e,correlation:t}))}finally{(yield(0,si.By)())&&(yield(0,si.gz)(oi.loadAttributeCancel({correlation:t})))}}var Si=n(57557);const Ii=(0,Ur.createSelector)(Hr,(e=>e.attribute.data)),wi=(0,Ur.createSelector)(Hr,(e=>e.attribute.status)),ki=(0,Ur.createSelector)(Hr,(e=>e.attribute.error)),Fi=(e,t)=>Mr(e.map((e=>t[e]))),xi=(0,Ur.createSelector)(Hr,(e=>e.elements.data??[])),Pi=(0,Ur.createSelector)(Hr,(e=>e.elements.cache)),Di=(0,Ur.createSelector)(xi,Pi,Fi),Ai=(0,Ur.createSelector)(Hr,(e=>e.elements.totalCount)),Oi=(0,Ur.createSelector)(Hr,(e=>e.elements.totalCountInitialization?.status)),Ni=(0,Ur.createSelector)(Hr,(e=>e.elements.totalCountInitialization?.error)),Ti=(0,Ur.createSelector)(Hr,(e=>e.elements.totalCountWithCurrentSettings)),Mi=(0,Ur.createSelector)(Hr,(e=>e.config.staticElements??[])),Ri=(0,Ur.createSelector)(Hr,(e=>e.elements.currentOptions.search)),Li=(0,Ur.createSelector)(Hr,(e=>e.elements.currentOptions.order)),_i=(0,Ur.createSelector)(Hr,(e=>e.elements.currentOptions.limit)),Bi=(0,Ur.createSelector)(Hr,(e=>e.elements?.lastLoadedOptions?.offset??e.elements.currentOptions.offset)),Vi=(0,Ur.createSelector)(Hr,(e=>e.elements.currentOptions.limitingAttributeFilters)),Hi=(0,Ur.createSelector)(Hr,(e=>e.elements.currentOptions.limitingMeasures)),Zi=(0,Ur.createSelector)(Hr,(e=>e.elements.currentOptions.limitingDateFilters)),qi=(0,Ur.createSelector)(Bi,_i,Li,Ri,Vi,Hi,Zi,((e,t,n,r,i,l,a)=>({limit:t,limitingAttributeFilters:i,limitingDateFilters:a,limitingMeasures:l,offset:e,order:n,search:r}))),zi=(0,Ur.createSelector)(Hr,(e=>e.elements.lastLoadedOptions)),Wi=(0,Ur.createSelector)(Hr,(e=>e.elements.limitingAttributeFiltersAttributes));var Gi=n(20434);class Ui{allItems;items;limit;offset;totalCount;constructor(e,t=50,n=0){this.allItems=e,(0,Tr.kG)(n>=0,`paging offset must be non-negative, got: ${n}`),(0,Tr.kG)(t>0,`limit must be a positive number, got: ${t}`),this.items=e.slice(n,n+t),this.offset=Math.min(n,e.length),this.limit=t,this.totalCount=e.length}async next(){return 0===this.items.length?this:new Ui(this.allItems,this.limit,this.offset+this.items.length)}async goTo(e){return 0===this.items.length?this:new Ui(this.allItems,this.limit,e*this.items.length)}async all(){return[...this.allItems]}async allSorted(e){return[...this.allItems].sort(e)}}const Ki=e=>t=>(0,g.attributeElementsIsEmpty)(e)?t:(0,g.isAttributeElementsByRef)(e)?t.filter((t=>!e.uris.includes(t.uri))):t.filter((t=>!e.values.includes(t.title))),$i=e=>t=>{if(!e)return t;if((0,Gi.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e))throw new Gi.NotImplemented("Elements by primary display form value are not supported yet");return(0,Gi.isElementsQueryOptionsElementsByValue)(e)?t.filter((t=>e.values.includes(t.title))):t.filter((t=>e.uris.includes(t.uri)))},Yi=e=>t=>e?t.filter((t=>t.title.toLowerCase().includes(e.toLowerCase()))):t;const ji=e=>!!e.capabilities.supportsElementUris;async function Qi(e,t,n,r){return r?.length?async function(e,t,n){let r=$(Ki(t.hiddenElements),$i(e.elements),Yi(e.search))(n);return"desc"===e.order&&(r=[...r].reverse()),new Ui(r,e.limit,e.offset)}(t,n,r):async function(e,t,n){const{backend:r,workspace:i}=e,{displayFormRef:l,elements:a,limit:o,limitingAttributeFilters:s,limitingDateFilters:c,limitingMeasures:u,offset:d,search:m,order:p,includeTotalCountWithoutFilters:h,excludePrimaryLabel:f=!0,signal:b}=t,E=I(s)&&I(c)&&I(u)&&!m&&!f&&!p&&0===d;if(ji(r)&&(0,Gi.isElementsQueryOptionsElementsByValue)(a)&&E){const e=await async function(e,t,n,r,i){const l=r.values,a=[(0,g.newPositiveAttributeFilter)(n,l)];(0,g.attributeElementsIsEmpty)(i.hiddenElements)||a.push((0,g.newNegativeAttributeFilter)(n,i.hiddenElements));const o=await e.workspace(t).execution().forItems([(0,g.newAttribute)(n)],a).execute().catch((e=>{throw(0,R.convertError)(e)})),s=await o.readAll().catch((e=>{throw(0,R.convertError)(e)})),c=R.DataViewFacade.for(s),[u]=c.meta().attributeHeaders();return u.map((([e])=>({title:e.attributeHeaderItem.name,uri:e.attributeHeaderItem.uri})))}(r,i,l,a,n);return new Ui(e,o,d)}let v=r.workspace(i).attributes().elements().forDisplayForm(l);const y={};o&&(v=v.withLimit(o)),d&&(v=v.withOffset(d)),m&&(y.filter=m),f&&!ji(r)&&(y.excludePrimaryLabel=!0),a&&(y.elements=ji(r)||(0,Gi.isValueBasedElementsQueryOptionsElements)(a)?a:{primaryValues:a.uris}),p&&(y.order=p),h&&(y.includeTotalCountWithoutFilters=h),I(y)||(v=v.withOptions(y)),c?.length&&(v=v.withDateFilters(c));const C=function(e,t,n,r){return(0,g.attributeElementsIsEmpty)(n)?t??[]:[{attributeFilter:(0,g.newNegativeAttributeFilter)(e,n),overAttribute:r.ref},...t??[]]}(l,s,n.hiddenElements,n.attribute);return C.length&&(v=v.withAttributeFilters(C)),u?.length&&(v=v.withMeasures(u)),b&&v.withSignal(b),v.query().catch((e=>{throw(0,R.convertError)(e)}))}(e,t,n)}function*Ji(e){const t=yield(0,si.RE)(ci),n=yield(0,si.Ys)(pi),r=yield(0,si.Ys)(Ii),i=yield(0,si.Ys)(hi),l=yield(0,si.Ys)(Mi),a=yield(0,si.RE)(Qi,t,{displayFormRef:i,...e},{hiddenElements:n,attribute:r},l);return{elements:a.items,totalCount:a.totalCount,options:Si(e,"signal")}}async function Xi(e,t){const n=t.map((e=>(0,g.filterObjRef)(e.attributeFilter)));return Promise.all(n.map((t=>e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t)))).catch((e=>{throw(0,R.convertError)(e)}))}function*el(){yield(0,si.Fm)([oi.loadInitialElementsPageRequest.match,oi.loadInitialElementsPageCancelRequest.match],tl)}function*tl(e){if(oi.loadInitialElementsPageCancelRequest.match(e))return;const t=yield(0,si.RE)(ci),n=new AbortController,{payload:{correlation:r}}=e;try{yield(0,si.gz)(oi.loadInitialElementsPageStart({correlation:r}));const e=yield(0,si.Ys)(qi),i=yield(0,si.Ys)(qr),l={...e,signal:n.signal,excludePrimaryLabel:!t.backend.capabilities.supportsElementUris&&"values"===i},a=yield(0,si.RE)(Ji,l),o=yield(0,si.RE)(Xi,t,e.limitingAttributeFilters??[]);yield(0,si.gz)(oi.setLimitingAttributeFiltersAttributes({attributes:o})),yield(0,si.gz)(oi.loadInitialElementsPageSuccess({...a,correlation:r}))}catch(e){yield(0,si.gz)(oi.loadInitialElementsPageError({error:e,correlation:r}))}finally{(yield(0,si.By)())&&(n.abort(),yield(0,si.gz)(oi.loadInitialElementsPageCancel({correlation:r})))}}const nl=(0,Ur.createSelector)(Hr,(e=>e.elements.nextPageLoad.status)),rl=(0,Ur.createSelector)(Hr,(e=>e.elements.nextPageLoad.error)),il=(0,Ur.createSelector)(zi,(e=>({...e,offset:e.offset+e.limit}))),ll=(0,Ur.createSelector)(zi,Ti,((e,t)=>e.offset+e.limit<t)),al=(0,Ur.createSelector)(qi,zi,((e,t)=>!G(Si(e,"offset","excludePrimaryLabel"),Si(t,"offset","excludePrimaryLabel"))));function*ol(){yield(0,si.Fm)([oi.loadNextElementsPageRequest.match,oi.loadNextElementsPageCancelRequest.match,oi.loadInitialElementsPageRequest.match],sl)}function*sl(e){const t=yield(0,si.RE)(ci);if(oi.loadNextElementsPageCancelRequest.match(e)||oi.loadInitialElementsPageRequest.match(e))return;const{payload:{correlation:n}}=e;if(yield(0,si.Ys)(ll))try{yield(0,si.gz)(oi.loadNextElementsPageStart({correlation:n}));const e=yield(0,si.Ys)(il),r=yield(0,si.Ys)(qr),i={...e,excludePrimaryLabel:!t.backend.capabilities.supportsElementUris&&"values"===r},l=yield(0,si.RE)(Ji,i);yield(0,si.gz)(oi.loadNextElementsPageSuccess({...l,correlation:n}))}catch(e){yield(0,si.gz)(oi.loadNextElementsPageError({error:e,correlation:n}))}finally{(yield(0,si.By)())&&(yield(0,si.gz)(oi.loadNextElementsPageCancel({correlation:n})))}}function*cl(){yield(0,si.ib)([oi.loadCustomElementsRequest.match],ul)}function*ul(e){const{payload:{correlation:t,options:n}}=e;try{yield(0,si.gz)(oi.loadCustomElementsStart({correlation:t}));const{result:e,canceled:r,anotherRequest:i}=yield(0,si.S3)({result:(0,si.RE)(Ji,n),anotherRequest:(0,si.qn)((e=>oi.loadCustomElementsRequest.match(e)&&(!t||e.payload.correlation===t))),canceled:(0,si.qn)((e=>oi.loadCustomElementsCancelRequest.match(e)&&(!t||e.payload.correlation===t)))});if(e)return yield(0,si.gz)(oi.loadCustomElementsSuccess({...e,correlation:t})),e;(r||i)&&(yield(0,si.gz)(oi.loadCustomElementsCancel({correlation:t})))}catch(e){yield(0,si.gz)(oi.loadCustomElementsError({error:e,correlation:t}))}finally{(yield(0,si.By)())&&(yield(0,si.gz)(oi.loadCustomElementsCancel({correlation:t})))}}function*dl(){yield(0,si.Fm)([oi.loadIrrelevantElementsRequest.match,oi.loadIrrelevantElementsCancelRequest.match],ml)}function*ml(e){if(oi.loadIrrelevantElementsCancelRequest.match(e))return;const t=yield(0,si.RE)(ci),n=new AbortController,{payload:{correlation:r}}=e;try{yield(0,si.gz)(oi.loadIrrelevantElementsStart({correlation:r}));const e=yield(0,si.Ys)(qr),i=yield(0,si.Ys)(qi),l=yield(0,si.Ys)(jr),a="values"===e?{values:l}:{uris:l},o={...i,signal:n.signal,excludePrimaryLabel:!t.backend.capabilities.supportsElementUris&&"values"===e,search:"",elements:a},s=(yield(0,si.RE)(Ji,o)).elements.map((e=>e.title)),c=ui(l,s);yield(0,si.gz)(oi.loadIrrelevantElementsSuccess({elementTitles:c,correlation:r}))}catch(e){yield(0,si.gz)(oi.loadIrrelevantElementsError({error:e,correlation:r}))}finally{(yield(0,si.By)())&&(n.abort(),yield(0,si.gz)(oi.loadIrrelevantElementsCancel({correlation:r})))}}function*gl(e){yield(0,si.rM)(Ci,oi.loadAttributeRequest({correlation:e}));const{error:t}=yield(0,si.S3)({success:(0,si.qn)((t=>oi.loadAttributeSuccess.match(t)&&t.payload.correlation===e)),error:(0,si.qn)((t=>oi.loadAttributeError.match(t)&&t.payload.correlation===e)),cancel:(0,si.qn)((t=>oi.loadAttributeCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*pl(e){const t=yield(0,si.Ys)(fi),n=yield(0,si.RE)(ci),r=yield(0,si.Ys)(qr);if(0===((0,g.isAttributeElementsByRef)(t)?t.uris:t.values).length)return;const i=`initSelection_${e}`;yield(0,si.rM)(ul,oi.loadCustomElementsRequest({options:{elements:t,offset:0,limit:550,search:void 0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===r},correlation:i}));const{error:l}=yield(0,si.S3)({success:(0,si.qn)((e=>oi.loadCustomElementsSuccess.match(e)&&e.payload.correlation===i)),error:(0,si.qn)((e=>oi.loadCustomElementsError.match(e)&&e.payload.correlation===i)),cancel:(0,si.qn)((e=>oi.loadCustomElementsCancel.match(e)&&e.payload.correlation===i))});if(l)throw l.payload.error}function*hl(e){yield(0,si.rM)(tl,oi.loadInitialElementsPageRequest({correlation:e}));const{error:t}=yield(0,si.S3)({success:(0,si.qn)((t=>oi.loadInitialElementsPageSuccess.match(t)&&t.payload.correlation===e)),error:(0,si.qn)((t=>oi.loadInitialElementsPageError.match(t)&&t.payload.correlation===e)),cancel:(0,si.qn)((t=>oi.loadInitialElementsPageCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*fl(e){const t=`initTotalCount_${e}`,n=yield(0,si.RE)(ci),r=yield(0,si.Ys)(qr);yield(0,si.rM)(ul,oi.loadCustomElementsRequest({options:{limit:1,includeTotalCountWithoutFilters:!0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===r},correlation:t}));const{success:i,error:l}=yield(0,si.S3)({success:(0,si.qn)((e=>oi.loadCustomElementsSuccess.match(e)&&e.payload.correlation===t)),error:(0,si.qn)((e=>oi.loadCustomElementsError.match(e)&&e.payload.correlation===t)),cancel:(0,si.qn)((e=>oi.loadCustomElementsCancel.match(e)&&e.payload.correlation===t))});if(l)throw l.payload.error;i&&(yield(0,si.gz)(oi.setElementsTotalCount({totalCount:i.payload.totalCount})))}function bl(e){return I(e)||e.every((e=>!!(0,g.isNegativeAttributeFilter)(e.attributeFilter)&&(0,g.attributeElementsIsEmpty)((0,g.filterAttributeElements)(e.attributeFilter))))}function*El(e){yield(0,si.rM)(ml,oi.loadIrrelevantElementsRequest({correlation:e}));const{error:t}=yield(0,si.S3)({success:(0,si.qn)((t=>oi.loadIrrelevantElementsSuccess.match(t)&&t.payload.correlation===e)),error:(0,si.qn)((t=>oi.loadIrrelevantElementsError.match(t)&&t.payload.correlation===e)),cancel:(0,si.qn)((t=>oi.loadIrrelevantElementsCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*vl(){yield(0,si.Fm)(oi.init.match,yl)}function*yl(e){const{payload:{correlation:t}}=e;try{yield(0,si.gz)(oi.initStart({correlation:t}));const e=yield(0,si.RE)(ci),n=yield(0,si.Ys)(gi),r=yield(0,si.Ys)(Vi),i=yield(0,si.Ys)(ni),l=e.backend.capabilities.supportsShowingFilteredElements,a=!bl(r),o=[pl,hl];n?.length>0?yield(0,si.RE)(gl,t):o.unshift(gl),a&&o.push(fl),a&&!i&&l&&o.push(El),yield(0,si.$6)(o.map((e=>(0,si.RE)(e,t)))),yield(0,si.gz)(oi.initSuccess({correlation:t}))}catch(e){yield(0,si.gz)(oi.initError({error:e,correlation:t}))}finally{(yield(0,si.By)())&&(yield(0,si.$6)([(0,si.gz)(oi.initCancel({correlation:t}))]))}}function*Cl(){yield(0,si.Fm)(oi.initTotalCount.match,Sl)}function*Sl(e){const{payload:{correlation:t}}=e;try{yield(0,si.gz)(oi.initTotalCountStart({correlation:t})),yield(0,si.RE)(fl,t),yield(0,si.gz)(oi.initTotalCountSuccess({correlation:t}))}catch(e){yield(0,si.gz)(oi.initTotalCountError({error:e,correlation:t}))}finally{(yield(0,si.By)())&&(yield(0,si.gz)(oi.initTotalCountCancel({correlation:t})))}}function*Il(){try{yield(0,si.$6)([yi,el,ol,cl,dl,vl,Cl].map((e=>(0,si.rM)(e))))}catch(e){console.error("Root saga failed",e)}}const wl=[oi.loadAttributeError.type,oi.loadInitialElementsPageError.type,oi.loadNextElementsPageError.type,oi.loadCustomElementsError.type,oi.initError.type],kl=(0,j.b)(Lr.ZP),Fl=(0,Ur.createSelector)(Hr,(e=>e.initialization.status)),xl=(0,Ur.createSelector)(Hr,(e=>e.initialization.error)),Pl=(0,Ur.createSelector)(Hr,(e=>e.elements.initialPageLoad.status)),Dl=(0,Ur.createSelector)(Hr,(e=>e.elements.initialPageLoad.error));function Al(e,t){const n=t.getCause(),r=n?`\nInner error: ${n}`:"";console.error(`Error while ${e}: ${t.getMessage()}${r}`)}function Ol(){let e=[];return{invoke:t=>{e.forEach((e=>e(t)))},subscribe:t=>(e.push(t),function(){e=e.filter((e=>e!=t))})}}class Nl{redux;config;callbacks;constructor(e){this.config=e,this.initializeBridge()}initializeBridge=()=>{this.callbacks=(()=>{const{registerCallback:e,registrations:t,unsubscribeAll:n}=(()=>{const e=[];return{registrations:{initStart:Ol(),initSuccess:Ol(),initError:Ol(),initCancel:Ol(),initTotalCountStart:Ol(),initTotalCountSuccess:Ol(),initTotalCountError:Ol(),initTotalCountCancel:Ol(),loadAttributeStart:Ol(),loadAttributeSuccess:Ol(),loadAttributeError:Ol(),loadAttributeCancel:Ol(),loadInitialElementsPageStart:Ol(),loadInitialElementsPageSuccess:Ol(),loadInitialElementsPageError:Ol(),loadInitialElementsPageCancel:Ol(),loadNextElementsPageStart:Ol(),loadNextElementsPageSuccess:Ol(),loadNextElementsPageError:Ol(),loadNextElementsPageCancel:Ol(),loadCustomElementsStart:Ol(),loadCustomElementsSuccess:Ol(),loadCustomElementsError:Ol(),loadCustomElementsCancel:Ol(),loadIrrelevantElementsStart:Ol(),loadIrrelevantElementsSuccess:Ol(),loadIrrelevantElementsError:Ol(),loadIrrelevantElementsCancel:Ol(),selectionChanged:Ol(),selectionCommitted:Ol(),update:Ol()},registerCallback:(t,n)=>{const r=n.subscribe(t);return e.push(r),r},unsubscribeAll:()=>{e.forEach((e=>{e()}))}}})();return{registrations:t,registerCallback:e,unsubscribeAll:n,eventListener:(e,n)=>{oi.initStart.match(e)?t.initStart.invoke(e.payload):oi.initSuccess.match(e)?t.initSuccess.invoke(e.payload):oi.initError.match(e)?(Al("initializing",e.payload.error),t.initError.invoke(e.payload)):oi.initCancel.match(e)&&t.initCancel.invoke(e.payload),oi.initTotalCountStart.match(e)?t.initTotalCountStart.invoke(e.payload):oi.initTotalCountSuccess.match(e)?t.initTotalCountSuccess.invoke(e.payload):oi.initTotalCountError.match(e)?(Al("initializing total count",e.payload.error),t.initTotalCountError.invoke(e.payload)):oi.initTotalCountCancel.match(e)&&t.initTotalCountCancel.invoke(e.payload),oi.loadAttributeStart.match(e)?t.loadAttributeStart.invoke(e.payload):oi.loadAttributeSuccess.match(e)?t.loadAttributeSuccess.invoke(e.payload):oi.loadAttributeError.match(e)?(Al("loading attribute",e.payload.error),t.loadAttributeError.invoke(e.payload)):oi.loadAttributeCancel.match(e)&&t.loadAttributeCancel.invoke(e.payload),oi.loadInitialElementsPageStart.match(e)?t.loadInitialElementsPageStart.invoke(e.payload):oi.loadInitialElementsPageSuccess.match(e)?t.loadInitialElementsPageSuccess.invoke(e.payload):oi.loadInitialElementsPageError.match(e)?(Al("loading initial elements page",e.payload.error),t.loadInitialElementsPageError.invoke(e.payload)):oi.loadInitialElementsPageCancel.match(e)&&t.loadInitialElementsPageCancel.invoke(e.payload),oi.loadNextElementsPageStart.match(e)?t.loadNextElementsPageStart.invoke(e.payload):oi.loadNextElementsPageSuccess.match(e)?t.loadNextElementsPageSuccess.invoke(e.payload):oi.loadNextElementsPageError.match(e)?(Al("loading next elements page",e.payload.error),t.loadNextElementsPageError.invoke(e.payload)):oi.loadNextElementsPageCancel.match(e)&&t.loadNextElementsPageCancel.invoke(e.payload),oi.loadCustomElementsStart.match(e)?t.loadCustomElementsStart.invoke(e.payload):oi.loadCustomElementsSuccess.match(e)?t.loadCustomElementsSuccess.invoke(e.payload):oi.loadCustomElementsError.match(e)?(Al("loading custom elements",e.payload.error),t.loadCustomElementsError.invoke(e.payload)):oi.loadCustomElementsCancel.match(e)&&t.loadCustomElementsCancel.invoke(e.payload),oi.loadIrrelevantElementsStart.match(e)?t.loadIrrelevantElementsStart.invoke(e.payload):oi.loadIrrelevantElementsSuccess.match(e)?t.loadIrrelevantElementsSuccess.invoke(e.payload):oi.loadIrrelevantElementsError.match(e)?(Al("loading irrelevant elements",e.payload.error),t.loadIrrelevantElementsError.invoke(e.payload)):oi.loadIrrelevantElementsCancel.match(e)&&t.loadIrrelevantElementsCancel.invoke(e.payload),[oi.changeSelection.match,oi.revertSelection.match,oi.invertSelection.match,oi.clearSelection.match].some((t=>t(e)))&&t.selectionChanged.invoke({selection:n(Xr)}),oi.commitSelection.match(e)&&t.selectionCommitted.invoke({selection:n(ei)}),[oi.initStart.match,oi.initSuccess.match,oi.initError.match,oi.initCancel.match,oi.loadAttributeStart.match,oi.loadAttributeSuccess.match,oi.loadAttributeError.match,oi.loadAttributeCancel.match,oi.loadInitialElementsPageStart.match,oi.loadInitialElementsPageSuccess.match,oi.loadInitialElementsPageError.match,oi.loadInitialElementsPageCancel.match,oi.loadNextElementsPageStart.match,oi.loadNextElementsPageSuccess.match,oi.loadNextElementsPageError.match,oi.loadNextElementsPageCancel.match,oi.loadIrrelevantElementsStart.match,oi.loadIrrelevantElementsSuccess.match,oi.loadIrrelevantElementsError.match,oi.loadIrrelevantElementsCancel.match,oi.changeSelection.match,oi.revertSelection.match,oi.invertSelection.match,oi.clearSelection.match,oi.commitSelection.match,oi.setLimit.match,oi.setOrder.match,oi.setSearch.match,oi.setLimitingMeasures.match,oi.setLimitingAttributeFilters.match,oi.setLimitingDateFilters.match].some((t=>t(e)))&&t.update.invoke()}}})(),this.redux=function(e){const t=kl({context:{attributeFilterContext:e}}),n=(0,g.filterObjRef)(e.attributeFilter),r=(0,g.filterAttributeElements)(e.attributeFilter),i=(0,g.isAttributeElementsByValue)(r)?"values":"uris",l=(0,g.isAttributeElementsByValue)(r)?r.values:r.uris,a=(0,g.isNegativeAttributeFilter)(e.attributeFilter),o=(0,Rr.xC)({preloadedState:{...ii,displayFormRef:n,elementsForm:i,selection:{commited:{keys:l,isInverted:a,irrelevantKeys:[]},working:{keys:l,isInverted:a,irrelevantKeys:[]}},config:{hiddenElements:e.hiddenElements,staticElements:e.staticElements}},reducer:ai,middleware:n=>{return n({thunk:!1,serializableCheck:{ignoredActions:wl,ignoredPaths:["initialization.error","attribute.error","elements.initialPageLoad.error","elements.nextPageLoad.error"]}}).concat([t,(r=e.eventListener,e=>t=>n=>{const i=t(n);return r(i,(t=>t(e.getState()))),i})]);var r},devTools:{name:"AttributeFilter state"}}),s=t.run(Il);return{context:e,cancelRootSaga:()=>{s.cancel()},dispatch:e=>{o.dispatch(e)},select:e=>e(o.getState())}}({...this.config,eventListener:(e,t)=>{this.callbacks.eventListener(e,t)}})};init=e=>{this.redux.dispatch(oi.init({correlation:e}))};getInitStatus=()=>this.redux.select(Fl);getInitError=()=>this.redux.select(xl);onInitStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initStart);onInitSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initSuccess);onInitError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initError);onInitCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initCancel);initTotalCount=e=>{this.redux.dispatch(oi.initTotalCount({correlation:e}))};getInitTotalCountStatus=()=>this.redux.select(Oi);getInitTotalCountError=()=>this.redux.select(Ni);onInitTotalCountStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountStart);onInitTotalCountSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountSuccess);onInitTotalCountError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountError);onInitTotalCountCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountCancel);loadAttribute=e=>{this.redux.dispatch(oi.loadAttributeRequest({correlation:e}))};cancelAttributeLoad=()=>{this.redux.dispatch(oi.loadAttributeCancelRequest())};getAttribute=()=>this.redux.select(Ii);getAttributeStatus=()=>this.redux.select(wi);getAttributeError=()=>this.redux.select(ki);onLoadAttributeStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeStart);onLoadAttributeSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeSuccess);onLoadAttributeError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeError);onLoadAttributeCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeCancel);loadInitialElementsPage=e=>{this.redux.dispatch(oi.loadInitialElementsPageRequest({correlation:e}))};cancelInitialElementsPageLoad=()=>{this.redux.dispatch(oi.loadInitialElementsPageCancelRequest())};getInitialElementsPageStatus=()=>this.redux.select(Pl);getInitialElementsPageError=()=>this.redux.select(Dl);onLoadInitialElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageStart);onLoadInitialElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageSuccess);onLoadInitialElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageError);onLoadInitialElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageCancel);loadNextElementsPage=e=>{this.redux.dispatch(oi.loadNextElementsPageRequest({correlation:e}))};cancelNextElementsPageLoad(){this.redux.dispatch(oi.loadNextElementsPageCancelRequest())}getNextElementsPageStatus=()=>this.redux.select(nl);getNextElementsPageError=()=>this.redux.select(rl);onLoadNextElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageStart);onLoadNextElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageSuccess);onLoadNextElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageError);onLoadNextElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageCancel);loadCustomElements=(e,t)=>{this.redux.dispatch(oi.loadCustomElementsRequest({options:e,correlation:t}))};cancelCustomElementsLoad(e){this.redux.dispatch(oi.loadCustomElementsCancelRequest({correlation:e}))}onLoadCustomElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsStart);onLoadCustomElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsSuccess);onLoadCustomElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsError);onLoadCustomElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsCancel);loadIrrelevantElements=e=>{this.redux.dispatch(oi.loadIrrelevantElementsRequest({correlation:e}))};cancelIrrelevantElementsLoad(e){this.redux.dispatch(oi.loadIrrelevantElementsCancelRequest({correlation:e}))}onLoadIrrelevantElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsStart);onLoadIrrelevantElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsSuccess);onLoadIrrelevantElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsError);onLoadIrrelevantElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsCancel);getOffset=()=>this.redux.select(Bi);setSearch=e=>{this.redux.dispatch(oi.setSearch({search:e}))};getSearch=()=>this.redux.select(Ri);setLimit=e=>{this.redux.dispatch(oi.setLimit({limit:e}))};getLimit=()=>this.redux.select(_i);setOrder=e=>{this.redux.dispatch(oi.setOrder({order:e}))};getOrder=()=>this.redux.select(Li);setLimitingMeasures=e=>{this.redux.dispatch(oi.setLimitingMeasures({filters:e}))};getLimitingMeasures=()=>this.redux.select(Hi);setLimitingAttributeFilters=e=>{this.redux.dispatch(oi.setLimitingAttributeFilters({filters:e}))};getLimitingAttributeFilters=()=>this.redux.select(Vi);setLimitingDateFilters=e=>{this.redux.dispatch(oi.setLimitingDateFilters({filters:e}))};getLimitingDateFilters=()=>this.redux.select(Zi);getAllElements=()=>this.redux.select(Di);getElementsByKey=e=>{const t=this.redux.select(Pi);return Fi(e,t)};getTotalCount=()=>this.redux.select(Ai);getTotalCountWithCurrentSettings=()=>this.redux.select(Ti);getLimitingAttributeFiltersAttributes=()=>this.redux.select(Wi);changeMultiSelection=({keys:e,isInverted:t,irrelevantKeys:n})=>{this.redux.dispatch(oi.changeSelection({selection:e,isInverted:t,irrelevantSelection:n}))};revertMultiSelection=()=>{this.redux.dispatch(oi.revertSelection())};commitMultiSelection=()=>{this.redux.dispatch(oi.commitSelection())};invertMultiSelection=()=>{this.redux.dispatch(oi.invertSelection())};clearMultiSelection=()=>{this.redux.dispatch(oi.clearSelection())};getWorkingMultiSelection=()=>this.redux.select(Xr);getCommittedMultiSelection=()=>this.redux.select(ei);changeSingleSelection=e=>{this.redux.dispatch(oi.changeSelection({isInverted:!1,selection:Mr([e])}))};revertSingleSelection=()=>{this.redux.dispatch(oi.revertSelection())};commitSingleSelection=()=>{this.redux.dispatch(oi.commitSelection())};getWorkingSingleSelection=()=>{const[e,...t]=this.redux.select(Kr);return(0,Tr.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};getCommittedSingleSelection=()=>{const[e,...t]=this.redux.select(jr);return(0,Tr.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};onMultiSelectionChanged=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionChanged);onMultiSelectionCommitted=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionCommitted);onSingleSelectionChanged=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionChanged);onSingleSelectionCommitted=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionCommitted);getIsWorkingSelectionEmpty=()=>this.redux.select(ni);getIsWorkingSelectionChanged=()=>this.redux.select(ti);getFilter=()=>this.redux.select(Ei);onUpdate=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.update);isLoadElementsOptionsChanged=()=>this.redux.select(al)}class Tl{bridge;config;constructor(e){this.config=e,this.bridge=new Nl(e)}validateStaticElementsLoad=()=>{(0,Tr.kG)(!(this.config.staticElements?.length&&this.getLimitingAttributeFilters()?.length),"Using limitingAttributeFilters is not supported when using static attribute elements"),(0,Tr.kG)(!(this.config.staticElements?.length&&this.getLimitingDateFilters()?.length),"Using limitingDateFilters is not supported when using static attribute elements"),(0,Tr.kG)(!(this.config.staticElements?.length&&this.getLimitingMeasures()?.length),"Using limitingMeasures is not supported when using static attribute elements")};init=(e=(0,Nr.Z)())=>{this.validateStaticElementsLoad(),this.bridge.init(e)};onInitStart=e=>this.bridge.onInitStart(e);onInitSuccess=e=>this.bridge.onInitSuccess(e);onInitError=e=>this.bridge.onInitError(e);onInitCancel=e=>this.bridge.onInitCancel(e);getInitStatus=()=>this.bridge.getInitStatus();getInitError=()=>this.bridge.getInitError();initTotalCount=(e=(0,Nr.Z)())=>{this.bridge.initTotalCount(e)};getInitTotalCountStatus=()=>this.bridge.getInitTotalCountStatus();getInitTotalCountError=()=>this.bridge.getInitTotalCountError();onInitTotalCountStart=e=>this.bridge.onInitTotalCountStart(e);onInitTotalCountSuccess=e=>this.bridge.onInitTotalCountSuccess(e);onInitTotalCountError=e=>this.bridge.onInitTotalCountError(e);onInitTotalCountCancel=e=>this.bridge.onInitTotalCountCancel(e);loadAttribute=(e=(0,Nr.Z)())=>{this.bridge.loadAttribute(e)};cancelAttributeLoad=()=>{this.bridge.cancelAttributeLoad()};getAttribute=()=>this.bridge.getAttribute();getAttributeError=()=>this.bridge.getAttributeError();getAttributeStatus=()=>this.bridge.getAttributeStatus();onLoadAttributeStart=e=>this.bridge.onLoadAttributeStart(e);onLoadAttributeSuccess=e=>this.bridge.onLoadAttributeSuccess(e);onLoadAttributeError=e=>this.bridge.onLoadAttributeError(e);onLoadAttributeCancel=e=>this.bridge.onLoadAttributeCancel(e);loadInitialElementsPage=(e=(0,Nr.Z)())=>{(0,Tr.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadInitialElementsPage() before successful initialization."),this.validateStaticElementsLoad(),this.bridge.loadInitialElementsPage(e)};cancelInitialElementsPageLoad(){this.bridge.cancelInitialElementsPageLoad()}getInitialElementsPageStatus=()=>this.bridge.getInitialElementsPageStatus();getInitialElementsPageError=()=>this.bridge.getInitialElementsPageError();onLoadInitialElementsPageStart=e=>this.bridge.onLoadInitialElementsPageStart(e);onLoadInitialElementsPageSuccess=e=>this.bridge.onLoadInitialElementsPageSuccess(e);onLoadInitialElementsPageError=e=>this.bridge.onLoadInitialElementsPageError(e);onLoadInitialElementsPageCancel=e=>this.bridge.onLoadInitialElementsPageCancel(e);loadNextElementsPage=(e=(0,Nr.Z)())=>{(0,Tr.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadNextElementsPage() before successful initialization."),(0,Tr.kG)("success"===this.bridge.getInitialElementsPageStatus(),"Cannot call loadNextElementsPage() before loadInitialElementsPage() completes."),(0,Tr.kG)(!this.bridge.isLoadElementsOptionsChanged(),"Cannot call loadNextElementsPage() when load element options were changed. When options are changed, you should call loadInitialElementsPage() first."),this.bridge.loadNextElementsPage(e)};cancelNextElementsPageLoad(){this.bridge.cancelNextElementsPageLoad()}getNextElementsPageStatus=()=>this.bridge.getNextElementsPageStatus();getNextElementsPageError=()=>this.bridge.getNextElementsPageError();onLoadNextElementsPageStart=e=>this.bridge.onLoadNextElementsPageStart(e);onLoadNextElementsPageSuccess=e=>this.bridge.onLoadNextElementsPageSuccess(e);onLoadNextElementsPageError=e=>this.bridge.onLoadNextElementsPageError(e);onLoadNextElementsPageCancel=e=>this.bridge.onLoadNextElementsPageCancel(e);loadCustomElements=(e,t)=>{this.bridge.loadCustomElements(e,t)};cancelCustomElementsLoad(e){this.bridge.cancelCustomElementsLoad(e)}onLoadCustomElementsStart=e=>this.bridge.onLoadCustomElementsStart(e);onLoadCustomElementsSuccess=e=>this.bridge.onLoadCustomElementsSuccess(e);onLoadCustomElementsError=e=>this.bridge.onLoadCustomElementsError(e);onLoadCustomElementsCancel=e=>this.bridge.onLoadCustomElementsCancel(e);loadIrrelevantElements=e=>{this.bridge.loadIrrelevantElements(e)};cancelIrrelevantElementsLoad(e){this.bridge.cancelIrrelevantElementsLoad(e)}onLoadIrrelevantElementsStart=e=>this.bridge.onLoadIrrelevantElementsStart(e);onLoadIrrelevantElementsSuccess=e=>this.bridge.onLoadIrrelevantElementsSuccess(e);onLoadIrrelevantElementsError=e=>this.bridge.onLoadIrrelevantElementsError(e);onLoadIrrelevantElementsCancel=e=>this.bridge.onLoadIrrelevantElementsCancel(e);getOffset=()=>this.bridge.getOffset();setSearch=e=>{this.bridge.setSearch(e)};getSearch=()=>this.bridge.getSearch();setLimit=e=>{this.bridge.setLimit(e)};getLimit=()=>this.bridge.getLimit();setOrder=e=>{this.bridge.setOrder(e)};getOrder=()=>this.bridge.getOrder();setLimitingMeasures=e=>{this.bridge.setLimitingMeasures(e)};getLimitingMeasures=()=>this.bridge.getLimitingMeasures();setLimitingAttributeFilters=e=>{this.bridge.setLimitingAttributeFilters(e)};getLimitingAttributeFilters=()=>this.bridge.getLimitingAttributeFilters();setLimitingDateFilters=e=>{this.bridge.setLimitingDateFilters(e)};getLimitingDateFilters=()=>this.bridge.getLimitingDateFilters();getAllElements=()=>this.bridge.getAllElements();getElementsByKey=e=>this.bridge.getElementsByKey(e);getTotalElementsCount=()=>this.bridge.getTotalCount();getTotalElementsCountWithCurrentSettings=()=>this.bridge.getTotalCountWithCurrentSettings();getLimitingAttributeFiltersAttributes=()=>this.bridge.getLimitingAttributeFiltersAttributes();getFilter=()=>this.bridge.getFilter();onUpdate=e=>this.bridge.onUpdate(e)}class Ml extends Tl{constructor(e){super(e)}changeSelection=e=>{this.bridge.changeMultiSelection(e)};revertSelection=()=>{this.bridge.revertMultiSelection()};commitSelection=()=>{this.bridge.commitMultiSelection()};invertSelection=()=>{this.bridge.invertMultiSelection()};clearSelection=()=>{this.bridge.clearMultiSelection()};getWorkingSelection=()=>this.bridge.getWorkingMultiSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedMultiSelection();onSelectionChanged=e=>this.bridge.onMultiSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onMultiSelectionCommitted(e)}class Rl extends Tl{static sanitizeConfig(e){const t=(0,g.filterAttributeElements)(e.attributeFilter),n=((0,g.isAttributeElementsByRef)(t)?t.uris:t.values)[0],r=(0,g.isAttributeElementsByRef)(t)?{uris:[n]}:{values:[n]};return{...e,attributeFilter:(0,g.isPositiveAttributeFilter)(e.attributeFilter)?(0,g.newPositiveAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),r):(0,g.newNegativeAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),r)}}constructor(e){super(Rl.sanitizeConfig(e))}changeSelection=e=>{this.bridge.changeSingleSelection(e)};revertSelection=()=>{this.bridge.revertSingleSelection()};commitSelection=()=>{this.bridge.commitSingleSelection()};getWorkingSelection=()=>this.bridge.getWorkingSingleSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedSingleSelection();onSelectionChanged=e=>this.bridge.onSingleSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onSingleSelectionCommitted(e)}function Ll(e,t,n,r={selectionMode:"multi"}){const{selectionMode:i,hiddenElements:l,staticElements:a}=r;return"multi"===i?new Ml({backend:e,workspace:t,attributeFilter:n,hiddenElements:l,staticElements:a}):new Rl({backend:e,workspace:t,attributeFilter:n,hiddenElements:l,staticElements:a})}const _l=(e,t)=>()=>{throw new R.UnexpectedSdkError(`Component: ${e} is missing in the ${t}.`)};function Bl(e,t){return e.formattedTitle||e.title||`(${t.formatMessage({id:"empty_value"})})`}function Vl(e,t){return e.map((e=>Bl(e,t))).join(", ")}function Hl(e){return e.uri}const Zl=(0,W.createContext)({ErrorComponent:_l("ErrorComponent","AttributeFilterComponentsContext"),LoadingComponent:_l("LoadingComponent","AttributeFilterComponentsContext"),DropdownButtonComponent:_l("DropdownButtonComponent","AttributeFilterComponentsContext"),DropdownBodyComponent:_l("DropdownBodyComponent","AttributeFilterComponentsContext"),DropdownActionsComponent:_l("DropdownActionsComponent","AttributeFilterComponentsContext"),ElementsSearchBarComponent:_l("ElementsSearchBarComponent","AttributeFilterComponentsContext"),ElementsSelectComponent:_l("ElementsSelectComponent","AttributeFilterComponentsContext"),ElementsSelectLoadingComponent:_l("ElementsSelectLoadingComponent","AttributeFilterComponentsContext"),ElementsSelectItemComponent:_l("ElementsSelectItemComponent","AttributeFilterComponentsContext"),ElementsSelectErrorComponent:_l("ElementsSelectErrorComponent","AttributeFilterComponentsContext"),ElementsSelectActionsComponent:_l("ElementsSelectActionsComponent","AttributeFilterComponentsContext"),EmptyResultComponent:_l("EmptyResultComponent","AttributeFilterComponentsContext"),StatusBarComponent:_l("StatusBarComponent","AttributeFilterComponentsContext")});Zl.displayName="AttributeFilterComponentsContext";const ql=()=>(0,W.useContext)(Zl),zl=e=>{const{children:t,...n}=e;return W.createElement(Zl.Provider,{value:n},t)};var Wl=n(23279),Gl=n(23560);const Ul=e=>{const{backend:t,workspace:n,filter:r,hiddenElements:i,staticElements:l}=e,[,a]=(0,W.useState)(0),o=()=>{a((e=>e+1))},s=(0,W.useRef)(),c=(0,W.useCallback)((()=>{const e=Ll(t.withTelemetry("AttributeFilter",{workspace:n,filter:r,hiddenElements:i,staticElements:l}),n,r,{selectionMode:"multi",hiddenElements:i,staticElements:l});s.current=e}),[t,n,r,i,l]);s.current||c();const u=s.current,d=(0,R.usePrevious)(e);return(0,W.useEffect)((()=>{const e=u.onUpdate((()=>{o()}));return t===d.backend&&n===d.workspace&&G((0,g.filterObjRef)(r),(0,g.filterObjRef)(u.getFilter()))&&G(l,d.staticElements)&&G(i,d.hiddenElements)||(c(),o()),()=>{e()}}),[t,n,r,l,i,d,u,c]),u},Kl="reset",$l="parentFilters";const Yl=e=>{const{backend:t,workspace:n,filter:r,connectToPlaceholder:i,parentFilters:l,parentFilterOverAttribute:a,resetOnParentFilterChange:o=!0,onApply:s,onError:c,hiddenElements:u,staticElements:d,elementsOptions:m,selectionMode:p="multi",selectFirst:h=!1}=e,f=(0,R.useBackendStrict)(t,"AttributeFilter"),b=(0,R.useWorkspaceStrict)(n,"AttributeFilter"),E=f.capabilities.supportsSettingConnectingAttributes,v=f.capabilities.supportsKeepingDependentFiltersSelection,y=f.capabilities.supportsCircularDependencyInFilters,C=f.capabilities.supportsShowingFilteredElements,S=f.capabilities.supportsSingleSelectDependentFilters,{shouldReloadElements:w,setShouldReloadElements:k}=Ql(v,y),{shouldIncludeLimitingFilters:F,setShouldIncludeLimitingFilters:x}=Jl(C),{filter:P,setConnectedPlaceholderValue:D}=((e,t)=>{const[n,r]=(0,R.usePlaceholder)(t),i=n??e,l=(0,W.useCallback)((e=>{t&&r(e)}),[t,r]);return{filter:i,setConnectedPlaceholderValue:l}})(r,i),A=((e,t,n)=>{const r=(0,R.useResolveValueWithPlaceholders)(e);return(0,W.useMemo)((()=>n?((e,t)=>{if(!e||!t)return[];const n=Gl(t)?t:()=>t;return e.map(((e,t)=>({attributeFilter:e,overAttribute:n(e,t)}))).filter((e=>!(0,g.filterIsEmpty)(e.attributeFilter)))})(r,t):(e=>e?e.map((e=>({attributeFilter:e,overAttribute:null}))):[])(r)),[n,r,t])})(l,a,E),O=Ul({backend:f,filter:P,workspace:b,hiddenElements:u,staticElements:d}),N=function(e,t,n){const r=(e=>{const t=e.getWorkingSelection(),n=e.getCommittedSelection(),r=e.getInitStatus();return{attributeFilter:e.getFilter(),initialization:{status:e.getInitStatus(),error:e.getInitError()},attribute:{data:e.getAttribute(),status:e.getAttributeStatus(),error:e.getAttributeError()},elements:{data:e.getAllElements(),totalCount:e.getTotalElementsCount(),totalCountWithCurrentSettings:e.getTotalElementsCountWithCurrentSettings(),initialPageLoad:{status:e.getInitialElementsPageStatus(),error:e.getInitialElementsPageError()},nextPageLoad:{status:e.getNextElementsPageStatus(),error:e.getNextElementsPageError()},options:{search:e.getSearch(),offset:e.getOffset(),limit:e.getLimit(),limitingAttributeFilters:e.getLimitingAttributeFilters(),limitingDateFilters:e.getLimitingDateFilters(),limitingMeasures:e.getLimitingMeasures(),order:e.getOrder()}},selection:{committed:{elements:"success"===r?e.getElementsByKey(n.keys):[],keys:n.keys,isInverted:n.isInverted,irrelevantElements:"success"===r?e.getElementsByKey(n.irrelevantKeys):[]},working:{elements:"success"===r?e.getElementsByKey(t.keys):[],keys:t.keys,isInverted:t.isInverted,isChanged:e.isWorkingSelectionChanged(),isEmpty:e.isWorkingSelectionEmpty(),irrelevantElements:"success"===r?e.getElementsByKey(t.irrelevantKeys):[]}}}})(e),i=r.initialization.status,l=r.initialization.error,a="loading"===i,o=r.attribute.data,s=r.elements.initialPageLoad.status,c=r.elements.initialPageLoad.error,u="loading"===s,d=r.elements.nextPageLoad.status,m=r.elements.nextPageLoad.error,p="loading"===d,h=r.elements.data,f=r.elements.totalCount,b=r.elements.totalCountWithCurrentSettings,E=r.selection.working.isChanged,v=r.selection.working.isEmpty,y=r.selection.working.isInverted,C=r.selection.working.elements,S=r.selection.committed.isInverted,I=r.selection.committed.elements,w=r.elements.options.search,k=r.elements.options.limit,F=r.elements.options.limitingAttributeFilters,x=h.length<b?Math.min(k,b-h.length):0,P=C.length>500||!E||!y&&v,D=bl(F),A=n&&"success"===s&&!D,O=function(e){const[t,n]=(0,W.useState)(!1);return(0,W.useEffect)((()=>{const t=[e.onLoadInitialElementsPageStart(r),e.onLoadInitialElementsPageSuccess(i),e.onLoadInitialElementsPageError(i),e.onLoadInitialElementsPageCancel(i),e.onInitStart(r),e.onInitSuccess(i),e.onInitError(i),e.onInitCancel(i)];function r(e){e.correlation===$l&&n(!0)}function i(e){e.correlation===$l&&n(!1)}return()=>{t.forEach((e=>{e()}))}}),[e]),t}(e),N=e.getLimitingAttributeFiltersAttributes(),T=o?.displayForms??[],M=(0,g.filterObjRef)(r.attributeFilter);return{attribute:o,offset:r.elements.options.offset,limit:k,isFiltering:O,isInitializing:a,initError:l,isLoadingInitialElementsPage:u,initialElementsPageError:c,isLoadingNextElementsPage:p,nextElementsPageError:m,nextElementsPageSize:x,elements:h,totalElementsCount:f,totalElementsCountWithCurrentSettings:b,isApplyDisabled:P,isWorkingSelectionInverted:y,workingSelectionElements:C,isCommittedSelectionInverted:S,committedSelectionElements:I,searchString:w,isFilteredByParentFilters:A,parentFilterAttributes:N,displayForms:T,currentDisplayFormRef:M,enableShowingFilteredElements:t,irrelevantSelection:t?r.selection.working.irrelevantElements:[]}}(O,C,F),T=function(e,t,n,r){const i="single"===e,l=I(n),a=(0,g.isPositiveAttributeFilter)(t)&&(0,g.attributeElementsCount)((0,g.filterAttributeElements)(t))<2;if(i){if(!a)return console.error("Provided 'filter' or 'connectToPlaceholder' property is not compatible with given single selection mode. It needs to be positive filter with max one item selected in attribute elements"),!1;if(!l&&!r)return console.error("Parent filtering can not be used together with single selection mode. Use only one of these properties at the same time."),!1}return!0}(p,P,A,S)?{}:{initError:new R.UnexpectedSdkError};!function(e,t){const{onError:n}=t;(0,W.useEffect)((()=>{function t(e){n?.(e.error)}const r=[e.onInitError(t),e.onLoadAttributeError(t),e.onLoadInitialElementsPageError(t),e.onLoadNextElementsPageError(t),e.onLoadCustomElementsError(t)];return()=>{r.forEach((e=>{e()}))}}),[e,n])}(O,{onError:c}),function(e,t,n,r){const{filter:i,limitingAttributeFilters:l,limit:a,resetOnParentFilterChange:o,setConnectedPlaceholderValue:s,onApply:c,selectionMode:u,setShouldReloadElements:d}=t;(0,W.useEffect)((()=>{l.length>0&&e.setLimitingAttributeFilters(l),a&&e.setLimit(a),e.init()}),[e]),(0,W.useEffect)((()=>{const t=!G(l,e.getLimitingAttributeFilters()),a=!G(i,e.getFilter()),m={filter:i,limitingAttributeFilters:l,limitingAttributesChanged:t,filterChanged:a,setConnectedPlaceholderValue:s,onApply:c,selectionMode:u,setShouldReloadElements:d},p=o?function(e,{filter:t,limitingAttributeFilters:n,limitingAttributesChanged:r,filterChanged:i,setConnectedPlaceholderValue:l,onApply:a,selectionMode:o},s){const c=0===n.length||!s;if((0,Tr.kG)(c,"It is not possible to automatically reset dependent filters with current backend. Please set attribute filter to not reset on parent filter change (resetOnParentFilterChange prop)."),r){e.changeSelection({keys:[],isInverted:"single"!==o}),e.setLimitingAttributeFilters(n),e.commitSelection();const t=e.getFilter(),r=e.getCommittedSelection()?.isInverted;return l(t),a?.(t,r),"init-parent"}if(i){const n=(0,g.filterAttributeElements)(t),r=(0,g.isAttributeElementsByValue)(n)?n.values:n.uris,i=(0,g.isNegativeAttributeFilter)(t);return e.changeSelection({keys:r,isInverted:i}),e.commitSelection(),"init-self"}}(e,m,r):function(e,{filter:t,limitingAttributeFilters:n,limitingAttributesChanged:r,filterChanged:i,setConnectedPlaceholderValue:l,setShouldReloadElements:a},o){if(r||i){const i=(0,g.filterAttributeElements)(t),s=(0,g.isAttributeElementsByValue)(i)?i.values:i.uris,c=(0,g.isNegativeAttributeFilter)(t),u=e.getCommittedSelection().irrelevantKeys,d=ui(u,s),m=e.getLimitingAttributeFilters().length!==n.length,p=o&&(m||!I(d)),h=p?{irrelevantKeys:[]}:{};return e.changeSelection({keys:s,isInverted:c,...h}),e.setLimitingAttributeFilters(n),e.commitSelection(),l(e.getFilter()),p?"init-self":r?(a(!0),"init-parent"):"init-self"}}(e,m,n);!function(e,t,n){if("init-parent"===t){if(n)return;"success"!==e.getInitStatus()?e.init($l):(e.initTotalCount($l),e.loadInitialElementsPage($l))}"init-self"===t&&e.init()}(e,p,n)}),[i,l,o,e,c,s,u,n,r,d])}(O,{filter:P,limitingAttributeFilters:A,limit:m?.limit,onApply:s,setConnectedPlaceholderValue:D,resetOnParentFilterChange:o,selectionMode:p,setShouldReloadElements:k},v,y);const M=function(e,t,n,r){const{onApply:i,setConnectedPlaceholderValue:l,selectionMode:a,shouldReloadElements:o,setShouldReloadElements:s,shouldIncludeLimitingFilters:c,setShouldIncludeLimitingFilters:u,limitingAttributeFilters:d}=t,m=(0,W.useCallback)(((t,n)=>{const r=e.getFilter(),i=(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(r)),l=t.map((e=>i?e.uri:e.title)),o="single"===a?{irrelevantKeys:[]}:{};e.changeSelection({keys:l,isInverted:n,...o})}),[e,a]),p=(0,W.useCallback)(Wl((t=>{e.getSearch()!==t&&(e.setSearch(t),e.loadInitialElementsPage("search"))}),200),[e]),h=(0,W.useCallback)((()=>{e.loadNextElementsPage()}),[e]),f=(0,W.useCallback)((()=>{e.revertSelection(),e.getSearch().length>0&&(e.setSearch(""),e.loadInitialElementsPage(Kl)),n&&!c&&(u(!0),s(!0),e.setLimitingAttributeFilters(d))}),[e,d,u,s,c,n]);return{onApply:(0,W.useCallback)((()=>{e.commitSelection();const t=e.getFilter(),n=e.getCommittedSelection()?.isInverted;l(t),i?.(t,n,a)}),[i,l,e,a]),onLoadNextElementsPage:h,onSearch:p,onSelect:m,onReset:f,onOpen:(0,W.useCallback)((()=>{o&&(e.loadInitialElementsPage(Kl),!e.isWorkingSelectionEmpty()&&e.loadIrrelevantElements("irrelevantSelection"),s(!1))}),[e,o,s]),onShowFilteredElements:(0,W.useCallback)((()=>{n&&(u(!1),e.changeSelection({...e.getWorkingSelection(),irrelevantKeys:[]}),e.setLimitingAttributeFilters([]),e.loadInitialElementsPage("showFilteredElements"))}),[e,u,n]),onClearIrrelevantSelection:(0,W.useCallback)((()=>{if(r&&n){const t=e.getWorkingSelection(),n=ui(t.keys,t.irrelevantKeys);e.changeSelection({...t,keys:n,irrelevantKeys:[]})}}),[e,r,n])}}(O,{onApply:s,setConnectedPlaceholderValue:D,selectionMode:p,shouldReloadElements:w,setShouldReloadElements:k,shouldIncludeLimitingFilters:F,setShouldIncludeLimitingFilters:x,limitingAttributeFilters:A},C,v);return jl(O,{selectFirst:h,onApply:M.onApply,selectionMode:p}),{...N,...M,...T}},jl=(e,t)=>{const{selectFirst:n,selectionMode:r,onApply:i}=t,l=e.getCommittedSelection().keys,a=e.getInitialElementsPageStatus(),o=e.getAllElements(),s=e.getFilter();(0,W.useEffect)((()=>{if(n&&"single"===r&&I(l)&&"success"===a&&!I(o)){const t=[(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(s))?o[0].uri:o[0].title];e.changeSelection({keys:t,isInverted:!1,irrelevantKeys:[]}),e.commitSelection(),i()}}),[n,r,l,a,o,s,e,i])},Ql=(e,t)=>{const[n,r]=(0,W.useState)(!1);return{shouldReloadElements:n,setShouldReloadElements:(0,W.useCallback)((n=>{e&&t&&r(n)}),[t,e])}},Jl=e=>{const[t,n]=(0,W.useState)(!0);return{shouldIncludeLimitingFilters:t,setShouldIncludeLimitingFilters:(0,W.useCallback)((t=>{e&&n(t)}),[e])}},Xl=W.createContext(null);Xl.displayName="AttributeFilterContext";const ea=()=>(0,W.useContext)(Xl),ta=e=>{const{children:t,fullscreenOnMobile:n,title:r,selectionMode:i,selectFirst:l,disabled:a,customIcon:o}=e,s=Yl(e),c=r??s?.attribute?.title??"";return W.createElement(Xl.Provider,{value:{...s,fullscreenOnMobile:n,title:c,selectionMode:i,selectFirst:l,disabled:a,customIcon:o}},t)};var na=n(86896);const ra=[{align:"cr cl",offset:{x:0,y:50}}],ia=({children:e})=>W.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},W.createElement(Q.BubbleHoverTrigger,null,W.createElement(Q.Icon.QuestionMark,{height:16,width:14,className:"s-attribute-filter-tooltip-icon"}),W.createElement(Q.Bubble,{className:"gd-attribute-filter-details s-attribute-filter-details-bubble",alignPoints:ra,arrowStyle:{display:"none"}},e))),la=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}],aa=e=>{const{isOpen:t,title:n,selectedItemsCount:r,showSelectionCount:i=!0,subtitle:l,disabled:a,customIcon:o,isFiltering:s,isLoading:c,isLoaded:u,isError:d,isDraggable:m,icon:g,TooltipContentComponent:p,titleExtension:h,onClick:f,className:b}=e,E=(0,na.Z)(),v=(0,W.useRef)(null),[y,C]=(0,W.useState)(!1),S=d?W.createElement("i",{className:"gd-icon gd-icon-circle-cross"}):g;(0,W.useEffect)((()=>{const e=v.current;if(!e)return;const t=Math.ceil(e.getBoundingClientRect().width)<e.scrollWidth;C(t)}),[l]);let I=n,w=l;return c?(I=E.formatMessage({id:"loading"}),w=E.formatMessage({id:"loading"})):s&&(w=E.formatMessage({id:"filtering"})),W.createElement("div",{className:ee("gd-attribute-filter-dropdown-button__next","s-attribute-filter",`s-${Nn.gl(n)}`,{"gd-message":d,"gd-is-filtering":s,"gd-is-active":t,"gd-is-loaded":u,"gd-is-draggable":m,disabled:a},b),onClick:f},S?W.createElement("div",{className:"gd-attribute-filter-dropdown-button-icon__next"},S):null,W.createElement("div",{className:"gd-attribute-filter-dropdown-button-content__next"},W.createElement("div",{className:"gd-attribute-filter-dropdown_button-title-content__next"},W.createElement("div",{className:"gd-attribute-filter-dropdown-button-title__next"},W.createElement(Q.ShortenedText,{tooltipAlignPoints:la,className:"s-attribute-filter-button-title"},`${I}`)),h,W.createElement(ne,{customIcon:o,disabled:a}),p&&u?W.createElement(ia,null,W.createElement(p,null)):null),W.createElement("div",{className:"gd-attribute-filter-dropdown-button-subtitle__next"},W.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items__next s-attribute-filter-button-subtitle",ref:v},w),i&&y?W.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items-count__next"},`(${r})`):null)))},oa=({onClick:e})=>W.createElement(aa,{isLoading:!0,onClick:e}),sa=e=>{const{isOpen:t,isDraggable:n}=e;return W.createElement("div",{className:ee("gd-attribute-filter-dropdown-button__next","s-attribute-filter","gd-message error s-button-error",{"gd-is-active":t,"gd-is-draggable":n})},W.createElement(X.Z,{id:"gs.filter.error"}))},ca=245,ua=e=>{const{onApplyButtonClick:t,onCancelButtonClick:n,width:r=ca}=e,{DropdownActionsComponent:i,ElementsSelectComponent:l}=ql(),a=(0,Q.useMediaQuery)("mobileDevice"),{initialElementsPageError:o,nextElementsPageError:s,isApplyDisabled:c,isWorkingSelectionInverted:u,isLoadingInitialElementsPage:d,isLoadingNextElementsPage:m,onLoadNextElementsPage:g,elements:p,onSearch:h,onSelect:f,nextElementsPageSize:b,searchString:E,totalElementsCount:v,totalElementsCountWithCurrentSettings:y,workingSelectionElements:C,parentFilterAttributes:S,isFilteredByParentFilters:I,fullscreenOnMobile:w,selectionMode:k,title:F,enableShowingFilteredElements:x,onShowFilteredElements:P,irrelevantSelection:D,onClearIrrelevantSelection:A}=ea(),O=(0,W.useMemo)((()=>S.map((e=>e.title))),[S]),N={width:a&&w?"100%":r},T=(0,W.useCallback)(((e,n)=>{f(e,n),"single"===k&&t()}),[f,t,k]);return W.createElement("div",{className:"gd-attribute-filter-dropdown-body__next",style:N},W.createElement(l,{isInverted:u,isLoading:d,isLoadingNextPage:m,items:p,onLoadNextPage:g,onSearch:h,onSelect:T,nextPageSize:b,searchString:E,selectedItems:C,totalItemsCount:v,totalItemsCountWithCurrentSettings:y,parentFilterTitles:O,isFilteredByParentFilters:I,error:o??s,attributeTitle:F,enableShowingFilteredElements:x,onShowFilteredElements:P,irrelevantSelection:D,onClearIrrelevantSelection:A}),W.createElement(i,{onApplyButtonClick:t,onCancelButtonClick:n,isApplyDisabled:c}))},da=({isApplyDisabled:e,onApplyButtonClick:t,onCancelButtonClick:n})=>{const r=(0,na.Z)(),i=r.formatMessage({id:"gs.list.cancel"}),l=r.formatMessage({id:"gs.list.apply"});return W.createElement("div",{className:"gd-attribute-filter-dropdown-actions__next"},W.createElement("div",{className:"gd-attribute-filter-dropdown-actions-left-content__next"}),W.createElement("div",{className:"gd-attribute-filter-dropdown-actions-right-content__next"},W.createElement(Q.Button,{className:"gd-attribute-filter-cancel-button__next gd-button-secondary gd-button-small cancel-button s-cancel",onClick:n,value:i,title:i}),W.createElement(Q.Button,{disabled:e,className:"gd-attribute-filter-apply-button__next gd-button-action gd-button-small s-apply",onClick:t,value:l,title:l})))},ma=e=>{const{onSearch:t,searchString:n,isSmall:r}=e;return W.createElement(Q.InvertableSelectSearchBar,{onSearch:t,searchString:n,isSmall:r})},ga=e=>{const{items:t,totalItemsCount:n,totalItemsCountWithCurrentSettings:r,isInverted:i,selectedItems:l,onSelect:a,searchString:o,onSearch:s,isLoading:c,isLoadingNextPage:u,nextPageSize:d,onLoadNextPage:m,error:g,attributeTitle:p,isFilteredByParentFilters:h,parentFilterTitles:f,enableShowingFilteredElements:b,onShowFilteredElements:E,irrelevantSelection:v,onClearIrrelevantSelection:y}=e,C=(0,na.Z)(),S=(0,Q.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:I,selectionMode:w}=ea(),{ElementsSelectLoadingComponent:k,ElementsSelectItemComponent:F,ElementsSelectErrorComponent:x,EmptyResultComponent:P,ElementsSearchBarComponent:D,ElementsSelectActionsComponent:A,StatusBarComponent:O}=ql(),N=I&&S?40:28,T=S&&I,M=(0,R.usePrevious)(r),L=(0,W.useMemo)((()=>Math.max((Math.min(M,10)||1)*N,20)+32),[M,N]);return W.createElement(W.Fragment,null,W.createElement(Q.InvertableSelect,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:T,isSingleSelect:"single"===w,items:t,totalItemsCount:r,itemHeight:N,getItemKey:Hl,getItemTitle:e=>Bl(e,C),isInverted:i,selectedItems:l,selectedItemsLimit:500,onSelect:a,searchString:o,onSearch:s,isLoading:c,error:g,isLoadingNextPage:u,nextPageItemPlaceholdersCount:d,onLoadNextPage:m,numberOfHiddenSelectedItems:v.length,renderItem:e=>W.createElement(F,{...e,fullscreenOnMobile:I}),renderError:()=>W.createElement(x,{error:g}),renderLoading:()=>W.createElement(k,{height:L}),renderNoData:({height:e})=>W.createElement(P,{height:e,isFilteredByParentFilters:h,searchString:o,totalItemsCount:n,parentFilterTitles:f,enableShowingFilteredElements:b}),renderSearchBar:({onSearch:e,searchString:t})=>W.createElement(D,{onSearch:e,searchString:t,isSmall:!(S&&I)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:n,selectedItemsLimit:i})=>W.createElement(O,{getItemTitle:e,isFilteredByParentFilters:h,isInverted:t,parentFilterTitles:f,selectedItems:n,totalElementsCountWithCurrentSettings:r,selectedItemsLimit:i,attributeTitle:p,enableShowingFilteredElements:b,onShowFilteredElements:E,irrelevantSelection:v,onClearIrrelevantSelection:y}),renderActions:({checked:e,onChange:t,onToggle:n,isFiltered:r,totalItemsCount:i,isPartialSelection:l,isVisible:a})=>W.createElement(A,{isVisible:a,checked:e,onChange:t,onToggle:n,isFiltered:r,totalItemsCount:i,isPartialSelection:l})}))};var pa=n(68929);const ha=[{align:"bl tc",offset:{x:7,y:0}}],fa=e=>{const{item:t,isSelected:n,onSelect:r,onSelectOnly:i,onDeselect:l}=e,a=(0,na.Z)(),o=(0,W.useCallback)((()=>{n?l():r()}),[r,l,n]),s=(0,W.useCallback)((e=>{e.stopPropagation(),i()}),[i]),c=ee("gd-attribute-filter-elements-select-item__next","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${pa(t.title)}`,{"is-selected":n},{"s-attribute-filter-list-item-selected":n},{"gd-attribute-filter-list-empty-item":!t.title}),u=ee("input-checkbox-label",{"gd-empty-value-label":!t.title}),d=Bl(t,a);return W.createElement("div",{className:c,onClick:o,title:d},W.createElement("label",{className:u},W.createElement("input",{type:"checkbox",className:"input-checkbox",readOnly:!0,checked:n}),W.createElement("span",{className:"input-label-text"},d)),!t.title&&W.createElement("div",{className:"gd-empty-list-item-tooltip-wrapper"},W.createElement(Q.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0},W.createElement("span",{className:"gd-icon-circle-question gd-empty-value-tooltip-icon"}),W.createElement(Q.Bubble,{className:"bubble-primary gd-empty-item-bubble",alignTo:".gd-empty-value-tooltip-icon",alignPoints:ha},W.createElement(X.Z,{id:"attributesDropdown.empty.item.tooltip"})))),W.createElement("span",{className:"gd-list-item-only",onClick:s},W.createElement(X.Z,{id:"gs.list.only"})))},ba=()=>W.createElement(Q.Message,{type:"error"},W.createElement(X.Z,{id:"gs.list.error"})),Ea=e=>W.createElement(Q.LoadingMask,{height:e.height}),va=()=>{const e=(0,na.Z)();return W.createElement(Q.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noResultsMatch"})})},ya=()=>{const e=(0,na.Z)();return W.createElement(Q.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noData"})})},Ca=[{align:"cr cl"}],Sa={"cr cl":[10,0]},Ia=e=>{const{parentFilterTitles:t,searchString:n,enableShowingFilteredElements:r}=e;return r&&n.length>0?W.createElement(va,null):r?W.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("div",{className:"gd-filtered-message__next"},W.createElement(X.Z,{id:"attributesDropdown.noRelevantValues"}),W.createElement("span",{className:"gd-icon-circle-question"})),W.createElement(Q.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Ca,arrowOffsets:Sa},W.createElement(X.Z,{id:"attributesDropdown.noRelevantValues.tooltip",values:{break:W.createElement(W.Fragment,null,W.createElement("br",null),W.createElement("br",null))}})))):W.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("div",{className:"gd-filtered-message__next"},W.createElement(X.Z,{id:"attributesDropdown.allItemsFiltered"}),W.createElement("span",{className:"gd-icon-circle-question"})),W.createElement(Q.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Ca,arrowOffsets:Sa},W.createElement(X.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:t.join(", "),strong:e=>W.createElement("strong",null,e)}}))))},wa=({height:e,totalItemsCount:t,searchString:n,isFilteredByParentFilters:r,parentFilterTitles:i=[],enableShowingFilteredElements:l=!1})=>{let a=null;const o=(0,W.useMemo)((()=>({height:e})),[e]);return 0===t?a=W.createElement(ya,null):r?a=W.createElement(Ia,{parentFilterTitles:i,searchString:n,enableShowingFilteredElements:l}):n.length>0&&(a=W.createElement(va,null)),W.createElement("div",{className:"gd-attribute-filter-empty-result__next",style:o},a)},ka=[{align:"cr cl"}],Fa={"cr cl":[10,0]},xa=e=>{const{parentFilterTitles:t}=e,n=(0,W.useMemo)((()=>t?t.join(", "):""),[t]);return W.createElement("div",{className:"gd-attribute-filter-filtered-status__next s-attribute-filter-dropdown-items-filtered"},W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("div",{className:"gd-filtered-message__next"}," ",W.createElement(X.Z,{id:"attributesDropdown.itemsFiltered"}),W.createElement("span",{className:"gd-icon-circle-question"})),W.createElement(Q.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:ka,arrowOffsets:Fa},W.createElement(X.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:n,strong:e=>W.createElement("strong",null,e)}}))))},Pa=e=>{const{isInverted:t,selectedItems:n,getItemTitle:r,selectedItemsLimit:i}=e;return W.createElement(Q.InvertableSelectStatusBar,{className:"gd-attribute-filter-selection-status__next",isInverted:t,getItemTitle:r,selectedItems:n,selectedItemsLimit:i})},Da=[{align:"bl tl"}],Aa={"bl tl":[0,8]},Oa=({attributeTitle:e,onClick:t,parentFilterTitles:n,className:r})=>{const i=(0,W.useMemo)((()=>n?n.join(", "):""),[n]);return W.createElement("div",{className:ee("gd-attribute-filter-status-show-all s-attribute-filter-status-show-all",r)},W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("div",{className:"gd-relevant-values-text"},W.createElement(X.Z,{id:"attributesDropdown.relevantValues",values:{nbsp:W.createElement(W.Fragment,null," ")}})),W.createElement(Q.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Da,arrowOffsets:Aa},W.createElement(X.Z,{id:"attributesDropdown.relevantValues.tooltip",values:{child:e,parents:i,strong:e=>W.createElement("strong",null,e)}}))),W.createElement("span",{className:"gd-action-show-all s-action-show-all",onClick:t},W.createElement(X.Z,{id:"attributesDropdown.showAll"})))},Na=[{align:"bl tl"}],Ta={"bl tl":[-10,12]},Ma=({parentFilterTitles:e,irrelevantSelection:t,onClear:n,showClearButton:r=!0})=>{const i=(0,W.useMemo)((()=>e?e.join(", "):""),[e]);return 0===t.length?null:W.createElement(Q.Message,{className:"gd-attribute-filter-status-irrelevant-message s-attribute-filter-status-irrelevant-message",type:"warning"},W.createElement(Q.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement(X.Z,{id:"attributesDropdown.irrelevantValues",values:{nbsp:W.createElement(W.Fragment,null," ")}}),W.createElement(Q.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Na,arrowOffsets:Ta},W.createElement(X.Z,{id:"attributesDropdown.irrelevantValues.tooltip",values:{parents:i,strong:e=>W.createElement("strong",null,e)}}))),r?W.createElement("span",{className:"gd-action-clear s-action-clear",onClick:n},W.createElement(X.Z,{id:"attributesDropdown.irrelevantValues.clear"})):null)},Ra=e=>{const{attributeTitle:t,isFilteredByParentFilters:n,parentFilterTitles:r,totalElementsCountWithCurrentSettings:i,getItemTitle:l,isInverted:a,selectedItems:o,selectedItemsLimit:s,enableShowingFilteredElements:c=!1,onShowFilteredElements:u=K,irrelevantSelection:d=[],onClearIrrelevantSelection:m=K}=e;return c?W.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n?W.createElement(Oa,{attributeTitle:t,onClick:u,parentFilterTitles:r}):null,W.createElement(Pa,{isInverted:a,getItemTitle:l,selectedItems:o,selectedItemsLimit:s}),W.createElement(Ma,{parentFilterTitles:r,irrelevantSelection:d,onClear:m})):W.createElement("div",{className:"gd-attribute-filter-status-bar__next"},W.createElement(Pa,{isInverted:a,getItemTitle:l,selectedItems:o,selectedItemsLimit:s}),n&&i>0?W.createElement(xa,{parentFilterTitles:r}):null)},La=e=>{const{checked:t,isVisible:n,onChange:r,onToggle:i,isFiltered:l,totalItemsCount:a,isPartialSelection:o}=e;return W.createElement(Q.InvertableSelectAllCheckbox,{isVisible:n,checked:t,onChange:r,onToggle:i,isFiltered:l,totalItemsCount:a,isPartialSelection:o})},_a=e=>{const{item:t,onSelectOnly:n,isSelected:r,fullscreenOnMobile:i=!1}=e,l=(0,na.Z)(),a=(0,W.useCallback)((e=>{e.stopPropagation(),n()}),[n]),o=(0,W.useMemo)((()=>Bl(t,l)),[t,l]),s=(0,Q.useMediaQuery)("mobileDevice"),c=ee("gd-single-selection-attribute-filter-elements-select-item","gd-list-item","s-attribute-filter-list-item",`s-attribute-filter-list-item-${pa(t.title)}`,{"is-selected":r},{"s-attribute-filter-list-item-selected":r});return W.createElement("div",{className:c,onClick:a,title:o},W.createElement("span",null,o),r&&s&&i?W.createElement("span",{className:"gd-customizable-checkmark-mobile-navigation-wrapper"},W.createElement(Q.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-navigation"})):null)};function Ba(){return W.createElement("div",{style:{marginTop:-5}})}const Va=e=>{const{enableShowingFilteredElements:t,isFilteredByParentFilters:n,parentFilterTitles:r,totalElementsCountWithCurrentSettings:i,attributeTitle:l,onShowFilteredElements:a,irrelevantSelection:o}=e;return t?W.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n?W.createElement(Oa,{attributeTitle:l,onClick:a,parentFilterTitles:r,className:"no-divider"}):null,W.createElement(Ma,{parentFilterTitles:r,irrelevantSelection:o,showClearButton:!1})):W.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n&&i>0?W.createElement(xa,{parentFilterTitles:r}):null)},Ha=()=>W.createElement("div",null),Za={ErrorComponent:sa,LoadingComponent:oa,DropdownButtonComponent:aa,DropdownBodyComponent:ua,DropdownActionsComponent:da,ElementsSearchBarComponent:ma,ElementsSelectComponent:ga,ElementsSelectItemComponent:fa,ElementsSelectErrorComponent:ba,ElementsSelectLoadingComponent:Ea,ElementsSelectActionsComponent:La,EmptyResultComponent:wa,StatusBarComponent:Ra},qa=e=>{const{resetOnParentFilterChange:t=!0,children:n,locale:r,backend:i,workspace:l,title:a,filter:o,connectToPlaceholder:s,parentFilters:c,parentFilterOverAttribute:u,hiddenElements:d,staticElements:m,fullscreenOnMobile:g=!1,selectionMode:p="multi",selectFirst:h=!1,disabled:f,customIcon:b,onApply:E,onError:v,ErrorComponent:y,LoadingComponent:C,DropdownButtonComponent:S,DropdownBodyComponent:I,DropdownActionsComponent:w,ElementsSearchBarComponent:k,ElementsSelectComponent:F,ElementsSelectItemComponent:x,ElementsSelectErrorComponent:P,ElementsSelectLoadingComponent:D,ElementsSelectActionsComponent:A,EmptyResultComponent:O,StatusBarComponent:N}=e,T=(({selectionMode:e})=>({...Za,..."single"===e?{ElementsSelectItemComponent:_a,ElementsSelectActionsComponent:Ba,StatusBarComponent:Va,DropdownActionsComponent:Ha}:{}}))(e);return W.createElement(R.IntlWrapper,{locale:r},W.createElement(zl,{ErrorComponent:y??T.ErrorComponent,LoadingComponent:C??T.LoadingComponent,DropdownButtonComponent:S??T.DropdownButtonComponent,DropdownBodyComponent:I??T.DropdownBodyComponent,DropdownActionsComponent:w??T.DropdownActionsComponent,ElementsSearchBarComponent:k??T.ElementsSearchBarComponent,ElementsSelectComponent:F??T.ElementsSelectComponent,ElementsSelectItemComponent:x??T.ElementsSelectItemComponent,ElementsSelectErrorComponent:P??T.ElementsSelectErrorComponent,ElementsSelectLoadingComponent:D??T.ElementsSelectLoadingComponent,ElementsSelectActionsComponent:A??T.ElementsSelectActionsComponent,EmptyResultComponent:O??T.EmptyResultComponent,StatusBarComponent:N??T.StatusBarComponent},W.createElement(ta,{backend:i,workspace:l,title:a,filter:o,connectToPlaceholder:s,resetOnParentFilterChange:t,parentFilters:c,parentFilterOverAttribute:u,onApply:E,onError:v,hiddenElements:d,staticElements:m,fullscreenOnMobile:g,selectionMode:p,selectFirst:h,disabled:f,customIcon:b},n)))},za=[{align:"bc tc"}],Wa=({children:e,errorMessage:t})=>t?W.createElement("div",{className:"gd-attribute-filter-button-wrapper"},W.createElement(Q.BubbleHoverTrigger,null,e,W.createElement(Q.Bubble,{className:"bubble-negative gd-attribute-filter-button-error s-attribute-filter-error-bubble",alignPoints:za},W.createElement("span",null,W.createElement(X.Z,{id:"gs.filter.error.tooltip"}))))):W.createElement(W.Fragment,null,e),Ga=[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tl bl",offset:{x:0,y:0}},{align:"tr tl",offset:{x:0,y:-50}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-200}},{align:"tr tl",offset:{x:0,y:-300}},{align:"tr tl",offset:{x:0,y:-400}}],Ua=()=>{const{DropdownButtonComponent:e,DropdownBodyComponent:t,LoadingComponent:n,ErrorComponent:r}=ql(),{title:i,isInitializing:l,initError:a,isFiltering:o,committedSelectionElements:s,onReset:c,onApply:u,onOpen:d,fullscreenOnMobile:m,isCommittedSelectionInverted:g,selectionMode:p,disabled:h,customIcon:f}=ea(),b=(0,Q.useMediaQuery)("mobileDevice"),E=function(e,t){const n=(0,na.Z)(),r=0===t.length,i=r&&!e,l=!r&&e,a=!r&&!e;let o=n.formatMessage({id:"gs.list.all"});return l?o=`${n.formatMessage({id:"gs.list.all"})} ${n.formatMessage({id:"gs.list.except"})} ${Vl(t,n)}`:a?o=Vl(t,n):i&&(o=n.formatMessage({id:"gs.filterLabel.none"})),o}(g,s),v="single"!==p&&0!==s.length;return W.createElement(Q.Dropdown,{className:"gd-attribute-filter__next",closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:Ga,fullscreenOnMobile:m,renderButton:({toggleDropdown:t,isOpen:c})=>{const u=h?K:t;return W.createElement("div",{className:ee({"gd-is-mobile":m&&b&&c})},!!l&&W.createElement(n,{onClick:u,isOpen:c}),!l&&!!a&&!i&&W.createElement(r,{message:a.message,error:a}),!l&&!!i&&W.createElement(Wa,{errorMessage:a?.message},W.createElement(e,{title:i,subtitle:E,isFiltering:o,isLoaded:!l,isLoading:l,isOpen:c,selectedItemsCount:s.length,showSelectionCount:v,disabled:h,customIcon:f,onClick:u,isError:!!a})))},onOpenStateChanged:e=>{e?d():c()},renderBody:({closeDropdown:e})=>W.createElement("div",{className:ee({"gd-is-mobile":m&&b}),style:{height:m&&b?"100%":"auto"}},W.createElement(t,{onApplyButtonClick:()=>{u(),e()},onCancelButtonClick:e}))})},Ka=e=>(function(e){const{connectToPlaceholder:t,filter:n,onApply:r,parentFilters:i,hiddenElements:l,staticElements:a,backend:o}=e;(0,Tr.kG)(!(n&&t),"It's not possible to combine 'filter' property with 'connectToPlaceholder' property. Either provide a filter, or a placeholer."),(0,Tr.kG)(!(n&&!r),"It's not possible to use 'filter' property without 'onApply' property. Either provide 'onApply' callback or use placeholders."),(0,Tr.kG)(n||t,"No filter or placeholer provided. Provide one of the properties: 'filter', 'connectToPlaceholder'."),(0,Tr.kG)(!(!o?.capabilities?.supportsElementsQueryParentFiltering&&!I(i)),"Parent filtering is not supported by the current backend implementation."),(0,Tr.kG)(!(!o?.capabilities?.supportsElementsQueryParentFiltering&&!I(l)&&I(a)),"Hidden elements are not supported by the current backend implementation.")}({backend:(0,R.useBackendStrict)(e.backend,"AttributeFilter"),...e}),W.createElement(qa,{...e},W.createElement(Ua,null))),$a=e=>{const{isOpen:t,title:n,isLoading:r,isFiltering:i,onClick:l}=e,a=(0,na.Z)();let o=n;return r?o=a.formatMessage({id:"loading"}):i&&(o=a.formatMessage({id:"filtering"})),W.createElement(Q.DropdownButton,{className:"gd-attribute-filter-dropdown-simple-button__next",disabled:r,isOpen:t,value:o,onClick:l})},Ya=e=>{const{isOpen:t,subtitle:n,title:r,selectedItemsCount:i,onClick:l,isLoading:a,isFiltering:o,showSelectionCount:s=!0}=e,c=(0,na.Z)();let u=`${r}: ${n}`;(a||o)&&(u=c.formatMessage({id:"loading"}));const d=ee("gd-button-primary","button-dropdown","dropdown-button","gd-button-small","gd-button",{"is-dropdown-open":t},{"is-active":t}),m=ee("gd-button-icon",{"gd-icon-navigateup":t},{"gd-icon-navigatedown":!t}),g=s?`(${i})`:void 0;return W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button__next"},W.createElement("button",{className:d,onClick:l,title:u},W.createElement("span",{className:"gd-button-text"},W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-text"},W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection"},u),g?W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection-count"},g):null)),W.createElement("span",{className:m,role:"button-icon"})))},ja=e=>{const{titleWithSelection:t,...n}=e,r=t?Ya:$a;return W.createElement(Ka,{...n,DropdownButtonComponent:e.DropdownButtonComponent??r})},Qa=e=>{const{attributeFilterMode:t,...n}=e;return"hidden"!==t?W.createElement(Ka,{...n,disabled:"readonly"===t,DropdownButtonComponent:e.DropdownButtonComponent??aa}):null},Ja=({isOpened:e,text:t,toggleDropdown:n})=>{const r=(0,na.Z)(),i=ee("gd-button-primary","gd-button-small","button-dropdown","dropdown-button","gd-attribute-filter-display-form-button","s-attribute-display-form-button",{"is-active":e}),l=e?"gd-icon-navigateup":"gd-icon-navigatedown",a=r.formatMessage({id:"attributesDropdown.display_as"},{title:t});return W.createElement(Q.Button,{className:i,title:a,value:a,onClick:n,iconRight:l})},Xa=[{align:"cl cr",offset:{x:-10,y:0}},{align:"cr cl",offset:{x:10,y:0}}],eo=e=>{const{displayForm:t,selected:n}=e,{title:r,type:i}=t,l=ee("gd-list-item","gd-attribute-display-form","s-attribute-display-form-name",`s-attribute-display-form-name-${Nn.gl(r)}`,(e=>{switch(e){case"GDC.link":return"gd-icon-hyperlink-warning";case"GDC.geo.pin":case"GDC.geo.pin_latitude":case"GDC.geo.pin_longitude":return"gd-icon-earth";default:return"gd-icon-label-warning"}})(i),{"is-selected":n});return W.createElement("div",{className:l,onClick:t=>{const{displayForm:n,onClick:r}=e;r(n.ref),t.preventDefault()}},W.createElement(Q.ShortenedText,{className:"gd-attribute-display-form-name",tooltipAlignPoints:Xa},r))},to=[{align:"bl tl",offset:{x:0,y:1}},{align:"tl bl",offset:{x:0,y:-1}}],no=e=>{const{displayForms:t,selectedDisplayForm:n,onSelect:r,alignPoints:i}=e,l=(0,W.useMemo)((()=>t.find((e=>(0,g.areObjRefsEqual)(e.ref,n)))?.title),[t,n]);return W.createElement(Q.Dropdown,{className:"gd-attribute-display-form-dropdown",alignPoints:i??to,closeOnMouseDrag:!0,closeOnParentScroll:!0,renderButton:({isOpen:e,toggleDropdown:t})=>W.createElement(Ja,{text:l,isOpened:e,toggleDropdown:t}),renderBody:({closeDropdown:e})=>W.createElement(Q.DropdownList,{className:"gd-attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body",items:t,itemHeight:23,renderItem:({item:t})=>{const i=(0,g.areObjRefsEqual)(t.ref,n);return W.createElement(eo,{key:t.id,displayForm:t,onClick:t=>{e(),i||r(t)},selected:i})}})})},ro=e=>{const{onSelect:t,alignPoints:n}=e,{displayForms:r,currentDisplayFormRef:i}=ea();return W.createElement(no,{displayForms:r,selectedDisplayForm:i,alignPoints:n,onSelect:t})},io=[{align:"bc tc",offset:{x:-1,y:5}}],lo=e=>{const{onConfiguration:t}=e;return W.createElement("div",{className:"gd-attribute-filter-configuration-button"},W.createElement(Q.BubbleHoverTrigger,null,W.createElement(Q.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:t}),W.createElement(Q.Bubble,{className:"bubble-primary",alignPoints:io},W.createElement(X.Z,{id:"attributesDropdown.configuration"}))))},ao=[{align:"bc tc",offset:{x:-1,y:5}}],oo=e=>{const{onDelete:t}=e;return W.createElement("div",{className:"gd-attribute-filter-delete-button"},W.createElement(Q.BubbleHoverTrigger,null,W.createElement(Q.Button,{className:"gd-button-link gd-button-icon-only gd-button-small gd-icon-trash gd-delete-button s-delete-button",disabled:!1,onClick:t}),W.createElement(Q.Bubble,{className:"bubble-primary",alignPoints:ao},W.createElement(X.Z,{id:"attributesDropdown.removeTooltip"}))))},so=({title:e,defaultAttributeFilterTitle:t,attributeDataSet:n})=>W.createElement("div",{className:"gd-attribute-filter-tooltip-content s-attribute-filter-tooltip-content"},W.createElement("h3",{className:"s-attribute-filter-tooltip-header"},e??t),W.createElement("h4",null,W.createElement(X.Z,{id:"attributesDropdown.details.type"})),W.createElement("p",{className:"s-attribute-filter-tooltip-item-name"},t),W.createElement("h4",null,W.createElement(X.Z,{id:"attributesDropdown.details.dataset"})),W.createElement("p",{className:"s-attribute-filter-tooltip-item-dataset"},n.title)),co=e=>W.createElement("div",{className:"gd-empty-select-search-bar"}),uo=(e,t)=>{const{onClick:n}=e,{isOpen:r}=(0,R.usePrevious)(e);(0,W.useEffect)((()=>{t&&!r&&n()}),[n,t,r])},mo=(e,t)=>{const{isOpen:n}=e,{isOpen:r}=(0,R.usePrevious)(e);(0,W.useEffect)((()=>{t&&r&&!n&&t()}),[t,n,r])},go=e=>{const{onSearch:t,searchString:n}=e,[r,i]=(0,W.useState)(n);(0,W.useEffect)((()=>{i(n)}),[n]);const l=(0,W.useCallback)((e=>{i(e),t(e)}),[t]);return{onSearch:l,search:r}},po=({tooltipContent:e})=>W.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},W.createElement(Q.BubbleHoverTrigger,null,W.createElement(Q.Icon.BoldHyperlink,{width:12,height:16}),W.createElement(Q.Bubble,{arrowOffsets:{"bc tl":[-12,9],"bc tr":[12,9]},alignPoints:[{align:"bc tl"},{align:"bc tr"}]},e)))}}]);