(self.webpackChunkpolar_area_chart_plugin=self.webpackChunkpolar_area_chart_plugin||[]).push([[9089],{49029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},41761:(e,t,i)=>{var n=i(44239),r=i(37005);e.exports=function(e){return r(e)&&"[object Date]"==n(e)}},18674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},36128:(e,t,i)=>{var n=i(20731),r=i(21078),l=i(45652);e.exports=function(e,t,i){var a=e.length;if(a<2)return a?l(e[0]):[];for(var o=-1,s=Array(a);++o<a;)for(var c=e[o],d=-1;++d<a;)d!=o&&(s[o]=n(s[o]||c,e[d],t,i));return l(r(s,1),t,i)}},35393:(e,t,i)=>{var n=i(62663),r=i(53816),l=i(58748),a=RegExp("['’]","g");e.exports=function(e){return function(t){return n(l(r(t).replace(a,"")),e,"")}}},69389:(e,t,i)=>{var n=i(18674)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=n},93157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},2757:e=>{var t="\\ud800-\\udfff",i="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+l+"]",o="\\d+",s="["+i+"]",c="["+n+"]",d="[^"+t+l+o+i+n+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+r+"]",g="(?:"+c+"|"+d+")",f="(?:"+p+"|"+d+")",b="(?:['’](?:d|ll|m|re|s|t|ve))?",h="(?:['’](?:D|LL|M|RE|S|T|VE))?",y="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",E="[\\ufe0e\\ufe0f]?",v=E+y+"(?:\\u200d(?:"+["[^"+t+"]",u,m].join("|")+")"+E+y+")*",C="(?:"+[s,u,m].join("|")+")"+v,S=RegExp([p+"?"+c+"+"+b+"(?="+[a,p,"$"].join("|")+")",f+"+"+h+"(?="+[a,p+g,"$"].join("|")+")",p+"?"+g+"+"+b,p+"+"+h,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,C].join("|"),"g");e.exports=function(e){return e.match(S)||[]}},68929:(e,t,i)=>{var n=i(48403),r=i(35393)((function(e,t,i){return t=t.toLowerCase(),e+(i?n(t):t)}));e.exports=r},53816:(e,t,i)=>{var n=i(69389),r=i(79833),l=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=r(e))&&e.replace(l,n).replace(a,"")}},47960:(e,t,i)=>{var n=i(41761),r=i(7518),l=i(31167),a=l&&l.isDate,o=a?r(a):n;e.exports=o},21804:(e,t,i)=>{var n=i(35393)((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}));e.exports=n},58748:(e,t,i)=>{var n=i(49029),r=i(93157),l=i(79833),a=i(2757);e.exports=function(e,t,i){return e=l(e),void 0===(t=i?void 0:t)?r(e)?a(e):n(e):e.match(t)||[]}},72905:(e,t,i)=>{var n=i(34963),r=i(5976),l=i(36128),a=i(29246),o=i(10928),s=r((function(e){var t=o(e);return t="function"==typeof t?t:void 0,l(n(e,a),void 0,t)}));e.exports=s},19089:(e,t,i)=>{i.r(t),i.d(t,{AttributeDatasetInfo:()=>Ms,AttributeDisplayFormSelect:()=>xs,AttributeFilter:()=>Is,AttributeFilterAllValuesFilteredResult:()=>Zo,AttributeFilterButton:()=>Fs,AttributeFilterButtonTooltip:()=>ko,AttributeFilterConfigurationButton:()=>Ts,AttributeFilterDeleteButton:()=>Ls,AttributeFilterDependencyTooltip:()=>Hs,AttributeFilterDropdownActions:()=>Mo,AttributeFilterDropdownBody:()=>Lo,AttributeFilterDropdownButton:()=>xo,AttributeFilterElementsActions:()=>ss,AttributeFilterElementsSearchBar:()=>Ro,AttributeFilterElementsSelect:()=>_o,AttributeFilterElementsSelectError:()=>zo,AttributeFilterElementsSelectItem:()=>qo,AttributeFilterElementsSelectLoading:()=>Ko,AttributeFilterEmptyAttributeResult:()=>Uo,AttributeFilterEmptyResult:()=>Yo,AttributeFilterEmptySearchResult:()=>Go,AttributeFilterError:()=>To,AttributeFilterFilteredStatus:()=>Jo,AttributeFilterLoading:()=>Oo,AttributeFilterSelectionStatus:()=>es,AttributeFilterSimpleDropdownButton:()=>Cs,AttributeFilterSimpleDropdownButtonWithSelection:()=>Ss,AttributeFilterStatusBar:()=>os,DateFilter:()=>Rn,DateFilterHelpers:()=>de,EmptyElementsSearchBar:()=>Rs,MeasureValueFilter:()=>sr,MeasureValueFilterDropdown:()=>ar,RankingFilter:()=>Mr,RankingFilterDropdown:()=>Lr,SingleSelectionAttributeFilterElementsSelectItem:()=>cs,SingleSelectionAttributeFilterStatusBar:()=>us,defaultDateFilterOptions:()=>m,filterVisibleDateFilterOptions:()=>O,getAttributeFilterSubtitle:()=>no,getLocalizedIcuDateFormatPattern:()=>Ue,isAbsoluteDateFilterOption:()=>w,isRelativeDateFilterOption:()=>A,isRelativeDateFilterWithBoundOption:()=>D,isUiRelativeDateFilterForm:()=>F,isWarningMessage:()=>jn,newAttributeFilterHandler:()=>Qa,useAttributeFilterContext:()=>wo,useAttributeFilterController:()=>yo,useAttributeFilterHandler:()=>uo,useAttributeFilterSearch:()=>Vs,useAutoOpenAttributeFilterDropdownButton:()=>Bs,useOnCloseAttributeFilterDropdownButton:()=>_s});const n={"GDC.time.minute":"minute","GDC.time.hour":"hour","GDC.time.date":"day","GDC.time.week_us":"week","GDC.time.month":"month","GDC.time.quarter":"quarter","GDC.time.year":"year"};var r=i(30381);const l="YYYY-MM-DD",a="YYYY-MM-DD HH:mm",o="HH:mm",s=", HH:mm",c="00:00",d="23:59",u="MM/dd/yyyy",m={allTime:{localIdentifier:"ALL_TIME",type:"allTime",name:"",visible:!0},absoluteForm:{localIdentifier:"ABSOLUTE_FORM",type:"absoluteForm",from:r().subtract(1,"month").startOf("day").format(l),to:r().startOf("day").format(l),name:"",visible:!0},absolutePreset:[],relativeForm:{localIdentifier:"RELATIVE_FORM",type:"relativeForm",granularity:"GDC.time.month",from:void 0,to:void 0,name:"",visible:!0},relativePreset:{"GDC.time.date":[{from:-6,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_7_DAYS",type:"relativePreset",visible:!0,name:""},{from:-29,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_30_DAYS",type:"relativePreset",visible:!0,name:""},{from:-89,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_90_DAYS",type:"relativePreset",visible:!0,name:""}],"GDC.time.month":[{from:0,to:0,granularity:"GDC.time.month",localIdentifier:"THIS_MONTH",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.month",localIdentifier:"LAST_MONTH",type:"relativePreset",visible:!0,name:""},{from:-11,to:0,granularity:"GDC.time.month",localIdentifier:"LAST_12_MONTHS",type:"relativePreset",visible:!0,name:""}],"GDC.time.quarter":[{from:0,to:0,granularity:"GDC.time.quarter",localIdentifier:"THIS_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.quarter",localIdentifier:"LAST_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-3,to:0,granularity:"GDC.time.quarter",localIdentifier:"LAST_4_QUARTERS",type:"relativePreset",visible:!0,name:""}],"GDC.time.year":[{from:0,to:0,granularity:"GDC.time.year",localIdentifier:"THIS_YEAR",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.year",localIdentifier:"LAST_YEAR",type:"relativePreset",visible:!0,name:""}]}};var p=i(53244),g=i(47037),f=i(47960);const b=(e,t=l)=>{if(!f(e)||!isNaN(e.getTime()))return f(e)?r(e).local().format(t):e},h=e=>g(e)?new Date(r(e,a).format()):e,y=e=>{const t={};return e.visible||(t[e.type]={}),t},E=(e,t)=>({...e,absoluteForm:{...e.absoluteForm??{},[t]:!0}}),v=e=>(0,p.isAbsoluteDateFilterForm)(e)?(e=>{let t=y(e);return void 0===e.from&&(t=E(t,"invalidStartDate")),void 0===e.to&&(t=E(t,"invalidEndDate")),void 0===t.absoluteForm&&h(e.from)>h(e.to)&&(t=E(t,"startDateAfterEndDate")),void 0===t.absoluteForm?{}:t})(e):(0,p.isRelativeDateFilterForm)(e)?(e=>{const t=y(e);return["from","to"].forEach((i=>{void 0===e[i]&&(t.relativeForm=t.relativeForm||{})})),t.relativeForm?t:{}})(e):y(e),C=(e,t)=>{if(!e||!t)return e;if((0,p.isAllTimeDateFilterOption)(e)||(0,p.isAbsoluteDateFilterForm)(e)||(0,p.isAbsoluteDateFilterPreset)(e)||(0,p.isRelativeDateFilterForm)(e))return e;if((0,p.isRelativeDateFilterPreset)(e)){const{from:t,to:i}=e,n=0===i&&t<i;return{...e,from:n?e.from-1:e.from,to:n?-1:i}}throw new Error("Unknown date filter value type")},S=e=>!!e.visible&&!!(0,p.isRelativeDateFilterPreset)(e)&&0===e.to&&e.from<e.to;var I=i(41609);const F=e=>!I(e)&&"relativeForm"===e.type,w=e=>(0,p.isAbsoluteDateFilterForm)(e)||(0,p.isAbsoluteDateFilterPreset)(e),A=e=>(0,p.isRelativeDateFilterForm)(e)||(0,p.isRelativeDateFilterPreset)(e),D=e=>A(e)&&!I(e.boundedFilter);function k(e){return e?.visible}function P(e){return k(e)?e:void 0}function x(e){const{absoluteForm:t,absolutePreset:i,allTime:n,relativeForm:r,relativePreset:l}=e;return{...n&&{allTime:n},...t&&{absoluteForm:t},...!I(i)&&{absolutePreset:i},...r&&{relativeForm:r},...!I(l)&&{relativePreset:l}}}function O(e){const t=P(e.allTime),i=P(e.absoluteForm),n=P(e.relativeForm),r=e.absolutePreset?.filter(k);return x({allTime:t,absoluteForm:i,absolutePreset:r,relativeForm:n,relativePreset:e.relativePreset&&(l=e.relativePreset,Object.keys(l).reduce(((e,t)=>{const i=l[t].filter(k);return i.length&&(e[t]=i),e}),{}))});var l}function T(e){return e.from>e.to?{...e,from:e.to,to:e.from}:e}function N(e){const t=e.absolutePreset?.map(T),i=e.relativePreset&&function(e){return Object.keys(e).reduce(((t,i)=>{const n=e[i];return t[i]=n.map(T),t}),{})}(e.relativePreset);return x({...e,absolutePreset:t,relativePreset:i})}var L=i(15616),M=i(48403),R=i(2525),B=function(){return B=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},B.apply(this,arguments)};function _(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}function V(e,t,i){if(i||2===arguments.length)for(var n,r=0,l=t.length;r<l;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var H=i(93237),W=i(95957);function q(e){!function(e,t,i){if(void 0===i&&(i=Error),!e)throw new i("[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}(e)}function z(e,t){if(e===t)return!0;if(!e||!t)return!1;var i=Object.keys(e),n=Object.keys(t),r=i.length;if(n.length!==r)return!1;for(var l=0;l<r;l++){var a=i[l];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}(0,W.H)((function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.NumberFormat).bind.apply(e,V([void 0],t,!1)))}),{strategy:W.A.variadic}),(0,W.H)((function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.DateTimeFormat).bind.apply(e,V([void 0],t,!1)))}),{strategy:W.A.variadic}),(0,W.H)((function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.PluralRules).bind.apply(e,V([void 0],t,!1)))}),{strategy:W.A.variadic}),(0,W.H)((function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.Locale).bind.apply(e,V([void 0],t,!1)))}),{strategy:W.A.variadic}),(0,W.H)((function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new((e=Intl.ListFormat).bind.apply(e,V([void 0],t,!1)))}),{strategy:W.A.variadic}),B(B({},{formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){},onWarn:function(e){}}),{textComponent:H.Fragment});var K,G,U=i(8679),$=i.n(U),j="undefined"==typeof window||window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?H.createContext(null):window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=H.createContext(null)),Z=j.Consumer,Y=(j.Provider,j);function Q(e,t){var i,n=t||{},r=n.intlPropName,l=void 0===r?"intl":r,a=n.forwardRef,o=void 0!==a&&a,s=n.enforceContext,c=void 0===s||s,d=function(t){return H.createElement(Z,null,(function(i){var n;c&&q(i);var r=((n={})[l]=i,n);return H.createElement(e,B({},t,r,{ref:o?t.forwardedRef:null}))}))};return d.displayName="injectIntl(".concat((i=e).displayName||i.name||"Component",")"),d.WrappedComponent=e,o?$()(H.forwardRef((function(e,t){return H.createElement(d,B({},e,{forwardedRef:t}))})),e):$()(d,e)}function X(){var e=H.useContext(Y);return q(e),e}!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(K||(K={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(G||(G={}));var J=function(e){var t=X(),i=e.value,n=e.children,r=_(e,["value","children"]);return n(t.formatNumberToParts(i,r))};function ee(e){var t=function(t){var i=X(),n=t.value,r=t.children,l=_(t,["value","children"]),a="string"==typeof n?new Date(n||0):n;return r("formatDate"===e?i.formatDateToParts(a,l):i.formatTimeToParts(a,l))};return t.displayName=G[e],t}function te(e){var t=function(t){var i=X(),n=t.value,r=t.children,l=_(t,["value","children"]),a=i[e](n,l);if("function"==typeof r)return r(a);var o=i.textComponent||H.Fragment;return H.createElement(o,null,a)};return t.displayName=K[e],t}J.displayName="FormattedNumberParts",J.displayName="FormattedNumberParts",te("formatDate"),te("formatTime"),te("formatNumber"),te("formatList"),te("formatDisplayName"),ee("formatDate"),ee("formatTime");const ie={minute:{id:"filters.granularity.minutes"},hour:{id:"filters.granularity.hours"},day:{id:"filters.granularity.days"},week:{id:"filters.granularity.weeks"},month:{id:"filters.granularity.months"},quarter:{id:"filters.granularity.quarters"},year:{id:"filters.granularity.years"},allTimeExcluded:{id:"filters.allTime.excludeCurrentPeriod"},minuteExcluded:{id:"filters.minute.excludeCurrentPeriod"},hourExcluded:{id:"filters.hour.excludeCurrentPeriod"},dayExcluded:{id:"filters.day.excludeCurrentPeriod"},weekExcluded:{id:"filters.week.excludeCurrentPeriod"},monthExcluded:{id:"filters.month.excludeCurrentPeriod"},quarterExcluded:{id:"filters.quarter.excludeCurrentPeriod"},yearExcluded:{id:"filters.year.excludeCurrentPeriod"},minute_history:{id:"filters.floatingRange.option.minute.offset.history"},minute_today:{id:"filters.floatingRange.option.minute.offset.today"},minute_future:{id:"filters.floatingRange.option.minute.offset.future"},hour_history:{id:"filters.floatingRange.option.hour.offset.history"},hour_today:{id:"filters.floatingRange.option.hour.offset.today"},hour_future:{id:"filters.floatingRange.option.hour.offset.future"},day_history:{id:"filters.floatingRange.option.day.offset.history"},day_today:{id:"filters.floatingRange.option.day.offset.today"},day_future:{id:"filters.floatingRange.option.day.offset.future"},week_history:{id:"filters.floatingRange.option.week.offset.history"},week_today:{id:"filters.floatingRange.option.week.offset.today"},week_future:{id:"filters.floatingRange.option.week.offset.future"},month_history:{id:"filters.floatingRange.option.month.offset.history"},month_today:{id:"filters.floatingRange.option.month.offset.today"},month_future:{id:"filters.floatingRange.option.month.offset.future"},quarter_history:{id:"filters.floatingRange.option.quarter.offset.history"},quarter_today:{id:"filters.floatingRange.option.quarter.offset.today"},quarter_future:{id:"filters.floatingRange.option.quarter.offset.future"},year_history:{id:"filters.floatingRange.option.year.offset.history"},year_today:{id:"filters.floatingRange.option.year.offset.today"},year_future:{id:"filters.floatingRange.option.year.offset.future"},"GDC.time.minute":{id:"filters.minute.title"},"GDC.time.hour":{id:"filters.hour.title"},"GDC.time.date":{id:"filters.day.title"},"GDC.time.week_us":{id:"filters.week.title"},"GDC.time.month":{id:"filters.month.title"},"GDC.time.quarter":{id:"filters.quarter.title"},"GDC.time.year":{id:"filters.year.title"},top:{id:"rankingFilter.top"},bottom:{id:"rankingFilter.bottom"},topWithAttr:{id:"rankingFilter.preview.top_with_attribute"},topWithoutAttr:{id:"rankingFilter.preview.top_without_attribute"},bottomWithAttr:{id:"rankingFilter.preview.bottom_with_attribute"},bottomWithoutAttr:{id:"rankingFilter.preview.bottom_without_attribute"},ALL:{id:"mvf.operator.all"},GREATER_THAN:{id:"mvf.operator.greaterThan"},GREATER_THAN_OR_EQUAL_TO:{id:"mvf.operator.greaterThanOrEqualTo"},LESS_THAN:{id:"mvf.operator.lessThan"},LESS_THAN_OR_EQUAL_TO:{id:"mvf.operator.lessThanOrEqualTo"},EQUAL_TO:{id:"mvf.operator.equalTo"},NOT_EQUAL_TO:{id:"mvf.operator.notEqualTo"},BETWEEN:{id:"mvf.operator.between"},NOT_BETWEEN:{id:"mvf.operator.notBetween"},thisMinute:{id:"filters.thisMinute.title"},lastMinute:{id:"filters.lastMinute.title"},nextMinute:{id:"filters.nextMinute.title"},thisHour:{id:"filters.thisHour.title"},lastHour:{id:"filters.lastHour.title"},nextHour:{id:"filters.nextHour.title"},thisDay:{id:"filters.thisDay.title"},lastDay:{id:"filters.lastDay.title"},nextDay:{id:"filters.nextDay.title"},thisWeek:{id:"filters.thisWeek.title"},thisWeekToDate:{id:"filters.thisWeekToDate.title"},lastWeek:{id:"filters.lastWeek.title"},nextWeek:{id:"filters.nextWeek.title"},thisMonth:{id:"filters.thisMonth.title"},thisMonthToDate:{id:"filters.thisMonthToDate.title"},lastMonth:{id:"filters.lastMonth.title"},nextMonth:{id:"filters.nextMonth.title"},thisQuarter:{id:"filters.thisQuarter.title"},thisQuarterToDate:{id:"filters.thisQuarterToDate.title"},lastQuarter:{id:"filters.lastQuarter.title"},nextQuarter:{id:"filters.nextQuarter.title"},thisYear:{id:"filters.thisYear.title"},thisYearToDate:{id:"filters.thisYearToDate.title"},lastYear:{id:"filters.lastYear.title"},nextYear:{id:"filters.nextYear.title"},lastNMinutes:{id:"filters.lastNMinutes"},lastNHours:{id:"filters.lastNHours"},lastNDays:{id:"filters.lastNDays"},lastNWeeks:{id:"filters.lastNWeeks"},lastNMonths:{id:"filters.lastNMonths"},lastNQuarters:{id:"filters.lastNQuarters"},lastNYears:{id:"filters.lastNYears"},nextNMinutes:{id:"filters.nextNMinutes"},nextNHours:{id:"filters.nextNHours"},nextNDays:{id:"filters.nextNDays"},nextNWeeks:{id:"filters.nextNWeeks"},nextNMonths:{id:"filters.nextNMonths"},nextNQuarters:{id:"filters.nextNQuarters"},nextNYears:{id:"filters.nextNYears"},"minutes.past":{id:"filters.interval.minutes.past"},"minutes.past.sameValue":{id:"filters.interval.minutes.past.sameValue"},"minutes.future":{id:"filters.interval.minutes.future"},"minutes.future.sameValue":{id:"filters.interval.minutes.future.sameValue"},"minutes.mixed":{id:"filters.interval.minutes.mixed"},"hours.past":{id:"filters.interval.hours.past"},"hours.past.sameValue":{id:"filters.interval.hours.past.sameValue"},"hours.future":{id:"filters.interval.hours.future"},"hours.future.sameValue":{id:"filters.interval.hours.future.sameValue"},"hours.mixed":{id:"filters.interval.hours.mixed"},"days.past":{id:"filters.interval.days.past"},"days.past.sameValue":{id:"filters.interval.days.past.sameValue"},"days.future":{id:"filters.interval.days.future"},"days.future.sameValue":{id:"filters.interval.days.future.sameValue"},"days.mixed":{id:"filters.interval.days.mixed"},"weeks.past":{id:"filters.interval.weeks.past"},"weeks.past.sameValue":{id:"filters.interval.weeks.past.sameValue"},"weeks.future":{id:"filters.interval.weeks.future"},"weeks.future.sameValue":{id:"filters.interval.weeks.future.sameValue"},"weeks.mixed":{id:"filters.interval.weeks.mixed"},"months.past":{id:"filters.interval.months.past"},"months.past.sameValue":{id:"filters.interval.months.past.sameValue"},"months.future":{id:"filters.interval.months.future"},"months.future.sameValue":{id:"filters.interval.months.future.sameValue"},"months.mixed":{id:"filters.interval.months.mixed"},"quarters.past":{id:"filters.interval.quarters.past"},"quarters.past.sameValue":{id:"filters.interval.quarters.past.sameValue"},"quarters.future":{id:"filters.interval.quarters.future"},"quarters.future.sameValue":{id:"filters.interval.quarters.future.sameValue"},"quarters.mixed":{id:"filters.interval.quarters.mixed"},"years.past":{id:"filters.interval.years.past"},"years.past.sameValue":{id:"filters.interval.years.past.sameValue"},"years.future":{id:"filters.interval.years.future"},"years.future.sameValue":{id:"filters.interval.years.future.sameValue"},"years.mixed":{id:"filters.interval.years.mixed"},relevantValuesParentFiltersTooltip:{id:"attributesDropdown.relevantValues.tooltip.parentFilters"},relevantValuesLimitsTooltip:{id:"attributesDropdown.relevantValues.tooltip.limits"},relevantValuesParentFiltersLimitsTooltip:{id:"attributesDropdown.relevantValues.tooltip.parentFiltersLimits"}},ne=(e,t,i=c)=>g(e)&&t&&1===e.split(" ").length?`${e} ${i}`:e,re=(e,t,i)=>{const n=i.includes(o),l=i.replace(s,""),a=ne(e,n,c),u=ne(t,n,d),m=h(a),p=h(u),g=(b=p,0===(f=m).getHours()&&0===f.getMinutes()&&23===b.getHours()&&59===b.getMinutes());var f,b;if(r(m).isSame(p,"day"))return n&&!g?`${L(m,l)}, ${((e,t)=>{const i=L(e,o),n=L(t,o);return i===n?i:`${i} – ${n}`})(m,p)}`:L(m,l);const y=g?l:i;return`${L(m,y)} – ${L(p,y)}`},le=[{predicate:(e,t)=>0===e&&0===t,formatter:(e,t,i,n,r)=>(0,p.isUpperBound)(r)&&0===r.to?n.formatMessage(ie[`this${M(i)}ToDate`]):n.formatMessage(ie[`this${M(i)}`])},{predicate:(e,t)=>1===e&&1===t,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`next${M(i)}`])},{predicate:(e,t)=>-1===e&&-1===t,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`last${M(i)}`])},{predicate:e=>0===e,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`nextN${M(i)}s`],{n:Math.abs(t)+1})},{predicate:(e,t)=>0===t,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`lastN${M(i)}s`],{n:Math.abs(e)+1})},{predicate:(e,t)=>e<0&&e===t,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`${i}s.past.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e>0&&e===t,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`${i}s.future.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e<0&&t<0,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`${i}s.past`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:(e,t)=>e>0&&t>0,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`${i}s.future`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:()=>!0,formatter:(e,t,i,n,r)=>n.formatMessage(ie[`${i}s.mixed`],{from:Math.abs(e),to:Math.abs(t)})}],ae=(e,t,i,r,l)=>{const a=n[i];if(void 0===a)return i;const{formatter:o}=le.find((i=>i.predicate(e,t)));return o(e,t,a,r,l)},oe=(e,t,i)=>{if((0,p.isAbsoluteDateFilterForm)(e)||(0,p.isRelativeDateFilterForm)(e))return ce(e,t,i);if((0,p.isAllTimeDateFilterOption)(e)||(0,p.isAbsoluteDateFilterPreset)(e)||(0,p.isRelativeDateFilterPreset)(e))return e.name||ce(e,t,i);throw new Error("Unknown DateFilterOption type")},se=(e,t,i=u)=>{const n=(0,R.getIntl)(t);return oe(e,n,i)},ce=(e,t,i)=>{if((0,p.isAbsoluteDateFilterForm)(e))return((e,t)=>e.from&&e.to?re(e.from,e.to,t):"")(e,i);if((0,p.isAbsoluteDateFilterPreset)(e))return((e,t)=>re(e.from,e.to,t))(e,i);if((0,p.isAllTimeDateFilterOption)(e))return(e=>e.formatMessage({id:"filters.allTime.title"}))(t);if((0,p.isRelativeDateFilterForm)(e))return((e,t)=>"number"==typeof e.from&&"number"==typeof e.to?ae(e.from,e.to,e.granularity,t,e.boundedFilter):"")(e,t);if((0,p.isRelativeDateFilterPreset)(e))return((e,t)=>ae(e.from,e.to,e.granularity,t,e.boundedFilter))(e,t);throw new Error("Unknown DateFilterOption type")},de={validateFilterOption:v,getDateFilterTitle:se,getDateFilterTitleUsingTranslator:(e,t,i=u)=>oe(e,t,i),getDateFilterRepresentation:(e,t,i=u)=>{const n=(0,R.getIntl)(t);return ce(e,n,i)},granularityIntlCodes:n,applyExcludeCurrentPeriod:C,defaultDateFilterOptions:m,canExcludeCurrentPeriod:S,mapOptionToAfm:(e,t,i)=>{const n=C(e,i);if((0,p.isAllTimeDateFilterOption)(n))return null;if(w(n))return((e,t)=>({absoluteDateFilter:{dataSet:t,from:e.from,to:e.to}}))(n,t);if(A(n))return((e,t)=>{const{from:i,to:n,granularity:r,boundedFilter:l}=e;return{relativeDateFilter:{dataSet:t,from:i,to:n,granularity:r,boundedFilter:l}}})(n,t);throw new Error("Unknown date filter value provided")},formatAbsoluteDateRange:re,formatRelativeDateRange:ae,filterVisibleDateFilterOptions:O};var ue=i(59882),me=i(18446),pe=i(14293),ge=i(50308),fe=i(59242),be=i(31155),he=i(65165);const ye=(e=>`only screen and (min-width:${e.lower}px) and (max-width:${e.upper}px)`)({lower:0,upper:640});var Ee=i(94184),ve=i(56541);const Ce=[{align:"bc tl",offset:{x:0,y:5}}],Se=({customIcon:e,disabled:t})=>{if(!e)return null;const{icon:i,tooltip:n,bubbleClassNames:r,bubbleAlignPoints:l}=e,a=Ee(["gd-filter-button-custom-icon-wrapper","s-gd-filter-button-custom-icon-wrapper"],{"disabled s-disabled":t});return ue.createElement("div",{className:a},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement("i",{className:`gd-filter-button-custom-icon s-gd-filter-button-custom-icon ${i}`}),ue.createElement(he.Bubble,{className:`bubble-primary ${r||""}`,alignPoints:l||Ce},n)))},Ie=({isOpen:e,isMobile:t,title:i,children:n,disabled:r,customIcon:l,customFilterName:a,buttonRef:o,dropdownId:s})=>{const c=(0,ue.useCallback)((e=>{(0,he.isActionKey)(e)&&r&&(e.preventDefault(),e.stopPropagation())}),[r]);return ue.createElement("div",{ref:o,className:Ee("s-date-filter-button","gd-date-filter-button",`s-date-filter-button-${ve.gl(a)}`,"dropdown-button",t&&"gd-date-filter-button-mobile",e&&"is-active",r&&"disabled"),role:"button","aria-haspopup":"dialog","aria-expanded":e,"aria-controls":e?s:void 0,tabIndex:0,onKeyDown:c},ue.createElement("div",{className:"button-content"},ue.createElement("div",{className:"s-date-filter-title button-title"},i),ue.createElement("div",{className:"button-subtitle"},n)),ue.createElement(Se,{customIcon:l,disabled:r}))},Fe=({dateFormat:e,filter:t})=>{const i=we({filter:t,dateFormat:e});return ue.createElement(ue.Fragment,null,i)},we=({filter:e,dateFormat:t})=>{const i=X();return se(e,(0,R.resolveLocale)(i.locale),t)},Ae=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}],De=({dateFilterOption:e,dateFormat:t,isOpen:i=!1,isMobile:n=!0,customFilterName:r,disabled:l,customIcon:a,buttonRef:o,dropdownId:s,onClick:c,ButtonComponent:d})=>{const u=X().formatMessage({id:"dateFilterDropdown.title"}),m=r??u,p=r?ue.createElement(he.ShortenedText,{tooltipAlignPoints:Ae},r):ue.createElement(ue.Fragment,null,m),g=we({filter:e,dateFormat:t}),f=d??Ie;return ue.createElement(f,{title:p,isOpen:i,isMobile:n,disabled:l,customIcon:a,customFilterName:r,onClick:c,textTitle:m,textSubtitle:g,buttonRef:o,dropdownId:s},ue.createElement("span",{className:"s-button-text"},ue.createElement(Fe,{filter:e,dateFormat:t})))};function ke(e){var t=X(),i=t.formatMessage,n=t.textComponent,r=void 0===n?H.Fragment:n,l=e.id,a=e.description,o=e.defaultMessage,s=e.values,c=e.children,d=e.tagName,u=void 0===d?r:d,m=i({id:l,description:a,defaultMessage:o},s,{ignoreTag:e.ignoreTag});return"function"==typeof c?c(Array.isArray(m)?m:[m]):u?H.createElement(u,null,H.Children.toArray(m)):H.createElement(H.Fragment,null,m)}ke.displayName="FormattedMessage";var Pe=H.memo(ke,(function(e,t){var i=e.values,n=_(e,["values"]),r=t.values,l=_(t,["values"]);return z(r,i)&&z(n,l)}));Pe.displayName="MemoizedFormattedMessage";const xe=Pe,Oe=({disabled:e,granularity:t})=>{const i=n[t],r=e||void 0===t||void 0===i?ie.allTimeExcluded.id:ie[`${i}Excluded`].id;return ue.createElement(xe,{id:r},((...e)=>ue.createElement("span",{className:"input-label-text"},e)))},Te=[{align:"tc bc"}],Ne=({value:e,onChange:t,disabled:i,granularity:n})=>ue.createElement("div",{className:"gd-extended-date-filter-exclude-current"},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement("label",{className:Ee("s-exclude-current-period","input-checkbox-label",{"s-exclude-current-perod-enabled":!i,"s-exclude-current-perod-disabled":i})},ue.createElement("input",{type:"checkbox",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked),disabled:i,onKeyDown:n=>{i||(0,he.isActionKey)(n)&&(n.preventDefault(),t(!e))}})," ",ue.createElement(Oe,{granularity:n,disabled:i})),i?ue.createElement(he.Bubble,{alignPoints:Te},ue.createElement(xe,{id:"filters.excludeCurrentPeriod.unavailable"})):null)),Le=({className:e,children:t,...i})=>ue.createElement("div",{className:Ee("gd-visible-scrollbar",e),...i},t),Me=()=>ue.createElement("div",{className:"s-extended-date-filter-edit-mode-message gd-extended-date-filter-edit-mode-message"},ue.createElement("div",{className:"gd-extended-date-filter-edit-mode-message-text"},ue.createElement(xe,{id:"dateFilterDropdown.setDefault",values:{nbsp:ue.createElement(ue.Fragment,null," ")}})),ue.createElement("hr",{className:"gd-separator-generic"})),Re=Q((e=>ue.createElement(he.Button,{type:"button",value:e.intl.formatMessage({id:e.messageId}),className:e.className,disabled:e.disabled,onClick:e.onClick}))),Be=[{align:"bc tc",offset:{x:-1,y:5}}],_e=e=>{const{onConfiguration:t}=e;return ue.createElement("div",{className:"gd-date-filter-configuration-button s-gd-date-filter-configuration-button"},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement(he.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:t}),ue.createElement(he.Bubble,{className:"bubble-primary",alignPoints:Be},ue.createElement(xe,{id:"dateFilterDropdown.configuration"}))))},Ve="date-filter-selected-list-item-id",He="date-filter-relative-granularity-tab-id",We=({isSelected:e,className:t,children:i,...n})=>ue.createElement(ue.Fragment,null,ue.createElement("button",{id:e?Ve:void 0,role:"option",className:Ee("gd-list-item","gd-filter-list-item",{"is-selected":e,"gd-filter-list-item-selected":e},t),tabIndex:e?0:-1,"aria-selected":e,...n},i,e?ue.createElement(be.zP,{query:ye},ue.createElement(he.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-date-filter"})):null)),qe=({children:e,isMobile:t,className:i,...n})=>ue.createElement("div",{className:Ee(i,"gd-date-filter-form-wrapper",!t&&"gd-date-filter-form-wrapper-desktop"),...n},ue.createElement("div",{className:"gd-date-filter-form-wrapper-inner"},e));var ze=i(2498);const Ke=e=>{const t=r().locale(ze.Z(e)),i=t?.localeData&&t.localeData();return i?._longDateFormat?.L},Ge={"en-US":"M/d/y","en-GB":"dd/MM/y","en-AU":"dd/MM/y","cs-CZ":"d. M. y","de-DE":"d.M.y","es-ES":"d/M/y","fr-FR":"dd/MM/y","ja-JP":"y/M/d","nl-NL":"d-M-y","pt-BR":"dd/MM/y","pt-PT":"dd/MM/y","zh-Hans":"y/M/d","zh-Hant":"y/M/d","zh-HK":"y/M/d","ru-RU":"dd.MM.y","it-IT":"dd/MM/y","es-419":"d/M/y","fr-CA":"dd/MM/y","fi-FI":"d-M-y","tr-TR":"dd/MM/y","pl-PL":"dd.MM.y","ko-KR":"y.MM.dd"},Ue=e=>Ge[e]??Ge["en-US"],$e=({descriptionId:e,errorText:t})=>t?ue.createElement("div",{id:e,className:Ee("gd-date-range-picker-input__description",{"gd-date-range-picker-input__description--error":!!t,"s-absolute-range-error":!!t})},t):null;var je=i(91884),Ze=i(39989);const Ye=e=>void 0===e?void 0:r(e).format(l),Qe=(e,t)=>{if(void 0!==e&&!isNaN(e.getTime()))return L(e,t)},Xe=(e,t)=>{try{const i=je(e,t,new Date);return Ze(i)&&i.getFullYear()>=1e3&&e===Qe(i,t)?i:void 0}catch{return}},Je=e=>e.filter((e=>!!e)).join(" "),et=e=>void 0!==e&&!isNaN(e.getTime()),tt=(e,t)=>{if(!et(e))return;if(void 0===t)return;const i=new Date(e);return i.setHours(t.hours,t.minutes),i},it=e=>{if(et(e))return{hours:e.getHours(),minutes:e.getMinutes()}},nt=e=>String(e).padStart(2,"0"),rt=e=>void 0!==e&&e.isValid()?{hours:e.hours(),minutes:e.minutes()}:void 0,lt=({value:e,inputLabel:t,onChange:i,accessibilityConfig:n,errorText:l,isMobile:a,withoutApply:s})=>{const[c,d]=(0,ue.useState)(void 0===(u=e)?void 0:`${nt(u.hours)}:${nt(u.minutes)}`);var u;const m=(0,he.useId)(),p=(0,he.useId)(),g=void 0!==l,f=(0,ue.useCallback)((e=>{const t=e.target.value;d(t);const n=r(t,o);(n.isValid()&&g||a)&&i(rt(n))}),[i,g,a]),b=(0,ue.useCallback)((e=>{const t=r(c,o);i(rt(t),e)}),[i,c]),h=(0,ue.useCallback)((()=>b(!1)),[b]),y=(0,ue.useCallback)((e=>{(0,he.isEnterKey)(e)&&!s?b(!0):(0,he.isArrowKey)(e)&&e.stopPropagation()}),[s,b]);return ue.createElement("div",{className:"gd-date-range-column gd-date-range-column--with-time"},ue.createElement("label",{id:m},t),ue.createElement("span",{className:Ee("gd-date-range-picker-input","gd-date-range-picker-input-time","s-date-range-picker-input-time",{"gd-date-range-picker-input-error":!!l,"has-error":!!l})},ue.createElement("span",{className:"gd-icon-clock"}),ue.createElement("input",{type:"time",className:"input-text","aria-label":n.ariaLabel,onChange:f,onBlur:h,onKeyDown:y,value:c,"aria-labelledby":m,"aria-describedby":Je([n.inputHintId,l?p:void 0]),...l?{"aria-invalid":!0}:{}})),ue.createElement($e,{descriptionId:p,errorText:l}))};class at extends ue.Component{inputRef=ue.createRef();invokeInputMethod=e=>{this.inputRef.current&&this.inputRef.current[e]()};blur=()=>this.invokeInputMethod("blur");focus=()=>this.invokeInputMethod("focus");get value(){return this.inputRef.current?this.inputRef.current.value:""}render(){const{className:e}=this.props;return ue.createElement("span",{className:Ee(e)},ue.createElement("span",{className:"gd-icon-calendar"}),ue.createElement("input",{...this.props,ref:this.inputRef,className:"input-text s-date-range-picker-input-field"}))}}const ot=ue.forwardRef((({value:e,inputLabel:t,onKeyDown:i,onClick:n,onChange:r,dateFormat:l,accessibilityConfig:a,isMobile:o,isTimeEnabled:s,isDateOrderError:c,errorMessageTexts:d,withoutApply:u},m)=>{const{inputValue:p,errorMessage:g,onDateInputChange:f,onDateInputKeyDown:b,onMobileDateChange:y,onDateInputBlur:E}=(({value:e,dateFormat:t,onChange:i,onKeyDown:n,isDateOrderError:r=!1,errorMessageTexts:l,withoutApply:a=!1})=>{const[o,s]=(0,ue.useState)(Qe(e,t)),[c,d]=(0,ue.useState)(void 0),u=void 0!==c||r,m=((e,t,i)=>"empty"===e?i.emptyDate:"invalid"===e?i.invalidDate:t?i.startDateAfterEndDate:void 0)(c,r,l);(0,ue.useEffect)((()=>{const i=Qe(e,t);s(i),void 0!==i&&d(void 0)}),[e,t]);const p=(0,ue.useCallback)((e=>{const n=e.target.value;s(n);const r=Xe(n,t);et(r)&&u&&(d(void 0),i(r))}),[t,i,u]),g=(0,ue.useCallback)((e=>{if(I(o))return d("empty"),void i(void 0,e);const n=Xe(o,t);if(void 0===n)return d("invalid"),void i(void 0,e);d(null),i(n,e)}),[t,o,i]),f=(0,ue.useCallback)((()=>g(!1)),[g]),b=(0,ue.useCallback)((e=>{const t=e.target.value,n=h(t),r=et(n);i(r?n:void 0),d(r?void 0:"empty")}),[i]),y=(0,ue.useCallback)((e=>{(0,he.isEnterKey)(e)&&!a?g(!0):(0,he.isArrowKey)(e)?e.stopPropagation():n(e)}),[a,g,n]);return{inputValue:o,errorMessage:m,onDateInputChange:p,onMobileDateChange:b,onDateInputBlur:f,onDateInputKeyDown:y}})({value:e,dateFormat:l,onChange:r,onKeyDown:i,isDateOrderError:c,errorMessageTexts:d,withoutApply:u}),v=(0,he.useId)(),C=(0,he.useId)(),S={"aria-label":a.ariaLabel,"aria-labelledby":v,"aria-describedby":Je([a.inputHintId,g?C:void 0]),...g?{"aria-invalid":!0}:{}},F=ue.createElement(at,{type:"date",className:Ee("s-date-range-picker-date","gd-date-range-picker-input","gd-date-range-picker-input-native",{"gd-date-range-picker-input-error":!!g,"has-error":!!g}),onChange:y,value:Ye(e),...S}),w=ue.createElement("div",{className:Ee("gd-date-range-picker-input",{"gd-date-range-picker-input-error":!!g,"has-error":!!g})},ue.createElement("span",{className:"gd-icon-calendar"}),ue.createElement("input",{ref:m,placeholder:l,onChange:f,onClick:n,onBlur:E,onKeyDown:b,value:p,className:"input-text s-date-range-picker-input-field",...S}));return ue.createElement("div",{className:Ee("gd-date-range-column",{"gd-date-range-column--with-time":s})},ue.createElement("label",{id:v},t),o?F:w,ue.createElement($e,{descriptionId:C,errorText:g}))}));ot.displayName="DateInput";const st=ue.forwardRef((({date:e,time:t,dateInputLabel:i,timeInputLabel:n,onDateChange:r,onTimeChange:l,onDayClick:a,onDateInputKeyDown:o,dateFormat:s,isMobile:c,isTimeEnabled:d,className:u,accessibilityConfig:m,inputErrorMessageTexts:p,errors:g,withoutApply:f},b)=>{const{dateAriaLabel:h,timeAriaLabel:y,dateInputHintId:E,timeInputHintId:v}=m,C=(0,ue.useMemo)((()=>({ariaLabel:h,inputHintId:E})),[h,E]),S=(0,ue.useMemo)((()=>({ariaLabel:y,inputHintId:v})),[y,v]),I=g?.isTimeOrderError?p.timeInput.startTimeAfterEndTime:void 0;return ue.createElement("div",{className:Ee(u,{"gd-date-range-row":d})},ue.createElement("fieldset",null,ue.createElement(ot,{ref:b,value:e,inputLabel:i,onChange:r,onKeyDown:o,onClick:a,dateFormat:s,accessibilityConfig:C,errorMessageTexts:p.dateInput,isDateOrderError:g?.isDateOrderError,isMobile:c,isTimeEnabled:d,withoutApply:f}),d?ue.createElement(lt,{value:t,inputLabel:n,onChange:l,accessibilityConfig:S,errorText:I,isMobile:c,withoutApply:f}):null))}));st.displayName="DateTimePickerComponent";const ct=Q(st,{forwardRef:!0});ct.displayName="DateTimePicker";const dt="date-range-picker-date-input-hint",ut="date-range-picker-time-input-hint",mt=(0,ue.forwardRef)((({date:e,time:t,onDateInputKeyDown:i,onDateChange:n,onTimeChange:r,onInputClick:l,dateFormat:a,isMobile:o,isTimeEnabled:s,errors:d,intl:u,withoutApply:m},p)=>{const g=(0,ue.useMemo)((()=>({dateAriaLabel:u.formatMessage({id:"filters.date.accessibility.label.from"}),timeAriaLabel:u.formatMessage({id:"filters.time.accessibility.label.from"}),dateInputHintId:dt,timeInputHintId:ut})),[u]),f=(0,ue.useMemo)((()=>({dateInput:{emptyDate:u.formatMessage({id:"filters.staticPeriod.errors.emptyStartDate"}),invalidDate:u.formatMessage({id:"filters.staticPeriod.errors.invalidStartDate"},{format:a||Ke(u.locale)}),startDateAfterEndDate:u.formatMessage({id:"filters.staticPeriod.errors.startDateAfterEndDate"})},timeInput:{startTimeAfterEndTime:u.formatMessage({id:"filters.staticPeriod.errors.startTimeAfterEndTime"})}})),[u,a]);return ue.createElement(ct,{ref:p,date:e,time:t,onDateChange:n,onTimeChange:r,onDateInputKeyDown:i,dateInputLabel:u.formatMessage({id:"filters.staticPeriod.dateFrom"}),timeInputLabel:u.formatMessage({id:"filters.staticPeriod.timeFrom"}),accessibilityConfig:g,dateFormat:a,isMobile:o,onDayClick:l,isTimeEnabled:s,className:Ee("s-date-range-picker-from","gd-date-range-picker-from"),defaultTime:c,inputErrorMessageTexts:f,errors:d,withoutApply:m})}));mt.displayName="FromInputField";const pt=(0,ue.forwardRef)((({date:e,time:t,onDateInputKeyDown:i,onDateChange:n,onTimeChange:r,onInputClick:l,dateFormat:a,isMobile:o,isTimeEnabled:s,errors:c,intl:u},m)=>{const p=(0,ue.useMemo)((()=>({dateAriaLabel:u.formatMessage({id:"filters.date.accessibility.label.to"}),timeAriaLabel:u.formatMessage({id:"filters.time.accessibility.label.to"}),dateInputHintId:dt,timeInputHintId:ut})),[u]),g=(0,ue.useMemo)((()=>({dateInput:{emptyDate:u.formatMessage({id:"filters.staticPeriod.errors.emptyEndDate"}),invalidDate:u.formatMessage({id:"filters.staticPeriod.errors.invalidEndDate"},{format:a||Ke(u.locale)}),startDateAfterEndDate:u.formatMessage({id:"filters.staticPeriod.errors.endDateBeforeStartDate"})},timeInput:{startTimeAfterEndTime:u.formatMessage({id:"filters.staticPeriod.errors.endTimeBeforeStartTime"})}})),[u,a]);return ue.createElement(ct,{ref:m,date:e,time:t,onDateChange:n,onTimeChange:r,onDateInputKeyDown:i,dateInputLabel:u.formatMessage({id:"filters.staticPeriod.dateTo"}),timeInputLabel:u.formatMessage({id:"filters.staticPeriod.timeTo"}),accessibilityConfig:p,dateFormat:a,isMobile:o,onDayClick:l,isTimeEnabled:s,className:Ee("s-date-range-picker-to","gd-date-range-picker-to"),defaultTime:d,inputErrorMessageTexts:g,errors:c})}));pt.displayName="ToInputField";const gt=({dateFormat:e,isTimeEnabled:t,dateHintId:i,timeHintId:n,intl:r})=>ue.createElement("div",{className:"gd-date-range__hint"},ue.createElement("div",{id:i},r.formatMessage({id:"filters.staticPeriod.dateFormatHint"},{format:e||Ke(r.locale)})),t?ue.createElement("div",{id:n},r.formatMessage({id:"filters.staticPeriod.timeFormatHint"})):null);var ft=i(12595),bt=i(82512),ht=i(76119),yt=i(19962),Et=i(63126),vt=i(42180),Ct=i(70390),St=i(63086),It=i(81333),Ft=i(24602);const wt={"en-US":bt,"de-DE":ht,"es-ES":yt,"fr-FR":Et,"ja-JP":vt,"nl-NL":Ct,"pt-BR":It,"pt-PT":St,"zh-Hans":Ft,"ru-RU":i(66754),"it-IT":i(59629),"es-419":yt,"en-GB":i(22709),"fr-CA":i(82580),"zh-Hant":Ft,"en-AU":i(51971),"fi-FI":i(95999),"zh-HK":Ft,"tr-TR":i(41062),"pl-PL":i(63618),"ko-KR":i(2666)},At=[{align:"bl tl",offset:{x:0,y:1}}];function Dt(e){switch(e){case"Sunday":return 0;case"Monday":return 1;default:throw new Error(`Unknown week start ${e}`)}}const kt=(0,ue.forwardRef)((({mode:e,originalDateRange:t,selectedDateRange:i,onDateRangeSelect:n,dayPickerProps:r,alignTo:l,weekStart:a,renderAsOverlay:o,calendarClassNames:s,intl:c},d)=>{const[u,m]=(0,ue.useState)("from"===e?i.from:i.to);var p;const g=(h={mode:"range",showOutsideDays:!0,modifiers:{start:t.from,end:t.to},selected:{from:t.from,to:t.to},locale:(p=c.locale,wt[p])},(y=r)?((e,t)=>{return{...e,...t,...(i=e.modifiers,n=t.modifiers,i?{modifiers:{...i,...n}}:void 0)};var i,n})(h,y):h),f=ue.createElement("div",{className:"gd-date-range-picker-wrapper",ref:d},ue.createElement(ft._W,{...g,month:u,onSelect:n,selected:i,classNames:{root:s},onMonthChange:m,weekStartsOn:Dt(a)})),b=ue.createElement(he.Overlay,{alignTo:l,alignPoints:At,closeOnOutsideClick:!0,closeOnMouseDrag:!0,closeOnParentScroll:!0},f);var h,y;return o?b:f}));kt.displayName="DayPicker";const Pt=(e,t,i,n)=>{const r=et(i),l=et(n);if(!r||!l||i<=n)return e(void 0),t(void 0),r&&l;const a=(s=n,!!(o=i)&&!!s&&o.getFullYear()===s.getFullYear()&&o.getMonth()===s.getMonth()&&o.getDate()===s.getDate());var o,s;return e({isDateOrderError:!a,isTimeOrderError:a}),t(void 0),!1};function xt(e,t,i){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:i}const Ot=Q((({range:e,onRangeChange:t,dateFormat:i,dayPickerProps:n,intl:r,isMobile:l,isTimeEnabled:a,weekStart:o="Sunday",shouldOverlayDatePicker:s=!1,withoutApply:c=!1,submitForm:d})=>{const{selectedInput:u,isCalendarPopupOpen:m,onDateInputKeyDown:p,onStartDateClick:g,onEndDateClick:f,calendarPopupRef:b,startDateInputRef:h,endDateInputRef:y,closeCalendarPopup:E}=(()=>{const[e,t]=(0,ue.useState)(!1),[i,n]=(0,ue.useState)(),r=(0,ue.useRef)(null),l=(0,ue.useRef)(null),a=(0,ue.useRef)(null),o=(0,ue.useCallback)((()=>{n("from"),t(!0)}),[]),s=(0,ue.useCallback)((()=>{n("to"),t(!0)}),[]),c=(0,ue.useCallback)((i=>{!e||"Escape"!==i.key&&"Tab"!==i.key||(t(!1),i.stopPropagation())}),[e]),d=(0,ue.useCallback)((()=>t(!1)),[]),u=(0,ue.useCallback)((e=>{((e,t,i,n)=>t&&!t.contains(e.target)&&i&&!i.contains(e.target)&&n&&!n.contains(e.target))(e,a.current,r.current,l.current)&&t(!1)}),[]);return(0,ue.useEffect)((()=>(document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u))),[u]),{selectedInput:i,isCalendarPopupOpen:e,onDateInputKeyDown:c,onStartDateClick:o,onEndDateClick:s,calendarPopupRef:a,startDateInputRef:r,endDateInputRef:l,closeCalendarPopup:d}})(),{startDate:v,startTime:C,endDate:S,endTime:I,startDateTimeErrors:F,endDateTimeErrors:w,onCalendarDateSelect:A,onStartDateChange:D,onStartTimeChange:k,onEndDateChange:P,onEndTimeChange:x}=((e,t,i,n,r)=>{const[l,a]=(0,ue.useState)(e.from),[o,s]=(0,ue.useState)(it(e.from)),[c,d]=(0,ue.useState)(e.to),[u,m]=(0,ue.useState)(it(e.to)),[p,g]=(0,ue.useState)(),[f,b]=(0,ue.useState)(),h=(0,ue.useCallback)(((e,t)=>Pt(g,b,e,t)),[]),y=(0,ue.useCallback)(((e,t)=>Pt(b,g,e,t)),[]),E=(0,ue.useCallback)(((e,i,n)=>{const a=tt(xt(e,"startDate",l),xt(e,"startTime",o)),s=tt(xt(e,"endDate",c),xt(e,"endTime",u));t({from:a,to:s}),i(a,s)&&n&&setTimeout(r,0)}),[t,l,o,c,u,r]),v=(0,ue.useCallback)(((e,t)=>{a(e),E({startDate:e},h,t)}),[E,h]),C=(0,ue.useCallback)(((e,t)=>{d(e),E({endDate:e},y,t)}),[E,y]),S=(0,ue.useCallback)(((e,t)=>{s(e),E({startTime:e},h,t)}),[E,h]),I=(0,ue.useCallback)(((e,t)=>{m(e),E({endTime:e},y,t)}),[E,y]),F=(0,ue.useCallback)(((e,t)=>{"from"===n?v(t):C(t),i()}),[n,i,v,C]);return{startDate:l,startTime:o,endDate:c,endTime:u,startDateTimeErrors:p,endDateTimeErrors:f,onCalendarDateSelect:F,onStartDateChange:v,onStartTimeChange:S,onEndDateChange:C,onEndTimeChange:I}})(e,t,E,u,d),O=ue.createElement(mt,{ref:h,date:v,time:C,onDateChange:D,onTimeChange:k,onInputClick:g,onDateInputKeyDown:p,dateFormat:i,isMobile:l,isTimeEnabled:a,errors:F,intl:r,withoutApply:c}),T=ue.createElement(pt,{ref:y,date:S,time:I,onDateChange:P,onTimeChange:x,onInputClick:f,onDateInputKeyDown:p,dateFormat:i,isMobile:l,isTimeEnabled:a,errors:w,intl:r}),N={from:v,to:S},L=ue.createElement(kt,{ref:b,mode:u,originalDateRange:N,selectedDateRange:N,onDateRangeSelect:A,alignTo:`.gd-date-range-picker-${a?u:"from"}`,calendarClassNames:`gd-date-range-picker-picker s-date-range-calendar-${u}`,dayPickerProps:n,weekStart:o,renderAsOverlay:s,intl:r}),M=l?null:ue.createElement(gt,{dateFormat:i,isTimeEnabled:a,dateHintId:dt,timeHintId:ut,intl:r});if(a){const e="from"===u&&m,t="to"===u&&m;return ue.createElement(ue.Fragment,null,ue.createElement("div",{className:"gd-date-range-picker datetime s-date-range-picker"},O,e?L:null,T,t?L:null),M)}return ue.createElement(ue.Fragment,null,ue.createElement("div",{className:"gd-date-range-picker gd-date-range-row s-date-range-picker"},O,T),m?L:null,M)})),Tt=(e,t=!1)=>{const i=e.from&&e.from.split(" ").length>1,n=e.to&&e.to.split(" ").length>1,r=e&&h(e.from),l=e&&h(e.to);return r&&!i&&t&&(r.setHours(0),r.setMinutes(0)),l&&!n&&t&&(l.setHours(23),l.setMinutes(59)),{from:r,to:l}},Nt={mode:"range",weekStartsOn:0},Lt=({dateFormat:e,isMobile:t,selectedFilterOption:i,isTimeEnabled:n,weekStart:r,shouldOverlayDatePicker:o,withoutApply:s,onSelectedFilterOptionChange:c,submitForm:d})=>ue.createElement(Ot,{dateFormat:e,onRangeChange:e=>{c(((e,t,i)=>{const n=i?a:l;return{from:b(e.from,n),to:b(e.to,n),localIdentifier:t,type:"absoluteForm",name:"",visible:!0}})(e,i.localIdentifier,n))},range:Tt(i,n),isMobile:t,dayPickerProps:Nt,isTimeEnabled:n,weekStart:r,shouldOverlayDatePicker:o,submitForm:d,withoutApply:s}),Mt=({filterOptions:e,selectedFilterOption:t,dateFormat:i,weekStart:n,isTimeForAbsoluteRangeEnabled:r,isMobile:l,route:a,withoutApply:o,changeRoute:s,onSelectedFilterOptionChange:c,closeDropdown:d,onApplyClick:u})=>{const m=(0,ue.useCallback)((()=>{u(),d()}),[d,u]);if(!e.absoluteForm)return null;const g=e.absoluteForm.localIdentifier===t.localIdentifier,f="absoluteForm"===a;return ue.createElement(ue.Fragment,null,l&&f?null:ue.createElement(We,{isSelected:g,onClick:()=>{s("absoluteForm"),(0,p.isAbsoluteDateFilterForm)(t)||c(e.absoluteForm)},className:Ee("s-absolute-form","s-do-not-close-dropdown-on-click",l&&"gd-date-filter-item-mobile")},e.absoluteForm.name?e.absoluteForm.name:ue.createElement(xe,{id:"filters.staticPeriod"})),!g||l&&!f?null:ue.createElement(qe,{isMobile:l},ue.createElement(Lt,{dateFormat:i,onSelectedFilterOptionChange:c,selectedFilterOption:t,isMobile:l,isTimeEnabled:r,weekStart:n,submitForm:m,withoutApply:o})))},Rt=({className:e,filterOption:t,selectedFilterOption:i,onSelectedFilterOptionChange:n})=>ue.createElement(We,{isSelected:t.localIdentifier===i.localIdentifier,onClick:()=>n(t),className:Ee("s-all-time",e)},t.name?t.name:ue.createElement(xe,{id:"filters.allTime.title"})),Bt=({filterOptions:e,selectedFilterOption:t,isMobile:i,onSelectedFilterOptionChange:n})=>e.allTime?ue.createElement(Rt,{filterOption:e.allTime,selectedFilterOption:t,onSelectedFilterOptionChange:n,className:i?"gd-date-filter-item-mobile":void 0}):null,_t=({children:e,className:t,bubbleAlignPoints:i,...n})=>ue.createElement("span",{className:Ee("gd-list-item-tooltip",t),...n},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement("span",{className:"gd-icon-circle-question gd-list-item-tooltip-icon"}),ue.createElement(he.Bubble,{alignPoints:i},e)));var Vt;!function(e){e.OPTION="option",e.TAB="tab"}(Vt||(Vt={}));const Ht=(e,t,i)=>e.current.contains(t)&&t.role===i,Wt=(e,t,i)=>{let n,r=t;do{r=(r+i+e.length)%e.length,n=e[r]}while("tab"===n.getAttribute("role"));return n};var qt=i(89734);const zt=({className:e,children:t,...i})=>{const n=X();return ue.createElement("div",{role:"tablist","aria-label":n.formatMessage({id:"dateFilterDropdown.relativeForm.label"}),className:Ee("gd-tabs small is-condensed",e),...i},t)},Kt=({selected:e,className:t,accessibilityConfig:i,onClick:n,children:r,...l})=>ue.createElement("button",{id:e?He:void 0,onClick:n,role:"tab","aria-selected":e,"aria-controls":e?i?.ariaControls:void 0,tabIndex:e?0:-1,className:Ee(e&&"is-active","gd-tab",t),...l},r),Gt={"GDC.time.year":0,"GDC.time.quarter":1,"GDC.time.month":2,"GDC.time.week_us":3,"GDC.time.date":4,"GDC.time.hour":5,"GDC.time.minute":6},Ut=({availableGranularities:e,selectedGranularity:t,accessibilityConfig:i,onSelectedGranularityChange:r})=>{return ue.createElement(zt,{className:"gd-relative-filter-form-granularity-tabs s-relative-filter-form-granularity-tabs"},(l=e,qt(l,(e=>Gt[e]))).map((e=>{const l=n[e];return void 0===l?null:ue.createElement(Kt,{key:e,selected:e===t,onClick:()=>r(e),className:`s-granularity-${l}`,accessibilityConfig:i},ue.createElement(xe,{id:ie[l].id}))})).filter(Boolean));var l};var $t=i(63366),jt=i(87462),Zt=i(97326),Yt=i(94578),Qt=i(45697),Xt=i.n(Qt),Jt=i(9155);function ei(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function ti(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function ii(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var i=getComputedStyle(e,null);return ti(i.overflowY,t)||ti(i.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function ni(e,t,i,n,r,l,a,o){return l<e&&a>t||l>e&&a<t?0:l<=e&&o<=i||a>=t&&o>=i?l-e-n:a>t&&o<i||l<e&&o>i?a-t+r:0}i(59864);var ri=0;function li(e){return"function"==typeof e?e:ai}function ai(){}function oi(e,t){if(null!==e){var i=function(e,t){var i=window,n=t.scrollMode,r=t.block,l=t.inline,a=t.boundary,o=t.skipOverflowHiddenElements,s="function"==typeof a?a:function(e){return e!==a};if(!ei(e))throw new TypeError("Invalid target");for(var c,d,u=document.scrollingElement||document.documentElement,m=[],p=e;ei(p)&&s(p);){if((p=null==(d=(c=p).parentElement)?c.getRootNode().host||null:d)===u){m.push(p);break}null!=p&&p===document.body&&ii(p)&&!ii(document.documentElement)||null!=p&&ii(p,o)&&m.push(p)}for(var g=i.visualViewport?i.visualViewport.width:innerWidth,f=i.visualViewport?i.visualViewport.height:innerHeight,b=window.scrollX||pageXOffset,h=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),E=y.height,v=y.width,C=y.top,S=y.right,I=y.bottom,F=y.left,w="start"===r||"nearest"===r?C:"end"===r?I:C+E/2,A="center"===l?F+v/2:"end"===l?S:F,D=[],k=0;k<m.length;k++){var P=m[k],x=P.getBoundingClientRect(),O=x.height,T=x.width,N=x.top,L=x.right,M=x.bottom,R=x.left;if("if-needed"===n&&C>=0&&F>=0&&I<=f&&S<=g&&C>=N&&I<=M&&F>=R&&S<=L)return D;var B=getComputedStyle(P),_=parseInt(B.borderLeftWidth,10),V=parseInt(B.borderTopWidth,10),H=parseInt(B.borderRightWidth,10),W=parseInt(B.borderBottomWidth,10),q=0,z=0,K="offsetWidth"in P?P.offsetWidth-P.clientWidth-_-H:0,G="offsetHeight"in P?P.offsetHeight-P.clientHeight-V-W:0,U="offsetWidth"in P?0===P.offsetWidth?0:T/P.offsetWidth:0,$="offsetHeight"in P?0===P.offsetHeight?0:O/P.offsetHeight:0;if(u===P)q="start"===r?w:"end"===r?w-f:"nearest"===r?ni(h,h+f,f,V,W,h+w,h+w+E,E):w-f/2,z="start"===l?A:"center"===l?A-g/2:"end"===l?A-g:ni(b,b+g,g,_,H,b+A,b+A+v,v),q=Math.max(0,q+h),z=Math.max(0,z+b);else{q="start"===r?w-N-V:"end"===r?w-M+W+G:"nearest"===r?ni(N,M,O,V,W+G,w,w+E,E):w-(N+O/2)+G/2,z="start"===l?A-R-_:"center"===l?A-(R+T/2)+K/2:"end"===l?A-L+H+K:ni(R,L,T,_,H+K,A,A+v,v);var j=P.scrollLeft,Z=P.scrollTop;w+=Z-(q=Math.max(0,Math.min(Z+q/$,P.scrollHeight-O/$+G))),A+=j-(z=Math.max(0,Math.min(j+z/U,P.scrollWidth-T/U+K)))}D.push({el:P,top:q,left:z})}return D}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});i.forEach((function(e){var t=e.el,i=e.top,n=e.left;t.scrollTop=i,t.scrollLeft=n}))}}function si(e,t){return e===t||e.contains&&e.contains(t)}function ci(e,t){var i;function n(){i&&clearTimeout(i)}function r(){for(var r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];n(),i=setTimeout((function(){i=null,e.apply(void 0,l)}),t)}return r.cancel=n,r}function di(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.some((function(t){return t&&t.apply(void 0,[e].concat(n)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function ui(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function mi(e){var t=e.isOpen,i=e.selectedItem,n=e.resultCount,r=e.previousResultCount,l=e.itemToString;return t?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":i?l(i):""}function pi(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}var gi=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function fi(e){void 0===e&&(e={});var t={};return gi.forEach((function(i){e.hasOwnProperty(i)&&(t[i]=e[i])})),t}function bi(e){var t=e.key,i=e.keyCode;return i>=37&&i<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function hi(e,t,i){var n=i-1;("number"!=typeof t||t<0||t>=i)&&(t=e>0?-1:n+1);var r=t+e;return r<0?r=n:r>n&&(r=0),r}var yi=ci((function(){Ei().textContent=""}),500);function Ei(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var vi=Object.freeze({__proto__:null,unknown:0,mouseUp:1,itemMouseEnter:2,keyDownArrowUp:3,keyDownArrowDown:4,keyDownEscape:5,keyDownEnter:6,keyDownHome:7,keyDownEnd:8,clickItem:9,blurInput:10,changeInput:11,keyDownSpaceButton:12,clickButton:13,blurButton:14,controlledPropUpdatedSelectedItem:15,touchEnd:16}),Ci=function(){var e=function(e){function t(t){var i=e.call(this,t)||this;i.id=i.props.id||"downshift-"+String(ri++),i.menuId=i.props.menuId||i.id+"-menu",i.labelId=i.props.labelId||i.id+"-label",i.inputId=i.props.inputId||i.id+"-input",i.getItemId=i.props.getItemId||function(e){return i.id+"-item-"+e},i.input=null,i.items=[],i.itemCount=null,i.previousResultCount=0,i.timeoutIds=[],i.internalSetTimeout=function(e,t){var n=setTimeout((function(){i.timeoutIds=i.timeoutIds.filter((function(e){return e!==n})),e()}),t);i.timeoutIds.push(n)},i.setItemCount=function(e){i.itemCount=e},i.unsetItemCount=function(){i.itemCount=null},i.setHighlightedIndex=function(e,t){void 0===e&&(e=i.props.defaultHighlightedIndex),void 0===t&&(t={}),t=fi(t),i.internalSetState((0,jt.Z)({highlightedIndex:e},t))},i.clearSelection=function(e){i.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:i.props.defaultHighlightedIndex,isOpen:i.props.defaultIsOpen},e)},i.selectItem=function(e,t,n){t=fi(t),i.internalSetState((0,jt.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,selectedItem:e,inputValue:i.props.itemToString(e)},t),n)},i.selectItemAtIndex=function(e,t,n){var r=i.items[e];null!=r&&i.selectItem(r,t,n)},i.selectHighlightedItem=function(e,t){return i.selectItemAtIndex(i.getState().highlightedIndex,e,t)},i.internalSetState=function(e,t){var n,r,l={},a="function"==typeof e;return!a&&e.hasOwnProperty("inputValue")&&i.props.onInputValueChange(e.inputValue,(0,jt.Z)({},i.getStateAndHelpers(),{},e)),i.setState((function(t){t=i.getState(t);var o=a?e(t):e;o=i.props.stateReducer(t,o),n=o.hasOwnProperty("selectedItem");var s={},c={};return n&&o.selectedItem!==t.selectedItem&&(r=o.selectedItem),o.type=o.type||0,Object.keys(o).forEach((function(e){t[e]!==o[e]&&(l[e]=o[e]),"type"!==e&&(c[e]=o[e],i.isControlledProp(e)||(s[e]=o[e]))})),a&&o.hasOwnProperty("inputValue")&&i.props.onInputValueChange(o.inputValue,(0,jt.Z)({},i.getStateAndHelpers(),{},o)),s}),(function(){li(t)(),Object.keys(l).length>1&&i.props.onStateChange(l,i.getStateAndHelpers()),n&&i.props.onSelect(e.selectedItem,i.getStateAndHelpers()),void 0!==r&&i.props.onChange(r,i.getStateAndHelpers()),i.props.onUserAction(l,i.getStateAndHelpers())}))},i.rootRef=function(e){return i._rootNode=e},i.getRootProps=function(e,t){var n,r=void 0===e?{}:e,l=r.refKey,a=void 0===l?"ref":l,o=r.ref,s=(0,$t.Z)(r,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,d=void 0!==c&&c;i.getRootProps.called=!0,i.getRootProps.refKey=a,i.getRootProps.suppressRefError=d;var u=i.getState().isOpen;return(0,jt.Z)(((n={})[a]=ui(o,i.rootRef),n.role="combobox",n["aria-expanded"]=u,n["aria-haspopup"]="listbox",n["aria-owns"]=u?i.menuId:null,n["aria-labelledby"]=i.labelId,n),s)},i.keyDownHandlers={ArrowDown:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var i=e.shiftKey?5:1;this.moveHighlightedIndex(i,{type:4})}else this.internalSetState({isOpen:!0,type:4},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(hi(1,t.getState().highlightedIndex,e),{type:4})}))},ArrowUp:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var i=e.shiftKey?-5:-1;this.moveHighlightedIndex(i,{type:3})}else this.internalSetState({isOpen:!0,type:3},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(hi(-1,t.getState().highlightedIndex,e),{type:4})}))},Enter:function(e){var t=this.getState(),i=t.isOpen,n=t.highlightedIndex;if(i&&null!=n){e.preventDefault();var r=this.items[n],l=this.getItemNodeFromIndex(n);if(null==r||l&&l.hasAttribute("disabled"))return;this.selectHighlightedItem({type:6})}},Escape:function(e){e.preventDefault(),this.reset({type:5,selectedItem:null,inputValue:""})}},i.buttonKeyDownHandlers=(0,jt.Z)({},i.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:12})}}),i.inputKeyDownHandlers=(0,jt.Z)({},i.keyDownHandlers,{Home:function(e){this.highlightFirstOrLastIndex(e,!0,{type:7})},End:function(e){this.highlightFirstOrLastIndex(e,!1,{type:8})}}),i.getToggleButtonProps=function(e){var t=void 0===e?{}:e,n=t.onClick,r=(t.onPress,t.onKeyDown),l=t.onKeyUp,a=t.onBlur,o=(0,$t.Z)(t,["onClick","onPress","onKeyDown","onKeyUp","onBlur"]),s=i.getState().isOpen,c={onClick:di(n,i.buttonHandleClick),onKeyDown:di(r,i.buttonHandleKeyDown),onKeyUp:di(l,i.buttonHandleKeyUp),onBlur:di(a,i.buttonHandleBlur)},d=o.disabled?{}:c;return(0,jt.Z)({type:"button",role:"button","aria-label":s?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},d,{},o)},i.buttonHandleKeyUp=function(e){e.preventDefault()},i.buttonHandleKeyDown=function(e){var t=bi(e);i.buttonKeyDownHandlers[t]&&i.buttonKeyDownHandlers[t].call((0,Zt.Z)(i),e)},i.buttonHandleClick=function(e){e.preventDefault(),i.props.environment.document.activeElement===i.props.environment.document.body&&e.target.focus(),i.internalSetTimeout((function(){return i.toggleMenu({type:13})}))},i.buttonHandleBlur=function(e){var t=e.target;i.internalSetTimeout((function(){i.isMouseDown||null!=i.props.environment.document.activeElement&&i.props.environment.document.activeElement.id===i.inputId||i.props.environment.document.activeElement===t||i.reset({type:14})}))},i.getLabelProps=function(e){return(0,jt.Z)({htmlFor:i.inputId,id:i.labelId},e)},i.getInputProps=function(e){var t,n=void 0===e?{}:e,r=n.onKeyDown,l=n.onBlur,a=n.onChange,o=n.onInput,s=(n.onChangeText,(0,$t.Z)(n,["onKeyDown","onBlur","onChange","onInput","onChangeText"])),c={},d=i.getState(),u=d.inputValue,m=d.isOpen,p=d.highlightedIndex;return s.disabled||((t={}).onChange=di(a,o,i.inputHandleChange),t.onKeyDown=di(r,i.inputHandleKeyDown),t.onBlur=di(l,i.inputHandleBlur),c=t),(0,jt.Z)({"aria-autocomplete":"list","aria-activedescendant":m&&"number"==typeof p&&p>=0?i.getItemId(p):null,"aria-controls":m?i.menuId:null,"aria-labelledby":i.labelId,autoComplete:"off",value:u,id:i.inputId},c,{},s)},i.inputHandleKeyDown=function(e){var t=bi(e);t&&i.inputKeyDownHandlers[t]&&i.inputKeyDownHandlers[t].call((0,Zt.Z)(i),e)},i.inputHandleChange=function(e){i.internalSetState({type:11,isOpen:!0,inputValue:e.target.value,highlightedIndex:i.props.defaultHighlightedIndex})},i.inputHandleBlur=function(){i.internalSetTimeout((function(){var e=i.props.environment.document&&!!i.props.environment.document.activeElement&&!!i.props.environment.document.activeElement.dataset&&i.props.environment.document.activeElement.dataset.toggle&&i._rootNode&&i._rootNode.contains(i.props.environment.document.activeElement);i.isMouseDown||e||i.reset({type:10})}))},i.menuRef=function(e){i._menuNode=e},i.getMenuProps=function(e,t){var n,r=void 0===e?{}:e,l=r.refKey,a=void 0===l?"ref":l,o=r.ref,s=(0,$t.Z)(r,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,d=void 0!==c&&c;return i.getMenuProps.called=!0,i.getMenuProps.refKey=a,i.getMenuProps.suppressRefError=d,(0,jt.Z)(((n={})[a]=ui(o,i.menuRef),n.role="listbox",n["aria-labelledby"]=s&&s["aria-label"]?null:i.labelId,n.id=i.menuId,n),s)},i.getItemProps=function(e){var t,n=void 0===e?{}:e,r=n.onMouseMove,l=n.onMouseDown,a=n.onClick,o=(n.onPress,n.index),s=n.item,c=void 0===s?void 0:s,d=(0,$t.Z)(n,["onMouseMove","onMouseDown","onClick","onPress","index","item"]);void 0===o?(i.items.push(c),o=i.items.indexOf(c)):i.items[o]=c;var u=a,m=((t={onMouseMove:di(r,(function(){o!==i.getState().highlightedIndex&&(i.setHighlightedIndex(o,{type:2}),i.avoidScrolling=!0,i.internalSetTimeout((function(){return i.avoidScrolling=!1}),250))})),onMouseDown:di(l,(function(e){e.preventDefault()}))}).onClick=di(u,(function(){i.selectItemAtIndex(o,{type:9})})),t),p=d.disabled?{onMouseDown:m.onMouseDown}:m;return(0,jt.Z)({id:i.getItemId(o),role:"option","aria-selected":i.getState().highlightedIndex===o},p,{},d)},i.clearItems=function(){i.items=[]},i.reset=function(e,t){void 0===e&&(e={}),e=fi(e),i.internalSetState((function(t){var n=t.selectedItem;return(0,jt.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,inputValue:i.props.itemToString(n)},e)}),t)},i.toggleMenu=function(e,t){void 0===e&&(e={}),e=fi(e),i.internalSetState((function(t){var n=t.isOpen;return(0,jt.Z)({isOpen:!n},n&&{highlightedIndex:i.props.defaultHighlightedIndex},{},e)}),(function(){var n=i.getState(),r=n.isOpen,l=n.highlightedIndex;r&&i.getItemCount()>0&&"number"==typeof l&&i.setHighlightedIndex(l,e),li(t)()}))},i.openMenu=function(e){i.internalSetState({isOpen:!0},e)},i.closeMenu=function(e){i.internalSetState({isOpen:!1},e)},i.updateStatus=ci((function(){var e=i.getState(),t=i.items[e.highlightedIndex],n=i.getItemCount(),r=i.props.getA11yStatusMessage((0,jt.Z)({itemToString:i.props.itemToString,previousResultCount:i.previousResultCount,resultCount:n,highlightedItem:t},e));i.previousResultCount=n,function(e,t){var i=Ei(t);e&&(i.textContent=e,yi())}(r,i.props.environment.document)}),200);var n=i.props,r=n.defaultHighlightedIndex,l=n.initialHighlightedIndex,a=void 0===l?r:l,o=n.defaultIsOpen,s=n.initialIsOpen,c=void 0===s?o:s,d=n.initialInputValue,u=void 0===d?"":d,m=n.initialSelectedItem,p=void 0===m?null:m,g=i.getState({highlightedIndex:a,isOpen:c,inputValue:u,selectedItem:p});return null!=g.selectedItem&&void 0===i.props.initialInputValue&&(g.inputValue=i.props.itemToString(g.selectedItem)),i.state=g,i}(0,Yt.Z)(t,e);var i=t.prototype;return i.internalClearTimeouts=function(){this.timeoutIds.forEach((function(e){clearTimeout(e)})),this.timeoutIds=[]},i.getState=function(e){var t=this;return void 0===e&&(e=this.state),Object.keys(e).reduce((function(i,n){return i[n]=t.isControlledProp(n)?t.props[n]:e[n],i}),{})},i.isControlledProp=function(e){return void 0!==this.props[e]},i.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},i.getItemNodeFromIndex=function(e){return this.props.environment.document.getElementById(this.getItemId(e))},i.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},i.moveHighlightedIndex=function(e,t){var i=this.getItemCount();if(i>0){var n=hi(e,this.getState().highlightedIndex,i);this.setHighlightedIndex(n,t)}},i.highlightFirstOrLastIndex=function(e,t,i){var n=this.getItemCount()-1;n<0||!this.getState().isOpen||(e.preventDefault(),this.setHighlightedIndex(t?0:n,i))},i.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,i=e.inputValue,n=e.selectedItem,r=e.isOpen,l=this.props.itemToString,a=this.id,o=this.getRootProps,s=this.getToggleButtonProps,c=this.getLabelProps,d=this.getMenuProps,u=this.getInputProps,m=this.getItemProps,p=this.openMenu,g=this.closeMenu,f=this.toggleMenu,b=this.selectItem,h=this.selectItemAtIndex,y=this.selectHighlightedItem,E=this.setHighlightedIndex,v=this.clearSelection,C=this.clearItems;return{getRootProps:o,getToggleButtonProps:s,getLabelProps:c,getMenuProps:d,getInputProps:u,getItemProps:m,reset:this.reset,openMenu:p,closeMenu:g,toggleMenu:f,selectItem:b,selectItemAtIndex:h,selectHighlightedItem:y,setHighlightedIndex:E,clearSelection:v,clearItems:C,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:l,id:a,highlightedIndex:t,inputValue:i,isOpen:r,selectedItem:n}},i.componentDidMount=function(){var e=this,t=function(t,i){void 0===i&&(i=!0);var n=e.props.environment.document;return[e._rootNode,e._menuNode].some((function(e){return e&&(si(e,t)||i&&si(e,n.activeElement))}))},i=function(){e.isMouseDown=!0},n=function(i){e.isMouseDown=!1,!t(i.target)&&e.getState().isOpen&&e.reset({type:1},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},r=function(){e.isTouchMove=!1},l=function(){e.isTouchMove=!0},a=function(i){var n=t(i.target,!1);e.isTouchMove||n||!e.getState().isOpen||e.reset({type:16},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},o=this.props.environment;o.addEventListener("mousedown",i),o.addEventListener("mouseup",n),o.addEventListener("touchstart",r),o.addEventListener("touchmove",l),o.addEventListener("touchend",a),this.cleanup=function(){e.internalClearTimeouts(),e.updateStatus.cancel(),o.removeEventListener("mousedown",i),o.removeEventListener("mouseup",n),o.removeEventListener("touchstart",r),o.removeEventListener("touchmove",l),o.removeEventListener("touchend",a)}},i.shouldScroll=function(e,t){var i=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,n=(void 0===t.highlightedIndex?e:t).highlightedIndex;return i&&this.getState().isOpen&&!e.isOpen||i!==n},i.componentDidUpdate=function(e,t){this.isControlledProp("selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:15,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},i.componentWillUnmount=function(){this.cleanup()},i.render=function(){var e=pi(this.props.children,ai);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var t=pi(e(this.getStateAndHelpers()));return t?this.getRootProps.called||this.props.suppressRefError?t:function(e){return"string"==typeof e.type}(t)?(0,Jt.cloneElement)(t,this.getRootProps(function(e){return e.props}(t))):void 0:null},t}(Jt.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:mi,itemToString:function(e){return null==e?"":String(e)},onStateChange:ai,onInputValueChange:ai,onUserAction:ai,onChange:ai,onSelect:ai,onOuterClick:ai,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?{}:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:oi},e.stateChangeTypes=vi,e}();Xt().array.isRequired,Xt().func,Xt().func,Xt().func,Xt().bool,Xt().number,Xt().number,Xt().number,Xt().bool,Xt().bool,Xt().bool,Xt().any,Xt().any,Xt().any,Xt().string,Xt().string,Xt().string,Xt().func,Xt().string,Xt().func,Xt().func,Xt().func,Xt().func,Xt().func,Xt().shape({addEventListener:Xt().func,removeEventListener:Xt().func,document:Xt().shape({getElementById:Xt().func,activeElement:Xt().any,body:Xt().any})}),"undefined"==typeof window||window;const Si=Ci,Ii=e=>"option"===e?.type&&e.label?e.label:"",Fi=e=>e.filter((e=>"option"===e.type));var wi=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Ai(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!((n=e[i])===(r=t[i])||wi(n)&&wi(r)))return!1;var n,r;return!0}const Di=function(e,t){var i;void 0===t&&(t=Ai);var n,r=[],l=!1;return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return l&&i===this&&t(a,r)||(n=e.apply(this,a),l=!0,i=this,r=a),n}};var ki=i(31049),Pi="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function xi(e){cancelAnimationFrame(e.id)}var Oi=-1;function Ti(e){if(void 0===e&&(e=!1),-1===Oi||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(t),Oi=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Oi}var Ni=null;function Li(e){if(void 0===e&&(e=!1),null===Ni||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?Ni="positive-descending":(t.scrollLeft=1,Ni=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Ni}return Ni}var Mi=function(e,t){return e};function Ri(e){var t,i=e.getItemOffset,n=e.getEstimatedTotalSize,r=e.getItemSize,l=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,o=e.getStopIndexForStartIndex,s=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,d=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=s(n.props,(0,Zt.Z)(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:(0,Zt.Z)(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=Di((function(e,t,i,r){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:i,visibleStopIndex:r})})),n._callOnScroll=void 0,n._callOnScroll=Di((function(e,t,i){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:i})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,l=n.props,a=l.direction,o=l.itemSize,s=l.layout,d=n._getItemStyleCache(c&&o,c&&s,c&&a);if(d.hasOwnProperty(e))t=d[e];else{var u=i(n.props,e,n._instanceProps),m=r(n.props,e,n._instanceProps),p="horizontal"===a||"horizontal"===s,g="rtl"===a,f=p?u:0;d[e]=t={position:"absolute",left:g?void 0:f,right:g?f:void 0,top:p?0:u,height:p?"100%":m,width:p?m:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=Di((function(e,t,i){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,i=t.clientWidth,r=t.scrollLeft,l=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===r)return null;var t=n.props.direction,a=r;if("rtl"===t)switch(Li()){case"negative":a=-r;break;case"positive-descending":a=l-i-r}return a=Math.max(0,Math.min(a,l-i)),{isScrolling:!0,scrollDirection:e.scrollOffset<r?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,i=t.clientHeight,r=t.scrollHeight,l=t.scrollTop;n.setState((function(e){if(e.scrollOffset===l)return null;var t=Math.max(0,Math.min(l,r-i));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){var e,t,i,r;null!==n._resetIsScrollingTimeoutId&&xi(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=(e=n._resetIsScrolling,t=150,i=Pi(),r={id:requestAnimationFrame((function n(){Pi()-i>=t?e.call(null):r.id=requestAnimationFrame(n)}))})},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}(0,Yt.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return Bi(e,t),d(e),null};var u=t.prototype;return u.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},u.scrollToItem=function(e,t){void 0===t&&(t="auto");var i=this.props,n=i.itemCount,r=i.layout,a=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var o=0;if(this._outerRef){var s=this._outerRef;o="vertical"===r?s.scrollWidth>s.clientWidth?Ti():0:s.scrollHeight>s.clientHeight?Ti():0}this.scrollTo(l(this.props,e,t,a,this._instanceProps,o))},u.componentDidMount=function(){var e=this.props,t=e.direction,i=e.initialScrollOffset,n=e.layout;if("number"==typeof i&&null!=this._outerRef){var r=this._outerRef;"horizontal"===t||"horizontal"===n?r.scrollLeft=i:r.scrollTop=i}this._callPropsCallbacks()},u.componentDidUpdate=function(){var e=this.props,t=e.direction,i=e.layout,n=this.state,r=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var l=this._outerRef;if("horizontal"===t||"horizontal"===i)if("rtl"===t)switch(Li()){case"negative":l.scrollLeft=-r;break;case"positive-ascending":l.scrollLeft=r;break;default:var a=l.clientWidth,o=l.scrollWidth;l.scrollLeft=o-a-r}else l.scrollLeft=r;else l.scrollTop=r}this._callPropsCallbacks()},u.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&xi(this._resetIsScrollingTimeoutId)},u.render=function(){var e=this.props,t=e.children,i=e.className,r=e.direction,l=e.height,a=e.innerRef,o=e.innerElementType,s=e.innerTagName,c=e.itemCount,d=e.itemData,u=e.itemKey,m=void 0===u?Mi:u,p=e.layout,g=e.outerElementType,f=e.outerTagName,b=e.style,h=e.useIsScrolling,y=e.width,E=this.state.isScrolling,v="horizontal"===r||"horizontal"===p,C=v?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),I=S[0],F=S[1],w=[];if(c>0)for(var A=I;A<=F;A++)w.push((0,ki.createElement)(t,{data:d,key:m(A,d),index:A,isScrolling:h?E:void 0,style:this._getItemStyle(A)}));var D=n(this.props,this._instanceProps);return(0,ki.createElement)(g||f||"div",{className:i,onScroll:C,ref:this._outerRefSetter,style:(0,jt.Z)({position:"relative",height:l,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},b)},(0,ki.createElement)(o||s||"div",{children:w,ref:a,style:{height:v?"100%":D,pointerEvents:E?"none":void 0,width:v?D:"100%"}}))},u._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],i=e[1],n=e[2],r=e[3];this._callOnItemsRendered(t,i,n,r)}if("function"==typeof this.props.onScroll){var l=this.state,a=l.scrollDirection,o=l.scrollOffset,s=l.scrollUpdateWasRequested;this._callOnScroll(a,o,s)}},u._getRangeToRender=function(){var e=this.props,t=e.itemCount,i=e.overscanCount,n=this.state,r=n.isScrolling,l=n.scrollDirection,s=n.scrollOffset;if(0===t)return[0,0,0,0];var c=a(this.props,s,this._instanceProps),d=o(this.props,c,s,this._instanceProps),u=r&&"backward"!==l?1:Math.max(1,i),m=r&&"forward"!==l?1:Math.max(1,i);return[Math.max(0,c-u),Math.max(0,Math.min(t-1,d+m)),c,d]},t}(ki.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Bi=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},_i=function(e,t,i){var n=e.itemSize,r=i.itemMetadataMap,l=i.lastMeasuredIndex;if(t>l){var a=0;if(l>=0){var o=r[l];a=o.offset+o.size}for(var s=l+1;s<=t;s++){var c=n(s);r[s]={offset:a,size:c},a+=c}i.lastMeasuredIndex=t}return r[t]},Vi=function(e,t,i,n,r){for(;n<=i;){var l=n+Math.floor((i-n)/2),a=_i(e,l,t).offset;if(a===r)return l;a<r?n=l+1:a>r&&(i=l-1)}return n>0?n-1:0},Hi=function(e,t){var i=e.itemCount,n=t.itemMetadataMap,r=t.estimatedItemSize,l=t.lastMeasuredIndex,a=0;if(l>=i&&(l=i-1),l>=0){var o=n[l];a=o.offset+o.size}return a+(i-l-1)*r},Wi=Ri({getItemOffset:function(e,t,i){return _i(e,t,i).offset},getItemSize:function(e,t,i){return i.itemMetadataMap[t].size},getEstimatedTotalSize:Hi,getOffsetForIndexAndAlignment:function(e,t,i,n,r,l){var a=e.direction,o=e.height,s=e.layout,c=e.width,d="horizontal"===a||"horizontal"===s?c:o,u=_i(e,t,r),m=Hi(e,r),p=Math.max(0,Math.min(m-d,u.offset)),g=Math.max(0,u.offset-d+u.size+l);switch("smart"===i&&(i=n>=g-d&&n<=p+d?"auto":"center"),i){case"start":return p;case"end":return g;case"center":return Math.round(g+(p-g)/2);default:return n>=g&&n<=p?n:n<g?g:p}},getStartIndexForOffset:function(e,t,i){return function(e,t,i){var n=t.itemMetadataMap,r=t.lastMeasuredIndex;return(r>0?n[r].offset:0)>=i?Vi(e,t,r,0,i):function(e,t,i,n){for(var r=e.itemCount,l=1;i<r&&_i(e,i,t).offset<n;)i+=l,l*=2;return Vi(e,t,Math.min(i,r-1),Math.floor(i/2),n)}(e,t,Math.max(0,r),i)}(e,i,t)},getStopIndexForStartIndex:function(e,t,i,n){for(var r=e.direction,l=e.height,a=e.itemCount,o=e.layout,s=e.width,c="horizontal"===r||"horizontal"===o?s:l,d=_i(e,t,n),u=i+c,m=d.offset+d.size,p=t;p<a-1&&m<u;)p++,m+=_i(e,p,n).size;return p},initInstanceProps:function(e,t){var i={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),i.lastMeasuredIndex=Math.min(i.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},i},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),qi=i(96026);const zi=({isFocused:e,isSelected:t,className:i,children:n,...r})=>ue.createElement("div",{className:Ee("gd-list-item","gd-select-option",t&&"gd-select-option-is-selected",e&&"gd-select-option-is-focused s-select-item-focused",i),...r},n),Ki=({children:e,className:t,...i})=>ue.createElement("div",{className:Ee("gd-select-heading gd-list-item gd-list-item-header",t),...i},e),Gi=({className:e,...t})=>ue.createElement("hr",{className:Ee("gd-separator-generic",e),...t}),Ui=({className:e,...t})=>ue.createElement("div",{className:Ee("gd-select-separator",e),...t},ue.createElement(Gi,null)),$i=3,ji={option:32,heading:22,error:22,separator:1},Zi=e=>t=>{const i=e[t].type;return ji[i]},Yi=e=>Math.floor(e.length/2);class Qi extends ue.Component{static defaultProps={selectedItem:null,visibleItemsRange:$i};listRef=ue.createRef();render(){const{items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,getMenuProps:r,className:l,optionClassName:a,visibleItemsRange:o}=this.props,s=(({items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,optionClassName:r})=>function({index:l,style:a}){const o=Fi(e),s=e[l];return"option"===s.type?ue.createElement(zi,{...n({key:`${s.type}-${s.value}`,item:s,index:o.indexOf(s),isSelected:!(!t||!s)&&t.value===s.value,className:r}),isFocused:!(!o[i]||!s)&&o[i].value===s.value,style:a},s.label):"heading"===s.type||"error"===s.type?ue.createElement(Ki,{key:`${s.type}-${s.label}`,style:a},s.label):"separator"===s.type?ue.createElement(Ui,{key:`${s.type}-${l}`,style:a}):null})({items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,optionClassName:a}),c=Yi(Fi(e)),d=qi(Math.max(c-o,0),Math.min(c+o+1,e.length)).reduce(((t,i)=>t+Zi(e)(i)),0);return ue.createElement("div",{...r({className:Ee("gd-select-menu-wrapper",l)})},ue.createElement("div",{className:"gd-select-menu s-select-menu"},ue.createElement(Wi,{className:"List",ref:this.listRef,itemCount:e.length,itemSize:Zi(e),height:d,width:"100%",overscanCount:10,estimatedItemSize:ji.option,style:1===e.length?{overflow:"hidden"}:void 0},s)))}scrollToIndex=(e=this.props.highlightedIndex)=>{if(this.listRef.current){const{items:t}=this.props,i=Fi(t)[null!==e?e:Yi(Fi(t))],n=t.indexOf(i);this.listRef.current.scrollToItem(n,"center")}};scrollToTop=()=>{this.listRef.current&&this.listRef.current.scrollTo(0)};componentDidUpdate=e=>{const{highlightedIndex:t,items:i,setHighlightedIndex:n,inputValue:r}=this.props,l=Fi(e.items).length-1,a=Fi(i).length-1,o=0===e.highlightedIndex&&t===a,s=e.highlightedIndex===l&&0===t,c=""===r.trim(),d=""!==e.inputValue.trim()&&c,u=e.inputValue.trim()!==r.trim(),m=Yi(Fi(i));d?n(m):u&&n(0);const p=1===this.props.items.length;d?this.scrollToIndex(m):o||s?this.scrollToIndex():p&&this.scrollToTop()};componentDidMount(){if(this.props.inputValue)this.scrollToIndex();else{const e=Yi(Fi(this.props.items));this.props.setHighlightedIndex(e),this.scrollToIndex(e)}}}var Xi=i(25356);const Ji="GDC.time.date",en={inputCategory:"Empty"},tn={inputCategory:"TooBig"},nn={"GDC.time.minute":120,"GDC.time.hour":48,[Ji]:365,"GDC.time.week_us":104,"GDC.time.month":60,"GDC.time.quarter":20,"GDC.time.year":20},rn=e=>e?.trim(),ln=(e,t,i)=>{const r=n[t],l=e<0?"history":0===e?"today":"future";return{type:"option",value:e,label:void 0===r?t:i.formatMessage(ie[`${r}_${l}`],{offset:e,n:Math.abs(e)})}},an=(e,t,i)=>e.map((e=>ln(e,t,i))),on=(e,t,i,n)=>{const r=e.toLowerCase(),l=((e,t,i)=>{const n=[-1,0,1],r=Math.abs(e),l=void 0!==e&&r>1?[-r,...n,r]:n;return an(l,t,i)})(t,i,n).filter((e=>e.label.toLowerCase().includes(r)));return l.length>0?l:(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.noMatch"})}])(n)},sn=(e,t)=>{const i=rn(t);return Fi(e).find((e=>e.label===i))},cn=(e,t)=>{const i=rn(t);return Fi(e).findIndex((e=>e.label===i))},dn=(e,t)=>Fi(e).find((e=>e.value===t));function un(e="",t=Ji,i){const n=rn(e),r=(e=>{if(!e)return en;const t=/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e);if(t){const n=t[1],r=Number.parseInt(n,10);return i=r,Math.abs(i)<=99999?{offset:r,isOnlyNumber:n===e,inputCategory:"Numeric"}:tn}var i;return{inputCategory:"Textual",trimmedValue:e}})(n);switch(r.inputCategory){case"Empty":return((e,t)=>{const i=nn[e],n=an(qi(-i,0),e,t),r=an(qi(1,i+1),e,t);return[...n,{type:"separator"},ln(0,e,t),{type:"separator"},...r]})(t,i);case"TooBig":return(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.tooBig"},{limit:99999})}])(i);case"Textual":return on(r.trimmedValue,void 0,t,i);case"Numeric":{const{offset:e,isOnlyNumber:l}=r;return l?((e,t,i)=>an(e>0?[e,-e]:[e],t,i))(e,t,i):on(n,e,t,i)}}}const mn=(0,Xi.b)(Si),pn=e=>{const{initialIsOpen:t=!1,placeholder:i,getItems:n,value:r=null,className:l,style:a,optionClassName:o,visibleItemsRange:s=$i,accessibilityConfig:c,inputValue:d,onChange:u=ge,onInputValueChange:m,onBlur:p}=e,[g,f]=(0,ue.useState)(""),b=(0,ue.useCallback)((e=>{e&&(f(e.label),u(e.value))}),[u]),h=(0,ue.useCallback)((e=>{f(e),m(e)}),[m]),y=(0,ue.useCallback)(((e,t)=>{p?p():(t(e),h(e?e.label:""))}),[p,h]),E=(0,ue.useCallback)((e=>{const t=e.target.value;h(t)}),[h]),v=(0,ue.useMemo)((()=>null!==r?n(r.toString()):[]),[n,r]),C=(0,ue.useMemo)((()=>null!==r&&dn(v,r)||null),[r,v]),S=(0,ue.useCallback)((e=>{const t=n(e);return C&&e.trim()!==C.label&&!dn(t,C.value)?C.value<0?[C,...t]:[...t,C]:t}),[n,C]),I=(0,ue.useMemo)((()=>S(g)),[S,g]),F=(0,ue.useMemo)((()=>Fi(I)),[I]),w=""!==g.trim(),A=C?cn(F,C.label):void 0,D=w?0:C?A:Yi(F),k=(0,ue.useCallback)(((e,t)=>{const i=S(t),n=Fi(i);e(C?cn(n,C.label):Yi(n))}),[C,S]);return ue.createElement(mn,{onChange:b,itemToString:Ii,initialIsOpen:t,selectedItem:C,itemCount:F.length,inputValue:d,defaultHighlightedIndex:D},(({getInputProps:e,getMenuProps:t,getItemProps:n,isOpen:r,openMenu:u,highlightedIndex:m,setHighlightedIndex:p,selectItem:b})=>{const h=""!==g.trim()&&m>F.length-1?0:m,v={items:I,selectedItem:C,highlightedIndex:h,getItemProps:n,getMenuProps:t,className:"gd-dynamic-select-menu",optionClassName:o,inputValue:d,setHighlightedIndex:p,visibleItemsRange:s};return ue.createElement("div",{className:Ee("gd-dynamic-select",l),style:a,"aria-labelledby":void 0,"aria-describedby":c?.descriptionId,onKeyDown:e=>{r&&e.stopPropagation()}},ue.createElement("div",{className:"gd-dynamic-select-input-wrapper"},ue.createElement("input",{type:"text",className:"s-relative-range-input gd-input-field","aria-describedby":c?.descriptionId,"aria-activedescendant":void 0,...e({"aria-autocomplete":"list","aria-labelledby":c?.labelId,placeholder:i,value:d,onFocus:()=>{""!==g.trim()&&(f(""),k(p,"")),u()},onChange:E,onBlur:()=>y(C,b)})})),r&&I.length>0?ue.createElement(Qi,{...v}):null)}))};var gn;!function(e){e.INVALID_VALUE="INVALID_VALUE",e.EMPTY_VALUE="EMPTY_VALUE"}(gn||(gn={}));const fn=e=>ue.createElement("div",{className:Ee(e.className,"gd-relative-range-picker-select-wrapper s-relative-range-picker-select-wrapper")},ue.createElement("label",{className:"gd-label",id:e.labelId},e.label),e.children,e.errorMessage?ue.createElement("div",{id:e.errorId,className:"s-gd-relative-range-picker-error gd-relative-range-picker-select-wrapper__error-message"},e.errorMessage):null),bn=(e,t)=>{const i=void 0!==e?dn(t,e):null;return i?Ii(i):e?e.toString():""},hn=ue.memo((e=>{const{label:t,value:i,inputValue:n,error:r,onChange:l,onInputChange:a,onBlur:o,commonProps:s,intl:c,isMobile:d,className:u,wrapperClassName:m}=e,p=(0,he.useIdPrefixed)("label"),g=(0,he.useIdPrefixed)("error");return ue.createElement(fn,{label:t,labelId:p,errorMessage:r,errorId:g,className:m},ue.createElement(pn,{...s,value:i,onChange:l,inputValue:n,onInputValueChange:a,onBlur:o,placeholder:c.formatMessage({id:"filters.relative.placeholder"}),className:Ee(u,"gd-relative-range-picker-picker",{"gd-relative-range-picker-picker-mobile":d,"has-error":null!==r}),accessibilityConfig:{labelId:p,...r&&{descriptionId:g}}}))})),yn=Q((e=>{const{selectedFilterOption:t,intl:i,isMobile:n,accessibilityConfig:r,id:l,onSelectedFilterOptionChange:a}=e,o=(0,ue.useMemo)((()=>((e,t,i)=>n=>{const r=un(n,e,i);return t?r.filter((e=>"separator"!==e.type)):r})(t.granularity,n,i)),[t.granularity,n,i]),[s,c]=(0,ue.useState)(null),[d,u]=(0,ue.useState)(null),[m,p]=(0,ue.useState)(bn(t.from,void 0!==t.from?o(t.from.toString()):[])),[g,f]=(0,ue.useState)(bn(t.to,void 0!==t.to?o(t.to.toString()):[])),b=(0,ue.useMemo)((()=>({visibleItemsRange:n?5:$i,optionClassName:"s-relative-date-filter-option s-do-not-close-dropdown-on-click",getItems:o,inputValue:"",onInputValueChange:()=>{}})),[n,o]),h=(0,ue.useCallback)((e=>{a({...t,from:e}),void 0!==e&&(p(bn(e,o(e?.toString()))),c(null))}),[t,a,o]),y=(0,ue.useCallback)((e=>{a({...t,to:e}),void 0!==e&&(f(bn(e,o(e?.toString()))),u(null))}),[t,a,o]),E=(0,ue.useCallback)((e=>{if(""===e)return gn.EMPTY_VALUE;const t=o(e);return sn(t,e)?null:gn.INVALID_VALUE}),[o]),v=(0,ue.useCallback)((e=>{if(p(e),E(e))h(void 0);else{c(null);const t=o(e),i=sn(t,e);i&&h(i.value)}}),[E,h,o]),C=(0,ue.useCallback)((e=>{if(f(e),E(e))y(void 0);else{u(null);const t=o(e),i=sn(t,e);i&&y(i.value)}}),[E,y,o]),S=(0,ue.useCallback)((()=>{const e=E(m);if(e){switch(e){case gn.INVALID_VALUE:c(i.formatMessage({id:"filters.relative.from.invalid.value"}));break;case gn.EMPTY_VALUE:c(i.formatMessage({id:"filters.relative.from.empty.value"}))}h(void 0)}else c(null)}),[E,m,i,h]),I=(0,ue.useCallback)((()=>{const e=E(g);if(e){switch(e){case gn.INVALID_VALUE:u(i.formatMessage({id:"filters.relative.to.invalid.value"}));break;case gn.EMPTY_VALUE:u(i.formatMessage({id:"filters.relative.to.empty.value"}))}y(void 0)}else u(null)}),[E,g,i,y]);return ue.createElement("div",{id:l,className:"gd-relative-range-picker s-relative-range-picker",role:r?.role,"aria-labelledby":r?.ariaLabelledBy},ue.createElement(hn,{className:"s-relative-range-picker-from",wrapperClassName:"s-relative-range-picker-from-wrapper",label:i.formatMessage({id:"filters.relative.from.label"}),value:t.from,inputValue:m,error:s,onChange:h,onInputChange:v,onBlur:S,commonProps:b,intl:i,isMobile:n}),ue.createElement(hn,{className:"s-relative-range-picker-to",wrapperClassName:"s-relative-range-picker-to-wrapper",label:i.formatMessage({id:"filters.relative.to.label"}),value:t.to,inputValue:g,error:d,onChange:y,onInputChange:C,onBlur:I,commonProps:b,intl:i,isMobile:n}))})),En=(0,ue.forwardRef)((({relativeDateFilterId:e,selectedFilterOption:t,availableGranularities:i,onSelectedFilterOptionChange:n,isMobile:r,onKeyDown:l},a)=>ue.createElement(ue.Fragment,null,ue.createElement("div",{ref:a},ue.createElement(Ut,{availableGranularities:i,selectedGranularity:t.granularity,onSelectedGranularityChange:e=>n({...t,...t.granularity!==e&&{from:void 0,to:void 0},granularity:e}),accessibilityConfig:{ariaControls:e}})),ue.createElement("div",{onKeyDown:l},ue.createElement(yn,{selectedFilterOption:t,onSelectedFilterOptionChange:n,key:t.granularity,isMobile:r,accessibilityConfig:{ariaLabelledBy:He,role:"tabpanel"},id:e})))));En.displayName="RelativeDateFilterForm";const vn=({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,availableGranularities:r,errors:l,withoutApply:a,onSelectedFilterOptionChange:o,changeRoute:s,closeDropdown:c,onApplyClick:d})=>{const u=(0,ue.useRef)(null),m=(0,ue.useRef)(null),g=(0,he.useId)(),f=(0,ue.useCallback)(((e,t)=>{const i=(({tabGranularityRef:e,closeDropdown:t})=>i=>{if(!e.current)return;const n=Array.from(e.current.querySelectorAll("[tabindex]")),r=document.activeElement,l=n.findIndex((e=>e===r));(0,he.makeLinearKeyboardNavigation)({onFocusNext:()=>{if(Ht(e,r,Vt.TAB)){const e=l===n.length-1?n[0]:n[l+1];e?.focus()}},onFocusPrevious:()=>{if(Ht(e,r,Vt.TAB)){const e=l<=0?n[n.length-1]:n[l-1];e?.focus()}},onFocusFirst:()=>{if(Ht(e,r,Vt.TAB)){const{firstElement:t}=(0,he.getFocusableElements)(e.current);t?.focus()}},onFocusLast:()=>{if(Ht(e,r,Vt.TAB)){const{lastElement:t}=(0,he.getFocusableElements)(e.current);t?.focus()}},onClose:t})(i)})({relativeDateFilterRef:u,tabGranularityRef:m,closeDropdown:t});i(e)}),[u,m]);if(!e.relativeForm)return null;const b=e.relativeForm.localIdentifier===t.localIdentifier,h="relativeForm"===n;return ue.createElement(ue.Fragment,null,i&&h?null:ue.createElement(We,{isSelected:b,onClick:()=>{s("relativeForm"),(0,p.isRelativeDateFilterForm)(t)||o(e.relativeForm)},className:Ee("s-relative-form","s-do-not-close-dropdown-on-click",i&&"gd-date-filter-item-mobile")},e.relativeForm.name?e.relativeForm.name:ue.createElement(xe,{id:"filters.floatingRange"}),i?null:ue.createElement(_t,{bubbleAlignPoints:[{align:"cr cl"}]},ue.createElement(xe,{id:"filters.floatingRange.tooltip"}))),!b||i&&!h?null:ue.createElement(qe,{isMobile:i},ue.createElement("div",{ref:u,onKeyDown:e=>f(e,c)},ue.createElement(En,{onSelectedFilterOptionChange:o,selectedFilterOption:t,availableGranularities:r,isMobile:i,ref:m,relativeDateFilterId:g,onKeyDown:e=>((e,t,i,n,r)=>{"Enter"===e.key&&t&&document.activeElement instanceof HTMLInputElement&&!i&&(r(),n()),"Escape"!==e.key&&e.stopPropagation()})(e,I(l),a,c,d)}))))};var Cn=i(21804);const Sn=({filterOptions:e,dateFormat:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,className:r})=>ue.createElement(ue.Fragment,null,e.map((e=>ue.createElement(We,{key:e.localIdentifier,isSelected:e.localIdentifier===i.localIdentifier,onClick:()=>n(e),className:Ee(`s-absolute-preset-${Cn(e.localIdentifier)}`,r)},ue.createElement(Fe,{filter:e,dateFormat:t}))))),In=({children:e,className:t,...i})=>ue.createElement("div",{className:Ee("gd-list-item gd-list-item-header gd-filter-list-heading",t),...i},e),Fn=({granularity:e})=>{const t=ie[e]||null;return t?ue.createElement(xe,{id:t.id}):null},wn=["GDC.time.year","GDC.time.quarter","GDC.time.month","GDC.time.week_us","GDC.time.date","GDC.time.hour","GDC.time.minute"],An=({dateFormat:e,filterOption:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,className:r})=>{const l=wn.filter((e=>Boolean(t?.[e]?.length>0))).map((e=>({granularity:e,items:t[e]})));return ue.createElement(ue.Fragment,null,l.map((t=>ue.createElement(ue.Fragment,{key:t.granularity},ue.createElement(In,{className:r},ue.createElement(Fn,{granularity:t.granularity})),t.items.map((t=>ue.createElement(We,{key:t.localIdentifier,isSelected:t.localIdentifier===i.localIdentifier,onClick:()=>n(t),className:Ee(`s-relative-preset-${Cn(t.localIdentifier)}`,r)},ue.createElement(Fe,{filter:t,dateFormat:e}))))))))},Dn="gd-date-filter-item-mobile",kn=({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,errors:r,dateFormat:l,isTimeForAbsoluteRangeEnabled:a,weekStart:o,availableGranularities:s,withoutApply:c,closeDropdown:d,changeRoute:u,onApplyClick:m,onSelectedFilterOptionChange:p})=>ue.createElement(ue.Fragment,null,ue.createElement(Bt,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:p,isMobile:i}),ue.createElement(Mt,{filterOptions:e,route:n,closeDropdown:d,onApplyClick:m,changeRoute:u,dateFormat:l,onSelectedFilterOptionChange:p,selectedFilterOption:t,isMobile:i,isTimeForAbsoluteRangeEnabled:a,weekStart:o,withoutApply:c}),I(s)?null:ue.createElement(vn,{filterOptions:e,onSelectedFilterOptionChange:p,selectedFilterOption:t,availableGranularities:s,isMobile:i,changeRoute:u,route:n,errors:r||void 0,onApplyClick:m,closeDropdown:d,withoutApply:c}),e.absolutePreset&&e.absolutePreset.length>0?ue.createElement(Sn,{dateFormat:l,filterOptions:e.absolutePreset,selectedFilterOption:t,onSelectedFilterOptionChange:p,className:i?Dn:void 0}):null,e.relativePreset?ue.createElement(An,{dateFormat:l,filterOption:e.relativePreset,selectedFilterOption:t,onSelectedFilterOptionChange:p,className:i?Dn:void 0}):null),Pn=({children:e,changeRoute:t,...i})=>{const n=(0,he.useUiAutofocusConnectors)();return ue.createElement("button",{tabIndex:0,className:"gd-extended-date-filter-header s-do-not-close-dropdown-on-click",onClick:e=>{e.preventDefault(),t(null)},...i,...n},ue.createElement("span",{className:"gd-icon-navigateleft"})," ",e)},xn=({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,errors:r,dateFormat:l,isTimeForAbsoluteRangeEnabled:a,weekStart:o,availableGranularities:s,withoutApply:c,closeDropdown:d,changeRoute:u,onApplyClick:m,onSelectedFilterOptionChange:p})=>"absoluteForm"===n?ue.createElement(ue.Fragment,null,ue.createElement(Pn,{changeRoute:u},ue.createElement(xe,{id:"filters.staticPeriod"})),ue.createElement(Mt,{filterOptions:e,route:n,closeDropdown:d,onApplyClick:m,changeRoute:u,dateFormat:l,onSelectedFilterOptionChange:p,selectedFilterOption:t,isMobile:i,isTimeForAbsoluteRangeEnabled:a,weekStart:o,withoutApply:c})):"relativeForm"===n?I(s)?null:ue.createElement(ue.Fragment,null,ue.createElement(Pn,{changeRoute:u},ue.createElement(xe,{id:"filters.floatingRange"})),ue.createElement(vn,{filterOptions:e,errors:r||void 0,onSelectedFilterOptionChange:p,selectedFilterOption:t,availableGranularities:s,isMobile:i,changeRoute:u,route:n,onApplyClick:m,closeDropdown:d,withoutApply:c})):ue.createElement(kn,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:p,isMobile:i,route:n,closeDropdown:d,onApplyClick:m,changeRoute:u,dateFormat:l,errors:r||void 0,isTimeForAbsoluteRangeEnabled:a,weekStart:o,availableGranularities:s}),On=ue.forwardRef(((e,t)=>{const[i,n]=(0,ue.useState)(null),r=X(),l=(e=null)=>{n(e)};(0,ue.useEffect)((()=>{e.isMobile&&((0,p.isAbsoluteDateFilterForm)(e.selectedFilterOption)?l("absoluteForm"):(0,p.isRelativeDateFilterForm)(e.selectedFilterOption)&&l("relativeForm"))}),[e.isMobile,e.selectedFilterOption]);const{isExcludeCurrentPeriodEnabled:a,isMobile:o,dateFilterButton:s,errors:c,isConfigurationEnabled:d,withoutApply:u,selectedFilterOption:m,isEditMode:g,excludeCurrentPeriod:f,filterOptions:b,showHeaderMessage:h=!0,dateFormat:y,isTimeForAbsoluteRangeEnabled:E,weekStart:v,availableGranularities:C,onApplyClick:S,onCancelClick:w,closeDropdown:A,onConfigurationClick:D,onExcludeCurrentPeriodChange:k,onSelectedFilterOptionChange:P}=e,x=!o||a,O=(e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}})(x),T=window.innerHeight<=640?"gd-extended-date-filter-body-scrollable-small-screen":"gd-extended-date-filter-body-scrollable";let N={},L={};return O&&(N={display:"block",height:`${O}px`},L={minHeight:`${O}px`}),ue.createElement("div",{className:Ee("gd-extended-date-filter-body","s-extended-date-filters-body",o&&"gd-extended-date-filter-body-mobile")},null===i&&o?ue.createElement("div",{onClick:()=>{w(),A()}},s):null,ue.createElement("div",{ref:t,role:"listbox","aria-label":r.formatMessage({id:"dateFilterDropdown.label"}),className:Ee("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,p.isRelativeDateFilterForm)(m)}),style:N},g&&!o&&h?ue.createElement(Me,null):null,o?ue.createElement(xn,{filterOptions:b,selectedFilterOption:m,onSelectedFilterOptionChange:P,isMobile:o,route:i,closeDropdown:A,onApplyClick:S,changeRoute:l,dateFormat:y,errors:c||void 0,isTimeForAbsoluteRangeEnabled:E,weekStart:v,availableGranularities:C,withoutApply:u}):ue.createElement(Le,{className:T,style:L},ue.createElement(kn,{filterOptions:b,selectedFilterOption:m,onSelectedFilterOptionChange:P,isMobile:o,route:i,closeDropdown:A,onApplyClick:S,changeRoute:l,dateFormat:y,errors:c||void 0,isTimeForAbsoluteRangeEnabled:E,weekStart:v,availableGranularities:C,withoutApply:u}))),x?ue.createElement(Ne,{value:f,onChange:k,disabled:!a,granularity:(M=m,F(M)||(0,p.isRelativeDateFilterPreset)(M)?M.granularity:void 0)}):null,ue.createElement("div",{className:Ee("gd-extended-date-filter-actions")},ue.createElement("div",{className:"gd-extended-date-filter-actions-left-content"},d?ue.createElement(_e,{onConfiguration:D}):null),ue.createElement("div",{className:"gd-extended-date-filter-actions-buttons"},ue.createElement(Re,{messageId:u?"close":"cancel",className:Ee("gd-button-secondary gd-button-small",u?"s-date-filter-close":"s-date-filter-cancel"),onClick:()=>{w(),A()}}),!u&&ue.createElement(Re,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!I(c),onClick:()=>{S(),A()}}))));var M}));On.displayName="DateFilterBody";const Tn=(e,t=!1)=>t?e+s:e,Nn=({originalSelectedFilterOption:e,originalExcludeCurrentPeriod:t,selectedFilterOption:i,excludeCurrentPeriod:n,onDropdownOpenChanged:r,customFilterName:l,dateFormat:a,disabled:o,openOnInit:s,locale:c,filterOptions:d,isTimeForAbsoluteRangeEnabled:m,weekStart:p,customIcon:g,FilterConfigurationComponent:f,onApplyClick:b,onCancelClick:h,showDropDownHeaderMessage:y,withoutApply:E,ButtonComponent:v,overlayPositionType:S,...F})=>{const[w,A]=(0,ue.useState)(!1),D=(e=>{try{return L(new Date,e),e}catch{return console.warn(`Unsupported date format ${e}, the default format ${u} is used instead.`),u}})(a),k=(0,ue.useRef)(null),P=(0,ue.useRef)(null),x=(0,ue.useMemo)((()=>fe(O,N)(d)),[d]),T=()=>{A(!1)},M=()=>{A(!0)},B=()=>{T(),h()},_=e=>{r(e),e||T()},V=Ln(i,I(F.errors)),H=Ln(n,I(F.errors)),W=(0,ue.useCallback)(((e,t=ge)=>{(({dateFilterContainerRef:e,dateFilterBodyRef:t,closeDropdown:i})=>n=>{if(!t.current||!e.current)return;const r=Array.from(t.current.querySelectorAll("[tabindex]")),l=document.activeElement,a=(0,he.makeLinearKeyboardNavigation)({onFocusPrevious:()=>{if(Ht(t,l,Vt.OPTION)){const e=Array.from(r).indexOf(document.activeElement),t=Wt(r,e,-1);t?.focus()}},onFocusNext:()=>{if(Ht(t,l,Vt.OPTION)){const e=Array.from(r).indexOf(document.activeElement),t=Wt(r,e,1);t?.focus()}},onFocusFirst:()=>{if(Ht(t,l,Vt.OPTION)){const{firstElement:e}=(0,he.getFocusableElements)(t.current);e?.focus()}},onFocusLast:()=>{if(Ht(t,l,Vt.OPTION)){const{lastElement:e}=(0,he.getFocusableElements)(t.current);e?.focus()}},onClose:i,onUnhandledKeyDown:t=>{"Tab"===t.key&&((e,t)=>{if("Tab"!==e.key)return;e.stopPropagation(),e.preventDefault();const i=['[tabindex]:not([tabindex="-1"]):not(:disabled):not([aria-disabled="true"])','input:not(:disabled):not([aria-disabled="true"])'].join(","),n=Array.from(t.current?.querySelectorAll(i)??[]),r=document.activeElement,l=n.indexOf(r);if(-1!==l){const t=(l+(e.shiftKey?-1:1)+n.length)%n.length;n[t]?.focus()}else{const t=e.shiftKey?n.length-1:1;n[t]?.focus()}})(t,e)}});a(n)})({dateFilterContainerRef:k,dateFilterBodyRef:P,closeDropdown:t})(e)}),[k,P]);return ue.createElement(R.IntlWrapper,{locale:c||"en-US"},ue.createElement(be.zP,{query:ye},(r=>{const a=(i=!1,n=null,a="",s=ge)=>ue.createElement(De,{disabled:o,isMobile:r,isOpen:i,dateFilterOption:C(E?V:e,E?H:t),dateFormat:Tn(D,m),customFilterName:l,customIcon:g,onClick:s,ButtonComponent:v,buttonRef:n,dropdownId:a});return ue.createElement(he.Dropdown,{openOnInit:s,closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,autofocusOnOpen:!0,initialFocus:Ve,alignPoints:[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-50}}],onOpenStateChanged:_,overlayPositionType:S,renderButton:({isOpen:e,buttonRef:t,dropdownId:i,toggleDropdown:n})=>ue.createElement("span",{onClick:o?ge:n},a(e,t,i,n)),ignoreClicksOnByClass:[".s-do-not-close-dropdown-on-click",".rdp-day"],renderBody:({closeDropdown:e,ariaAttributes:t})=>w?ue.createElement(f,{onSaveButtonClick:T,onCancelButtonClick:B}):ue.createElement("div",{role:"dialog",className:"gd-extended-date-filter-container",id:t.id,ref:k,onKeyDown:t=>W(t,e)},ue.createElement(On,{...F,selectedFilterOption:i,excludeCurrentPeriod:n,showHeaderMessage:y,onApplyClick:b,onCancelClick:h,filterOptions:x,isMobile:r,closeDropdown:e,dateFilterButton:a(),dateFormat:D,isTimeForAbsoluteRangeEnabled:m,weekStart:p,isConfigurationEnabled:void 0!==f,onConfigurationClick:M,withoutApply:E,ref:P}))})})))};function Ln(e,t){const i=(0,ue.useRef)();return t&&(i.current=e),i.current}function Mn(e){return F(e)&&e.from>e.to?{...e,from:e.to,to:e.from}:e}class Rn extends ue.PureComponent{static defaultProps={dateFormat:u,isEditMode:!1,isTimeForAbsoluteRangeEnabled:!1,locale:"en-US",onCancel:ge,onOpen:ge,onClose:ge,weekStart:"Sunday",withoutApply:!1};static getDerivedStateFromProps(e,t){return!(e.withoutApply??e.enableDashboardFiltersApplyModes)||!e.workingSelectedFilterOption||void 0===e.excludeCurrentPeriod||me(e.workingSelectedFilterOption,t.initWorkingSelectedFilterOption)&&e.excludeCurrentPeriod===t.initWorkingExcludeCurrentPeriod?me(e.selectedFilterOption,t.initSelectedFilterOption)&&e.excludeCurrentPeriod===t.initExcludeCurrentPeriod?null:Rn.getStateFromProps(e):Rn.getStateFromWorkingProps(e)}static getStateFromProps(e){const t=S(e.selectedFilterOption);return{initSelectedFilterOption:e.selectedFilterOption,selectedFilterOption:e.selectedFilterOption,initExcludeCurrentPeriod:e.excludeCurrentPeriod,excludeCurrentPeriod:!!t&&e.excludeCurrentPeriod,isExcludeCurrentPeriodEnabled:t,initWorkingSelectedFilterOption:e.workingSelectedFilterOption??e.selectedFilterOption,initWorkingExcludeCurrentPeriod:e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod}}static getStateFromWorkingProps(e){const t=e.workingSelectedFilterOption??e.selectedFilterOption,i=S(t);return{...Rn.getStateFromProps(e),selectedFilterOption:t,excludeCurrentPeriod:!!i&&(e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod),initWorkingExcludeCurrentPeriod:e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod,initWorkingSelectedFilterOption:t,initExcludeCurrentPeriod:e.excludeCurrentPeriod,isExcludeCurrentPeriodEnabled:i}}static getStateFromSelectedOption=(e,t)=>{const i=S(e);return{selectedFilterOption:e,excludeCurrentPeriod:!!i&&t,isExcludeCurrentPeriodEnabled:i}};static checkInitialFilterOption=e=>{(0,p.isAbsoluteDateFilterForm)(e)&&(pe(e.from)||pe(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from absoluteForm filter option must be specified."),F(e)&&(pe(e.from)||pe(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from relativeForm filter option must be specified.")};constructor(e){super(e),this.state=Rn.getStateFromProps(e)}componentDidMount(){Rn.checkInitialFilterOption(this.props.selectedFilterOption)}render(){const{customFilterName:e,dateFilterMode:t,dateFormat:i,filterOptions:n,selectedFilterOption:r,excludeCurrentPeriod:l,availableGranularities:a,isEditMode:o,openOnInit:s,locale:c,isTimeForAbsoluteRangeEnabled:d,weekStart:u,customIcon:m,showDropDownHeaderMessage:p,FilterConfigurationComponent:g,withoutApply:f,enableDashboardFiltersApplyModes:b,ButtonComponent:h,overlayPositionType:y}=this.props,E=f??b,{excludeCurrentPeriod:C,selectedFilterOption:S,isExcludeCurrentPeriodEnabled:I}=this.state;return"hidden"===t?null:ue.createElement(Nn,{availableGranularities:a,customFilterName:e,dateFormat:i,openOnInit:s,showDropDownHeaderMessage:p,disabled:"readonly"===t,excludeCurrentPeriod:C,originalExcludeCurrentPeriod:l,isExcludeCurrentPeriodEnabled:I,isTimeForAbsoluteRangeEnabled:d,isEditMode:o,filterOptions:n,selectedFilterOption:S,originalSelectedFilterOption:r,locale:c,onApplyClick:this.handleApplyClick,onCancelClick:this.onCancelClicked,onDropdownOpenChanged:this.onDropdownOpenChanged,onExcludeCurrentPeriodChange:this.handleExcludeCurrentPeriodChange,onSelectedFilterOptionChange:this.handleSelectedFilterOptionChange,errors:v(S),weekStart:u,customIcon:m,FilterConfigurationComponent:g,withoutApply:E,ButtonComponent:h,overlayPositionType:y})}handleApplyClick=()=>{const e=Mn(this.state.selectedFilterOption);this.props.onApply(e,this.state.excludeCurrentPeriod)};onChangesDiscarded=()=>{this.props.withoutApply?this.props.withoutApply&&!I(v(this.state.selectedFilterOption))&&this.setState((()=>Rn.getStateFromWorkingProps(this.props))):this.setState((()=>Rn.getStateFromProps(this.props)),this.handleSelectChange)};onCancelClicked=()=>{this.props.onCancel(),this.onChangesDiscarded()};onDropdownOpenChanged=e=>{e?this.props.onOpen():(this.props.onClose(),this.onChangesDiscarded())};handleExcludeCurrentPeriodChange=e=>{this.setState({excludeCurrentPeriod:e},this.handleSelectChange)};handleSelectedFilterOptionChange=e=>{this.setState((t=>Rn.getStateFromSelectedOption(e,t.excludeCurrentPeriod)),this.handleSelectChange)};handleSelectChange=()=>{const e=Mn(this.state.selectedFilterOption);I(v(e))&&this.props.onSelect?.(e,this.state.excludeCurrentPeriod)}}const Bn=e=>{switch(e){case"ALL":return ie.ALL.id;case"GREATER_THAN":return ie.GREATER_THAN.id;case"GREATER_THAN_OR_EQUAL_TO":return ie.GREATER_THAN_OR_EQUAL_TO.id;case"LESS_THAN":return ie.LESS_THAN.id;case"LESS_THAN_OR_EQUAL_TO":return ie.LESS_THAN_OR_EQUAL_TO.id;case"EQUAL_TO":return ie.EQUAL_TO.id;case"NOT_EQUAL_TO":return ie.NOT_EQUAL_TO.id;case"BETWEEN":return ie.BETWEEN.id;case"NOT_BETWEEN":return ie.NOT_BETWEEN.id;default:return}},_n=e=>({ALL:"all",GREATER_THAN:"greater-than",GREATER_THAN_OR_EQUAL_TO:"greater-than-equal-to",LESS_THAN:"less-than",LESS_THAN_OR_EQUAL_TO:"less-than-equal-to",EQUAL_TO:"equal-to",NOT_EQUAL_TO:"not-equal-to",BETWEEN:"between",NOT_BETWEEN:"not-between"}[e]);class Vn extends ue.PureComponent{static defaultProps={onClick:ge,bubbleText:null};render(){const{intl:e,operator:t,selectedOperator:i,bubbleText:n}=this.props,r=Ee("gd-list-item","gd-list-item-shortened",`s-mvf-operator-${ve.gl(t)}`,{"is-selected":i===t}),l=Bn(t),a=void 0===l?t:e.formatMessage({id:l});return ue.createElement("div",{className:r,onClick:this.handleOnClick},ue.createElement("div",{className:`gd-icon-${_n(t)}`,title:a}),ue.createElement("span",{title:a},M(a)),n?this.renderBubble(n):null)}handleOnClick=e=>{const{operator:t,onClick:i}=this.props;i(t),e.preventDefault()};renderBubble(e){return ue.createElement("div",{className:"tooltip-bubble"},ue.createElement(he.BubbleHoverTrigger,{tagName:"div",showDelay:400,hideDelay:200},ue.createElement("div",{className:"inlineBubbleHelp"}),ue.createElement(he.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},e)))}}const Hn=Q(Vn);class Wn extends ue.PureComponent{render(){const{onSelect:e,onClose:t,selectedOperator:i,alignTo:n,intl:r}=this.props;return ue.createElement(he.Overlay,{closeOnOutsideClick:!0,alignTo:n,alignPoints:[{align:"bl tl"}],onClose:t},ue.createElement("div",{className:"gd-dropdown overlay"},ue.createElement("div",{className:"gd-mvf-operator-dropdown-body s-mvf-operator-dropdown-body"},ue.createElement(Hn,{operator:"ALL",selectedOperator:i,onClick:e}),ue.createElement(he.Separator,null),ue.createElement(Hn,{operator:"GREATER_THAN",selectedOperator:i,onClick:e}),ue.createElement(Hn,{operator:"GREATER_THAN_OR_EQUAL_TO",selectedOperator:i,onClick:e}),ue.createElement(he.Separator,null),ue.createElement(Hn,{operator:"LESS_THAN",selectedOperator:i,onClick:e}),ue.createElement(Hn,{operator:"LESS_THAN_OR_EQUAL_TO",selectedOperator:i,onClick:e}),ue.createElement(he.Separator,null),ue.createElement(Hn,{operator:"BETWEEN",selectedOperator:i,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.between.tooltip.bubble"})}),ue.createElement(Hn,{operator:"NOT_BETWEEN",selectedOperator:i,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.notBetween.tooltip.bubble"})}),ue.createElement(he.Separator,null),ue.createElement(Hn,{operator:"EQUAL_TO",selectedOperator:i,onClick:e}),ue.createElement(Hn,{operator:"NOT_EQUAL_TO",selectedOperator:i,onClick:e}))))}}const qn=Q(Wn);class zn extends ue.PureComponent{state={opened:!1};render(){return ue.createElement(ue.Fragment,null,this.renderDropdownButton(),this.state.opened?ue.createElement(qn,{alignTo:".gd-mvf-operator-dropdown-button",onSelect:this.handleOperatorSelected,selectedOperator:this.props.operator,onClose:this.closeOperatorDropdown}):null)}renderDropdownButton(){const{intl:e,operator:t,isDisabled:i}=this.props,{opened:n}=this.state,r=Bn(t),l=M(void 0===r?t:e.formatMessage({id:r})),a=Ee("gd-mvf-operator-dropdown-button","s-mvf-operator-dropdown-button",`s-mvf-operator-dropdown-button-${ve.gl(t)}`,"gd-button-primary","gd-button-small",{"button-dropdown":!0,"is-dropdown-open":n,"is-active":n});return ue.createElement(he.Button,{title:l,className:a,value:l,onClick:this.handleOperatorDropdownButtonClick,iconLeft:`gd-icon-${_n(t)}`,iconRight:n?"gd-icon-navigateup":"gd-icon-navigatedown",disabled:i})}handleOperatorSelected=e=>{this.closeOperatorDropdown(),this.props.onSelect(e)};closeOperatorDropdown=()=>this.setState({opened:!1});handleOperatorDropdownButtonClick=()=>this.setState((e=>({...e,opened:!e.opened})))}const Kn=Q(zn),Gn=({from:e,to:t,usePercentage:i,disableAutofocus:n,onFromChange:r,onToChange:l,onEnterKeyPress:a,separators:o})=>ue.createElement("div",{className:"gd-mvf-range-input"},ue.createElement(he.InputWithNumberFormat,{className:"s-mvf-range-from-input",value:e,onChange:r,onEnterKeyPress:a,isSmall:!0,autofocus:!n,suffix:i?"%":"",separators:o}),ue.createElement(he.InputWithNumberFormat,{className:"s-mvf-range-to-input",value:t,onChange:l,onEnterKeyPress:a,isSmall:!0,suffix:i?"%":"",separators:o})),Un=({value:e,usePercentage:t,disableAutofocus:i,onValueChange:n,onEnterKeyPress:r,separators:l})=>ue.createElement(he.InputWithNumberFormat,{className:"s-mvf-comparison-value-input",value:e,onEnterKeyPress:r,onChange:n,isSmall:!0,autofocus:!i,suffix:t?"%":"",separators:l}),$n=({checked:e=!1,onChange:t,intl:i})=>ue.createElement("label",{className:"input-checkbox-label gd-mvf-treat-null-values-as-zero s-treat-null-values-as-zero"},ue.createElement("input",{type:"checkbox",name:"treat-null-values-as",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked)}),ue.createElement("span",{className:"input-label-text"},i.formatMessage({id:"mvf.treatNullValuesAsZeroLabel"}),ue.createElement(he.BubbleHoverTrigger,{showDelay:400,hideDelay:200},ue.createElement("span",{className:"inlineBubbleHelp"}),ue.createElement(he.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},i.formatMessage({id:"mvf.treatNullValuesAsZeroTooltip"})))));function jn(e){return!I(e)&&!!e.severity}const Zn=({warningMessage:e,className:t})=>{const i=Ee("gd-mvf-warning-message",(e=>{if("string"==typeof e)return"gd-mvf-warning-message-low s-mvf-warning-message-low";switch(e.severity){case"low":return"gd-mvf-warning-message-low s-mvf-warning-message-low";case"medium":return"gd-mvf-warning-message-medium s-mvf-warning-message-medium";case"high":return"gd-mvf-warning-message-high s-mvf-warning-message-high"}})(e),t,"s-mvf-warning-message");return ue.createElement("div",{className:i},jn(e)?e.text:e)},Yn=6;class Qn extends ue.PureComponent{constructor(e){super(e);const{operator:t,value:i,usePercentage:n,treatNullAsZeroValue:r}=e;this.state={operator:t||"ALL",value:(n?this.convertToPercentageValue(i,t):i)||{},enabledTreatNullValuesAsZero:r}}render(){const{onCancel:e,warningMessage:t,displayTreatNullAsZeroOption:i,enableOperatorSelection:n,intl:r}=this.props,{operator:l,enabledTreatNullValuesAsZero:a}=this.state;return ue.createElement("div",{className:"gd-mvf-dropdown-body gd-dialog gd-dropdown overlay s-mvf-dropdown-body"},ue.createElement("div",{className:"gd-mvf-dropdown-content"},t?ue.createElement("div",{className:"gd-mvf-dropdown-section"},ue.createElement(Zn,{warningMessage:t})):null,ue.createElement("div",{className:"gd-mvf-dropdown-section"},ue.createElement(Kn,{onSelect:this.handleOperatorSelection,operator:l,isDisabled:!n})),"ALL"!==l?ue.createElement("div",{className:"gd-mvf-dropdown-section"},this.renderInputSection()," ",i?ue.createElement($n,{onChange:this.handleTreatNullAsZeroClicked,checked:a,intl:r}):null):null),ue.createElement("div",{className:"gd-mvf-dropdown-footer"},ue.createElement(he.Button,{className:"gd-button-secondary gd-button-small s-mvf-dropdown-cancel",onClick:e,value:r.formatMessage({id:"cancel"})}),ue.createElement(he.Button,{className:"gd-button-action gd-button-small s-mvf-dropdown-apply",onClick:this.onApply,value:r.formatMessage({id:"apply"}),disabled:this.isApplyButtonDisabled()})))}renderInputSection=()=>{const{usePercentage:e,disableAutofocus:t,separators:i}=this.props,{operator:n,value:{value:r=null,from:l=null,to:a=null}}=this.state;return(0,p.isComparisonConditionOperator)(n)?ue.createElement(Un,{value:r,usePercentage:e,onValueChange:this.handleValueChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:i}):(0,p.isRangeConditionOperator)(n)?ue.createElement(Gn,{from:l,to:a,usePercentage:e,onFromChange:this.handleFromChange,onToChange:this.handleToChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:i}):null};isApplyButtonDisabledForComparison(){const{value:e=null}=this.state.value;return null===e||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.value:e===this.props.value.value)}isApplyButtonDisabledForRange(){const{from:e=null,to:t=null}=this.state.value;return null===e||null===t||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.from&&this.trimToPrecision(this.fromPercentToDecimal(t))===this.props.value.to:e===this.props.value.from&&t===this.props.value.to)}isChanged=()=>this.state.operator!==this.props.operator||this.state.enabledTreatNullValuesAsZero!==this.props.treatNullAsZeroValue;isApplyButtonDisabledForAll(){return"ALL"===this.props.operator}isApplyButtonDisabled=()=>{const{operator:e}=this.state;return(0,p.isComparisonConditionOperator)(e)?this.isApplyButtonDisabledForComparison():(0,p.isRangeConditionOperator)(e)?this.isApplyButtonDisabledForRange():this.isApplyButtonDisabledForAll()};handleOperatorSelection=e=>this.setState({operator:e});handleValueChange=e=>{this.setState({value:{...this.state.value,value:e}})};handleFromChange=e=>{this.setState({value:{...this.state.value,from:e}})};handleToChange=e=>{this.setState({value:{...this.state.value,to:e}})};handleTreatNullAsZeroClicked=e=>{this.setState({enabledTreatNullValuesAsZero:e})};trimToPrecision=e=>{const{valuePrecision:t=Yn}=this.props;return e?parseFloat(e.toFixed(t)):e};fromPercentToDecimal=e=>e?e/100:e;fromDecimalToPercent=e=>e?100*e:e;convertToRawValue=(e,t)=>e?(0,p.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromPercentToDecimal(e.value))}:{from:this.trimToPrecision(this.fromPercentToDecimal(e.from)),to:this.trimToPrecision(this.fromPercentToDecimal(e.to))}:e;convertToPercentageValue=(e,t)=>e?(0,p.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromDecimalToPercent(e.value))}:{from:this.trimToPrecision(this.fromDecimalToPercent(e.from)),to:this.trimToPrecision(this.fromDecimalToPercent(e.to))}:e;onApply=()=>{if(this.isApplyButtonDisabled())return;const{enabledTreatNullValuesAsZero:e,operator:t,value:i}=this.state,{usePercentage:n}=this.props,r="ALL"===t?null:t,l=n?this.convertToRawValue(i,t):i;this.props.onApply(r,l,e)}}const Xn=Q(Qn);class Jn extends ue.PureComponent{render(){return ue.createElement(R.IntlWrapper,{locale:this.props.locale},ue.createElement(Xn,{...this.props}))}}const er=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}})));class tr extends ue.PureComponent{static defaultProps={value:{},operator:"ALL",displayTreatNullAsZeroOption:!1,treatNullAsZeroValue:!1};render(){const{operator:e,value:t,usePercentage:i,warningMessage:n,locale:r,onCancel:l,anchorEl:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:d}=this.props,u=null!==e?e:"ALL";return ue.createElement(he.Overlay,{alignTo:a,alignPoints:er,closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,onClose:l},ue.createElement(Jn,{operator:u,value:t,usePercentage:i,warningMessage:n,locale:r,onCancel:l,onApply:this.onApply,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:d}))}onApply=(e,t,i)=>{this.props.onApply(e,t,i)}}const ir=Q(tr);class nr extends ue.PureComponent{render(){return ue.createElement(R.IntlWrapper,{locale:this.props.locale},ue.createElement(ir,{...this.props}))}}const rr=e=>{if(!e)return{};const t=(0,p.measureValueFilterCondition)(e);return t?(0,p.isRangeCondition)(t)?{from:t.range.from,to:t.range.to}:{value:t.comparison.value}:{}},lr=(e,t)=>{if(!e||!(0,p.measureValueFilterCondition)(e))return void 0!==t&&t;const i=(0,p.measureValueFilterCondition)(e);return(0,p.isComparisonCondition)(i)&&void 0!==i.comparison.treatNullValuesAs||(0,p.isRangeCondition)(i)&&void 0!==i.range.treatNullValuesAs||!1};class ar extends ue.PureComponent{static defaultProps={displayTreatNullAsZeroOption:!1,treatNullAsZeroDefaultValue:!1,enableOperatorSelection:!0};render(){const{filter:e,onCancel:t,usePercentage:i,warningMessage:n,locale:r,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroDefaultValue:s,enableOperatorSelection:c}=this.props;return ue.createElement(nr,{onApply:this.onApply,onCancel:t,operator:e&&(0,p.measureValueFilterOperator)(e)||null,value:e&&rr(e)||null,usePercentage:i,warningMessage:n,locale:r,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroValue:lr(e,s),enableOperatorSelection:c})}onApply=(e,t,i)=>{const{measureIdentifier:n,onApply:r}=this.props;null===e||"ALL"===e?r(null):(0,p.isRangeConditionOperator)(e)?r((0,p.newMeasureValueFilter)({localIdentifier:n},e,t.from??0,t.to??0,i?0:void 0)):r((0,p.newMeasureValueFilter)({localIdentifier:n},e,t.value??0,i?0:void 0))}}const or=({isActive:e,buttonTitle:t,onClick:i})=>{const n=Ee("gd-mvf-dropdown-button","s-mvf-dropdown-button","gd-button","gd-button-secondary","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e});return ue.createElement("button",{className:n,onClick:i},t)};class sr extends ue.PureComponent{static defaultProps={onCancel:ge};state={displayDropdown:!1};buttonRef=ue.createRef();render(){const{displayDropdown:e}=this.state,{filter:t,measureIdentifier:i,buttonTitle:n,usePercentage:r,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:d}=this.props;return ue.createElement(ue.Fragment,null,ue.createElement("div",{ref:this.buttonRef},ue.createElement(or,{onClick:this.toggleDropdown,isActive:e,buttonTitle:n})),e?ue.createElement(ar,{onApply:this.onApply,onCancel:this.onCancel,filter:t,measureIdentifier:i,usePercentage:r,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:d,anchorEl:this.buttonRef.current}):null)}onApply=e=>{this.closeDropdown(),this.props.onApply(e)};onCancel=()=>{this.closeDropdown(),this.props.onCancel()};closeDropdown=()=>{this.setState({displayDropdown:!1})};toggleDropdown=()=>{this.setState((e=>({...e,displayDropdown:!e.displayDropdown})))}}const cr=({isActive:e,onClick:t,title:i,className:n})=>{const r=Ee("gd-button","gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e},"s-rf-dropdown-button",n);return ue.createElement("button",{className:r,onClick:t},i)},dr=({title:e,value:t,isSelected:i,onSelect:n})=>{const r=Ee("gd-list-item","gd-list-item-shortened",{"is-selected":i},"gd-button-link",`s-rf-operator-${ve.gl(e)}`);return ue.createElement("button",{className:r,onClick:()=>n(t)},ue.createElement("span",null,e))},ur=Q((({items:e,selectedValue:t,onSelect:i,onClose:n,intl:r})=>ue.createElement(he.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-operator-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n},ue.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-operator-dropdown-body s-rf-operator-dropdown-body"},e.map((({value:e,translationId:n})=>{const l=r.formatMessage({id:n});return ue.createElement(dr,{key:e,title:l,value:e,isSelected:e===t,onSelect:i})})))))),mr=[{value:"TOP",translationId:ie.top.id},{value:"BOTTOM",translationId:ie.bottom.id}],pr=Q((({selectedValue:e,onSelect:t,intl:i})=>{const[n,r]=(0,ue.useState)(!1),l=Ee("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":n,"gd-icon-navigatedown":!n},"gd-rf-operator-dropdown-button","s-rf-operator-dropdown-button"),a=i.formatMessage({id:(o=e,mr.find((({value:e})=>e===o)).translationId)});var o;return ue.createElement(ue.Fragment,null,ue.createElement(he.Button,{className:l,value:a,onClick:()=>{r(!n)}}),n?ue.createElement(ur,{items:mr,selectedValue:e,onSelect:e=>{t(e),r(!1)},onClose:()=>r(!1)}):null)})),gr=(0,Xi.b)(Si);class fr extends ue.Component{constructor(e){super(e);const t=void 0!==e.value?dn(e.getItems(e.value.toString()),e.value):null;this.state={inputValue:t?Ii(t):e.value?e.value.toString():""}}inputRef=ue.createRef();static defaultProps={onChange:ge,initialIsOpen:!1,visibleItemsRange:$i};onChange=e=>{e&&this.props.onChange(e.value)};componentDidUpdate=e=>{if(e.value!==this.props.value){const e=this.props.getItems(this.props.value.toString()),t=dn(e,this.props.value)?.label||this.props.value.toString();this.setState({inputValue:t})}};focus=()=>{this.inputRef.current&&this.inputRef.current.focus()};blur=()=>{this.inputRef.current&&this.inputRef.current.blur()};onInputValueChanged=e=>{e!==this.state.inputValue&&this.setState({inputValue:e})};render(){const{initialIsOpen:e,placeholder:t,getItems:i,value:n=null,className:r,style:l,optionClassName:a,visibleItemsRange:o,ariaLabel:s}=this.props,c=i(this.state.inputValue),d=null!==n?i(n.toString()):[],u=null!==n&&dn(d,n)||null,m=Fi(c),p=""!==this.state.inputValue.trim();return ue.createElement(gr,{onChange:this.onChange,itemToString:Ii,initialIsOpen:e,selectedItem:u,itemCount:m.length,inputValue:this.state.inputValue,defaultHighlightedIndex:u||p?0:Yi(m)},(({getInputProps:e,getMenuProps:i,getItemProps:n,isOpen:d,openMenu:p,closeMenu:g,inputValue:f,highlightedIndex:b,setHighlightedIndex:h,selectItem:y})=>{const E=b>m.length-1?0:b,v={items:c,selectedItem:u,highlightedIndex:E,getItemProps:n,getMenuProps:i,className:"gd-dynamic-select-menu",optionClassName:a,inputValue:f,setHighlightedIndex:h,visibleItemsRange:o};return ue.createElement("div",{className:Ee("gd-dynamic-select",r),style:l,"aria-labelledby":void 0},ue.createElement("div",{className:"gd-dynamic-select-input-wrapper"},ue.createElement("input",{type:"text",className:"s-relative-range-input gd-input-field","aria-label":s,...e({"aria-labelledby":void 0,ref:this.inputRef,placeholder:u?u.label:t,value:f,onFocus:()=>{this.setState({inputValue:""}),p()},onChange:e=>this.onChangeHandler(e,y),onBlur:()=>this.onBlurHandler(u,y,g)})})),d&&c.length>0?ue.createElement(Qi,{...v}):null)}))}onBlurHandler=(e,t,i)=>{const{customValueValidator:n,value:r}=this.props;n?(i(),this.onInputValueChanged(r?.toString())):(t(e),this.onInputValueChanged(e?e.label:""))};onChangeHandler=(e,t)=>{const{customValueValidator:i}=this.props,n=e.target.value;i?.(n)&&t({type:"option",value:Number(n),label:n}),this.onInputValueChanged(n)}}const br=[3,5,10,15,20,25,50,100].map((e=>({type:"option",value:e,label:`${e}`}))),hr=e=>/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e),yr=e=>e&&hr(e)&&Number(e)>0&&Number(e)<=99999,Er=Q((({selectedValue:e,onSelect:t,intl:i})=>ue.createElement(fr,{getItems:e=>((e,t)=>{if(!e)return br;const i=(e=>e?.trim())(e),n=hr(i);if(n){const e=n[1];return((e,t)=>e<1?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]:e>99999?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooLarge"})}]:br.filter((t=>t.label.toLowerCase().includes(e.toString()))))(Number.parseInt(e,10),t)}return[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]})(e,i),onChange:t,value:e,className:"gd-rf-value-dropdown-button s-rf-value-dropdown-button",optionClassName:"s-rf-value-dropdown-item",customValueValidator:yr}))),vr=({item:e,iconClass:t,isSelected:i,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})=>{const{title:o,ref:s}=e,c=a&&!a.enable,d=Ee("gd-list-item","gd-list-item-shortened",{"is-selected":i,"is-disabled":c},"gd-button-link",t,`s-rf-attribute-${ve.gl(o)}`);return c?ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement(he.Button,{className:d,value:o,title:o,disabled:!0}),ue.createElement(he.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-disabled-attribute-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},a.warningMessage)):ue.createElement("button",{className:d,onClick:()=>n(s),onMouseOver:()=>{r&&r(s)},onMouseOut:()=>{l&&l()},title:o},ue.createElement("span",null,o))},Cr=({isSelected:e,onSelect:t})=>{const i=Ee("gd-list-item","gd-list-item-shortened",{"is-selected":e},"gd-button-link","s-rf-attribute-all-records");return ue.createElement("button",{className:i,onClick:()=>t()},ue.createElement(xe,{id:"rankingFilter.allRecords"}),ue.createElement("div",null,ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement("span",{className:"gd-icon-circle-question gd-rf-attribute-all-records-icon s-rf-attribute-all-records-icon"}),ue.createElement(he.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-all-records-bubble",arrowOffsets:{"cr cl":[16,0],"cl cr":[-16,0]},alignPoints:[{align:"cr cl"},{align:"cl cr"}]},ue.createElement(xe,{id:"rankingFilter.allRecords.tooltip"})))))},Sr=({items:e,selectedItemRef:t,onSelect:i,onClose:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})=>ue.createElement(he.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-attribute-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n},ue.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-attribute-dropdown-body s-rf-attribute-dropdown-body"},e.map((e=>{const{type:n,ref:o}=e;return ue.createElement(vr,{key:(0,p.objRefToString)(o),iconClass:"DATE"===n?"gd-icon-date":"gd-icon-attribute",item:e,isSelected:(0,p.areObjRefsEqual)(o,t),onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})})),ue.createElement("div",{className:"gd-rf-attribute-dropdown-separator"}),ue.createElement(Cr,{isSelected:!t,onSelect:i}))),Ir=Q((({items:e,selectedItemRef:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,customGranularitySelection:l,intl:a})=>{const[o,s]=(0,ue.useState)(!1),c=1===e.length,d=Ee("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":o,"gd-icon-navigatedown":!o},"gd-rf-attribute-dropdown-button","s-rf-attribute-dropdown-button"),u=e.find((e=>(0,p.areObjRefsEqual)(e.ref,t))),m=((e,t)=>e?e.title:t.formatMessage({id:"rankingFilter.allRecords"}))(u,a);return c?ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement(he.Button,{className:d,value:m,disabled:!0}),ue.createElement(he.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-no-options-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},ue.createElement(xe,{id:"rankingFilter.attributeDropdown.oneAttributeTooltip"}))):ue.createElement(ue.Fragment,null,ue.createElement(he.Button,{className:d,value:m,onClick:()=>{s(!o)},iconLeft:(g=u,g?"DATE"===g.type?"gd-icon-date":"gd-icon-attribute":null)}),o?ue.createElement(Sr,{items:e,selectedItemRef:t,onSelect:e=>{i(e),s(!1),r?.()},onClose:()=>s(!1),onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,customGranularitySelection:l}):null);var g})),Fr=({item:e,isSelected:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l})=>{const{title:a,ref:o,sequenceNumber:s}=e,c=Ee("gd-list-item","gd-list-item-shortened",{"is-selected":t},"gd-button-link",l?"gd-icon-metric":"gd-icon-measure",`s-rf-measure-${ve.gl(a)}`);return ue.createElement("button",{className:c,onClick:()=>i(o),onMouseOver:()=>{n&&n(o)},onMouseOut:()=>{r&&r()},title:a},ue.createElement("span",{className:"gd-rf-measure-title"},a),s?ue.createElement("span",{className:"gd-rf-sequence-number"},s):null)},wr=({items:e,selectedItemRef:t,onSelect:i,onClose:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})=>ue.createElement(he.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-measure-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n},ue.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-measure-dropdown-body s-rf-measure-dropdown-body"},e.map((e=>{const{ref:n}=e;return ue.createElement(Fr,{key:(0,p.objRefToString)(n),item:e,isSelected:(0,p.areObjRefsEqual)(n,t),onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})})))),Ar=({items:e,selectedItemRef:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l})=>{const[a,o]=(0,ue.useState)(!1),s=Ee("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":a,"gd-icon-navigatedown":!a},"gd-rf-measure-dropdown-button","s-rf-measure-dropdown-button"),c=e.find((e=>(0,p.areObjRefsEqual)(e.ref,t))),d=c?.title;return ue.createElement(ue.Fragment,null,ue.createElement(he.Button,{className:s,value:d,onClick:()=>{o(!a)},iconLeft:l?"gd-icon-metric":"gd-icon-measure"}),a?ue.createElement(wr,{items:e,selectedItemRef:t,onSelect:e=>{i(e),o(!1),r?.()},onClose:()=>o(!1),onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l}):null)};var Dr=i(72905);const kr=(e,t)=>{switch(e){case"TOP":return t?ie.topWithAttr.id:ie.topWithoutAttr.id;case"BOTTOM":return t?ie.bottomWithAttr.id:ie.bottomWithoutAttr.id;default:throw new Error(`Operator '${e}' is not supported!`)}},Pr=({operator:e,value:t,measure:i,attribute:n})=>ue.createElement("div",{className:"gd-rf-preview s-rf-preview"},ue.createElement(xe,{id:kr(e,n),tagName:"span",values:{measure:i.title,attribute:n?.title,operator:e,value:t,strong:e=>ue.createElement("strong",null,e)}})),xr=(e,t)=>{const i=e.rankingFilter,n=t.rankingFilter,r=i.operator===n.operator,l=i.value===n.value,a=I(Dr(i.attributes,n.attributes,me)),o=me(i.measure,n.measure);return r&&l&&a&&o},Or=Q((({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=ge,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o,intl:s,enableRenamingMeasureToMetric:c})=>{const d=i.rankingFilter,[u,m]=(0,ue.useState)(d.value),[g,f]=(0,ue.useState)(d.operator),[b,h]=(0,ue.useState)(d.measure),[y,E]=(0,ue.useState)(d.attributes?.[0]),v=e.find((e=>(0,p.areObjRefsEqual)(e.ref,b))),C=t.find((e=>(0,p.areObjRefsEqual)(e.ref,y))),S=(0,ue.useCallback)((()=>y?(0,p.newRankingFilter)(b,[y],g,u):(0,p.newRankingFilter)(b,g,u)),[b,y,g,u]);return ue.createElement("div",{className:"gd-dialog gd-dropdown overlay gd-rf-dropdown-body s-rf-dropdown-body"},ue.createElement("div",{className:"gd-rf-dropdown-header"},ue.createElement(xe,{id:"rankingFilter.topBottom"})),ue.createElement("div",{className:"gd-rf-dropdown-section"},ue.createElement("div",{className:"gd-rf-value-section"},ue.createElement(pr,{selectedValue:g,onSelect:f}),ue.createElement(Er,{selectedValue:u,onSelect:m}),ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement("span",{className:"gd-icon-circle-question gd-rf-value-tooltip-icon s-rf-value-tooltip-icon"}),ue.createElement(he.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-value-tooltip",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},ue.createElement(xe,{id:"rankingFilter.valueTooltip"})))),ue.createElement("div",{className:"gd-rf-dropdown-section-title"},ue.createElement(xe,{id:"rankingFilter.outOf"})),ue.createElement(Ir,{items:t,selectedItemRef:y,onSelect:E,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o}),ue.createElement("div",{className:"gd-rf-dropdown-section-title"},ue.createElement(xe,{id:"rankingFilter.basedOn"})),ue.createElement(Ar,{items:e,selectedItemRef:b,onSelect:h,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,enableRenamingMeasureToMetric:c}),ue.createElement("div",{className:"gd-rf-dropdown-section-title"},ue.createElement(xe,{id:"rankingFilter.preview"})),ue.createElement(Pr,{measure:v,attribute:C,operator:g,value:u})),ue.createElement("div",{className:"gd-rf-dropdown-footer"},ue.createElement(he.Button,{className:"gd-button-secondary gd-button-small s-rf-dropdown-cancel",onClick:()=>r(),value:s.formatMessage({id:"cancel"})}),ue.createElement(he.Button,{className:"gd-button-action gd-button-small s-rf-dropdown-apply",onClick:()=>{const e=S();n(e)},value:s.formatMessage({id:"apply"}),disabled:xr(i,S())})))})),Tr=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),Nr=Q((({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=ge,anchorEl:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c})=>{const[d,u]=(0,ue.useState)((e=>{const{measure:t,attributes:i,operator:n,value:r}=e.rankingFilter,l=i?.[0];return{rankingFilter:{operator:n,value:r,measure:t,...l?{attributes:[l]}:{}}}})(i));return ue.createElement(he.Overlay,{closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,alignTo:l,alignPoints:Tr,onClose:r,ignoreClicksOnByClass:[".gd-rf-inner-overlay-dropdown"]},ue.createElement(Or,{measureItems:e,attributeItems:t,filter:d,onApply:e=>{u(e),n(e)},onCancel:r,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c}))})),Lr=e=>ue.createElement(R.IntlWrapper,{locale:e.locale},ue.createElement(Nr,{...e})),Mr=({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=ge,buttonTitle:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:d})=>{const[u,m]=(0,ue.useState)(!1);return ue.createElement(ue.Fragment,null,ue.createElement(cr,{isActive:u,onClick:()=>{m(!u)},title:l,className:"gd-rf-dropdown-button"}),u?ue.createElement(Lr,{measureItems:e,attributeItems:t,filter:i,onApply:e=>{n(e),m(!1)},onCancel:()=>{r(),m(!1)},anchorEl:".gd-rf-dropdown-button",onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:d}):null)};var Rr=i(44586),Br=i(47591),_r=i(39693),Vr=i(5659),Hr=i(30797),Wr=i(6557);const qr={init:Wr,initStart:e=>{e.initialization.status="loading"},initSuccess:e=>{e.initialization.status="success",e.initialization.error=void 0},initError:(e,t)=>{e.initialization.status="error",e.initialization.error=t.payload.error},initCancel:e=>{e.initialization.status="canceled"}},zr={loadAttributeRequest:Wr,loadAttributeStart:e=>{e.attribute.status="loading",e.attribute.error=void 0,e.attribute.data=void 0},loadAttributeSuccess:(e,t)=>{e.attribute.status="success",e.attribute.data=t.payload.attribute},loadAttributeError:(e,t)=>{e.attribute.status="error",e.attribute.error=t.payload.error},loadAttributeCancelRequest:Wr,loadAttributeCancel:e=>{e.attribute.status="canceled"}},Kr=e=>e,Gr=(e,t,i)=>"uris"===e.elementsForm||i?t.uri:t.title,Ur=e=>e.elementsForm,$r=e=>e.config.withoutApply;var jr=i(20434);const Zr="initSelection_",Yr={loadCustomElementsRequest:Wr,loadCustomElementsStart:Wr,loadCustomElementsSuccess:(e,t)=>{const i=[],{enableDuplicatedLabelValuesInAttributeFilter:n,options:{elements:r,filterByPrimaryLabel:l},correlation:a}=t.payload,o="loading"===e.initialization.status&&a.startsWith(Zr);if(n&&r){const a=(e=>e?(0,jr.isElementsQueryOptionsElementsByValue)(e)?e.values:(0,jr.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e)?e.primaryValues:e.uris:[])(r);a.forEach((r=>{t.payload.elements.filter((e=>l?e.uri===r:e.title===r)).forEach((t=>{const r=Gr(e,t,n);e.elements.cache[r]||(e.elements.cache[r]=t),o&&i.push(r)}))}))}else t.payload.elements.forEach((t=>{const r=Gr(e,t,n);e.elements.cache[r]||(e.elements.cache[r]=t),o&&i.push(r)}));n&&o&&(e.selection.working.keys=i,e.selection.commited.keys=i)},loadCustomElementsError:Wr,loadCustomElementsCancelRequest:Wr,loadCustomElementsCancel:Wr},Qr={loadInitialElementsPageRequest:Wr,loadInitialElementsPageStart:e=>{e.elements.initialPageLoad.status="loading",e.elements.initialPageLoad.error=void 0,e.elements.currentOptions.offset=0,e.elements.lastLoadedOptions.offset=0,e.elements.data=[]},loadInitialElementsPageSuccess:(e,t)=>{const{enableDuplicatedLabelValuesInAttributeFilter:i}=t.payload;e.elements.initialPageLoad.status="success",e.elements.totalCountWithCurrentSettings=t.payload.totalCount,t.payload.elements.forEach((t=>{const n=Gr(e,t,i);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=t.payload.elements.map((t=>Gr(e,t,i))),e.elements.lastLoadedOptions=t.payload.options},loadInitialElementsPageError:(e,t)=>{e.elements.initialPageLoad.status="error",e.elements.initialPageLoad.error=t.payload.error},loadInitialElementsPageCancelRequest:Wr,loadInitialElementsPageCancel:e=>{e.attribute.status="canceled"}},Xr={loadNextElementsPageRequest:Wr,loadNextElementsPageStart:e=>{e.elements.nextPageLoad.status="loading",e.elements.nextPageLoad.error=void 0},loadNextElementsPageSuccess:(e,t)=>{const{enableDuplicatedLabelValuesInAttributeFilter:i}=t.payload;e.elements.nextPageLoad.status="success",t.payload.elements.forEach((t=>{const n=Gr(e,t,i);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=e.elements.data.concat(t.payload.elements.map((t=>Gr(e,t,i)))),e.elements.lastLoadedOptions=t.payload.options},loadNextElementsPageError:(e,t)=>{e.elements.nextPageLoad.status="error",e.elements.nextPageLoad.error=t.payload.error},loadNextElementsPageCancelRequest:Wr,loadNextElementsPageCancel:e=>{e.elements.nextPageLoad.status="canceled"}};var Jr=i(8698);const el=(0,Jr.P1)(Kr,(e=>e.selection.working.keys)),tl=(0,Jr.P1)(Kr,(e=>e.selection.working.isInverted)),il=(0,Jr.P1)(Kr,(e=>e.selection.working.irrelevantKeys)),nl=(0,Jr.P1)(Kr,(e=>e.selection.commited.keys)),rl=(0,Jr.P1)(Kr,(e=>e.selection.commited.isInverted)),ll=(0,Jr.P1)(Kr,(e=>e.selection.commited.irrelevantKeys)),al=(0,Jr.P1)(el,tl,il,((e,t,i)=>({keys:e,isInverted:t,irrelevantKeys:i}))),ol=(0,Jr.P1)(nl,rl,ll,((e,t,i)=>({keys:e,isInverted:t,irrelevantKeys:i}))),sl=(0,Jr.P1)(tl,el,rl,nl,((e,t,i,n)=>e!==i||!me([...n].sort(),[...t].sort()))),cl=(0,Jr.P1)(el,I),dl={...qr,...zr,...Qr,...Xr,...Yr,loadIrrelevantElementsRequest:Wr,loadIrrelevantElementsStart:e=>{e.selection.commited.irrelevantKeys=[],e.selection.working.irrelevantKeys=[]},loadIrrelevantElementsSuccess:(e,t)=>{e.selection.commited.irrelevantKeys=t.payload.elementTitles,e.selection.working.irrelevantKeys=t.payload.elementTitles},loadIrrelevantElementsError:Wr,loadIrrelevantElementsCancelRequest:Wr,loadIrrelevantElementsCancel:Wr,changeSelection:(e,t)=>{e.selection.working.keys=t.payload.selection,t.payload.irrelevantSelection&&(e.selection.working.irrelevantKeys=t.payload.irrelevantSelection),pe(t.payload.isInverted)||(e.selection.working.isInverted=t.payload.isInverted)},revertSelection:e=>{const t=nl(e),i=rl(e),n=ll(e);e.selection.working.keys=t,e.selection.working.isInverted=i,e.selection.working.irrelevantKeys=n},commitSelection:e=>{const t=el(e),i=tl(e),n=il(e);e.selection.commited.keys=t,e.selection.commited.isInverted=i,e.selection.commited.irrelevantKeys=n},invertSelection:e=>{const t=tl(e);e.selection.working.isInverted=!t},clearSelection:e=>{e.selection.working.keys=[]},setElementsTotalCount:(e,t)=>{e.elements.totalCount=t.payload.totalCount},initTotalCount:Wr,initTotalCountStart:e=>{e.elements.totalCountInitialization.status="loading"},initTotalCountSuccess:e=>{e.elements.totalCountInitialization.status="success"},initTotalCountError:(e,t)=>{e.elements.totalCountInitialization.status="error",e.elements.totalCountInitialization.error=t.payload.error},initTotalCountCancel:e=>{e.elements.totalCountInitialization.status="canceled"},setElementsTotalCountWithCurrentSettings:(e,t)=>{e.elements.totalCountWithCurrentSettings=t.payload.totalCount},setOffset:(e,t)=>{e.elements.currentOptions.offset=t.payload.offset},setLimit:(e,t)=>{e.elements.currentOptions.limit=t.payload.limit},setSearch:(e,t)=>{e.elements.currentOptions.search=t.payload.search},setOrder:(e,t)=>{e.elements.currentOptions.order=t.payload.order},setLimitingAttributeFilters:(e,t)=>{e.elements.currentOptions.limitingAttributeFilters=t.payload.filters},setLimitingMeasures:(e,t)=>{e.elements.currentOptions.limitingMeasures=t.payload.filters},setLimitingValidationItems:(e,t)=>{e.elements.currentOptions.limitingValidationItems=t.payload.validateBy},setLimitingDateFilters:(e,t)=>{e.elements.currentOptions.limitingDateFilters=t.payload.filters},setLimitingAttributeFiltersAttributes:(e,t)=>{e.elements.limitingAttributeFiltersAttributes=t.payload.attributes},setCacheId:(e,t)=>{e.elements.cacheId=t.payload.cacheId},transformFilterToPrimaryLabel:(e,t)=>{e.displayFormRef=t.payload.primaryLabelRef,e.displayAsLabelRef||(e.displayAsLabelRef=t.payload.secondaryLabelRef)},setDisplayAsLabel:(e,t)=>{(0,p.areObjRefsEqual)(e.displayAsLabelRef,t.payload.displayAsLabel)||(e.elements.cache={}),e.displayAsLabelRef=t.payload.displayAsLabel},setDisplayFormRef:(e,t)=>{e.displayFormRef=t.payload.displayForm}},ul={initialization:{status:"pending"},attribute:{status:"pending"},elements:{cache:{},currentOptions:{offset:0,limit:500,search:"",limitingAttributeFilters:[],limitingDateFilters:[],limitingMeasures:[],limitingValidationItems:[]},initialPageLoad:{status:"pending"},nextPageLoad:{status:"pending"},limitingAttributeFiltersAttributes:[],lastLoadedOptions:{},totalCountInitialization:{status:"pending"}},config:{},selection:{commited:{},working:{}}},ml=(0,Vr.oM)({name:"attributeFilterSlice",initialState:ul,reducers:dl}),pl=ml.reducer,gl=ml.actions;var fl=i(34857);function*bl(){return yield(0,fl.fw)("attributeFilterContext")}var hl=i(91966),yl=i(93386),El=i(44908);const vl=(e,t)=>_r(e.map((e=>t[e]))),Cl=(0,Jr.P1)(Kr,(e=>e.elements.data??[])),Sl=(0,Jr.P1)(Kr,(e=>e.elements.cache)),Il=(0,Jr.P1)(Cl,Sl,vl),Fl=(0,Jr.P1)(Kr,(e=>e.elements.totalCount)),wl=(0,Jr.P1)(Kr,(e=>e.elements.totalCountInitialization?.status)),Al=(0,Jr.P1)(Kr,(e=>e.elements.totalCountInitialization?.error)),Dl=(0,Jr.P1)(Kr,(e=>e.elements.totalCountWithCurrentSettings)),kl=(0,Jr.P1)(Kr,(e=>e.config.staticElements??[])),Pl=(0,Jr.P1)(Kr,(e=>e.elements.currentOptions.search)),xl=(0,Jr.P1)(Kr,(e=>e.elements.currentOptions.order)),Ol=(0,Jr.P1)(Kr,(e=>e.elements.currentOptions.limit)),Tl=(0,Jr.P1)(Kr,(e=>e.elements?.lastLoadedOptions?.offset??e.elements.currentOptions.offset)),Nl=(0,Jr.P1)(Kr,(e=>e.elements.currentOptions.limitingAttributeFilters)),Ll=(0,Jr.P1)(Kr,(e=>e.elements.currentOptions.limitingMeasures)),Ml=(0,Jr.P1)(Kr,(e=>e.elements.currentOptions.limitingValidationItems)),Rl=(0,Jr.P1)(Kr,(e=>e.elements.currentOptions.limitingDateFilters)),Bl=(0,Jr.P1)(Kr,(e=>e.elements.cacheId)),_l=(0,Jr.P1)(Tl,Ol,xl,Pl,Nl,Ll,Rl,Ml,((e,t,i,n,r,l,a,o)=>({limit:t,limitingAttributeFilters:r,limitingDateFilters:a,limitingMeasures:l,limitingValidationItems:o,offset:e,order:i,search:n}))),Vl=(0,Jr.P1)(Kr,(e=>e.elements.lastLoadedOptions)),Hl=(0,Jr.P1)(Kr,(e=>e.elements.limitingAttributeFiltersAttributes)),Wl=(0,Jr.P1)(Kr,(e=>e.elementsForm)),ql=(0,Jr.P1)(Kr,(e=>e.config.hiddenElements??[])),zl=(0,Jr.P1)(Wl,ql,((e,t)=>"uris"===e?{uris:t}:{values:t})),Kl=(0,Jr.P1)(Kr,(e=>e.displayFormRef)),Gl=(0,Jr.P1)(Kr,(e=>e.displayAsLabelRef)),Ul=(0,Jr.P1)(Kr,(e=>e.localIdentifier)),$l=(0,Jr.P1)(Kr,(e=>e.originalFilter)),jl=(0,Jr.P1)(Wl,nl,((e,t)=>"uris"===e?{uris:t}:{values:t})),Zl=(0,Jr.P1)(Wl,nl,rl,ql,((e,t,i,n)=>{const r=i?yl(t,n):hl(t,n);return"uris"===e?{uris:r}:{values:r}})),Yl=(0,Jr.P1)(Wl,nl,rl,ql,Il,((e,t,i,n,r)=>{const l=i?yl(t,n):hl(t,n),a=r.filter((e=>l.find((t=>t===e.uri)))).map((e=>e.title)),o=El(a);return"uris"===e?{uris:o}:{values:o}})),Ql=(0,Jr.P1)(Kl,rl,Zl,Ul,((e,t,i,n)=>t?(0,p.newNegativeAttributeFilter)(e,i,n):(0,p.newPositiveAttributeFilter)(e,i,n))),Xl=(0,Jr.P1)(Kl,Gl,rl,Zl,Yl,Ul,((e,t,i,n,r,l)=>i?(0,p.newNegativeAttributeFilter)(t??e,t?r:n,l):(0,p.newPositiveAttributeFilter)(t??e,t?r:n,l)));async function Jl(e,t){return e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t).catch((e=>{throw(0,R.convertError)(e)}))}function*ea(){yield(0,fl.Fm)([gl.loadAttributeRequest.match,gl.loadAttributeCancelRequest.match],ta)}function*ta(e){if(gl.loadAttributeCancelRequest.match(e))return;const{payload:{correlation:t}}=e;try{const e=yield(0,fl.Ys)(Kl),i=yield(0,fl.RE)(bl);yield(0,fl.gz)(gl.loadAttributeStart({correlation:t}));const n=yield(0,fl.RE)(Jl,i,e);if(i.enableDuplicatedLabelValuesInAttributeFilter){const i=n.displayForms.find((e=>e.isPrimary)),r=yield(0,fl.Ys)(Gl);i?.ref&&r&&!(0,p.areObjRefsEqual)(e,i?.ref)&&!(0,p.areObjRefsEqual)(r,i?.ref)&&console.error("AttributeFilter: Filter's displayForm is not primary and provided displayAsLabel is not primary either -> filter will not work correctly. Please provide primary display form in filter definition."),i?.ref&&!(0,p.areObjRefsEqual)(e,i?.ref)&&(console.warn("AttributeFilter: Filter's displayForm is not primary but enableDuplicatedLabelValuesInAttributeFilter is set -> migrating filter to primary label"),yield(0,fl.gz)(gl.transformFilterToPrimaryLabel({primaryLabelRef:i?.ref,secondaryLabelRef:e,correlation:t})))}return yield(0,fl.gz)(gl.loadAttributeSuccess({attribute:n,correlation:t})),n}catch(e){yield(0,fl.gz)(gl.loadAttributeError({error:e,correlation:t}))}finally{(yield(0,fl.By)())&&(yield(0,fl.gz)(gl.loadAttributeCancel({correlation:t})))}}const ia=(e,t)=>!e.enableDuplicatedLabelValuesInAttributeFilter&&!e.backend.capabilities.supportsElementUris&&"values"===t;var na=i(57557);const ra=(0,Jr.P1)(Kr,(e=>e.attribute.data)),la=(0,Jr.P1)(Kr,(e=>e.attribute.status)),aa=(0,Jr.P1)(Kr,(e=>e.attribute.error));class oa{allItems;items;limit;offset;totalCount;constructor(e,t=50,i=0){this.allItems=e,(0,Br.kG)(i>=0,`paging offset must be non-negative, got: ${i}`),(0,Br.kG)(t>0,`limit must be a positive number, got: ${t}`),this.items=e.slice(i,i+t),this.offset=Math.min(i,e.length),this.limit=t,this.totalCount=e.length}async next(){return 0===this.items.length?this:new oa(this.allItems,this.limit,this.offset+this.items.length)}async goTo(e){return 0===this.items.length?this:new oa(this.allItems,this.limit,e*this.items.length)}async all(){return[...this.allItems]}async allSorted(e){return[...this.allItems].sort(e)}}const sa=e=>t=>(0,p.attributeElementsIsEmpty)(e)?t:(0,p.isAttributeElementsByRef)(e)?t.filter((t=>!e.uris.includes(t.uri))):t.filter((t=>!e.values.includes(t.title))),ca=e=>t=>{if(!e)return t;if((0,jr.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e))throw new jr.NotImplemented("Elements by primary display form value are not supported yet");return(0,jr.isElementsQueryOptionsElementsByValue)(e)?t.filter((t=>e.values.includes(t.title))):t.filter((t=>e.uris.includes(t.uri)))},da=e=>t=>e?t.filter((t=>t.title.toLowerCase().includes(e.toLowerCase()))):t;const ua=e=>!!e.capabilities.supportsElementUris;async function ma(e,t,i,n,r){return n?.length?async function(e,t,i){let n=fe(sa(t.hiddenElements),ca(e.elements),da(e.search))(i);return"desc"===e.order&&(n=[...n].reverse()),new oa(n,e.limit,e.offset)}(t,i,n):async function(e,t,i,n){const{backend:r,workspace:l}=e,{displayFormRef:a,elements:o,limit:s,limitingAttributeFilters:c,limitingDateFilters:d,limitingMeasures:u,limitingValidationItems:m,offset:g,search:f,order:b,includeTotalCountWithoutFilters:h,excludePrimaryLabel:y=!0,filterByPrimaryLabel:E,signal:v}=t,C=I(c)&&I(d)&&I(u)&&!f&&!y&&!b&&0===g;if(ua(r)&&(0,jr.isElementsQueryOptionsElementsByValue)(o)&&C){const e=await async function(e,t,i,n,r){const l=n.values,a=[(0,p.newPositiveAttributeFilter)(i,l)];(0,p.attributeElementsIsEmpty)(r.hiddenElements)||a.push((0,p.newNegativeAttributeFilter)(i,r.hiddenElements));const o=await e.workspace(t).execution().forItems([(0,p.newAttribute)(i)],a).execute().catch((e=>{throw(0,R.convertError)(e)})),s=await o.readAll().catch((e=>{throw(0,R.convertError)(e)})),c=R.DataViewFacade.for(s),[d]=c.meta().attributeHeaders();return d.map((([e])=>({title:e.attributeHeaderItem.name,uri:e.attributeHeaderItem.uri})))}(r,l,a,o,i);return new oa(e,s,g)}let S=r.workspace(l).attributes().elements().forDisplayForm(a);const F={cacheId:n,filterByPrimaryLabel:E};s&&(S=S.withLimit(s)),g&&(S=S.withOffset(g)),f&&(F.filter=f),y&&!ua(r)&&(F.excludePrimaryLabel=!0),o&&(F.elements=ua(r)||(0,jr.isValueBasedElementsQueryOptionsElements)(o)?o:{primaryValues:o.uris}),b&&(F.order=b),h&&(F.includeTotalCountWithoutFilters=h),I(F)||(S=S.withOptions(F)),d?.length&&(S=S.withDateFilters(d));const w=function(e,t,i,n){return(0,p.attributeElementsIsEmpty)(i)?t??[]:[{attributeFilter:(0,p.newNegativeAttributeFilter)(e,i),overAttribute:n.ref},...t??[]]}(a,c,i.hiddenElements,i.attribute);return w.length&&(S=S.withAttributeFilters(w)),u?.length&&(S=S.withMeasures(u)),v&&S.withSignal(v),r.capabilities.supportsAttributeFilterElementsLimiting&&m?.length>0&&(S=S.withAvailableElementsOnly(m)),S.query().catch((e=>{throw(0,R.convertError)(e)}))}(e,t,i,r)}function*pa(e,t){const i=yield(0,fl.RE)(bl),n=yield(0,fl.Ys)(zl),r=yield(0,fl.Ys)(ra),l=yield(0,fl.Ys)(Kl),a=yield(0,fl.Ys)(Gl),o=yield(0,fl.Ys)(kl),{enableDuplicatedLabelValuesInAttributeFilter:s}=i,c=s&&a&&!e.search?{filterByPrimaryLabel:!0}:{},d={...e,...c},u=yield(0,fl.RE)(ma,i,{displayFormRef:s&&a?a:l,...d},{hiddenElements:n,attribute:r},o,t);return{elements:u.items,totalCount:u.totalCount,options:na(d,"signal"),cacheId:u.cacheId}}async function ga(e,t){const i=t.map((e=>(0,p.filterObjRef)(e.attributeFilter)));return Promise.all(i.map((t=>e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t)))).catch((e=>{throw(0,R.convertError)(e)}))}function*fa(){yield(0,fl.Fm)([gl.loadInitialElementsPageRequest.match,gl.loadInitialElementsPageCancelRequest.match],ba)}function*ba(e){if(gl.loadInitialElementsPageCancelRequest.match(e))return;const t=yield(0,fl.RE)(bl),i=new AbortController,{payload:{correlation:n}}=e;try{yield(0,fl.gz)(gl.loadInitialElementsPageStart({correlation:n}));const e=yield(0,fl.Ys)(_l),r=yield(0,fl.Ys)(Bl),l=yield(0,fl.Ys)(Ur),a={...e,signal:i.signal,excludePrimaryLabel:ia(t,l)},o=yield(0,fl.RE)(pa,a,r),s=yield(0,fl.RE)(ga,t,e.limitingAttributeFilters??[]);yield(0,fl.gz)(gl.setLimitingAttributeFiltersAttributes({attributes:s})),yield(0,fl.gz)(gl.setCacheId({cacheId:o.cacheId})),yield(0,fl.gz)(gl.loadInitialElementsPageSuccess({...o,correlation:n,enableDuplicatedLabelValuesInAttributeFilter:t.enableDuplicatedLabelValuesInAttributeFilter}))}catch(e){yield(0,fl.gz)(gl.loadInitialElementsPageError({error:e,correlation:n}))}finally{(yield(0,fl.By)())&&(i.abort(),yield(0,fl.gz)(gl.loadInitialElementsPageCancel({correlation:n})))}}const ha=(0,Jr.P1)(Kr,(e=>e.elements.nextPageLoad.status)),ya=(0,Jr.P1)(Kr,(e=>e.elements.nextPageLoad.error)),Ea=(0,Jr.P1)(Vl,(e=>({...e,offset:e.offset+e.limit}))),va=(0,Jr.P1)(Vl,Dl,((e,t)=>e.offset+e.limit<t)),Ca=(0,Jr.P1)(_l,Vl,((e,t)=>!me(na(e,"offset","excludePrimaryLabel","filterByPrimaryLabel"),na(t,"offset","excludePrimaryLabel","filterByPrimaryLabel"))));function*Sa(){yield(0,fl.Fm)([gl.loadNextElementsPageRequest.match,gl.loadNextElementsPageCancelRequest.match,gl.loadInitialElementsPageRequest.match],Ia)}function*Ia(e){const t=yield(0,fl.RE)(bl);if(gl.loadNextElementsPageCancelRequest.match(e)||gl.loadInitialElementsPageRequest.match(e))return;const{payload:{correlation:i}}=e;if(yield(0,fl.Ys)(va))try{yield(0,fl.gz)(gl.loadNextElementsPageStart({correlation:i}));const e=yield(0,fl.Ys)(Ea),n=yield(0,fl.Ys)(Bl),r=yield(0,fl.Ys)(Ur),l={...e,excludePrimaryLabel:ia(t,r)},a=yield(0,fl.RE)(pa,l,n);yield(0,fl.gz)(gl.loadNextElementsPageSuccess({...a,correlation:i,enableDuplicatedLabelValuesInAttributeFilter:t.enableDuplicatedLabelValuesInAttributeFilter}))}catch(e){yield(0,fl.gz)(gl.loadNextElementsPageError({error:e,correlation:i}))}finally{(yield(0,fl.By)())&&(yield(0,fl.gz)(gl.loadNextElementsPageCancel({correlation:i})))}}function*Fa(){yield(0,fl.ib)([gl.loadCustomElementsRequest.match],wa)}function*wa(e){const{payload:{correlation:t,options:i}}=e;try{yield(0,fl.gz)(gl.loadCustomElementsStart({correlation:t}));const e=yield(0,fl.RE)(bl),{result:n,canceled:r,anotherRequest:l}=yield(0,fl.S3)({result:(0,fl.RE)(pa,i),anotherRequest:(0,fl.qn)((e=>gl.loadCustomElementsRequest.match(e)&&(!t||e.payload.correlation===t))),canceled:(0,fl.qn)((e=>gl.loadCustomElementsCancelRequest.match(e)&&(!t||e.payload.correlation===t)))});if(n)return yield(0,fl.gz)(gl.loadCustomElementsSuccess({...n,correlation:t,enableDuplicatedLabelValuesInAttributeFilter:e.enableDuplicatedLabelValuesInAttributeFilter})),n;(r||l)&&(yield(0,fl.gz)(gl.loadCustomElementsCancel({correlation:t})))}catch(e){yield(0,fl.gz)(gl.loadCustomElementsError({error:e,correlation:t}))}finally{(yield(0,fl.By)())&&(yield(0,fl.gz)(gl.loadCustomElementsCancel({correlation:t})))}}function*Aa(){yield(0,fl.Fm)([gl.loadIrrelevantElementsRequest.match,gl.loadIrrelevantElementsCancelRequest.match],Da)}function*Da(e){if(gl.loadIrrelevantElementsCancelRequest.match(e))return;const t=yield(0,fl.RE)(bl),i=new AbortController,{payload:{correlation:n}}=e;try{yield(0,fl.gz)(gl.loadIrrelevantElementsStart({correlation:n}));const e=yield(0,fl.Ys)(Ur),r=yield(0,fl.Ys)(_l),l=yield(0,fl.Ys)($r),a=yield(0,fl.Ys)(l?el:nl),o="values"===e?{values:a}:{uris:a},s={...r,signal:i.signal,excludePrimaryLabel:ia(t,e),search:"",elements:o},c=(yield(0,fl.RE)(pa,s)).elements.map((e=>t.enableDuplicatedLabelValuesInAttributeFilter?e.uri:e.title)),d=hl(a,c);yield(0,fl.gz)(gl.loadIrrelevantElementsSuccess({elementTitles:d,correlation:n}))}catch(e){yield(0,fl.gz)(gl.loadIrrelevantElementsError({error:e,correlation:n}))}finally{(yield(0,fl.By)())&&(i.abort(),yield(0,fl.gz)(gl.loadIrrelevantElementsCancel({correlation:n})))}}function*ka(e){yield(0,fl.rM)(ta,gl.loadAttributeRequest({correlation:e}));const{error:t}=yield(0,fl.S3)({success:(0,fl.qn)((t=>gl.loadAttributeSuccess.match(t)&&t.payload.correlation===e)),error:(0,fl.qn)((t=>gl.loadAttributeError.match(t)&&t.payload.correlation===e)),cancel:(0,fl.qn)((t=>gl.loadAttributeCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*Pa(e){const t=yield(0,fl.Ys)(jl),i=yield(0,fl.RE)(bl),n=yield(0,fl.Ys)(Ur),r=(0,p.isAttributeElementsByRef)(t)?t.uris:t.values;if(0===r.length)return;const l=`${Zr}${e}`;yield(0,fl.rM)(wa,gl.loadCustomElementsRequest({options:{elements:t,offset:0,limit:Math.max(550,r.length),search:void 0,excludePrimaryLabel:ia(i,n)},correlation:l}));const{error:a}=yield(0,fl.S3)({success:(0,fl.qn)((e=>gl.loadCustomElementsSuccess.match(e)&&e.payload.correlation===l)),error:(0,fl.qn)((e=>gl.loadCustomElementsError.match(e)&&e.payload.correlation===l)),cancel:(0,fl.qn)((e=>gl.loadCustomElementsCancel.match(e)&&e.payload.correlation===l))});if(a)throw a.payload.error}function*xa(e){yield(0,fl.rM)(ba,gl.loadInitialElementsPageRequest({correlation:e}));const{error:t}=yield(0,fl.S3)({success:(0,fl.qn)((t=>gl.loadInitialElementsPageSuccess.match(t)&&t.payload.correlation===e)),error:(0,fl.qn)((t=>gl.loadInitialElementsPageError.match(t)&&t.payload.correlation===e)),cancel:(0,fl.qn)((t=>gl.loadInitialElementsPageCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*Oa(e){const t=`initTotalCount_${e}`,i=yield(0,fl.RE)(bl),n=yield(0,fl.Ys)(Ur);yield(0,fl.rM)(wa,gl.loadCustomElementsRequest({options:{limit:1,includeTotalCountWithoutFilters:!0,excludePrimaryLabel:ia(i,n)},correlation:t}));const{success:r,error:l}=yield(0,fl.S3)({success:(0,fl.qn)((e=>gl.loadCustomElementsSuccess.match(e)&&e.payload.correlation===t)),error:(0,fl.qn)((e=>gl.loadCustomElementsError.match(e)&&e.payload.correlation===t)),cancel:(0,fl.qn)((e=>gl.loadCustomElementsCancel.match(e)&&e.payload.correlation===t))});if(l)throw l.payload.error;r&&(yield(0,fl.gz)(gl.setElementsTotalCount({totalCount:r.payload.totalCount})))}function Ta(e){return I(e)||e.every((e=>!!(0,p.isNegativeAttributeFilter)(e.attributeFilter)&&(0,p.attributeElementsIsEmpty)((0,p.filterAttributeElements)(e.attributeFilter))))}function*Na(e){yield(0,fl.rM)(Da,gl.loadIrrelevantElementsRequest({correlation:e}));const{error:t}=yield(0,fl.S3)({success:(0,fl.qn)((t=>gl.loadIrrelevantElementsSuccess.match(t)&&t.payload.correlation===e)),error:(0,fl.qn)((t=>gl.loadIrrelevantElementsError.match(t)&&t.payload.correlation===e)),cancel:(0,fl.qn)((t=>gl.loadIrrelevantElementsCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*La(){yield(0,fl.Fm)(gl.init.match,Ma)}function*Ma(e){const{payload:{correlation:t}}=e;try{yield(0,fl.gz)(gl.initStart({correlation:t}));const e=yield(0,fl.RE)(bl),i=yield(0,fl.Ys)(ql),n=yield(0,fl.Ys)(Nl),r=yield(0,fl.Ys)(Ml),l=yield(0,fl.Ys)(Rl),a=yield(0,fl.Ys)(cl),o=e.backend.capabilities.supportsShowingFilteredElements,s=!Ta(n)||r.length>0||l.length>0,c=[Pa,xa];i?.length>0?yield(0,fl.RE)(ka,t):c.unshift(ka),s&&c.push(Oa),s&&!a&&o&&c.push(Na),yield(0,fl.$6)(c.map((e=>(0,fl.RE)(e,t)))),yield(0,fl.gz)(gl.initSuccess({correlation:t}))}catch(e){yield(0,fl.gz)(gl.initError({error:e,correlation:t}))}finally{(yield(0,fl.By)())&&(yield(0,fl.$6)([(0,fl.gz)(gl.initCancel({correlation:t}))]))}}function*Ra(){yield(0,fl.Fm)(gl.initTotalCount.match,Ba)}function*Ba(e){const{payload:{correlation:t}}=e;try{yield(0,fl.gz)(gl.initTotalCountStart({correlation:t})),yield(0,fl.RE)(Oa,t),yield(0,fl.gz)(gl.initTotalCountSuccess({correlation:t}))}catch(e){yield(0,fl.gz)(gl.initTotalCountError({error:e,correlation:t}))}finally{(yield(0,fl.By)())&&(yield(0,fl.gz)(gl.initTotalCountCancel({correlation:t})))}}function*_a(){try{yield(0,fl.$6)([ea,fa,Sa,Fa,Aa,La,Ra].map((e=>(0,fl.rM)(e))))}catch(e){console.error("Root saga failed",e)}}const Va=[gl.loadAttributeError.type,gl.loadInitialElementsPageError.type,gl.loadNextElementsPageError.type,gl.loadCustomElementsError.type,gl.initError.type],Ha=(0,Xi.b)(Hr.ZP),Wa=(0,Jr.P1)(Kr,(e=>e.initialization.status)),qa=(0,Jr.P1)(Kr,(e=>e.initialization.error)),za=(0,Jr.P1)(Kr,(e=>e.elements.initialPageLoad.status)),Ka=(0,Jr.P1)(Kr,(e=>e.elements.initialPageLoad.error));function Ga(e,t){if((0,R.isGoodDataSdkError)(t)){const i=t.getCause(),n=i?`\nInner error: ${i}`:"";console.error(`Error while ${e}: ${t.getMessage()}${n}`)}else console.error(`Error while ${e}:`,t)}function Ua(){let e=[];return{invoke:t=>{e.forEach((e=>e(t)))},subscribe:t=>(e.push(t),function(){e=e.filter((e=>e!=t))})}}class $a{redux;config;callbacks;constructor(e){this.config=e,this.initializeBridge()}initializeBridge=()=>{this.callbacks=(()=>{const{registerCallback:e,registrations:t,unsubscribeAll:i}=(()=>{const e=[];return{registrations:{initStart:Ua(),initSuccess:Ua(),initError:Ua(),initCancel:Ua(),initTotalCountStart:Ua(),initTotalCountSuccess:Ua(),initTotalCountError:Ua(),initTotalCountCancel:Ua(),loadAttributeStart:Ua(),loadAttributeSuccess:Ua(),loadAttributeError:Ua(),loadAttributeCancel:Ua(),loadInitialElementsPageStart:Ua(),loadInitialElementsPageSuccess:Ua(),loadInitialElementsPageError:Ua(),loadInitialElementsPageCancel:Ua(),loadNextElementsPageStart:Ua(),loadNextElementsPageSuccess:Ua(),loadNextElementsPageError:Ua(),loadNextElementsPageCancel:Ua(),loadCustomElementsStart:Ua(),loadCustomElementsSuccess:Ua(),loadCustomElementsError:Ua(),loadCustomElementsCancel:Ua(),loadIrrelevantElementsStart:Ua(),loadIrrelevantElementsSuccess:Ua(),loadIrrelevantElementsError:Ua(),loadIrrelevantElementsCancel:Ua(),selectionChanged:Ua(),selectionCommitted:Ua(),update:Ua()},registerCallback:(t,i)=>{const n=i.subscribe(t);return e.push(n),n},unsubscribeAll:()=>{e.forEach((e=>{e()}))}}})();return{registrations:t,registerCallback:e,unsubscribeAll:i,eventListener:(e,i)=>{gl.initStart.match(e)?t.initStart.invoke(e.payload):gl.initSuccess.match(e)?t.initSuccess.invoke(e.payload):gl.initError.match(e)?(Ga("initializing",e.payload.error),t.initError.invoke(e.payload)):gl.initCancel.match(e)&&t.initCancel.invoke(e.payload),gl.initTotalCountStart.match(e)?t.initTotalCountStart.invoke(e.payload):gl.initTotalCountSuccess.match(e)?t.initTotalCountSuccess.invoke(e.payload):gl.initTotalCountError.match(e)?(Ga("initializing total count",e.payload.error),t.initTotalCountError.invoke(e.payload)):gl.initTotalCountCancel.match(e)&&t.initTotalCountCancel.invoke(e.payload),gl.loadAttributeStart.match(e)?t.loadAttributeStart.invoke(e.payload):gl.loadAttributeSuccess.match(e)?t.loadAttributeSuccess.invoke(e.payload):gl.loadAttributeError.match(e)?(Ga("loading attribute",e.payload.error),t.loadAttributeError.invoke(e.payload)):gl.loadAttributeCancel.match(e)&&t.loadAttributeCancel.invoke(e.payload),gl.loadInitialElementsPageStart.match(e)?t.loadInitialElementsPageStart.invoke(e.payload):gl.loadInitialElementsPageSuccess.match(e)?t.loadInitialElementsPageSuccess.invoke(e.payload):gl.loadInitialElementsPageError.match(e)?(Ga("loading initial elements page",e.payload.error),t.loadInitialElementsPageError.invoke(e.payload)):gl.loadInitialElementsPageCancel.match(e)&&t.loadInitialElementsPageCancel.invoke(e.payload),gl.loadNextElementsPageStart.match(e)?t.loadNextElementsPageStart.invoke(e.payload):gl.loadNextElementsPageSuccess.match(e)?t.loadNextElementsPageSuccess.invoke(e.payload):gl.loadNextElementsPageError.match(e)?(Ga("loading next elements page",e.payload.error),t.loadNextElementsPageError.invoke(e.payload)):gl.loadNextElementsPageCancel.match(e)&&t.loadNextElementsPageCancel.invoke(e.payload),gl.loadCustomElementsStart.match(e)?t.loadCustomElementsStart.invoke(e.payload):gl.loadCustomElementsSuccess.match(e)?t.loadCustomElementsSuccess.invoke(e.payload):gl.loadCustomElementsError.match(e)?(Ga("loading custom elements",e.payload.error),t.loadCustomElementsError.invoke(e.payload)):gl.loadCustomElementsCancel.match(e)&&t.loadCustomElementsCancel.invoke(e.payload),gl.loadIrrelevantElementsStart.match(e)?t.loadIrrelevantElementsStart.invoke(e.payload):gl.loadIrrelevantElementsSuccess.match(e)?t.loadIrrelevantElementsSuccess.invoke(e.payload):gl.loadIrrelevantElementsError.match(e)?(Ga("loading irrelevant elements",e.payload.error),t.loadIrrelevantElementsError.invoke(e.payload)):gl.loadIrrelevantElementsCancel.match(e)&&t.loadIrrelevantElementsCancel.invoke(e.payload),[gl.changeSelection.match,gl.revertSelection.match,gl.invertSelection.match,gl.clearSelection.match].some((t=>t(e)))&&t.selectionChanged.invoke({selection:i(al)}),gl.commitSelection.match(e)&&t.selectionCommitted.invoke({selection:i(ol)}),[gl.initStart.match,gl.initSuccess.match,gl.initError.match,gl.initCancel.match,gl.loadAttributeStart.match,gl.loadAttributeSuccess.match,gl.loadAttributeError.match,gl.loadAttributeCancel.match,gl.loadInitialElementsPageStart.match,gl.loadInitialElementsPageSuccess.match,gl.loadInitialElementsPageError.match,gl.loadInitialElementsPageCancel.match,gl.loadNextElementsPageStart.match,gl.loadNextElementsPageSuccess.match,gl.loadNextElementsPageError.match,gl.loadNextElementsPageCancel.match,gl.loadIrrelevantElementsStart.match,gl.loadIrrelevantElementsSuccess.match,gl.loadIrrelevantElementsError.match,gl.loadIrrelevantElementsCancel.match,gl.changeSelection.match,gl.revertSelection.match,gl.invertSelection.match,gl.clearSelection.match,gl.commitSelection.match,gl.setLimit.match,gl.setOrder.match,gl.setSearch.match,gl.setLimitingMeasures.match,gl.setLimitingValidationItems.match,gl.setLimitingAttributeFilters.match,gl.setLimitingDateFilters.match].some((t=>t(e)))&&t.update.invoke()}}})(),this.redux=function(e){const t=Ha({context:{attributeFilterContext:e}}),i=(0,p.filterObjRef)(e.attributeFilter),n=(0,p.filterLocalIdentifier)(e.attributeFilter),r=(0,p.filterAttributeElements)(e.attributeFilter),l=(0,p.isAttributeElementsByValue)(r)?"values":"uris",a=(0,p.isAttributeElementsByValue)(r)?r.values:r.uris,o=(0,p.isNegativeAttributeFilter)(e.attributeFilter),s=(0,Vr.xC)({preloadedState:{...ul,localIdentifier:n,displayFormRef:i,displayAsLabelRef:e.displayAsLabel,elementsForm:l,selection:{commited:{keys:a,isInverted:o,irrelevantKeys:[]},working:{keys:a,isInverted:o,irrelevantKeys:[]}},config:{hiddenElements:e.hiddenElements,staticElements:e.staticElements,withoutApply:e.withoutApply},originalFilter:e.attributeFilter},reducer:pl,middleware:i=>{return i({thunk:!1,serializableCheck:{ignoredActions:Va,ignoredPaths:["initialization.error","attribute.error","elements.initialPageLoad.error","elements.nextPageLoad.error"]}}).concat([t,(n=e.eventListener,e=>t=>i=>{const r=t(i);return n(r,(t=>t(e.getState()))),r})]);var n},devTools:{name:`AttributeFilter state: ${(0,p.objRefToString)(i)}`}}),c=t.run(_a);return{context:e,cancelRootSaga:()=>{c.cancel()},dispatch:e=>{s.dispatch(e)},select:e=>e(s.getState())}}({...this.config,eventListener:(e,t)=>{this.callbacks.eventListener(e,t)}})};init=e=>{this.redux.dispatch(gl.init({correlation:e}))};getInitStatus=()=>this.redux.select(Wa);getInitError=()=>this.redux.select(qa);onInitStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initStart);onInitSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initSuccess);onInitError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initError);onInitCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initCancel);initTotalCount=e=>{this.redux.dispatch(gl.initTotalCount({correlation:e}))};getInitTotalCountStatus=()=>this.redux.select(wl);getInitTotalCountError=()=>this.redux.select(Al);onInitTotalCountStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountStart);onInitTotalCountSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountSuccess);onInitTotalCountError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountError);onInitTotalCountCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountCancel);loadAttribute=e=>{this.redux.dispatch(gl.loadAttributeRequest({correlation:e}))};cancelAttributeLoad=()=>{this.redux.dispatch(gl.loadAttributeCancelRequest())};getAttribute=()=>this.redux.select(ra);getAttributeStatus=()=>this.redux.select(la);getAttributeError=()=>this.redux.select(aa);onLoadAttributeStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeStart);onLoadAttributeSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeSuccess);onLoadAttributeError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeError);onLoadAttributeCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeCancel);loadInitialElementsPage=e=>{this.redux.dispatch(gl.loadInitialElementsPageRequest({correlation:e}))};cancelInitialElementsPageLoad=()=>{this.redux.dispatch(gl.loadInitialElementsPageCancelRequest())};getInitialElementsPageStatus=()=>this.redux.select(za);getInitialElementsPageError=()=>this.redux.select(Ka);onLoadInitialElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageStart);onLoadInitialElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageSuccess);onLoadInitialElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageError);onLoadInitialElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageCancel);loadNextElementsPage=e=>{this.redux.dispatch(gl.loadNextElementsPageRequest({correlation:e}))};cancelNextElementsPageLoad(){this.redux.dispatch(gl.loadNextElementsPageCancelRequest())}getNextElementsPageStatus=()=>this.redux.select(ha);getNextElementsPageError=()=>this.redux.select(ya);onLoadNextElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageStart);onLoadNextElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageSuccess);onLoadNextElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageError);onLoadNextElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageCancel);loadCustomElements=(e,t)=>{this.redux.dispatch(gl.loadCustomElementsRequest({options:e,correlation:t}))};cancelCustomElementsLoad(e){this.redux.dispatch(gl.loadCustomElementsCancelRequest({correlation:e}))}onLoadCustomElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsStart);onLoadCustomElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsSuccess);onLoadCustomElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsError);onLoadCustomElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsCancel);loadIrrelevantElements=e=>{this.redux.dispatch(gl.loadIrrelevantElementsRequest({correlation:e}))};cancelIrrelevantElementsLoad(e){this.redux.dispatch(gl.loadIrrelevantElementsCancelRequest({correlation:e}))}onLoadIrrelevantElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsStart);onLoadIrrelevantElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsSuccess);onLoadIrrelevantElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsError);onLoadIrrelevantElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsCancel);setDisplayAsLabel=(e,t)=>{this.redux.dispatch(gl.setDisplayAsLabel({displayAsLabel:e,correlation:t}))};getDisplayAsLabel=()=>this.redux.select(Gl);setDisplayForm=(e,t)=>{this.redux.dispatch(gl.setDisplayFormRef({displayForm:e,correlation:t}))};getOffset=()=>this.redux.select(Tl);setSearch=e=>{this.redux.dispatch(gl.setSearch({search:e}))};getSearch=()=>this.redux.select(Pl);setLimit=e=>{this.redux.dispatch(gl.setLimit({limit:e}))};getLimit=()=>this.redux.select(Ol);setOrder=e=>{this.redux.dispatch(gl.setOrder({order:e}))};getOrder=()=>this.redux.select(xl);setLimitingMeasures=e=>{this.redux.dispatch(gl.setLimitingMeasures({filters:e}))};getLimitingMeasures=()=>this.redux.select(Ll);setLimitingValidationItems=e=>{this.redux.dispatch(gl.setLimitingValidationItems({validateBy:e}))};getLimitingValidationItems=()=>this.redux.select(Ml);setLimitingAttributeFilters=e=>{this.redux.dispatch(gl.setLimitingAttributeFilters({filters:e}))};getLimitingAttributeFilters=()=>this.redux.select(Nl);setLimitingDateFilters=e=>{this.redux.dispatch(gl.setLimitingDateFilters({filters:e}))};getLimitingDateFilters=()=>this.redux.select(Rl);getAllElements=()=>this.redux.select(Il);getElementsByKey=e=>{const t=this.redux.select(Sl);return vl(e,t)};getTotalCount=()=>this.redux.select(Fl);getTotalCountWithCurrentSettings=()=>this.redux.select(Dl);getLimitingAttributeFiltersAttributes=()=>this.redux.select(Hl);changeMultiSelection=({keys:e,isInverted:t,irrelevantKeys:i})=>{this.redux.dispatch(gl.changeSelection({selection:e,isInverted:t,irrelevantSelection:i}))};revertMultiSelection=()=>{this.redux.dispatch(gl.revertSelection())};commitMultiSelection=()=>{this.redux.dispatch(gl.commitSelection())};invertMultiSelection=()=>{this.redux.dispatch(gl.invertSelection())};clearMultiSelection=()=>{this.redux.dispatch(gl.clearSelection())};getWorkingMultiSelection=()=>this.redux.select(al);getCommittedMultiSelection=()=>this.redux.select(ol);changeSingleSelection=e=>{this.redux.dispatch(gl.changeSelection({isInverted:!1,selection:_r([e])}))};revertSingleSelection=()=>{this.redux.dispatch(gl.revertSelection())};commitSingleSelection=()=>{this.redux.dispatch(gl.commitSelection())};getWorkingSingleSelection=()=>{const[e,...t]=this.redux.select(el);return(0,Br.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};getCommittedSingleSelection=()=>{const[e,...t]=this.redux.select(nl);return(0,Br.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};onMultiSelectionChanged=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionChanged);onMultiSelectionCommitted=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionCommitted);onSingleSelectionChanged=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionChanged);onSingleSelectionCommitted=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionCommitted);getIsWorkingSelectionEmpty=()=>this.redux.select(cl);getIsWorkingSelectionChanged=()=>this.redux.select(sl);getFilter=()=>this.redux.select(Ql);getFilterToDisplay=()=>this.redux.select(Xl);getOriginalFilter=()=>this.redux.select($l);onUpdate=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.update);isLoadElementsOptionsChanged=()=>this.redux.select(Ca)}class ja{bridge;config;constructor(e){this.config=e,this.bridge=new $a(e)}validateStaticElementsLoad=()=>{(0,Br.kG)(!(this.config.staticElements?.length&&this.getLimitingAttributeFilters()?.length),"Using limitingAttributeFilters is not supported when using static attribute elements"),(0,Br.kG)(!(this.config.staticElements?.length&&this.getLimitingDateFilters()?.length),"Using limitingDateFilters is not supported when using static attribute elements"),(0,Br.kG)(!(this.config.staticElements?.length&&this.getLimitingMeasures()?.length),"Using limitingMeasures is not supported when using static attribute elements"),(0,Br.kG)(!(this.config.staticElements?.length&&this.getLimitingValidationItems()?.length),"Using limitingValidationItems is not supported when using static attribute elements")};init=(e=(0,Rr.Z)())=>{this.validateStaticElementsLoad(),this.bridge.init(e)};onInitStart=e=>this.bridge.onInitStart(e);onInitSuccess=e=>this.bridge.onInitSuccess(e);onInitError=e=>this.bridge.onInitError(e);onInitCancel=e=>this.bridge.onInitCancel(e);getInitStatus=()=>this.bridge.getInitStatus();getInitError=()=>this.bridge.getInitError();initTotalCount=(e=(0,Rr.Z)())=>{this.bridge.initTotalCount(e)};getInitTotalCountStatus=()=>this.bridge.getInitTotalCountStatus();getInitTotalCountError=()=>this.bridge.getInitTotalCountError();onInitTotalCountStart=e=>this.bridge.onInitTotalCountStart(e);onInitTotalCountSuccess=e=>this.bridge.onInitTotalCountSuccess(e);onInitTotalCountError=e=>this.bridge.onInitTotalCountError(e);onInitTotalCountCancel=e=>this.bridge.onInitTotalCountCancel(e);loadAttribute=(e=(0,Rr.Z)())=>{this.bridge.loadAttribute(e)};cancelAttributeLoad=()=>{this.bridge.cancelAttributeLoad()};getAttribute=()=>this.bridge.getAttribute();getAttributeError=()=>this.bridge.getAttributeError();getAttributeStatus=()=>this.bridge.getAttributeStatus();onLoadAttributeStart=e=>this.bridge.onLoadAttributeStart(e);onLoadAttributeSuccess=e=>this.bridge.onLoadAttributeSuccess(e);onLoadAttributeError=e=>this.bridge.onLoadAttributeError(e);onLoadAttributeCancel=e=>this.bridge.onLoadAttributeCancel(e);loadInitialElementsPage=(e=(0,Rr.Z)())=>{const t=this.bridge.getInitStatus();"error"!==t&&((0,Br.kG)("success"===t,"Cannot call loadInitialElementsPage() before successful initialization."),this.validateStaticElementsLoad(),this.bridge.loadInitialElementsPage(e))};cancelInitialElementsPageLoad(){this.bridge.cancelInitialElementsPageLoad()}getInitialElementsPageStatus=()=>this.bridge.getInitialElementsPageStatus();getInitialElementsPageError=()=>this.bridge.getInitialElementsPageError();onLoadInitialElementsPageStart=e=>this.bridge.onLoadInitialElementsPageStart(e);onLoadInitialElementsPageSuccess=e=>this.bridge.onLoadInitialElementsPageSuccess(e);onLoadInitialElementsPageError=e=>this.bridge.onLoadInitialElementsPageError(e);onLoadInitialElementsPageCancel=e=>this.bridge.onLoadInitialElementsPageCancel(e);loadNextElementsPage=(e=(0,Rr.Z)())=>{(0,Br.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadNextElementsPage() before successful initialization."),(0,Br.kG)("success"===this.bridge.getInitialElementsPageStatus(),"Cannot call loadNextElementsPage() before loadInitialElementsPage() completes."),(0,Br.kG)(!this.bridge.isLoadElementsOptionsChanged(),"Cannot call loadNextElementsPage() when load element options were changed. When options are changed, you should call loadInitialElementsPage() first."),this.bridge.loadNextElementsPage(e)};cancelNextElementsPageLoad(){this.bridge.cancelNextElementsPageLoad()}getNextElementsPageStatus=()=>this.bridge.getNextElementsPageStatus();getNextElementsPageError=()=>this.bridge.getNextElementsPageError();onLoadNextElementsPageStart=e=>this.bridge.onLoadNextElementsPageStart(e);onLoadNextElementsPageSuccess=e=>this.bridge.onLoadNextElementsPageSuccess(e);onLoadNextElementsPageError=e=>this.bridge.onLoadNextElementsPageError(e);onLoadNextElementsPageCancel=e=>this.bridge.onLoadNextElementsPageCancel(e);loadCustomElements=(e,t)=>{this.bridge.loadCustomElements(e,t)};cancelCustomElementsLoad(e){this.bridge.cancelCustomElementsLoad(e)}onLoadCustomElementsStart=e=>this.bridge.onLoadCustomElementsStart(e);onLoadCustomElementsSuccess=e=>this.bridge.onLoadCustomElementsSuccess(e);onLoadCustomElementsError=e=>this.bridge.onLoadCustomElementsError(e);onLoadCustomElementsCancel=e=>this.bridge.onLoadCustomElementsCancel(e);loadIrrelevantElements=e=>{this.bridge.loadIrrelevantElements(e)};cancelIrrelevantElementsLoad(e){this.bridge.cancelIrrelevantElementsLoad(e)}onLoadIrrelevantElementsStart=e=>this.bridge.onLoadIrrelevantElementsStart(e);onLoadIrrelevantElementsSuccess=e=>this.bridge.onLoadIrrelevantElementsSuccess(e);onLoadIrrelevantElementsError=e=>this.bridge.onLoadIrrelevantElementsError(e);onLoadIrrelevantElementsCancel=e=>this.bridge.onLoadIrrelevantElementsCancel(e);setDisplayAsLabel=e=>{this.bridge.setDisplayAsLabel(e)};getDisplayAsLabel=()=>this.bridge.getDisplayAsLabel();setDisplayForm=e=>{this.bridge.setDisplayForm(e)};getOffset=()=>this.bridge.getOffset();setSearch=e=>{this.bridge.setSearch(e)};getSearch=()=>this.bridge.getSearch();setLimit=e=>{this.bridge.setLimit(e)};getLimit=()=>this.bridge.getLimit();setOrder=e=>{this.bridge.setOrder(e)};getOrder=()=>this.bridge.getOrder();setLimitingMeasures=e=>{this.bridge.setLimitingMeasures(e)};getLimitingMeasures=()=>this.bridge.getLimitingMeasures();setLimitingValidationItems=e=>{this.bridge.setLimitingValidationItems(e)};getLimitingValidationItems=()=>this.bridge.getLimitingValidationItems();setLimitingAttributeFilters=e=>{this.bridge.setLimitingAttributeFilters(e)};getLimitingAttributeFilters=()=>this.bridge.getLimitingAttributeFilters();setLimitingDateFilters=e=>{this.bridge.setLimitingDateFilters(e)};getLimitingDateFilters=()=>this.bridge.getLimitingDateFilters();getAllElements=()=>this.bridge.getAllElements();getElementsByKey=e=>this.bridge.getElementsByKey(e);getTotalElementsCount=()=>this.bridge.getTotalCount();getTotalElementsCountWithCurrentSettings=()=>this.bridge.getTotalCountWithCurrentSettings();getLimitingAttributeFiltersAttributes=()=>this.bridge.getLimitingAttributeFiltersAttributes();getFilter=()=>this.bridge.getFilter();getFilterToDisplay=()=>this.bridge.getFilterToDisplay();getOriginalFilter=()=>this.bridge.getOriginalFilter();onUpdate=e=>this.bridge.onUpdate(e)}class Za extends ja{constructor(e){super(e)}changeSelection=e=>{this.bridge.changeMultiSelection(e)};revertSelection=()=>{this.bridge.revertMultiSelection()};commitSelection=()=>{this.bridge.commitMultiSelection()};invertSelection=()=>{this.bridge.invertMultiSelection()};clearSelection=()=>{this.bridge.clearMultiSelection()};getWorkingSelection=()=>this.bridge.getWorkingMultiSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedMultiSelection();onSelectionChanged=e=>this.bridge.onMultiSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onMultiSelectionCommitted(e)}class Ya extends ja{static sanitizeConfig(e){const t=(0,p.filterAttributeElements)(e.attributeFilter),i=((0,p.isAttributeElementsByRef)(t)?t.uris:t.values)[0],n=(0,p.isAttributeElementsByRef)(t)?{uris:[i]}:{values:[i]};return{...e,attributeFilter:(0,p.isPositiveAttributeFilter)(e.attributeFilter)?(0,p.newPositiveAttributeFilter)((0,p.filterObjRef)(e.attributeFilter),n,(0,p.filterLocalIdentifier)(e.attributeFilter)):(0,p.newNegativeAttributeFilter)((0,p.filterObjRef)(e.attributeFilter),n,(0,p.filterLocalIdentifier)(e.attributeFilter))}}constructor(e){super(Ya.sanitizeConfig(e))}changeSelection=e=>{this.bridge.changeSingleSelection(e)};revertSelection=()=>{this.bridge.revertSingleSelection()};commitSelection=()=>{this.bridge.commitSingleSelection()};getWorkingSelection=()=>this.bridge.getWorkingSingleSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedSingleSelection();onSelectionChanged=e=>this.bridge.onSingleSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onSingleSelectionCommitted(e)}function Qa(e,t,i,n={selectionMode:"multi",displayAsLabel:void 0,enableDuplicatedLabelValuesInAttributeFilter:!0,withoutApply:!1}){const{selectionMode:r,hiddenElements:l,staticElements:a,enableDuplicatedLabelValuesInAttributeFilter:o,displayAsLabel:s,withoutApply:c}=n;return"multi"===r?new Za({backend:e,workspace:t,attributeFilter:i,hiddenElements:l,staticElements:a,enableDuplicatedLabelValuesInAttributeFilter:o,displayAsLabel:s,withoutApply:c}):new Ya({backend:e,workspace:t,attributeFilter:i,hiddenElements:l,staticElements:a,enableDuplicatedLabelValuesInAttributeFilter:o,displayAsLabel:s,withoutApply:c})}const Xa=(e,t)=>()=>{throw new R.UnexpectedSdkError(`Component: ${e} is missing in the ${t}.`)};function Ja(e,t){return e.formattedTitle||e.title||`(${t.formatMessage({id:"empty_value"})})`}function eo(e){return e.uri&&e.uri!==e.title?e.uri:""}function to(e,t){return e.map((e=>Ja(e,t))).join(", ")}function io(e){return e.uri}function no(e,t,i){const n=0===t.length,r=n&&!e,l=!n&&e,a=!n&&!e;let o=i.formatMessage({id:"gs.list.all"});return l?o=`${i.formatMessage({id:"gs.list.all"})} ${i.formatMessage({id:"gs.list.except"})} ${to(t,i)}`:a?o=to(t,i):r&&(o=i.formatMessage({id:"gs.filterLabel.none"})),o}const ro=(0,ue.createContext)({ErrorComponent:Xa("ErrorComponent","AttributeFilterComponentsContext"),LoadingComponent:Xa("LoadingComponent","AttributeFilterComponentsContext"),DropdownButtonComponent:Xa("DropdownButtonComponent","AttributeFilterComponentsContext"),DropdownBodyComponent:Xa("DropdownBodyComponent","AttributeFilterComponentsContext"),DropdownActionsComponent:Xa("DropdownActionsComponent","AttributeFilterComponentsContext"),ElementsSearchBarComponent:Xa("ElementsSearchBarComponent","AttributeFilterComponentsContext"),ElementsSelectComponent:Xa("ElementsSelectComponent","AttributeFilterComponentsContext"),ElementsSelectLoadingComponent:Xa("ElementsSelectLoadingComponent","AttributeFilterComponentsContext"),ElementsSelectItemComponent:Xa("ElementsSelectItemComponent","AttributeFilterComponentsContext"),ElementsSelectErrorComponent:Xa("ElementsSelectErrorComponent","AttributeFilterComponentsContext"),ElementsSelectActionsComponent:Xa("ElementsSelectActionsComponent","AttributeFilterComponentsContext"),EmptyResultComponent:Xa("EmptyResultComponent","AttributeFilterComponentsContext"),StatusBarComponent:Xa("StatusBarComponent","AttributeFilterComponentsContext")});ro.displayName="AttributeFilterComponentsContext";const lo=()=>(0,ue.useContext)(ro),ao=e=>{const{children:t,...i}=e;return ue.createElement(ro.Provider,{value:i},t)};var oo=i(23279),so=i(70735),co=i(23560);const uo=e=>{const{backend:t,workspace:i,filter:n,displayAsLabel:r,hiddenElements:l,staticElements:a,enableDuplicatedLabelValuesInAttributeFilter:o=!0,withoutApply:s=!1}=e,[,c]=(0,ue.useState)(0),d=()=>{c((e=>e+1))},u=(0,ue.useRef)(),m=(0,ue.useCallback)((()=>{u.current=Qa(t.withTelemetry("AttributeFilter",{workspace:i,filter:n,hiddenElements:l,staticElements:a}),i,n,{selectionMode:"multi",hiddenElements:l,staticElements:a,enableDuplicatedLabelValuesInAttributeFilter:o,displayAsLabel:r,withoutApply:s})}),[t,i,n,l,a,o,r,s]);u.current||m();const g=u.current,f=(0,R.usePrevious)(e);return(0,ue.useEffect)((()=>{const e=g.onUpdate((()=>{d()}));return t===f.backend&&i===f.workspace&&!((e,t,i)=>i?!me((0,p.filterObjRef)(e),(0,p.filterObjRef)(t.getFilter()))&&!me((0,p.filterObjRef)(e),(0,p.filterObjRef)(t.getOriginalFilter())):!me((0,p.filterObjRef)(e),(0,p.filterObjRef)(t.getFilter())))(n,g,o)&&me(a,f.staticElements)&&me(l,f.hiddenElements)||(m(),d()),()=>{e()}}),[t,i,n,a,l,f,g,m,o]),g},mo=e=>{const t=e.getWorkingSelection(),i=e.getCommittedSelection(),n=e.getInitStatus();return{attributeFilter:e.getFilter(),attributeFilterToDisplay:e.getFilterToDisplay(),initialization:{status:e.getInitStatus(),error:e.getInitError()},attribute:{data:e.getAttribute(),status:e.getAttributeStatus(),error:e.getAttributeError()},elements:{data:e.getAllElements(),totalCount:e.getTotalElementsCount(),totalCountWithCurrentSettings:e.getTotalElementsCountWithCurrentSettings(),initialPageLoad:{status:e.getInitialElementsPageStatus(),error:e.getInitialElementsPageError()},nextPageLoad:{status:e.getNextElementsPageStatus(),error:e.getNextElementsPageError()},options:{search:e.getSearch(),offset:e.getOffset(),limit:e.getLimit(),limitingAttributeFilters:e.getLimitingAttributeFilters(),limitingDateFilters:e.getLimitingDateFilters(),limitingMeasures:e.getLimitingMeasures(),limitingValidationItems:e.getLimitingValidationItems(),order:e.getOrder()}},selection:{committed:{elements:"success"===n?e.getElementsByKey(i.keys):[],keys:i.keys,isInverted:i.isInverted,irrelevantElements:"success"===n?e.getElementsByKey(i.irrelevantKeys):[]},working:{elements:"success"===n?e.getElementsByKey(t.keys):[],keys:t.keys,isInverted:t.isInverted,isChanged:e.isWorkingSelectionChanged(),isEmpty:e.isWorkingSelectionEmpty(),irrelevantElements:"success"===n?e.getElementsByKey(t.irrelevantKeys):[]}}}},po="reset",go="parentFilters",fo="irrelevantSelection",bo="displayFormChanged",ho=500;const yo=e=>{const{backend:t,workspace:i,filter:n,workingFilter:r,connectToPlaceholder:l,parentFilters:a,dependentDateFilters:o,parentFilterOverAttribute:s,validateElementsBy:c,resetOnParentFilterChange:d=!0,onApply:u,onSelect:m,onError:g,hiddenElements:f,staticElements:b,elementsOptions:h,displayAsLabel:y,selectionMode:E="multi",selectFirst:v=!1,enableDuplicatedLabelValuesInAttributeFilter:C=!0,enableImmediateAttributeFilterDisplayAsLabelMigration:S=!1,enableAttributeFilterVirtualised:F=!1,withoutApply:w=!1,enableDashboardFiltersApplyModes:A=!1,enableDashboardFiltersApplyWithoutLoading:D=!1}=e,k=w??A,P=(0,R.useBackendStrict)(t,"AttributeFilter"),x=(0,R.useWorkspaceStrict)(i,"AttributeFilter"),O=P.capabilities.supportsSettingConnectingAttributes,T=P.capabilities.supportsKeepingDependentFiltersSelection,N=P.capabilities.supportsCircularDependencyInFilters,L=P.capabilities.supportsShowingFilteredElements,M=P.capabilities.supportsSingleSelectDependentFilters,B=(0,ue.useRef)(!1),_=(0,ue.useCallback)((e=>{T&&N&&(B.current=e)}),[N,T]),{shouldIncludeLimitingFilters:V,setShouldIncludeLimitingFilters:H}=So(L),{filter:W,setConnectedPlaceholderValue:q}=((e,t)=>{const[i,n]=(0,R.usePlaceholder)(t),r=i??e,l=(0,ue.useCallback)((e=>{t&&n(e)}),[t,n]);return{filter:r,setConnectedPlaceholderValue:l}})(n??r,l),z=((e,t,i)=>{const n=(0,R.useResolveValueWithPlaceholders)(e);return(0,ue.useMemo)((()=>i?((e,t)=>{if(!e||!t)return[];const i=co(t)?t:()=>t;return e.map(((e,t)=>({attributeFilter:e,overAttribute:i(e,t)}))).filter((e=>!(0,p.filterIsEmpty)(e.attributeFilter)))})(n,t):(e=>e?e.map((e=>({attributeFilter:e,overAttribute:null}))):[])(n)),[i,n,t])})(a,s,O),K=(e=>(0,ue.useMemo)((()=>e?e.map((e=>{const{dataSet:t,granularity:i,from:n,to:r,localIdentifier:l,boundedFilter:a}=e.dateFilter;if((0,p.isRelativeDashboardDateFilter)(e)){if((0,p.isAllTimeDashboardDateFilter)(e))return;const o=Number.parseInt(n.toString(),10)??0,s=Number.parseInt(r.toString(),10)??0;return(0,p.newRelativeDateFilter)(t,i,o,s,l,a)}return(0,p.newAbsoluteDateFilter)(t,n.toString(),r.toString(),l)})).filter(Boolean):[]),[e]))(o),G=uo({backend:P,filter:W,workspace:x,hiddenElements:f,staticElements:b,enableDuplicatedLabelValuesInAttributeFilter:C,displayAsLabel:y,withoutApply:k}),U=function(e,t,i,n){const r=mo(e),l=r.initialization.status,a=r.initialization.error,o="loading"===l||"pending"===l,s=r.attribute.data,c=r.elements.initialPageLoad.status,d=r.elements.initialPageLoad.error,u="loading"===c,m=r.elements.nextPageLoad.status,g=r.elements.nextPageLoad.error,f="loading"===m,b=r.elements.data,h=r.elements.totalCount,y=r.elements.totalCountWithCurrentSettings,E=r.selection.working.isChanged,v=r.selection.working.isEmpty,C=r.selection.working.isInverted,S=r.selection.working.elements,F=r.selection.committed.isInverted,w=r.selection.committed.elements,A=r.elements.options.search,D=r.elements.options.limit,k=r.elements.options.limitingAttributeFilters,P=r.elements.options.limitingDateFilters,x=r.elements.options.limitingValidationItems,O=b.length<y?Math.min(D,y-b.length):0,T=S.length>ho||!C&&v,N=T||!E,L=Ta(k),M=i&&"success"===c&&!L,R=i&&"success"===c&&!I(P),B=i&&"success"===c&&!I(x),_=function(e){const[t,i]=(0,ue.useState)(!1);return(0,ue.useEffect)((()=>{const t=[e.onLoadInitialElementsPageStart(n),e.onLoadInitialElementsPageSuccess(r),e.onLoadInitialElementsPageError(r),e.onLoadInitialElementsPageCancel(r),e.onInitStart(n),e.onInitSuccess(r),e.onInitError(r),e.onInitCancel(r)];function n(e){e.correlation===go&&i(!0)}function r(e){e.correlation===go&&i(!1)}return()=>{t.forEach((e=>{e()}))}}),[e]),t}(e),V=e.getLimitingAttributeFiltersAttributes(),H=s?.displayForms??[],W=(0,p.filterObjRef)(r.attributeFilter),q=(0,p.filterObjRef)(r.attributeFilterToDisplay);return{attribute:s,offset:r.elements.options.offset,limit:D,isFiltering:_,isInitializing:o,initError:a,isLoadingInitialElementsPage:u,initialElementsPageError:d,isLoadingNextElementsPage:f,nextElementsPageError:g,nextElementsPageSize:O,elements:b,totalElementsCount:h,totalElementsCountWithCurrentSettings:y,isSelectionInvalid:T,isApplyDisabled:N,isWorkingSelectionInverted:C,workingSelectionElements:S,isCommittedSelectionInverted:F,committedSelectionElements:w,searchString:A,isFilteredByParentFilters:M,parentFilterAttributes:V,isFilteredByDependentDateFilters:R,displayForms:H,currentDisplayFormRef:W,currentDisplayAsDisplayFormRef:q,enableShowingFilteredElements:t,enableAttributeFilterVirtualised:n,irrelevantSelection:t?r.selection.working.irrelevantElements:[],limitingValidationItems:x,isFilteredByLimitingValidationItems:B}}(G,L,V,F);!function(e,t){const{onError:i}=t;(0,ue.useEffect)((()=>{function t(e){i?.(e.error)}const n=[e.onInitError(t),e.onLoadAttributeError(t),e.onLoadInitialElementsPageError(t),e.onLoadNextElementsPageError(t),e.onLoadCustomElementsError(t)];return()=>{n.forEach((e=>{e()}))}}),[e,i])}(G,{onError:g}),function(e,t,i,n,r,l){const{filter:a,limitingAttributeFilters:o,limitingDateFilters:s,limitingValidationItems:c=Eo,shouldIncludeLimitingFilters:d,limit:u,resetOnParentFilterChange:m,setConnectedPlaceholderValue:g,onApply:f,onSelect:b,selectionMode:h,shouldReloadElements:y,setShouldReloadElements:E,displayAsLabel:v,withoutApply:C,isSelectionInvalid:S}=t;(0,ue.useEffect)((()=>{d&&o.length>0&&e.setLimitingAttributeFilters(o),d&&s.length>0&&e.setLimitingDateFilters(s),d&&c?.length>0&&e.setLimitingValidationItems(c),u&&e.setLimit(u),e.init()}),[e]),(0,ue.useEffect)((()=>{const t=d&&!me(o,e.getLimitingAttributeFilters()),u=d&&!me(s,e.getLimitingDateFilters()),F=((e,t,i)=>i?!vo(e,t.getFilter())&&!vo(e,t.getFilterToDisplay()):!vo(e,t.getFilter()))(a,e,r),w=d&&!me(c,e.getLimitingValidationItems()),A={filter:a,limitingAttributeFilters:o,limitingAttributesChanged:t,limitingDateFilters:s,limitingDateFiltersChanged:u,filterChanged:F,setConnectedPlaceholderValue:g,onApply:f,onSelect:b,selectionMode:h,setShouldReloadElements:E,limitingValidationItems:c,limitingValidationItemsChanged:w,displayAsLabel:v,withoutApply:C,isSelectionInvalid:S},D=m?function(e,{filter:t,limitingAttributeFilters:i,limitingAttributesChanged:n,filterChanged:r,setConnectedPlaceholderValue:l,onApply:a,onSelect:o,selectionMode:s,displayAsLabel:c,isSelectionInvalid:d},u){const m=0===i.length||!u;if((0,Br.kG)(m,"It is not possible to automatically reset dependent filters with current backend. Please set attribute filter to not reset on parent filter change (resetOnParentFilterChange prop)."),n){e.changeSelection({keys:[],isInverted:"single"!==s}),e.setLimitingAttributeFilters(i),e.commitSelection();const t=e.getFilter(),n=e.getCommittedSelection()?.isInverted;l(t);const r=e.getDisplayAsLabel();return o?.(t,n,s,[],r,{isSelectionInvalid:d}),a?.(t,n,s,[],r,!1,{isSelectionInvalid:d}),"init-parent"}if(r){const i=(0,p.filterObjRef)(t),n=(0,p.filterAttributeElements)(t),r=(0,p.isAttributeElementsByValue)(n)?n.values:n.uris,l=(0,p.isNegativeAttributeFilter)(t);return e.setDisplayForm(i),e.setDisplayAsLabel(c),e.changeSelection({keys:r,isInverted:l}),e.commitSelection(),"init-self"}}(e,A,n):function(e,{filter:t,limitingAttributeFilters:i,limitingAttributesChanged:n,limitingDateFilters:r,limitingDateFiltersChanged:l,filterChanged:a,setConnectedPlaceholderValue:o,setShouldReloadElements:s,limitingValidationItemsChanged:c,limitingValidationItems:d,displayAsLabel:u,withoutApply:m},g,f,b){if(n||a||c||l){const h=(0,p.filterAttributeElements)(t),y=(0,p.isAttributeElementsByValue)(h)?h.values:h.uris,E=(0,p.isNegativeAttributeFilter)(t),v=e.getCommittedSelection().irrelevantKeys,C=hl(v,y),S=e.getLimitingDateFilters().length!==r.length||so(e.getLimitingDateFilters(),r,(e=>(0,p.objRefToString)((0,p.filterObjRef)(e)))).length>0,F=e.getLimitingAttributeFilters().length!==i.length,w=g&&(F||S||!I(C)),A=w?{irrelevantKeys:[]}:{};if(a||!g||w){if(f){const i=(0,p.filterObjRef)(t);e.setDisplayForm(i),e.setDisplayAsLabel(u)}m&&e.setSearch(""),e.changeSelection({keys:y,isInverted:E,...A}),e.commitSelection()}if(e.setLimitingAttributeFilters(i),e.setLimitingValidationItems(d),e.setLimitingDateFilters(r),o(e.getFilter()),w)return"init-self";if(n||l||c)return s(!0),"init-parent";if(b&&m&&(!I(e.getAllElements())||!a))return;return"init-self"}}(e,A,i,r,l);!function(e,t,i,n,r){if("init-parent"===t){if(i)return void(n.current&&("success"===e.getInitStatus()?(e.loadInitialElementsPage(go),e.loadIrrelevantElements(fo)):e.init(go),r(!1)));"success"===e.getInitStatus()?(e.initTotalCount(go),e.loadInitialElementsPage(go)):e.init(go)}"init-self"===t&&e.init()}(e,D,i,y,E)}),[a,o,s,m,e,f,b,g,h,i,n,E,c,v,r,y,C,l,d,S]);const F=(0,ue.useRef)(!1);(0,ue.useEffect)((()=>(F.current=!0,()=>{F.current=!1})),[]),(0,ue.useEffect)((()=>{const t=(0,p.filterObjRef)(e.getOriginalFilter()),i=e.getDisplayAsLabel(),n=i&&!(0,p.areObjRefsEqual)(t,i);if(r&&"loading"!==e.getInitStatus()&&(v&&!i||!v&&n||v&&i&&!(0,p.areObjRefsEqual)(v,i))){const t=e.onLoadCustomElementsSuccess((i=>{i.correlation.includes(bo)&&(t(),f?.(e.getFilter(),e.getCommittedSelection()?.isInverted,h,e.getElementsByKey(e.getWorkingSelection().keys),v,!1,{isSelectionInvalid:S}))}));return e.setDisplayAsLabel(v),e.init(bo),()=>{F.current||t()}}}),[e,v,r,f,h,S])}(G,{filter:W,limitingAttributeFilters:z,limitingDateFilters:K,limitingValidationItems:c,shouldIncludeLimitingFilters:V,limit:h?.limit,onApply:u,onSelect:m,setConnectedPlaceholderValue:q,resetOnParentFilterChange:d,selectionMode:E,shouldReloadElements:B,setShouldReloadElements:_,displayAsLabel:y,withoutApply:k,isSelectionInvalid:k&&U.isSelectionInvalid},T,N,C,D);const $=function(e,t,i,n,r,l){const{onApply:a,onSelect:o,setConnectedPlaceholderValue:s,selectionMode:c,shouldReloadElements:d,setShouldReloadElements:u,shouldIncludeLimitingFilters:m,setShouldIncludeLimitingFilters:g,limitingAttributeFilters:f,limitingDateFilters:b,withoutApply:h,isSelectionInvalid:y,filter:E}=t,v=mo(e),C=(0,ue.useCallback)(((t,i,n)=>{const l=e.getFilter(),a=e.getWorkingSelection()?.isInverted,o=e.getWorkingSelection().keys,s=!a&&I(o)||o.length>ho;if(r){const r=e.getDisplayAsLabel(),{attribute:d}=v;if(function(e,t){const i=t.find((e=>e.isPrimary));if(!i)throw new Error("No primary display form found.");const n=(0,p.filterObjRef)(e);return!!n&&(0,p.areObjRefsEqual)(n,i.ref)}(l,d.data?.displayForms))t?.(l,a,c,e.getElementsByKey(o),r,i,{isSelectionInvalid:s,applyToWorkingOnly:n});else{const i=d.data?.displayForms.find((e=>e.isPrimary));if(!i)throw new Error("No primary display form found.");const u=function(e,t){return(0,p.isPositiveAttributeFilter)(e)?{positiveAttributeFilter:{...e.positiveAttributeFilter,displayForm:t}}:{negativeAttributeFilter:{...e.negativeAttributeFilter,displayForm:t}}}(l,i.ref);t?.(u,a,c,e.getElementsByKey(o),r,!0,{isSelectionInvalid:s,applyToWorkingOnly:n})}}else t?.(l,a,c,void 0,void 0,void 0,{isSelectionInvalid:s,applyToWorkingOnly:n})}),[e,r,v,c]),S=(0,ue.useCallback)(((t,i)=>{const n=e.getFilter(),l=(0,p.isAttributeElementsByRef)((0,p.filterAttributeElements)(n)),a=t.map((e=>l||r?e.uri:e.title)),s="single"===c?{irrelevantKeys:[]}:{};e.changeSelection({keys:a,isInverted:i,...s}),h&&e.commitSelection(),C(o,!1,!1)}),[e,c,C,o,r,h]),F=(0,ue.useCallback)(oo((t=>{e.getSearch()!==t&&(e.setSearch(t),e.loadInitialElementsPage("search"))}),200),[e]),w=(0,ue.useCallback)((()=>{e.loadNextElementsPage()}),[e]),A=(0,ue.useCallback)((()=>{if(h){if(y&&h){const t=(0,p.filterAttributeElements)(E),i=(0,p.isAttributeElementsByValue)(t)?t.values:t.uris,n=(0,p.isNegativeAttributeFilter)(E);e.changeSelection({keys:i,isInverted:n})}}else e.revertSelection();e.getSearch().length>0&&(e.setSearch(""),e.loadInitialElementsPage(po)),i&&!m&&(g(!0),u(!0),e.setLimitingAttributeFilters(f),e.setLimitingDateFilters(b))}),[e,f,b,g,u,m,i,h,y,E]),D=(0,ue.useCallback)(((t,i)=>{e.commitSelection(),s(e.getFilter()),C(a,t,i)}),[e,s,C,a]),k=(0,ue.useCallback)(((e=!1,t=!1)=>{h&&!e||D(!1,t)}),[h,D]),P=(0,ue.useCallback)((()=>{d.current&&(e.loadInitialElementsPage(po),!e.isWorkingSelectionEmpty()&&e.loadIrrelevantElements(fo),u(!1))}),[e,d,u]),x=(0,ue.useCallback)((()=>{i&&(g(!1),e.changeSelection({...e.getWorkingSelection(),irrelevantKeys:[]}),e.setLimitingAttributeFilters([]),e.setLimitingValidationItems([]),e.setLimitingDateFilters([]),e.loadInitialElementsPage("showFilteredElements"))}),[e,g,i]),O=(0,ue.useCallback)((()=>{if(n&&i){const t=e.getWorkingSelection(),i=hl(t.keys,t.irrelevantKeys);e.changeSelection({...t,keys:i,irrelevantKeys:[]})}}),[e,n,i]),T=(0,ue.useCallback)((()=>D(!0,!1)),[D]);return Io(e,T,l),{onApply:k,onLoadNextElementsPage:w,onSearch:F,onSelect:S,onReset:A,onOpen:P,onShowFilteredElements:x,onClearIrrelevantSelection:O}}(G,{onApply:u,onSelect:m,setConnectedPlaceholderValue:q,selectionMode:E,shouldReloadElements:B,setShouldReloadElements:_,shouldIncludeLimitingFilters:V,setShouldIncludeLimitingFilters:H,limitingAttributeFilters:z,limitingDateFilters:K,withoutApply:k,isSelectionInvalid:U.isSelectionInvalid,filter:W},L,T,C,S);Co(G,{selectFirst:v,onApply:$.onApply,onSelect:$.onSelect,selectionMode:E,enableDuplicatedLabelValuesInAttributeFilter:C,withoutApply:k});const j=function(e,t,i,n){const r="single"===e,l=I(i),a=(0,p.isPositiveAttributeFilter)(t)&&(0,p.attributeElementsCount)((0,p.filterAttributeElements)(t))<2;if(r){if(!a)return console.error("Provided 'filter' or 'connectToPlaceholder' property is not compatible with given single selection mode. It needs to be positive filter with max one item selected in attribute elements"),!1;if(!l&&!n)return console.error("Parent filtering can not be used together with single selection mode. Use only one of these properties at the same time."),!1}return!0}(E,W,z,M)?{}:{initError:new R.UnexpectedSdkError};return{...U,...$,...j}},Eo=[],vo=(e,t)=>{if(!e||!t)return!1;const i=(0,p.isPositiveAttributeFilter)(e)===(0,p.isPositiveAttributeFilter)(t),n=(0,p.areObjRefsEqual)((0,p.filterObjRef)(e),(0,p.filterObjRef)(t)),r=(l=(0,p.filterAttributeElements)(e),a=(0,p.filterAttributeElements)(t),(0,p.isAttributeElementsByRef)(l)&&(0,p.isAttributeElementsByRef)(a)&&me([...l.uris].sort(),[...a.uris].sort())||(0,p.isAttributeElementsByValue)(l)&&(0,p.isAttributeElementsByValue)(a)&&me([...l.values].sort(),[...a.values].sort()));var l,a;return i&&n&&r},Co=(e,t)=>{const{selectFirst:i,selectionMode:n,onApply:r,onSelect:l,enableDuplicatedLabelValuesInAttributeFilter:a,withoutApply:o}=t,s=e.getCommittedSelection().keys,c=e.getInitStatus(),d=e.getAllElements(),u=e.getFilter();(0,ue.useEffect)((()=>{if(i&&"single"===n&&(I(s)||s.length>1)&&"success"===c&&!I(d)){const t=[(0,p.isAttributeElementsByRef)((0,p.filterAttributeElements)(u))||a?d[0].uri:d[0].title];e.changeSelection({keys:t,isInverted:!1,irrelevantKeys:[]}),e.commitSelection(),r(!0,!1)}}),[i,n,s,c,d,u,e,r,l,a,o])},So=e=>{const[t,i]=(0,ue.useState)(!0);return{shouldIncludeLimitingFilters:t,setShouldIncludeLimitingFilters:(0,ue.useCallback)((t=>{e&&i(t)}),[e])}},Io=(e,t,i)=>{const n=(0,ue.useRef)(e.getDisplayAsLabel()),r=(0,ue.useRef)(!1),l=e.getInitStatus();!i||r.current||"success"!==l||(0,p.areObjRefsEqual)(n.current,e.getDisplayAsLabel())||(0,p.areObjRefsEqual)((0,p.filterObjRef)(e.getOriginalFilter()),(0,p.filterObjRef)(e.getFilter()))||(r.current=!0,t(!0),console.warn("AttributeFilter: Filter label migration reported to filter's parent app. Original filter label:",(0,p.filterObjRef)(e.getOriginalFilter()),"new filter label:",(0,p.filterObjRef)(e.getFilter()),"new filter displayAsLabel:",e.getDisplayAsLabel()))},Fo=ue.createContext(null);Fo.displayName="AttributeFilterContext";const wo=()=>(0,ue.useContext)(Fo),Ao=e=>{const{children:t,fullscreenOnMobile:i,title:n,selectionMode:r,selectFirst:l,disabled:a,customIcon:o,enableDuplicatedLabelValuesInAttributeFilter:s=!0,withoutApply:c,workingFilter:d,overlayPositionType:u}=e,m=yo(e),p=n??m?.attribute?.title??"";return ue.createElement(Fo.Provider,{value:{...m,fullscreenOnMobile:i,title:p,selectionMode:r,selectFirst:l,disabled:a,customIcon:o,enableDuplicatedLabelValuesInAttributeFilter:s,withoutApply:c,workingFilter:d,overlayPositionType:u}},t)},Do=[{align:"cr cl",offset:{x:0,y:50}}],ko=({children:e})=>ue.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement(he.Icon.QuestionMark,{height:16,width:14,className:"s-attribute-filter-tooltip-icon"}),ue.createElement(he.Bubble,{className:"gd-attribute-filter-details s-attribute-filter-details-bubble",alignPoints:Do,arrowStyle:{display:"none"}},e))),Po=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}];function xo({isOpen:e,title:t,selectedItemsCount:i,showSelectionCount:n=!0,subtitle:r,disabled:l,customIcon:a,isFiltering:o,isLoading:s,isLoaded:c,isError:d,isDraggable:u,icon:m,TooltipContentComponent:p,titleExtension:g,onClick:f,className:b,buttonRef:h,dropdownId:y}){const E=X(),v=(0,ue.useRef)(null),[C,S]=(0,ue.useState)(!1),I=d?ue.createElement("i",{className:"gd-icon gd-icon-circle-cross"}):m;(0,ue.useEffect)((()=>{const e=v.current;if(!e)return;const t=Math.ceil(e.getBoundingClientRect().width)<e.scrollWidth;S(t)}),[r]);let F=t,w=r;s?(F=E.formatMessage({id:"loading"}),w=E.formatMessage({id:"loading"})):o&&(w=E.formatMessage({id:"filtering"}));const A=(0,ue.useCallback)((e=>{(0,he.isActionKey)(e)&&l&&(e.preventDefault(),e.stopPropagation())}),[l]);return ue.createElement("div",{className:Ee("gd-attribute-filter-dropdown-button__next","s-attribute-filter",`s-${ve.gl(t)}`,{"gd-message":d,"gd-is-filtering":o,"gd-is-active":e,"gd-is-loaded":c,"gd-is-draggable":u,disabled:l},b),"aria-haspopup":"dialog","aria-expanded":e,onClick:f,onKeyDown:A,"aria-controls":e?y:void 0,role:"button",tabIndex:0,ref:h},I?ue.createElement("div",{className:"gd-attribute-filter-dropdown-button-icon__next"},I):null,ue.createElement("div",{className:"gd-attribute-filter-dropdown-button-content__next"},ue.createElement("div",{className:"gd-attribute-filter-dropdown_button-title-content__next"},ue.createElement("div",{className:"gd-attribute-filter-dropdown-button-title__next"},ue.createElement(he.ShortenedText,{tooltipAlignPoints:Po,className:"s-attribute-filter-button-title"},`${F}`)),g,ue.createElement(Se,{customIcon:a,disabled:l}),p&&c?ue.createElement(ko,null,ue.createElement(p,null)):null),ue.createElement("div",{className:"gd-attribute-filter-dropdown-button-subtitle__next"},ue.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items__next s-attribute-filter-button-subtitle",ref:v},w),n&&C&&c?ue.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items-count__next"},`(${i})`):null)))}const Oo=({onClick:e})=>ue.createElement(xo,{isLoading:!0,onClick:e});function To({isOpen:e,isDraggable:t}){return ue.createElement("div",{className:Ee("gd-attribute-filter-dropdown-button__next","s-attribute-filter","gd-message error s-button-error",{"gd-is-active":e,"gd-is-draggable":t})},ue.createElement(xe,{id:"gs.filter.error"}))}const No=245,Lo=e=>{const{onApplyButtonClick:t,onCancelButtonClick:i,width:n=No}=e,{DropdownActionsComponent:r,ElementsSelectComponent:l}=lo(),{withoutApply:a}=wo(),o=(0,he.useMediaQuery)("mobileDevice"),{initialElementsPageError:s,nextElementsPageError:c,isApplyDisabled:d,isWorkingSelectionInverted:u,isLoadingInitialElementsPage:m,isLoadingNextElementsPage:p,onLoadNextElementsPage:g,elements:f,onSearch:b,onSelect:h,nextElementsPageSize:y,searchString:E,totalElementsCount:v,totalElementsCountWithCurrentSettings:C,workingSelectionElements:S,parentFilterAttributes:I,isFilteredByParentFilters:F,isFilteredByDependentDateFilters:w,isFilteredByLimitingValidationItems:A,fullscreenOnMobile:D,selectionMode:k,title:P,enableShowingFilteredElements:x,onShowFilteredElements:O,irrelevantSelection:T,onClearIrrelevantSelection:N,enableAttributeFilterVirtualised:L}=wo(),M=(0,ue.useMemo)((()=>I.map((e=>e.title))),[I]),R={width:o&&D?"100%":n},B=(0,ue.useCallback)(((e,i)=>{h(e,i),"single"===k&&t()}),[h,t,k]),_=(0,ue.useCallback)((e=>{(0,he.isEscapeKey)(e)&&(e.stopPropagation(),i())}),[i]);return ue.createElement("div",{className:"gd-attribute-filter-dropdown-body__next",style:R,onKeyDown:_},ue.createElement(l,{isInverted:u,isLoading:m,isLoadingNextPage:p,items:f,onLoadNextPage:g,onSearch:b,onSelect:B,onApplyButtonClick:t,isApplyDisabled:d,nextPageSize:y,searchString:E,selectedItems:S,totalItemsCount:v,totalItemsCountWithCurrentSettings:C,parentFilterTitles:M,isFilteredByParentFilters:F,error:s??c,attributeTitle:P,enableShowingFilteredElements:x,isFilteredByDependentDateFilters:w,isFilteredByLimitingValidationItems:A,onShowFilteredElements:O,irrelevantSelection:T,onClearIrrelevantSelection:N,withoutApply:a,enableAttributeFilterVirtualised:L}),ue.createElement(r,{onApplyButtonClick:t,onCancelButtonClick:i,isApplyDisabled:d,withoutApply:a}))};function Mo({isApplyDisabled:e,onApplyButtonClick:t,onCancelButtonClick:i,withoutApply:n}){const r=X(),l=r.formatMessage({id:"gs.list.cancel"}),a=r.formatMessage({id:"close"}),o=r.formatMessage({id:"gs.list.apply"}),s=n?"gd-attribute-filter-close-button__next close-button s-close":"gd-attribute-filter-cancel-button__next cancel-button s-cancel";return ue.createElement("div",{className:"gd-attribute-filter-dropdown-actions__next"},ue.createElement("div",{className:"gd-attribute-filter-dropdown-actions-left-content__next"}),ue.createElement("div",{className:"gd-attribute-filter-dropdown-actions-right-content__next"},ue.createElement(he.Button,{className:Ee(s,"gd-button-secondary gd-button-small"),onClick:i,value:n?a:l,title:n?a:l}),!n&&ue.createElement(he.Button,{disabled:e,className:"gd-attribute-filter-apply-button__next gd-button-action gd-button-small s-apply",onClick:t,value:o,title:o})))}function Ro(e){return ue.createElement(he.InvertableSelectSearchBar,{...e})}const Bo=e=>{const{items:t,totalItemsCount:i,totalItemsCountWithCurrentSettings:n,isInverted:r,selectedItems:l,onSelect:a,searchString:o,onSearch:s,isLoading:c,isLoadingNextPage:d,nextPageSize:u,onLoadNextPage:m,error:p,attributeTitle:g,isFilteredByParentFilters:f,parentFilterTitles:b,enableShowingFilteredElements:h,onShowFilteredElements:y,irrelevantSelection:E,onClearIrrelevantSelection:v,onApplyButtonClick:C,isApplyDisabled:S,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:F,withoutApply:w}=e,A=X(),D=(0,he.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:k,selectionMode:P,attribute:x}=wo(),{ElementsSelectLoadingComponent:O,ElementsSelectItemComponent:T,ElementsSelectErrorComponent:N,EmptyResultComponent:L,ElementsSearchBarComponent:M,ElementsSelectActionsComponent:B,StatusBarComponent:_}=lo(),[V,H]=(0,ue.useState)(void 0),W=k&&D?40:28,q=D&&k,z=(0,R.usePrevious)(n),K=(0,ue.useMemo)((()=>Math.max((Math.min(z,10)||1)*W,20)+32),[z,W]),G=(0,ue.useMemo)((()=>{if(!x)return null;const e=x.displayForms.find((e=>!!e.isPrimary));return e?.title}),[x]),U=(0,ue.useCallback)((()=>{H("show"),y()}),[y,H]);return ue.createElement(he.UiAutofocus,{refocusKey:V},ue.createElement(he.InvertableSelectVirtualised,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:q,isSingleSelect:"single"===P,items:t,totalItemsCount:n,itemHeight:W,getItemKey:io,getItemTitle:e=>Ja(e,A),isInverted:r,selectedItems:l,selectedItemsLimit:ho,onSelect:a,onApplyButtonClick:C,searchString:o,onSearch:s,canSubmitOnKeyDown:!S,isLoading:c,error:p,isLoadingNextPage:d,nextPageItemPlaceholdersCount:u,onLoadNextPage:m,numberOfHiddenSelectedItems:E.length,renderItem:e=>ue.createElement(T,{...e,primaryLabelTitle:G,fullscreenOnMobile:k}),renderError:()=>ue.createElement(N,{error:p}),renderLoading:()=>ue.createElement(O,{height:K}),renderNoData:({height:e})=>ue.createElement(L,{height:e,isFilteredByParentFilters:f,isFilteredByDependentDateFilters:I,searchString:o,totalItemsCount:i,parentFilterTitles:b,enableShowingFilteredElements:h}),renderSearchBar:({onSearch:e,searchString:t})=>ue.createElement(M,{onSearch:e,searchString:t,isSmall:!(D&&k)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:i,selectedItemsLimit:r})=>ue.createElement(_,{getItemTitle:e,isFilteredByParentFilters:f,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:F,isInverted:t,parentFilterTitles:b,selectedItems:i,totalElementsCountWithCurrentSettings:n,selectedItemsLimit:r,attributeTitle:g,enableShowingFilteredElements:h,onShowFilteredElements:U,irrelevantSelection:E,onClearIrrelevantSelection:v,withoutApply:w}),renderActions:({checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isVisible:a})=>ue.createElement(B,{isVisible:a,checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isApplyDisabled:S,onApplyButtonClick:C})}))},_o=e=>{const{items:t,totalItemsCount:i,totalItemsCountWithCurrentSettings:n,isInverted:r,selectedItems:l,onSelect:a,searchString:o,onSearch:s,isLoading:c,isLoadingNextPage:d,nextPageSize:u,onLoadNextPage:m,error:p,attributeTitle:g,isFilteredByParentFilters:f,parentFilterTitles:b,enableShowingFilteredElements:h,onShowFilteredElements:y,irrelevantSelection:E,onClearIrrelevantSelection:v,onApplyButtonClick:C,isApplyDisabled:S,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:F,enableAttributeFilterVirtualised:w,withoutApply:A}=e,D=X(),k=(0,he.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:P,selectionMode:x,attribute:O}=wo(),{ElementsSelectLoadingComponent:T,ElementsSelectItemComponent:N,ElementsSelectErrorComponent:L,EmptyResultComponent:M,ElementsSearchBarComponent:B,ElementsSelectActionsComponent:_,StatusBarComponent:V}=lo(),H=P&&k?40:28,W=k&&P,q=(0,R.usePrevious)(n),z=(0,ue.useMemo)((()=>Math.max((Math.min(q,10)||1)*H,20)+32),[q,H]),K=(0,ue.useMemo)((()=>{if(!O)return null;const e=O.displayForms.find((e=>!!e.isPrimary));return e?.title}),[O]);return ue.createElement(ue.Fragment,null,w?ue.createElement(Bo,{items:t,totalItemsCount:i,totalItemsCountWithCurrentSettings:n,isInverted:r,selectedItems:l,onSelect:a,searchString:o,onSearch:s,isLoading:c,isLoadingNextPage:d,nextPageSize:u,onLoadNextPage:m,error:p,attributeTitle:g,isFilteredByParentFilters:f,parentFilterTitles:b,enableShowingFilteredElements:h,onShowFilteredElements:y,irrelevantSelection:E,onClearIrrelevantSelection:v,onApplyButtonClick:C,isApplyDisabled:S,isFilteredByDependentDateFilters:I,isFilteredByLimitingValidationItems:F,withoutApply:A}):ue.createElement(he.InvertableSelect,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:W,isSingleSelect:"single"===x,items:t,totalItemsCount:n,itemHeight:H,getItemKey:io,getItemTitle:e=>Ja(e,D),isInverted:r,selectedItems:l,selectedItemsLimit:ho,onSelect:a,searchString:o,onSearch:s,isLoading:c,error:p,isLoadingNextPage:d,nextPageItemPlaceholdersCount:u,onLoadNextPage:m,numberOfHiddenSelectedItems:E.length,renderItem:e=>ue.createElement(N,{...e,primaryLabelTitle:K,fullscreenOnMobile:P}),renderError:()=>ue.createElement(L,{error:p}),renderLoading:()=>ue.createElement(T,{height:z}),renderNoData:({height:e})=>ue.createElement(M,{height:e,isFilteredByParentFilters:f,isFilteredByDependentDateFilters:I,searchString:o,totalItemsCount:i,parentFilterTitles:b,enableShowingFilteredElements:h}),renderSearchBar:({onSearch:e,searchString:t})=>ue.createElement(B,{onSearch:e,searchString:t,isSmall:!(k&&P)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:i,selectedItemsLimit:r})=>ue.createElement(V,{getItemTitle:e,isFilteredByParentFilters:f,isFilteredByLimitingValidationItems:F,isFilteredByDependentDateFilters:I,isInverted:t,parentFilterTitles:b,selectedItems:i,totalElementsCountWithCurrentSettings:n,selectedItemsLimit:r,attributeTitle:g,enableShowingFilteredElements:h,onShowFilteredElements:y,irrelevantSelection:E,onClearIrrelevantSelection:v,withoutApply:A}),renderActions:({checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isVisible:a})=>ue.createElement(_,{isVisible:a,checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isApplyDisabled:S,onApplyButtonClick:C})}))};var Vo=i(68929);const Ho=({itemTitle:e,primaryLabelTitle:t,itemPrimaryTitle:i,isFocused:n=!1})=>ue.createElement("div",{className:"gd-item-title-tooltip-wrapper gd-list-item-only"},ue.createElement(he.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0},ue.createElement("span",{className:Ee("gd-icon-circle-question gd-empty-value-tooltip-icon",{"gd-icon-circle-question--isFocusedSelectItem":n})}),ue.createElement(he.Bubble,{className:"bubble-light gd-item-title-tooltip",alignTo:".gd-empty-value-tooltip-icon",alignPoints:[{align:"cr cl",offset:{x:0,y:0}},{align:"cr bl",offset:{x:0,y:0}},{align:"cr tl",offset:{x:0,y:0}},{align:"cl cr",offset:{x:0,y:0}},{align:"cl br",offset:{x:0,y:0}},{align:"cl tr",offset:{x:0,y:0}}],arrowStyle:{display:"none"}},ue.createElement("p",null,e),t&&i?ue.createElement(ue.Fragment,null,ue.createElement("h4",null,t),ue.createElement("p",null,i)):null))),Wo=[{align:"bl tc",offset:{x:7,y:0}}];function qo({item:e,isSelected:t,focusedAction:i,onSelect:n,onSelectOnly:r,onDeselect:l,primaryLabelTitle:a}){const o=X(),s=(0,ue.useRef)(null),c=(0,ue.useCallback)((()=>{t?l():n()}),[n,l,t]),d=(0,ue.useCallback)((e=>{e.stopPropagation(),r()}),[r]),u=Ee("gd-attribute-filter-elements-select-item__next","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${Vo(e.title)}`,`s-attribute-filter-list-item-${Vo(e.title)}-${Vo(e.uri)}`,{"is-selected":t},{"s-attribute-filter-list-item-selected":t},{"gd-attribute-filter-list-empty-item":!e.title},{"gd-attribute-filter-list-item--isFocused":!!i,"gd-attribute-filter-list-item--isFocusedSelectItem":"selectItem"===i}),m=Ee("input-checkbox-label",{"gd-empty-value-label":!e.title}),p=Ja(e,o),g=eo(e);return ue.createElement("div",{ref:s,className:u,onClick:c,onFocus:e=>{"INPUT"===e.target.tagName&&(e.preventDefault(),s.current?.focus())},onKeyDown:e=>{(0,he.isSpaceKey)(e)&&(e.preventDefault(),c())},role:"option","aria-selected":t},ue.createElement("label",{className:m},ue.createElement("input",{tabIndex:-1,type:"checkbox",className:"input-checkbox",readOnly:!0,checked:t}),ue.createElement("span",{className:"input-label-text"},p)),!e.title&&ue.createElement("div",{className:"gd-empty-list-item-tooltip-wrapper"},ue.createElement(he.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0},ue.createElement("span",{className:"gd-icon-circle-question gd-empty-value-tooltip-icon"}),ue.createElement(he.Bubble,{className:"bubble-primary gd-empty-item-bubble",alignTo:".gd-empty-value-tooltip-icon",alignPoints:Wo},ue.createElement(xe,{id:"attributesDropdown.empty.item.tooltip"})))),ue.createElement("span",{className:Ee("gd-list-item-only",{"gd-list-item-only--isFocusedSelectItem":"only"===i}),onClick:d},ue.createElement(xe,{id:"gs.list.only"})),ue.createElement(Ho,{itemTitle:p,primaryLabelTitle:a,itemPrimaryTitle:g,isFocused:"questionMark"===i}))}function zo(){return ue.createElement(he.Message,{type:"error"},ue.createElement(xe,{id:"gs.list.error"}))}function Ko({height:e}){return ue.createElement(he.LoadingMask,{height:e})}function Go(){const e=X();return ue.createElement(he.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noResultsMatch"})})}function Uo(){const e=X();return ue.createElement(he.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noData"})})}const $o=[{align:"cr cl"}],jo={"cr cl":[10,0]},Zo=e=>{const{parentFilterTitles:t,searchString:i,enableShowingFilteredElements:n}=e;return n&&i.length>0?ue.createElement(Go,null):n?ue.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement("div",{className:"gd-filtered-message__next"},ue.createElement(xe,{id:"attributesDropdown.noRelevantValues"}),ue.createElement("span",{className:"gd-icon-circle-question"})),ue.createElement(he.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:$o,arrowOffsets:jo},ue.createElement(xe,{id:"attributesDropdown.noRelevantValues.tooltip",values:{break:ue.createElement(ue.Fragment,null,ue.createElement("br",null),ue.createElement("br",null))}})))):ue.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement("div",{className:"gd-filtered-message__next"},ue.createElement(xe,{id:"attributesDropdown.allItemsFiltered"}),ue.createElement("span",{className:"gd-icon-circle-question"})),ue.createElement(he.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:$o,arrowOffsets:jo},ue.createElement(xe,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:t.join(", "),strong:e=>ue.createElement("strong",null,e)}}))))};function Yo({height:e,totalItemsCount:t,searchString:i,isFilteredByParentFilters:n,isFilteredByDependentDateFilters:r,parentFilterTitles:l=[],enableShowingFilteredElements:a=!1}){let o=null;const s=(0,ue.useMemo)((()=>({height:e})),[e]);return 0===t?o=ue.createElement(Uo,null):n||r?o=ue.createElement(Zo,{parentFilterTitles:l,searchString:i,enableShowingFilteredElements:a}):i.length>0&&(o=ue.createElement(Go,null)),ue.createElement("div",{className:"gd-attribute-filter-empty-result__next",style:s},o)}const Qo=[{align:"cr cl"}],Xo={"cr cl":[10,0]},Jo=e=>{const{parentFilterTitles:t}=e,i=(0,ue.useMemo)((()=>t?t.join(", "):""),[t]);return ue.createElement("div",{className:"gd-attribute-filter-filtered-status__next s-attribute-filter-dropdown-items-filtered"},ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement("div",{className:"gd-filtered-message__next"}," ",ue.createElement(xe,{id:"attributesDropdown.itemsFiltered"}),ue.createElement("span",{className:"gd-icon-circle-question"})),ue.createElement(he.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Qo,arrowOffsets:Xo},ue.createElement(xe,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:i,strong:e=>ue.createElement("strong",null,e)}}))))},es=e=>{const{isInverted:t,selectedItems:i,getItemTitle:n,selectedItemsLimit:r}=e;return ue.createElement(he.InvertableSelectStatusBar,{className:"gd-attribute-filter-selection-status__next",isInverted:t,getItemTitle:n,selectedItems:i,selectedItemsLimit:r})},ts=[{align:"bl tl"}],is={"bl tl":[0,8]},ns=({attributeTitle:e,onClick:t,parentFilterTitles:i,isFilteredByLimitingValidationItems:n,className:r})=>{const l=X(),a=i.length>0?n?ie.relevantValuesParentFiltersLimitsTooltip:ie.relevantValuesParentFiltersTooltip:ie.relevantValuesLimitsTooltip,o=(0,ue.useMemo)((()=>i?i.join(", "):""),[i]);return ue.createElement("div",{className:Ee("gd-attribute-filter-status-show-all s-attribute-filter-status-show-all",r)},ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement("div",{className:"gd-relevant-values-text"},ue.createElement(xe,{id:"attributesDropdown.relevantValues",values:{nbsp:ue.createElement(ue.Fragment,null," ")}})),ue.createElement(he.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:ts,arrowOffsets:is},l.formatMessage(a,{child:e,parents:o,strong:e=>ue.createElement("strong",null,e)}))),ue.createElement("button",{className:"gd-action-show-all s-action-show-all",onClick:e=>{e.preventDefault(),t()}},ue.createElement(xe,{id:"attributesDropdown.showAll"})))},rs=[{align:"bl tl"}],ls={"bl tl":[-10,12]},as=({parentFilterTitles:e,irrelevantSelection:t,onClear:i,showClearButton:n=!0})=>{const r=(0,ue.useMemo)((()=>e?e.join(", "):""),[e]);return 0===t.length?null:ue.createElement(he.Message,{className:"gd-attribute-filter-status-irrelevant-message s-attribute-filter-status-irrelevant-message",type:"warning"},ue.createElement(he.BubbleHoverTrigger,{showDelay:0,hideDelay:0},ue.createElement(xe,{id:"attributesDropdown.irrelevantValues",values:{nbsp:ue.createElement(ue.Fragment,null," ")}}),ue.createElement(he.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:rs,arrowOffsets:ls},ue.createElement(xe,{id:"attributesDropdown.irrelevantValues.tooltip",values:{parents:r,strong:e=>ue.createElement("strong",null,e)}}))),n?ue.createElement("button",{className:"gd-action-clear s-action-clear",onClick:e=>{e.preventDefault(),e.stopPropagation(),i()}},ue.createElement(xe,{id:"attributesDropdown.irrelevantValues.clear"})):null)},os=e=>{const{attributeTitle:t,isFilteredByParentFilters:i,parentFilterTitles:n,totalElementsCountWithCurrentSettings:r,getItemTitle:l,isInverted:a,selectedItems:o,selectedItemsLimit:s,enableShowingFilteredElements:c=!1,onShowFilteredElements:d=ge,irrelevantSelection:u=[],onClearIrrelevantSelection:m=ge,isFilteredByLimitingValidationItems:p,isFilteredByDependentDateFilters:g,withoutApply:f=!1}=e;return c?ue.createElement("div",{className:"gd-attribute-filter-status-bar__next"},i||p||g?ue.createElement(ns,{attributeTitle:t,onClick:d,parentFilterTitles:n,isFilteredByLimitingValidationItems:p}):null,f?null:ue.createElement(es,{isInverted:a,getItemTitle:l,selectedItems:o,selectedItemsLimit:s}),ue.createElement(as,{parentFilterTitles:n,irrelevantSelection:u,onClear:m})):ue.createElement("div",{className:"gd-attribute-filter-status-bar__next"},f?null:ue.createElement(es,{isInverted:a,getItemTitle:l,selectedItems:o,selectedItemsLimit:s}),i&&r>0?ue.createElement(Jo,{parentFilterTitles:n}):null)};function ss(e){return ue.createElement(he.InvertableSelectAllCheckbox,{...e})}function cs({item:e,onSelectOnly:t,isSelected:i,focusedAction:n,fullscreenOnMobile:r=!1,primaryLabelTitle:l}){const a=X(),o=(0,ue.useCallback)((e=>{e.stopPropagation(),t()}),[t]),s=(0,ue.useMemo)((()=>Ja(e,a)),[e,a]),c=eo(e),d=(0,he.useMediaQuery)("mobileDevice"),u=Ee("gd-single-selection-attribute-filter-elements-select-item","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${Vo(e.title)}`,{"is-selected":i},{"s-attribute-filter-list-item-selected":i},{"gd-attribute-filter-list-item--isFocused":!!n,"gd-attribute-filter-single-selection-list-item--isFocusedSelectItem":"selectItem"===n});return ue.createElement("div",{className:u,onClick:o,role:"option","aria-selected":i},ue.createElement("span",null,s),i&&d&&r?ue.createElement("span",{className:"gd-customizable-checkmark-mobile-navigation-wrapper"},ue.createElement(he.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-navigation"})):null,ue.createElement(Ho,{itemTitle:s,primaryLabelTitle:l,itemPrimaryTitle:c,isFocused:"questionMark"===n}))}function ds(){return ue.createElement("div",{style:{marginTop:-5}})}const us=e=>{const{enableShowingFilteredElements:t,isFilteredByParentFilters:i,parentFilterTitles:n,totalElementsCountWithCurrentSettings:r,attributeTitle:l,onShowFilteredElements:a,irrelevantSelection:o,isFilteredByLimitingValidationItems:s,isFilteredByDependentDateFilters:c}=e;return t?ue.createElement("div",{className:"gd-attribute-filter-status-bar__next"},i||s||c?ue.createElement(ns,{attributeTitle:l,onClick:a,parentFilterTitles:n,className:"no-divider",isFilteredByLimitingValidationItems:s}):null,ue.createElement(as,{parentFilterTitles:n,irrelevantSelection:o,showClearButton:!1})):ue.createElement("div",{className:"gd-attribute-filter-status-bar__next"},i&&r>0?ue.createElement(Jo,{parentFilterTitles:n}):null)};function ms(){return ue.createElement("div",null)}const ps={ErrorComponent:To,LoadingComponent:Oo,DropdownButtonComponent:xo,DropdownBodyComponent:Lo,DropdownActionsComponent:Mo,ElementsSearchBarComponent:Ro,ElementsSelectComponent:_o,ElementsSelectItemComponent:qo,ElementsSelectErrorComponent:zo,ElementsSelectLoadingComponent:Ko,ElementsSelectActionsComponent:ss,EmptyResultComponent:Yo,StatusBarComponent:os},gs=e=>{const{resetOnParentFilterChange:t=!0,children:i,locale:n,backend:r,workspace:l,title:a,filter:o,workingFilter:s,displayAsLabel:c,connectToPlaceholder:d,parentFilters:u,dependentDateFilters:m,parentFilterOverAttribute:p,validateElementsBy:g,hiddenElements:f,staticElements:b,fullscreenOnMobile:h=!1,selectionMode:y="multi",selectFirst:E=!1,disabled:v,customIcon:C,withoutApply:S,overlayPositionType:I,onApply:F,onSelect:w,onError:A,ErrorComponent:D,LoadingComponent:k,DropdownButtonComponent:P,DropdownBodyComponent:x,DropdownActionsComponent:O,ElementsSearchBarComponent:T,ElementsSelectComponent:N,ElementsSelectItemComponent:L,ElementsSelectErrorComponent:M,ElementsSelectLoadingComponent:B,ElementsSelectActionsComponent:_,EmptyResultComponent:V,StatusBarComponent:H,enableDuplicatedLabelValuesInAttributeFilter:W=!0,enableAttributeFilterVirtualised:q,enableImmediateAttributeFilterDisplayAsLabelMigration:z=!1,enableDashboardFiltersApplyWithoutLoading:K=!1,enableDashboardFiltersApplyModes:G=!1}=e,U=(({selectionMode:e})=>({...ps,..."single"===e?{ElementsSelectItemComponent:cs,ElementsSelectActionsComponent:ds,StatusBarComponent:us,DropdownActionsComponent:ms}:{}}))(e);return ue.createElement(R.IntlWrapper,{locale:n},ue.createElement(ao,{ErrorComponent:D??U.ErrorComponent,LoadingComponent:k??U.LoadingComponent,DropdownButtonComponent:P??U.DropdownButtonComponent,DropdownBodyComponent:x??U.DropdownBodyComponent,DropdownActionsComponent:O??U.DropdownActionsComponent,ElementsSearchBarComponent:T??U.ElementsSearchBarComponent,ElementsSelectComponent:N??U.ElementsSelectComponent,ElementsSelectItemComponent:L??U.ElementsSelectItemComponent,ElementsSelectErrorComponent:M??U.ElementsSelectErrorComponent,ElementsSelectLoadingComponent:B??U.ElementsSelectLoadingComponent,ElementsSelectActionsComponent:_??U.ElementsSelectActionsComponent,EmptyResultComponent:V??U.EmptyResultComponent,StatusBarComponent:H??U.StatusBarComponent},ue.createElement(Ao,{backend:r,workspace:l,title:a,filter:o,workingFilter:s,displayAsLabel:c,connectToPlaceholder:d,resetOnParentFilterChange:t,parentFilters:u,dependentDateFilters:m,parentFilterOverAttribute:p,validateElementsBy:g,onApply:F,onSelect:w,onError:A,hiddenElements:f,staticElements:b,fullscreenOnMobile:h,selectionMode:y,selectFirst:E,disabled:v,customIcon:C,enableDuplicatedLabelValuesInAttributeFilter:W,enableImmediateAttributeFilterDisplayAsLabelMigration:z,enableAttributeFilterVirtualised:q,withoutApply:S??G,overlayPositionType:I,enableDashboardFiltersApplyWithoutLoading:K},i)))},fs=[{align:"bc tc"}],bs=({children:e,errorMessage:t})=>t?ue.createElement("div",{className:"gd-attribute-filter-button-wrapper"},ue.createElement(he.BubbleHoverTrigger,null,e,ue.createElement(he.Bubble,{className:"bubble-negative gd-attribute-filter-button-error s-attribute-filter-error-bubble",alignPoints:fs},ue.createElement("span",null,ue.createElement(xe,{id:"gs.filter.error.tooltip"}))))):ue.createElement(ue.Fragment,null,e),hs=[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tl bl",offset:{x:0,y:0}},{align:"tr tl",offset:{x:0,y:-50}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-200}},{align:"tr tl",offset:{x:0,y:-300}},{align:"tr tl",offset:{x:0,y:-400}}];function ys(){const{DropdownButtonComponent:e,DropdownBodyComponent:t,LoadingComponent:i,ErrorComponent:n}=lo(),{title:r,isInitializing:l,initError:a,isFiltering:o,committedSelectionElements:s,workingSelectionElements:c,onReset:d,onApply:u,onOpen:m,fullscreenOnMobile:p,isCommittedSelectionInverted:g,isWorkingSelectionInverted:f,selectionMode:b,disabled:h,customIcon:y,withoutApply:E,isSelectionInvalid:v,overlayPositionType:C}=wo(),S=(0,he.useMediaQuery)("mobileDevice"),I=Es(E?f:g,!v||!E),F=Es(E?c:s,!v||!E),w=function(e,t){return no(e,t,X())}(I,F),A="single"!==b&&0!==F.length;return ue.createElement(he.Dropdown,{className:"gd-attribute-filter__next",closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:hs,fullscreenOnMobile:p,autofocusOnOpen:!0,overlayPositionType:C,renderButton:({toggleDropdown:t,isOpen:s,buttonRef:c,dropdownId:d})=>{const u=h?ge:t;return ue.createElement("div",{className:Ee({"gd-is-mobile":p&&S&&s})},!!l&&ue.createElement(i,{onClick:u,isOpen:s}),!l&&!!a&&!r&&ue.createElement(n,{message:a.message,error:a}),!l&&!!r&&ue.createElement(bs,{errorMessage:a?.message},ue.createElement(e,{title:r,subtitle:w,isFiltering:o,isLoaded:!l,isLoading:l,isOpen:s,selectedItemsCount:F.length,showSelectionCount:A,disabled:h,customIcon:y,onClick:u,isError:!!a,buttonRef:c,dropdownId:d})))},onOpenStateChanged:e=>{e?m():d()},renderBody:({closeDropdown:e,ariaAttributes:i})=>ue.createElement("div",{role:"dialog",id:i.id,className:Ee({"gd-is-mobile":p&&S}),style:{height:p&&S?"100%":"auto"}},ue.createElement(t,{onApplyButtonClick:()=>{u(!0,E),e()},onCancelButtonClick:e}))})}function Es(e,t){const i=(0,ue.useRef)();return t&&(i.current=e),i.current??e}const vs=e=>(function(e){const{connectToPlaceholder:t,filter:i,onApply:n,hiddenElements:r,staticElements:l}=e;(0,Br.kG)(!(i&&t),"It's not possible to combine 'filter' property with 'connectToPlaceholder' property. Either provide a filter, or a placeholer."),(0,Br.kG)(!(i&&!n),"It's not possible to use 'filter' property without 'onApply' property. Either provide 'onApply' callback or use placeholders."),(0,Br.kG)(i||t,"No filter or placeholer provided. Provide one of the properties: 'filter', 'connectToPlaceholder'."),(0,Br.kG)(!(!I(r)&&I(l)),"Hidden elements are not supported by the current backend implementation.")}({backend:(0,R.useBackendStrict)(e.backend,"AttributeFilter"),...e}),ue.createElement(gs,{...e},ue.createElement(ys,null)));function Cs({title:e,isLoading:t,isFiltering:i,...n}){const r=X();let l=e;return t?l=r.formatMessage({id:"loading"}):i&&(l=r.formatMessage({id:"filtering"})),ue.createElement(he.DropdownButton,{className:"gd-attribute-filter-dropdown-simple-button__next",disabled:t,value:l,...n})}function Ss({isOpen:e,subtitle:t,title:i,selectedItemsCount:n,onClick:r,isLoading:l,isFiltering:a,showSelectionCount:o=!0}){const s=X();let c=`${i}: ${t}`;(l||a)&&(c=s.formatMessage({id:"loading"}));const d=Ee("gd-button-primary","button-dropdown","dropdown-button","gd-button-small","gd-button",{"is-dropdown-open":e},{"is-active":e}),u=Ee("gd-button-icon",{"gd-icon-navigateup":e},{"gd-icon-navigatedown":!e}),m=o?`(${n})`:void 0;return ue.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button__next"},ue.createElement("button",{className:d,onClick:r,title:c},ue.createElement("span",{className:"gd-button-text"},ue.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-text"},ue.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection"},c),m?ue.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection-count"},m):null)),ue.createElement("span",{className:u,role:"button-icon"})))}const Is=e=>{const{titleWithSelection:t,...i}=e,n=t?Ss:Cs;return ue.createElement(vs,{...i,DropdownButtonComponent:e.DropdownButtonComponent??n})},Fs=e=>{const{attributeFilterMode:t,...i}=e;return"hidden"!==t?ue.createElement(vs,{...i,disabled:"readonly"===t,DropdownButtonComponent:e.DropdownButtonComponent??xo}):null},ws=({isOpened:e,text:t,toggleDropdown:i})=>{const n=X(),r=Ee("gd-button-primary","gd-button-small","button-dropdown","dropdown-button","gd-attribute-filter-display-form-button","s-attribute-display-form-button",{"is-active":e}),l=e?"gd-icon-navigateup":"gd-icon-navigatedown",a=n.formatMessage({id:"attributesDropdown.display_as"},{title:t});return ue.createElement(he.Button,{className:r,title:a,value:a,onClick:i,iconRight:l})},As=[{align:"cl cr",offset:{x:-10,y:0}},{align:"cr cl",offset:{x:10,y:0}}],Ds=e=>{const{displayForm:t,selected:i}=e,{title:n,type:r}=t,l=Ee("gd-list-item","gd-attribute-display-form","s-attribute-display-form-name",`s-attribute-display-form-name-${ve.gl(n)}`,(e=>{switch(e){case"GDC.link":return"gd-icon-hyperlink-warning";case"GDC.image":return"gd-icon-image";case"GDC.geo.pin":case"GDC.geo.pin_latitude":case"GDC.geo.pin_longitude":return"gd-icon-earth";default:return"gd-icon-label-warning"}})(r),{"is-selected":i});return ue.createElement("div",{className:l,onClick:t=>{const{displayForm:i,onClick:n}=e;n(i.ref),t.preventDefault()}},ue.createElement(he.ShortenedText,{className:"gd-attribute-display-form-name",tooltipAlignPoints:As},n))},ks=[{align:"bl tl",offset:{x:0,y:1}},{align:"tl bl",offset:{x:0,y:-1}}],Ps=e=>{const{displayForms:t,selectedDisplayForm:i,onSelect:n,alignPoints:r}=e,l=(0,ue.useMemo)((()=>t.find((e=>(0,p.areObjRefsEqual)(e.ref,i)))?.title),[t,i]);return ue.createElement(he.Dropdown,{className:"gd-attribute-display-form-dropdown",alignPoints:r??ks,closeOnMouseDrag:!0,closeOnParentScroll:!0,renderButton:({isOpen:e,toggleDropdown:t})=>ue.createElement(ws,{text:l,isOpened:e,toggleDropdown:t}),renderBody:({closeDropdown:e})=>ue.createElement(he.DropdownList,{className:"gd-attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body",items:t,itemHeight:23,renderItem:({item:t})=>{const r=(0,p.areObjRefsEqual)(t.ref,i);return ue.createElement(Ds,{key:t.id,displayForm:t,onClick:t=>{e(),r||n(t)},selected:r})}})})},xs=e=>{const{onSelect:t,alignPoints:i}=e,{displayForms:n,currentDisplayAsDisplayFormRef:r}=wo();return ue.createElement(Ps,{displayForms:n,selectedDisplayForm:r,alignPoints:i,onSelect:t})},Os=[{align:"bc tc",offset:{x:-1,y:5}}];function Ts({onConfiguration:e}){return ue.createElement("div",{className:"gd-attribute-filter-configuration-button"},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement(he.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:e}),ue.createElement(he.Bubble,{className:"bubble-primary",alignPoints:Os},ue.createElement(xe,{id:"attributesDropdown.configuration"}))))}const Ns=[{align:"bc tc",offset:{x:-1,y:5}}];function Ls({onDelete:e}){return ue.createElement("div",{className:"gd-attribute-filter-delete-button"},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement(he.Button,{className:"gd-button-link gd-button-icon-only gd-button-small gd-icon-trash gd-delete-button s-delete-button",disabled:!1,onClick:e}),ue.createElement(he.Bubble,{className:"bubble-primary",alignPoints:Ns},ue.createElement(xe,{id:"attributesDropdown.removeTooltip"}))))}const Ms=({title:e,defaultAttributeFilterTitle:t,attributeDataSet:i})=>ue.createElement("div",{className:"gd-attribute-filter-tooltip-content s-attribute-filter-tooltip-content"},ue.createElement("h3",{className:"s-attribute-filter-tooltip-header"},e??t),ue.createElement("h4",null,ue.createElement(xe,{id:"attributesDropdown.details.type"})),ue.createElement("p",{className:"s-attribute-filter-tooltip-item-name"},t),ue.createElement("h4",null,ue.createElement(xe,{id:"attributesDropdown.details.dataset"})),ue.createElement("p",{className:"s-attribute-filter-tooltip-item-dataset"},i.title));function Rs(e){return ue.createElement("div",{className:"gd-empty-select-search-bar"})}const Bs=(e,t)=>{const{onClick:i}=e,{isOpen:n}=(0,R.usePrevious)(e);(0,ue.useEffect)((()=>{t&&!n&&i()}),[i,t,n])},_s=(e,t)=>{const{isOpen:i}=e,{isOpen:n}=(0,R.usePrevious)(e);(0,ue.useEffect)((()=>{t&&n&&!i&&t()}),[t,i,n])},Vs=e=>{const{onSearch:t,searchString:i}=e,[n,r]=(0,ue.useState)(i);(0,ue.useEffect)((()=>{r(i)}),[i]);const l=(0,ue.useCallback)((e=>{r(e),t(e)}),[t]);return{onSearch:l,search:n}},Hs=({tooltipContent:e})=>ue.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},ue.createElement(he.BubbleHoverTrigger,null,ue.createElement(he.Icon.BoldHyperlink,{width:12,height:16}),ue.createElement(he.Bubble,{arrowOffsets:{"bc tl":[-12,9],"bc tr":[12,9]},alignPoints:[{align:"bc tl"},{align:"bc tr"}]},ue.createElement("div",{className:"gd-attribute-filter-dropdown-button-icon-tooltip__content"},e))))}}]);